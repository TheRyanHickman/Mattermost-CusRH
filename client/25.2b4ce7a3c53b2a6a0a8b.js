(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1613:function(e,t,r){"use strict";r.d(t,"a",function(){return f});r(88),r(43);var n=r(7),o=r.n(n),a=r(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).apply(this,arguments))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o.a.PureComponent),r=t,(n=[{key:"render",value:function(){return o.a.createElement(a.c,{id:"generic_icons.logout",defaultMessage:"Logout Icon"},function(e){return o.a.createElement("i",{className:"fa fa-1x fa-angle-left",title:e})})}}])&&c(r.prototype,n),i&&c(r,i),t}()},2370:function(e,t,r){"use strict";r.r(t);var n=r(418),o=r(20),a=r(40),i=r(24),c=(r(88),r(43),r(116),r(25),r(247),r(304),r(117),r(30)),s=r.n(c),u=r(7),l=r.n(u),f=r(1627),m=r(1578),p=r(56),d=r(76),g=r(1493),v=r(1558),b=r(1494),y=r(1538),h=r(1613),E=r(1542),O=r(119),S=r(1655),_=r(87),T=r(0);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function R(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){j(a,n,o,i,c,"next",e)}function c(e){j(a,n,o,i,c,"throw",e)}i(void 0)})}}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=k(t).call(this,e),r=!o||"object"!==w(o)&&"function"!=typeof o?P(n):o,C(P(r),"getTermsOfService",R(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({customTermsOfServiceId:"",customTermsOfServiceText:"",loading:!0}),e.next=3,r.props.actions.getTermsOfService();case 3:t=e.sent,(n=t.data)?r.setState({customTermsOfServiceId:n.id,customTermsOfServiceText:n.text,loading:!1}):g.e("/login?extra=".concat(T.i.GET_TERMS_ERROR));case 6:case"end":return e.stop()}},e)}))),C(P(r),"handleLogoutClick",function(e){e.preventDefault(),g.e("/login")}),C(P(r),"handleAcceptTerms",function(){r.setState({loadingAgree:!0,serverError:null}),r.registerUserAction(!0,function(){var e=new URLSearchParams(r.props.location.search).get("redirect_to");e&&e.match(/^\/([^\/]|$)/)?O.a.push(e):g.f()})}),C(P(r),"handleRejectTerms",function(){r.setState({loadingDisagree:!0,serverError:null}),r.registerUserAction(!1,function(){g.e("/login?extra=".concat(T.i.TERMS_REJECTED))})}),C(P(r),"registerUserAction",function(){var e=R(regeneratorRuntime.mark(function e(t,n){var o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.actions.updateMyTermsOfServiceStatus(r.state.customTermsOfServiceId,t);case 2:o=e.sent,(a=o.data)?n(a):r.setState({loadingAgree:!1,loadingDisagree:!1,serverError:l.a.createElement(p.c,{id:"terms_of_service.api_error",defaultMessage:"Unable to complete the request. If this issue persists, contact your System Administrator."})});case 5:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),r.state={customTermsOfServiceId:"",customTermsOfServiceText:"",loading:!0,loadingAgree:!1,loadingDisagree:!1,serverError:null},r.formattedText=Object(d.memoizeResult)(function(e){return Object(_.e)(e)}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,l.a.PureComponent),r=t,(n=[{key:"componentDidMount",value:function(){this.props.termsEnabled?this.getTermsOfService():g.f()}},{key:"render",value:function(){if(this.state.loading)return l.a.createElement(b.a,null);var e="terms-of-service__markdown";return this.state.serverError?e+=" terms-of-service-error__height--fill":e+=" terms-of-service__height--fill",l.a.createElement("div",null,l.a.createElement(v.a,null),l.a.createElement("div",{className:"signup-header"},l.a.createElement("a",{href:"#",onClick:this.handleLogoutClick},l.a.createElement(h.a,null),l.a.createElement(p.c,{id:"web.header.logout",defaultMessage:"Logout"}))),l.a.createElement("div",null,l.a.createElement("div",{className:"signup-team__container terms-of-service__container"},l.a.createElement("div",{className:e},l.a.createElement("div",{className:"medium-center"},Object(S.a)(this.formattedText(this.state.customTermsOfServiceText),!1,{mentions:!1}))),l.a.createElement("div",{className:"terms-of-service__footer medium-center"},l.a.createElement(f.a,{className:"terms-of-service__button-group"},l.a.createElement(m.a,{bsStyle:"primary",disabled:this.state.loadingAgree||this.state.loadingDisagree,id:"acceptTerms",onClick:this.handleAcceptTerms,type:"submit"},this.state.loadingAgree&&l.a.createElement(y.a,null),l.a.createElement(p.c,{id:"terms_of_service.agreeButton",defaultMessage:"I Agree"})),l.a.createElement(m.a,{bsStyle:"link",disabled:this.state.loadingAgree||this.state.loadingDisagree,id:"rejectTerms",onClick:this.handleRejectTerms,type:"reset"},this.state.loadingDisagree&&l.a.createElement(y.a,null),l.a.createElement(p.c,{id:"terms_of_service.disagreeButton",defaultMessage:"I Disagree"}))),Boolean(this.state.serverError)&&l.a.createElement("div",{className:"terms-of-service__server-error alert alert-warning"},l.a.createElement(E.a,null)," ",this.state.serverError)))))}}])&&x(r.prototype,n),o&&x(r,o),t}();C(M,"propTypes",{location:s.a.object,termsEnabled:s.a.bool.isRequired,actions:s.a.shape({getTermsOfService:s.a.func.isRequired,updateMyTermsOfServiceStatus:s.a.func.isRequired}).isRequired});t.default=Object(n.connect)(function(e){return{termsEnabled:"true"===Object(i.getConfig)(e).EnableCustomTermsOfService}},function(e){return{actions:Object(o.bindActionCreators)({getTermsOfService:a.getTermsOfService,updateMyTermsOfServiceStatus:a.updateMyTermsOfServiceStatus},e)}})(M)}}]);
//# sourceMappingURL=25.2b4ce7a3c53b2a6a0a8b.js.map