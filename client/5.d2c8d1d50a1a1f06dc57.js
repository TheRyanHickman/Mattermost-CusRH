(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1484:function(e,t,n){"use strict";n.r(t);var r=n(20),a=n(418),o=n(24),i=n(12),s=n(1617),l=n(1878);t.default=Object(a.connect)(function(e){var t=Object(o.getConfig)(e),n=Object(i.shouldShowTermsOfService)(e);return{diagnosticsEnabled:"true"===t.DiagnosticsEnabled,noAccounts:"true"===t.NoAccounts,diagnosticId:t.DiagnosticId,showTermsOfService:n}},function(e){return{actions:Object(r.bindActionCreators)({loadMeAndConfig:s.a},e)}})(l.a)},1491:function(e,t,n){"use strict";n.d(t,"a",function(){return g});n(88),n(43),n(33),n(34),n(25);var r=n(7),a=n.n(r),o=n(56),i=n(30),s=n.n(i),l=n(131),c=n.n(l);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return p(this,t),f(this,h(t).apply(this,arguments))}return b(t,c.a.Renderer),m(t,[{key:"link",value:function(e,t,n){return"!"===e[0]?'<a href="'.concat(e.substring(1,e.length),'" rel="noreferrer" target="_blank">').concat(n,"</a>"):'<a href="'.concat(e,'">').concat(n,"</a>")}},{key:"paragraph",value:function(e){return e}}]),t}(),v=function(e){function t(){return p(this,t),f(this,h(t).apply(this,arguments))}return b(t,a.a.PureComponent),m(t,[{key:"render",value:function(){var e=this.props.intl.formatMessage({id:this.props.id,defaultMessage:this.props.defaultMessage},this.props.values),t=c()(e,{breaks:!0,sanitize:!0,renderer:new g});return a.a.createElement("span",{dangerouslySetInnerHTML:{__html:t}})}}],[{key:"propTypes",get:function(){return{intl:o.i.isRequired,id:s.a.string.isRequired,defaultMessage:s.a.string.isRequired,values:s.a.object}}}]),t}();t.b=Object(o.h)(v)},1493:function(e,t,n){"use strict";n.d(t,"b",function(){return I}),n.d(t,"c",function(){return A}),n.d(t,"n",function(){return x}),n.d(t,"i",function(){return L}),n.d(t,"j",function(){return D}),n.d(t,"k",function(){return U}),n.d(t,"l",function(){return q}),n.d(t,"m",function(){return H}),n.d(t,"h",function(){return F}),n.d(t,"g",function(){return B}),n.d(t,"d",function(){return V}),n.d(t,"e",function(){return W}),n.d(t,"o",function(){return z}),n.d(t,"a",function(){return K}),n.d(t,"f",function(){return Y});n(116),n(25),n(117),n(74);var r=n(148),a=n(75),o=n(40),i=n(24),s=n(31),l=n(12),c=n(16),u=n(6),p=n(119),d=n(423),m=n(215),f=n(311),h=n(309),b=n(688),y=n(1590),g=n(1591),v=n(1679),_=n(310),E=n(97),w=n(1622),O=n(13),S=n(216),C=n(1734),P=n(0),T=n(1623),j=n(23);function k(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){k(o,r,a,i,s,"next",e)}function s(e){k(o,r,a,i,s,"throw",e)}i(void 0)})}}var N=O.a.dispatch,R=O.a.getState;function I(e){var t=this;function n(){return(n=M(regeneratorRuntime.mark(function e(t,n,r){var o,i,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=R(),i=Object(l.getCurrentUserId)(o),s=j.F(t),e.next=5,Object(a.createDirectChannel)(i,s)(N,R);case 5:c=e.sent,(u=c.data)?n(u):r();case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function o(e){var t=R(),n=N(Object(a.getMyChannelMember)(e.id)),o=Object(c.getCurrentChannelId)(t),i=Object(l.getCurrentUserId)(t),p=e.team_id||Object(s.getCurrentTeamId)(t),d=Object(E.c)(t),m=Object(E.k)(t)===P.A.PIN,b=Object(c.getMyChannelMember)(t,e.id);if(n.then(function(){N(Object(a.getChannelStats)(e.id)),N(Object(a.markChannelAsRead)(e.id,o)),N(Object(a.markChannelAsViewed)(e.id,o))}),0===e.delete_at){var y=S.a.getPreviousChannelName(i,p);y!==e.name&&(S.a.setPenultimateChannelName(i,p,y),S.a.setPreviousChannelName(i,p,e.name))}d&&m&&N(Object(h.q)(P.A.PIN,e.id)),Object(f.j)(),N(Object(r.batchActions)([{type:u.ChannelTypes.SELECT_CHANNEL,data:e.id},{type:P.e.SELECT_CHANNEL_WITH_MEMBER,data:e.id,channel:e,member:b||{}}]))}e.fake?function(e,t,r){n.apply(this,arguments)}(e,function(e){o(e)},function(){p.a.push("/"+t.state.currentTeam.name)}):o(e)}function A(){N(Object(h.b)())}function x(){v.a.handleViewAction({type:P.e.TOGGLE_SHORTCUTS_MODAL,value:!0})}function L(e){v.a.handleViewAction({type:P.e.TOGGLE_CHANNEL_NAME_UPDATE_MODAL,value:!0,channel:e})}function D(e){v.a.handleViewAction({type:P.e.TOGGLE_GET_POST_LINK_MODAL,value:!0,post:e})}function U(e){v.a.handleViewAction({type:P.e.TOGGLE_GET_PUBLIC_LINK_MODAL,value:!0,fileId:e})}function q(){v.a.handleViewAction({type:P.i.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL,value:!0})}function H(e){v.a.handleViewAction({type:P.e.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL,value:e})}function F(e,t,n){var r=j.D(),a={id:j.r(),user_id:"0",channel_id:t||Object(c.getCurrentChannelId)(R()),message:e,type:P.y.EPHEMERAL,create_at:r,update_at:r,root_id:n,parent_id:n,props:{}};N(Object(d.e)(a))}function B(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5?arguments[5]:void 0,i={id:j.r(),user_id:e.id,channel_id:r||Object(c.getCurrentChannelId)(R()),message:"",type:P.y.EPHEMERAL_ADD_TO_CHANNEL,create_at:o,update_at:o,root_id:a,parent_id:a,props:{username:e.username,addedUsername:t,addedUserId:n}};N(Object(d.e)(i))}var G=0;function V(e,t){return N(function(){var n=M(regeneratorRuntime.mark(function n(r,a){var o,s,l,u,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=a(),s=Object(i.getConfig)(o),l=Date.now(),u=Object(c.getCurrentChannelStats)(o),p=u?u.member_count:0,l-G>s.TimeBetweenUserTypingUpdatesMilliseconds&&p<s.MaxNotificationsPerChannel&&"true"===s.EnableUserTypingMessages&&(C.a.userTyping(e,t),G=l),n.abrupt("return",{data:!0});case 7:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&S.a.setWasLoggedIn(!1),N(Object(o.logout)()).then(function(){t&&w.a.signalLogout(),w.a.clear(),Object(m.e)(),g.a(),Object(b.a)(),p.a.push(e)}).catch(function(){p.a.push(e)})}function z(){return function(e){e(Object(h.b)()),e(Object(y.a)()),e(Object(h.a)())}}function K(e){N({type:P.e.BROWSER_CHANGE_FOCUS,focus:e})}function Y(){return Q.apply(this,arguments)}function Q(){return(Q=M(regeneratorRuntime.mark(function e(){var t,n,r,i,u,d,m,f,h,b,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R(),!j.O(Object(s.getTeamMemberships)(t))){e.next=5;break}return e.next=5,N(Object(o.loadMe)());case 5:if(t=R(),n=Object(l.getCurrentUserId)(t),r=Object(_.a)(t),i=S.a.getPreviousTeamId(n),u=Object(s.getTeam)(t,i),d=Object(s.getMyTeamMember)(t,i),u&&d&&d.team_id||(u=null,(m=Object(s.getMyTeams)(t)).length>0&&(m=Object(T.a)(m,r))&&m[0]&&(u=m[0])),!n||!u){e.next=28;break}if(f=S.a.getPreviousChannelName(n,u.id),!(h=Object(c.getChannelByName)(t,f))||h.team_id!==u.id){e.next=20;break}N(Object(a.selectChannel)(h.id)),f=h.name,e.next=25;break;case 20:return e.next=22,N(Object(a.getChannelByNameAndTeamName)(u.name,f));case 22:b=e.sent,(y=b.data)&&N(Object(a.selectChannel)(y.id));case 25:p.a.push("/".concat(u.name,"/channels/").concat(f)),e.next=29;break;case 28:n&&p.a.push("/select_team");case 29:case"end":return e.stop()}},e)}))).apply(this,arguments)}},1494:function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(88),n(43),n(33),n(34),n(25),n(44);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(56);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){f(e,t,n[t])})}return e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=p(this,d(t).call(this,e))).state={},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=i.a.createElement(s.c,{id:"loading_screen.loading",defaultMessage:"Loading"});return this.props.message&&(e=this.props.message),i.a.createElement("div",{className:"loading-screen",style:c({position:this.props.position},this.props.style)},i.a.createElement("div",{className:"loading__content"},i.a.createElement("h3",null,e),i.a.createElement("div",{className:"round round-1"}),i.a.createElement("div",{className:"round round-2"}),i.a.createElement("div",{className:"round round-3"})))}}])&&u(n.prototype,r),a&&u(n,a),t}();f(h,"propTypes",{position:a.a.oneOf(["absolute","fixed","relative","static","inherit"]),style:a.a.object,message:a.a.node}),f(h,"defaultProps",{position:"relative",style:{}})},1498:function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(1739),l=n(56);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=p(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==c(a)&&"function"!=typeof a?d(r):a,f(d(n),"handleKeypress",function(e){"Enter"===e.key&&n.props.show&&n.handleConfirm()}),f(d(n),"handleConfirm",function(){var e=!!n.refs.checkbox&&n.refs.checkbox.checked;n.props.onConfirm(e)}),f(d(n),"handleCancel",function(){var e=!!n.refs.checkbox&&n.refs.checkbox.checked;n.props.onCancel(e)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.props.show&&document.addEventListener("keydown",this.handleKeypress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeypress)}},{key:"shouldComponentUpdate",value:function(e){return e.show!==this.props.show}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.show&&!e.show?document.removeEventListener("keydown",this.handleKeypress):!this.props.show&&e.show&&document.addEventListener("keydown",this.handleKeypress)}},{key:"render",value:function(){var e,t,n;return this.props.showCheckbox&&(e=i.a.createElement("div",{className:"checkbox text-right margin-bottom--none"},i.a.createElement("label",null,i.a.createElement("input",{ref:"checkbox",type:"checkbox"}),this.props.checkboxText))),t=this.props.cancelButtonText?this.props.cancelButtonText:i.a.createElement(l.c,{id:"confirm_modal.cancel",defaultMessage:"Cancel"}),this.props.hideCancel||(n=i.a.createElement("button",{type:"button",className:"btn btn-link btn-cancel",onClick:this.handleCancel},t)),i.a.createElement(s.a,{className:"modal-confirm "+this.props.modalClass,dialogClassName:"a11y__modal",show:this.props.show,onHide:this.props.onCancel,onExited:this.props.onExited,id:"confirmModal",role:"dialog","aria-labelledby":"confirmModalLabel"},i.a.createElement(s.a.Header,{closeButton:!1},i.a.createElement(s.a.Title,{componentClass:"h1",id:"confirmModalLabel"},this.props.title)),i.a.createElement(s.a.Body,null,this.props.message,e),i.a.createElement(s.a.Footer,null,n,i.a.createElement("button",{autoFocus:!0,type:"button",className:this.props.confirmButtonClass,onClick:this.handleConfirm,id:"confirmModalButton"},this.props.confirmButtonText)))}}])&&u(n.prototype,r),a&&u(n,a),t}();f(h,"propTypes",{show:a.a.bool.isRequired,title:a.a.node,message:a.a.node,confirmButtonClass:a.a.string,modalClass:a.a.string,confirmButtonText:a.a.node,cancelButtonText:a.a.node,showCheckbox:a.a.bool,checkboxText:a.a.node,onConfirm:a.a.func.isRequired,onCancel:a.a.func.isRequired,onExited:a.a.func,hideCancel:a.a.bool}),f(h,"defaultProps",{title:"",message:"",confirmButtonClass:"btn btn-primary",confirmButtonText:"",modalClass:""})},1499:function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(88),n(43),n(33),n(34),n(25),n(44),n(245);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(56);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=p(t).call(this,e),n=!a||"object"!==l(a)&&"function"!=typeof a?d(r):a,f(d(n),"focus",function(){n.input.current.focus()}),n.input=i.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.a.Component),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value||e.placeholder.id!==this.props.placeholder.id||e.placeholder.defaultMessage!==this.props.placeholder.defaultMessage}},{key:"render",value:function(){var e=this.context.intl.formatMessage,t=this.props,n=t.placeholder,r=c(t,["placeholder"]),a=e(n);return i.a.createElement("input",Object.assign({ref:this.input},r,{placeholder:a}))}},{key:"value",get:function(){return this.input.current.value},set:function(e){this.input.current.value=e}}])&&u(n.prototype,r),a&&u(n,a),t}();f(h,"propTypes",{placeholder:a.a.shape({id:a.a.string.isRequired,defaultMessage:a.a.string.isRequired}).isRequired,value:a.a.string}),f(h,"contextTypes",{intl:s.i.isRequired})},1501:function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(88),n(43),n(33);var r=n(30),a=n.n(r),o=n(7),i=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.a.Component),n=t,o=[{key:"propTypes",get:function(){return{type:a.a.node,error:a.a.node,textClassName:a.a.string,iconClassName:a.a.string,margin:a.a.bool,errors:a.a.arrayOf(a.a.node)}}},{key:"defaultProps",get:function(){return{error:null,errors:[]}}}],(r=[{key:"render",value:function(){if(!this.props.error&&0===this.props.errors.length)return null;var e=this.props.error;if(!e){var t=!0,n=!1,r=void 0;try{for(var a,o=this.props.errors[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;s&&(e=s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}return e?"modal"===this.props.type?i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{className:"col-sm-12 has-error"},e)):"backstage"===this.props.type?i.a.createElement("div",{className:"pull-left has-error"},i.a.createElement("label",{className:"control-label"},e)):this.props.margin?i.a.createElement("div",{className:"form-group has-error"},i.a.createElement("label",{className:"control-label"},e)):i.a.createElement("div",{className:"col-sm-12 ".concat(this.props.textClassName||"has-error")},i.a.createElement("label",{className:"control-label"},i.a.createElement("i",{className:"fa ".concat(this.props.iconClassName||"fa-exclamation-circle")})," ",e)):null}}])&&l(n.prototype,r),o&&l(n,o),t}()},1503:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var r=n(0);function a(e){return function(t){t({type:r.e.MODAL_OPEN,modalId:e.modalId,dialogProps:e.dialogProps,dialogType:e.dialogType})}}function o(e){return function(t){t({type:r.e.MODAL_CLOSE,modalId:e})}}},1506:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(7),a=n.n(r),o=n(30),i=n.n(o),s=n(56),l=n(1677);function c(e){return a.a.createElement(l.a,{className:"BotBadge "+e.className,show:e.show},a.a.createElement(s.c,{id:"post_info.bot",defaultMessage:"BOT"}))}c.propTypes={className:i.a.string,show:i.a.bool},c.defaultProps={show:!0,className:""}},1508:function(e,t,n){"use strict";n.d(t,"a",function(){return y});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(56),l=n(1521),c=n(0),u=n(23);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=m(t).call(this,e),n=!a||"object"!==p(a)&&"function"!=typeof a?f(r):a,b(f(n),"onKeyDown",function(e){n.props.shiftEnter&&e.keyCode===c.Q.KeyCodes.ENTER&&e.shiftKey||Object(u.S)(e,c.Q.KeyCodes.ENTER)&&n.props.submit&&"SELECT"!==e.target.tagName&&e.target.parentElement&&"react-select__input"!==e.target.parentElement.className&&!e.target.classList.contains("btn-cancel")&&n.settingList.current&&n.settingList.current.contains(e.target)&&n.handleSubmit(e)}),b(f(n),"handleSubmit",function(e){e.preventDefault(),n.props.setting?n.props.submit(n.props.setting):n.props.submit()}),b(f(n),"handleUpdateSection",function(e){n.props.updateSection(n.props.section),e.preventDefault()}),n.settingList=i.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){if(this.settingList.current){var e=this.settingList.current.querySelectorAll('.btn:not(.save-button):not(.btn-cancel), input.form-control, select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0?e[0].focus():this.settingList.current.focus()}document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"render",value:function(){var e=null;this.props.clientError&&(e=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{id:"clientError",className:"col-sm-12 has-error"},this.props.clientError)));var t=null;this.props.serverError&&(t=i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{id:"serverError",className:"col-sm-12 has-error"},this.props.serverError)));var n=null,r="setting-list__hint";"top"===this.props.infoPosition&&(r="padding-bottom x2"),this.props.extraInfo&&(n=i.a.createElement("div",{className:r},this.props.extraInfo));var a="";this.props.submit&&(a=i.a.createElement(l.a,{defaultMessage:this.props.saveButtonText,saving:this.props.saving,disabled:this.props.saving,onClick:this.handleSubmit}));var o,c,u=this.props.inputs;o="full"===this.props.width?"col-sm-12":"medium"===this.props.width?"col-sm-10 col-sm-offset-2":"col-sm-9 col-sm-offset-3",this.props.title&&(c=i.a.createElement("li",{id:"settingTitle",className:"col-sm-12 section-title"},this.props.title));var p,d=i.a.createElement("li",{className:"setting-list-item",role:"presentation"},u,n);return"top"===this.props.infoPosition&&(d=i.a.createElement("li",{role:"presentation"},n,u)),p=this.props.cancelButtonText?this.props.cancelButtonText:i.a.createElement(s.c,{id:"setting_item_max.cancel",defaultMessage:"Cancel"}),i.a.createElement("ul",{className:"section-max form-horizontal ".concat(this.props.containerStyle)},c,i.a.createElement("li",{className:o},i.a.createElement("ul",{tabIndex:"-1",ref:this.settingList,role:"presentation",className:"setting-list"},d,i.a.createElement("li",{className:"setting-list-item"},i.a.createElement("hr",null),this.props.submitExtra,t,e,a,i.a.createElement("button",{id:"cancelSetting",className:"btn btn-sm btn-cancel cursor--pointer style--none",onClick:this.handleUpdateSection},p)))))}}])&&d(n.prototype,r),a&&d(n,a),t}();b(y,"defaultProps",{infoPosition:"bottom",saving:!1,section:"",containerStyle:""}),b(y,"propTypes",{inputs:a.a.node,containerStyle:a.a.string,clientError:a.a.oneOfType([a.a.string,a.a.object]),serverError:a.a.string,extraInfo:a.a.element,infoPosition:a.a.string,section:a.a.string,updateSection:a.a.func,setting:a.a.string,submit:a.a.func,submitExtra:a.a.node,saving:a.a.bool,title:a.a.node,width:a.a.string,cancelButtonText:a.a.node,shiftEnter:a.a.bool,saveButtonText:a.a.string})},1511:function(e,t,n){"use strict";n(116),n(25),n(74),n(117);var r=n(148),a=n(75),o=n(66),i=n(40),s=n(14),l=n(16),c=n(31),u=n(12),p=n(35),d=n(186),m=n(426),f=n.n(m),h=n(1524),b=n(1661),y=function(e,t){return e.views.channel.lastGetPosts[t]},g=n(1738),v=n(119),_=n(0),E=n(23),w=n(216);function O(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function S(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){O(o,r,a,i,s,"next",e)}function s(e){O(o,r,a,i,s,"throw",e)}i(void 0)})}}function C(){return function(e){e({type:_.e.UPDATE_MOBILE_VIEW,data:Object(E.U)()})}}function P(){return function(){var e=S(regeneratorRuntime.mark(function e(t,n){var r,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),a=Object(l.getCurrentChannel)(r),o=Object(l.getChannelsNameMapInCurrentTeam)(r),i=Object(d.getChannelByName)(o,Object(b.a)(r)),a.id===i.id&&(i=Object(d.getChannelByName)(o,Object(l.getRedirectChannelNameForTeam)(r,Object(c.getCurrentTeamId)(r)))),e.abrupt("return",t(j(i)));case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}function T(e){return function(){var t=S(regeneratorRuntime.mark(function t(n,r){var a,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r(),o=Object(l.getChannel)(a,e),t.abrupt("return",n(j(o)));case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function j(e){return function(){var t=S(regeneratorRuntime.mark(function t(n,r){var a,o,i,s,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),o=Object(c.getCurrentRelativeTeamUrl)(a),!e.fake&&!e.userId){t.next=15;break}if(i=e.userId?e.name:e.display_name,s=Object(u.getUserByUsername)(a,i)){t.next=7;break}return t.abrupt("return",{error:!0});case 7:return t.next=9,n(Object(h.e)(s.id));case 9:if(!t.sent.error){t.next=12;break}return t.abrupt("return",{error:!0});case 12:v.a.push("".concat(o,"/messages/@").concat(e.name)),t.next=16;break;case 15:e.type===_.i.GM_CHANNEL?(p=Object(l.getChannel)(a,e.id),v.a.push("".concat(o,"/channels/").concat(p.name))):v.a.push("".concat(o,"/channels/").concat(e.name));case 16:return t.abrupt("return",{data:!0});case 17:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function k(e){return function(){var t=S(regeneratorRuntime.mark(function t(n,r){var o,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r(),i=Object(u.getCurrentUserId)(o),s=Object(c.getCurrentTeamId)(o),t.abrupt("return",n(Object(a.joinChannel)(i,s,e)));case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function M(e){return function(){var t=S(regeneratorRuntime.mark(function t(n,r){var o,i,s,l,m,f,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r(),i=Object(p.getMyPreferences)(o),s=Object(u.getCurrentUserId)(o),l=Object(c.getCurrentTeamId)(o),Object(d.isFavoriteChannel)(i,e)&&n(Object(a.unfavoriteChannel)(e)),m=Object(c.getCurrentRelativeTeamUrl)(o),w.a.removePreviousChannelName(s,l),v.a.push(m),t.next=10,n(Object(a.leaveChannel)(e));case 10:if(f=t.sent,!(h=f.error)){t.next=14;break}return t.abrupt("return",{error:h});case 14:return t.abrupt("return",{data:!0});case 15:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function N(e,t){return function(){var n=S(regeneratorRuntime.mark(function n(r,a){var o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=a(),s=Object(c.getCurrentTeamId)(o),n.abrupt("return",r(Object(i.autocompleteUsers)(e,s,t)));case 3:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()}function R(e){return function(){var t=S(regeneratorRuntime.mark(function t(n){var r,a,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.next=3,n(o.getPostsUnread(e));case 3:if(a=t.sent,i=a.data,!(s=a.error)){t.next=8;break}return t.abrupt("return",{error:s,atLatestMessage:!1,atOldestmessage:!1});case 8:return n({type:_.e.INCREASE_POST_VISIBILITY,data:e,amount:i.order.length}),""===i.next_post_id&&n({type:_.e.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME,channelId:e,time:r}),t.abrupt("return",{atLatestMessage:""===i.next_post_id,atOldestmessage:""===i.prev_post_id});case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}function I(e,t){return function(){var n=S(regeneratorRuntime.mark(function n(r){var a,i,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(o.getPostsAround(e,t,s.Posts.POST_CHUNK_SIZE/2));case 2:if(a=n.sent,i=a.data,!(l=a.error)){n.next=7;break}return n.abrupt("return",{error:l,atLatestMessage:!1,atOldestmessage:!1});case 7:return r({type:_.e.INCREASE_POST_VISIBILITY,data:e,amount:i.order.length}),n.abrupt("return",{atLatestMessage:""===i.next_post_id,atOldestmessage:""===i.prev_post_id});case 9:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}function A(e){return function(){var t=S(regeneratorRuntime.mark(function t(n){var r,a,i,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.next=3,n(o.getPosts(e,0,s.Posts.POST_CHUNK_SIZE/2));case 3:if(a=t.sent,i=a.data,!(l=a.error)){t.next=8;break}return t.abrupt("return",{error:l,atLatestMessage:!1,atOldestmessage:!1});case 8:return n({type:_.e.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME,channelId:e,time:r}),t.abrupt("return",{data:i,atLatestMessage:""===i.next_post_id,atOldestmessage:""===i.prev_post_id});case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}function x(e){var t=e.channelId,n=e.postId,a=e.type;return function(){var e=S(regeneratorRuntime.mark(function e(i){var s,l,c,u,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=_.i.POST_CHUNK_SIZE/2,i({type:_.e.LOADING_POSTS,data:!0,channelId:t}),l=0,a!==_.x.BEFORE_ID){e.next=9;break}return e.next=6,i(o.getPostsBefore(t,n,l,s));case 6:c=e.sent,e.next=12;break;case 9:return e.next=11,i(o.getPostsAfter(t,n,l,s));case 11:c=e.sent;case 12:if(u=c.data,p=[{type:_.e.LOADING_POSTS,data:!1,channelId:t}],!c.error){e.next=16;break}return e.abrupt("return",{error:c.error,moreToLoad:!0});case 16:return p.push({type:_.e.INCREASE_POST_VISIBILITY,data:t,amount:u.order.length}),i(Object(r.batchActions)(p)),e.abrupt("return",{moreToLoad:a===_.x.BEFORE_ID?""!==u.prev_post_id:""!==u.next_post_id});case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}function L(e,t){return function(){var n=S(regeneratorRuntime.mark(function n(r,a){var i,s,l,c,u,p,d,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=Date.now(),s=a(),l=Object(g.a)(s),c=t,(u=y(s,e))&&u<l.lastDisconnectAt&&(c=u),n.next=8,r(o.getPostsSince(e,c));case 8:return p=n.sent,d=p.data,m=p.error,d&&r({type:_.e.RECEIVED_POSTS_FOR_CHANNEL_AT_TIME,channelId:e,time:i}),n.abrupt("return",{data:d,error:m});case 13:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()}function D(){return function(){f.a.emit(_.l.POST_LIST_SCROLL_CHANGE,!0)}}function U(){return function(){f.a.emit(_.l.POST_LIST_SCROLL_CHANGE,!1)}}n.d(t,"b",function(){return C}),n.d(t,"c",function(){return P}),n.d(t,"m",function(){return T}),n.d(t,"l",function(){return j}),n.d(t,"d",function(){return k}),n.d(t,"e",function(){return M}),n.d(t,"a",function(){return N}),n.d(t,"i",function(){return R}),n.d(t,"h",function(){return I}),n.d(t,"f",function(){return A}),n.d(t,"g",function(){return x}),n.d(t,"n",function(){return L}),n.d(t,"k",function(){return D}),n.d(t,"j",function(){return U})},1515:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return a});var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.latestPrefix="",this.latestComplete=!0,this.disableDispatches=!1,this.requestStarted=!1}var t,n,a;return t=e,(n=[{key:"handlePretextChanged",value:function(e){}},{key:"resetRequest",value:function(){this.requestStarted=!1}},{key:"startNewRequest",value:function(e){this.latestPrefix=e,this.latestComplete=!1,this.requestStarted=!0}},{key:"shouldCancelDispatch",value:function(e){if(this.disableDispatches)return!0;if(!this.requestStarted)return!0;if(e===this.latestPrefix)this.latestComplete=!0;else if(this.latestComplete)return!0;return!1}},{key:"allowDividers",value:function(){return!0}},{key:"presentationType",value:function(){return"text"}}])&&r(t.prototype,n),a&&r(t,a),e}()},1516:function(e,t,n){"use strict";n.d(t,"a",function(){return b});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m,f,h,b=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=l(t).call(this,e))||"object"!==s(a)&&"function"!=typeof a?c(r):a).handleClick=n.handleClick.bind(c(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.Component),p(t,null,[{key:"propTypes",get:function(){return{item:a.a.oneOfType([a.a.object,a.a.string]).isRequired,term:a.a.string.isRequired,matchedPretext:a.a.string.isRequired,isSelection:a.a.bool,onClick:a.a.func}}}]),p(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(this.props.term,this.props.matchedPretext)}}]),t}();h={role:"button",tabIndex:-1},(f="baseProps")in(m=b)?Object.defineProperty(m,f,{value:h,enumerable:!0,configurable:!0,writable:!0}):m[f]=h},1517:function(e,t,n){"use strict";var r=n(7),a=n.n(r),o=n(30),i=n.n(o),s=n(1598),l=function(e){var t=e.onClick,n=e.ariaLabel,r=e.text,o=e.extraText,i=e.id;return a.a.createElement("button",{id:i,"aria-label":n,className:"style--none"+(o?" MenuItem__help":""),onClick:t},r,o&&a.a.createElement("span",{className:"extra-text"},o))};l.propTypes={onClick:i.a.func.isRequired,ariaLabel:i.a.string,text:i.a.oneOfType([i.a.string,i.a.node]).isRequired,extraText:i.a.string,id:i.a.string};var c=Object(s.a)(l);c.displayName="MenuItemAction",t.a=c},1519:function(e,t,n){"use strict";var r=n(418),a=n(20);function o(e){return e.views.settings.previousActiveSection}var i=n(0);function s(e){return{type:i.e.UPDATE_ACTIVE_SECTION,data:e}}n(88),n(43);var l=n(30),c=n.n(l),u=n(7),p=n.n(u),d=n(56),m=n(23),f=n(1789);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=y(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==h(a)&&"function"!=typeof a?g(r):a,_(g(n),"getEdit",function(e){n.edit=e}),_(g(n),"handleUpdateSection",function(e){e.preventDefault(),n.props.actions.updateActiveSection(n.props.section),n.props.updateSection(n.props.section)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,p.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.props.previousActiveSection===this.props.section&&this.edit.focus()}},{key:"render",value:function(){var e=null,t=null;return!this.props.disableOpen&&Object(m.U)()?e=p.a.createElement("div",{className:"section-min__edit"},p.a.createElement("button",{id:this.props.section+"Edit",className:"color--link cursor--pointer style--none",onClick:this.handleUpdateSection,ref:this.getEdit,"aria-labelledby":this.props.section+"Title "+this.props.section+"Edit"},p.a.createElement(f.a,null),this.props.describe)):this.props.disableOpen||(e=p.a.createElement("div",{className:"section-min__edit"},p.a.createElement("button",{id:this.props.section+"Edit",className:"color--link cursor--pointer style--none text-left",onClick:this.handleUpdateSection,ref:this.getEdit,"aria-labelledby":this.props.section+"Title "+this.props.section+"Edit"},p.a.createElement(f.a,null),p.a.createElement(d.c,{id:"setting_item_min.edit",defaultMessage:"Edit"}))),t=p.a.createElement("div",{id:this.props.section+"Desc",className:"section-min__describe"},this.props.describe)),p.a.createElement("div",{className:"section-min",onClick:this.handleUpdateSection},p.a.createElement("div",{className:"d-flex"},p.a.createElement("div",{id:this.props.section+"Title",className:"section-min__title"},this.props.title),e),t)}}])&&b(n.prototype,r),a&&b(n,a),t}();_(E,"defaultProps",{section:""}),_(E,"propTypes",{title:c.a.node,disableOpen:c.a.bool,section:c.a.string,updateSection:c.a.func,describe:c.a.node,previousActiveSection:c.a.string,actions:c.a.shape({updateActiveSection:c.a.func.isRequired}).isRequired});t.a=Object(r.connect)(function(e){return{previousActiveSection:o(e)}},function(e){return{actions:Object(a.bindActionCreators)({updateActiveSection:s},e)}})(E)},1521:function(e,t,n){"use strict";n.d(t,"a",function(){return b});n(88),n(43),n(33),n(34),n(25),n(44),n(245);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(56),l=n(1526);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,m(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.context.intl.formatMessage,t=this.props,n=t.saving,r=t.disabled,a=t.savingMessage,o=t.defaultMessage,s=t.btnClass,c=t.extraClasses,p=u(t,["saving","disabled","savingMessage","defaultMessage","btnClass","extraClasses"]),d="save-button btn";r&&!n||(d+=" "+s),c&&(d+=" "+c);var m=a||e({id:"save_button.saving",defaultMessage:"Saving"}),f=o||e({id:"save_button.save",defaultMessage:"Save"});return i.a.createElement("button",Object.assign({type:"submit",id:"saveSetting",className:d,disabled:r},p),i.a.createElement(l.a,{loading:n,text:m},i.a.createElement("span",null,f)))}}])&&p(n.prototype,r),a&&p(n,a),t}();h(b,"propTypes",{saving:a.a.bool.isRequired,disabled:a.a.bool,savingMessage:a.a.node,defaultMessage:a.a.node,btnClass:a.a.string,extraClasses:a.a.string}),h(b,"defaultProps",{disabled:!1,btnClass:"btn-primary",extraClasses:""}),h(b,"contextTypes",{intl:s.i})},1524:function(e,t,n){"use strict";n.d(t,"e",function(){return O}),n.d(t,"f",function(){return S}),n.d(t,"d",function(){return C}),n.d(t,"g",function(){return P}),n.d(t,"b",function(){return T}),n.d(t,"c",function(){return k}),n.d(t,"a",function(){return N});n(44),n(116),n(34),n(118),n(88),n(43),n(33),n(156),n(25),n(117);var r=n(148),a=n(6),o=n(75),i=n(133),s=n(212),l=n(16),c=n(31),u=n(12),p=n(420),d=n(311),m=n(13),f=n(119),h=n(0),b=n(23);function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)})}}var E=m.a.dispatch,w=m.a.getState;function O(e){return function(){var t=_(regeneratorRuntime.mark(function t(n,s){var c,d,m,f,g,v,_,E;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=s(),d=Object(u.getCurrentUserId)(c),m=Object(b.t)(d,e),f=Object(l.getChannelByName)(c,m)){t.next=6;break}return t.abrupt("return",n(o.createDirectChannel(d,e)));case 6:return Object(p.d)("api","api_channels_join_direct"),g=Date.now(),v={category:h.z.CATEGORY_DIRECT_CHANNEL_SHOW,name:e,value:"true"},_={category:h.z.CATEGORY_CHANNEL_OPEN_TIME,name:f.id,value:g.toString()},E=[{type:a.PreferenceTypes.RECEIVED_PREFERENCES,data:[v]},{type:a.PreferenceTypes.RECEIVED_PREFERENCES,data:[_]}],n(Object(r.batchActions)(E)),n(Object(i.savePreferences)(d,[y({user_id:d},v),y({user_id:d},_)])),t.abrupt("return",{data:f});case 14:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function S(e){return function(){var t=_(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(o.createGroupChannel(e));case 2:return(a=t.sent).error&&f.a.push(Object(c.getCurrentTeamUrl)(r())),t.abrupt("return",a);case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function C(){return function(){var e=_(regeneratorRuntime.mark(function e(t,n){var r,a,i,s,u,p,m,f,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),a=Object(l.getUnreadChannelIds)(r),e.next=4,t(o.fetchMyChannelsAndMembers(Object(c.getCurrentTeamId)(r)));case 4:for(i=!0,s=!1,u=void 0,e.prev=7,p=a[Symbol.iterator]();!(i=(m=p.next()).done);i=!0)f=m.value,(b=Object(l.getChannel)(r,f))&&b.type===h.i.DM_CHANNEL?Object(d.d)(b.id):b&&b.type===h.i.GM_CHANNEL&&Object(d.e)(b.id);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),s=!0,u=e.t0;case 15:e.prev=15,e.prev=16,i||null==p.return||p.return();case 18:if(e.prev=18,!s){e.next=21;break}throw u;case 21:return e.finish(18);case 22:return e.finish(15);case 23:Object(d.j)();case 24:case"end":return e.stop()}},e,null,[[7,11,15,23],[16,,18,22]])}));return function(t,n){return e.apply(this,arguments)}}()}function P(e){return function(){var t=_(regeneratorRuntime.mark(function t(n,r){var a,i,l,u,p,d,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),i=Object(c.getCurrentTeamId)(a)){t.next=4;break}throw new Error("No team id");case 4:return t.next=6,n(o.searchChannels(i,e));case 6:if(l=t.sent,u=l.data,p=l.error,!u){t.next=13;break}return d=Object(s.getMyChannelMemberships)(a),m=u.filter(function(e){return!d[e.id]}),t.abrupt("return",{data:m});case 13:return t.abrupt("return",{error:p});case 14:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function T(e,t,n){return j.apply(this,arguments)}function j(){return(j=_(regeneratorRuntime.mark(function e(t,n,r){var a,i,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=w(),i=Object(c.getCurrentTeamId)(a)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,o.autocompleteChannels(i,t)(E,w);case 6:s=e.sent,l=s.data,u=s.error,l&&n?n(l):u&&r&&r(y({id:u.server_error_id},u));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e,t,n){return M.apply(this,arguments)}function M(){return(M=_(regeneratorRuntime.mark(function e(t,n,r){var a,i,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=w(),i=Object(c.getCurrentTeamId)(a)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,o.autocompleteChannelsForSearch(i,t)(E,w);case 6:s=e.sent,l=s.data,u=s.error,l&&n?n(l):u&&r&&r(y({id:u.server_error_id},u));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e,t){return function(){var n=_(regeneratorRuntime.mark(function n(r){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=t.map(function(t){return r(o.addChannelMember(e,t))}),n.next=4,Promise.all(a);case 4:return n.abrupt("return",n.sent);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",{error:n.t0});case 10:case"end":return n.stop()}},n,null,[[0,7]])}));return function(e){return n.apply(this,arguments)}}()}},1526:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(1538);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.text,n=e.loading,r=e.children;return n?i.a.createElement(s.a,{text:t}):r}}])&&c(n.prototype,r),a&&c(n,a),t}();m(f,"propTypes",{loading:a.a.bool.isRequired,text:a.a.node,children:a.a.node}),m(f,"defaultProps",{loading:!0,text:null,children:null})},1530:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(88),n(43),n(33),n(34),n(25),n(945);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(23);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=u(t).call(this,e),n=!a||"object"!==l(a)&&"function"!=typeof a?p(r):a,m(p(n),"hideUnneededDividers",function(){if(null!==n.node.current){n.observer.disconnect();var e=Object.values(n.node.current.children).slice(0,n.node.current.children.length),t=!1,r=!0,a=!0,o=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;c.classList.contains("menu-divider")||c.classList.contains("mobile-menu-divider")?(c.style.display="block",(r||t)&&(c.style.display="none"),t=!0):(r=!1,t=!1)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}var u=!0,p=!1,d=void 0;try{for(var m,f=e.reverse()[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var h=m.value;if(!h.classList.contains("menu-divider")&&!h.classList.contains("mobile-menu-divider"))break;h.style.display="none"}}catch(e){p=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(p)throw d}}n.observer.observe(n.node.current,{attributes:!0,childList:!0,subtree:!0})}}),n.node=i.a.createRef(),n.observer=new MutationObserver(n.hideUnneededDividers),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.hideUnneededDividers()}},{key:"componentDidUpdate",value:function(){this.hideUnneededDividers()}},{key:"componentWillUnmount",value:function(){this.observer.disconnect()}},{key:"rect",value:function(){return this.node&&this.node.current?this.node.current.getBoundingClientRect():null}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.openUp,r=e.openLeft,a=e.id,o=e.ariaLabel,l=e.customStyles,c={};return l?c=l:(r&&!Object(s.U)()&&(c.left="inherit",c.right=0),n&&!Object(s.U)()&&(c.bottom="100%",c.top="auto")),i.a.createElement("ul",{id:a,className:"a11y__popup Menu dropdown-menu",ref:this.node,style:c,role:"menu","aria-label":o},t)}}])&&c(n.prototype,r),a&&c(n,a),t}();m(f,"propTypes",{children:a.a.node,openLeft:a.a.bool,openUp:a.a.bool,id:a.a.string,ariaLabel:a.a.string.isRequired,customStyles:a.a.object})},1532:function(e,t,n){"use strict";n(245);var r=n(418),a=n(121),o=n(14),i=n(16),s=n(24),l=n(35),c=n(31),u=n(12),p=n(307),d=(n(88),n(43),n(30)),m=n.n(d),f=n(7),h=n.n(f),b=n(1655),y=n(87);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,E(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,h.a.PureComponent),n=t,(r=[{key:"render",value:function(){if(!this.props.enableFormatting)return h.a.createElement("span",null,this.props.message);var e=Object.assign({autolinkedUrlSchemes:this.props.autolinkedUrlSchemes,siteURL:this.props.siteURL,mentionKeys:this.props.mentionKeys,atMentions:!0,channelNamesMap:this.props.channelNamesMap,proxyImages:this.props.hasImageProxy&&this.props.proxyImages,team:this.props.team,minimumHashtagLength:this.props.minimumHashtagLength},this.props.options),t=y.e(this.props.message,e);return Object(b.a)(t,this.props.isRHS,{imageProps:this.props.imageProps,imagesMetadata:this.props.imagesMetadata,hasPluginTooltips:this.props.hasPluginTooltips})}}])&&v(n.prototype,r),a&&v(n,a),t}();O(S,"propTypes",{channelNamesMap:m.a.object.isRequired,autolinkedUrlSchemes:m.a.array,enableFormatting:m.a.bool.isRequired,isRHS:m.a.bool,mentionKeys:m.a.arrayOf(m.a.object).isRequired,message:m.a.string.isRequired,options:m.a.object,siteURL:m.a.string.isRequired,team:m.a.object.isRequired,hasImageProxy:m.a.bool.isRequired,minimumHashtagLength:m.a.number,proxyImages:m.a.bool,imageProps:m.a.object,imagesMetadata:m.a.object,hasPluginTooltips:m.a.bool}),O(S,"defaultProps",{options:{},isRHS:!1,proxyImages:!0,imagesMetadata:{}});t.a=Object(r.connect)(function(){var e=Object(a.a)(i.getChannelsNameMapInCurrentTeam,function(e,t){return t&&t.channelNamesMap},function(e,t){return t?Object.assign({},t,e):e});return function(t,n){var r=Object(s.getConfig)(t);return{autolinkedUrlSchemes:Object(s.getAutolinkedUrlSchemes)(t),channelNamesMap:e(t,n),enableFormatting:Object(l.getBool)(t,o.Preferences.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),mentionKeys:Object(u.getCurrentUserMentionKeys)(t),siteURL:Object(p.e)(),team:Object(c.getCurrentTeam)(t),hasImageProxy:"true"===r.HasImageProxy,minimumHashtagLength:parseInt(r.MinimumHashtagLength,10)}}})(S)},1533:function(e,t,n){"use strict";n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(0),l=n(2359),c=n(2385),u=n(23);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=80,g=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,n=!(a=(e=m(t)).call.apply(e,[this].concat(i)))||"object"!==p(a)&&"function"!=typeof a?f(r):a,b(f(n),"onEntering",function(e){var t=Object(l.c)(e);Object(l.b)(Object(l.a)(function(e){var t=e.update,n=e.complete;t({display:"block"}),n()}),Object(l.d)({from:{opacity:0},to:{opacity:1},duration:y})).start(t.set)}),b(f(n),"onExiting",function(e){var t=Object(l.c)(e);Object(l.b)(Object(l.d)({from:{opacity:1},to:{opacity:0},duration:y}),Object(l.a)(function(e){var t=e.update,n=e.complete;t({display:"none"}),n()})).start(t.set)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){return i.a.createElement(c.a,{in:this.props.show,classNames:"MenuWrapperAnimation",enter:!0,exit:!0,mountOnEnter:!0,unmountOnExit:!0,onEntering:!Object(u.U)()&&this.onEntering,onExiting:!Object(u.U)()&&this.onExiting,timeout:{enter:y,exit:y}},this.props.children)}}])&&d(n.prototype,r),a&&d(n,a),t}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}b(g,"propTypes",{children:a.a.node,show:a.a.bool.isRequired}),n.d(t,"a",function(){return C});var C=function(e){function t(e){var n,r,a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!Array.isArray(e.children)||2!==e.children.length)throw new Error("MenuWrapper needs exactly 2 children");return r=this,a=E(t).call(this,e),n=!a||"object"!==v(a)&&"function"!=typeof a?w(r):a,S(w(n),"keyboardClose",function(e){e.key===s.Q.KeyCodes.ESCAPE[0]&&n.close(),e.key===s.Q.KeyCodes.TAB[0]&&n.closeOnBlur(e)}),S(w(n),"closeOnBlur",function(e){n.node.current&&n.node.current.contains(e.target)||n.close()}),S(w(n),"close",function(){n.state.open&&(n.setState({open:!1}),n.props.onToggle&&n.props.onToggle(!1))}),S(w(n),"toggle",function(){var e=!n.state.open;n.setState({open:e}),n.props.onToggle&&n.props.onToggle(e)}),n.state={open:!1},n.node=i.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.closeOnBlur,!0),document.addEventListener("keyup",this.keyboardClose,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.closeOnBlur,!0),document.removeEventListener("keyup",this.keyboardClose,!0)}},{key:"render",value:function(){var e=this.props.children,t=this.props.animationComponent;return i.a.createElement("div",{className:"MenuWrapper "+this.props.className,onClick:this.toggle,ref:this.node},e[0],i.a.createElement(t,{show:this.state.open},e[1]))}}])&&_(n.prototype,r),a&&_(n,a),t}();S(C,"propTypes",{children:a.a.node,className:a.a.string,onToggle:a.a.func,animationComponent:a.a.any.isRequired}),S(C,"defaultProps",{className:"",animationComponent:g})},1538:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(56);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.context.intl.formatMessage;return i.a.createElement("span",{id:"loadingSpinner",className:"LoadingSpinner"+(this.props.text?" with-text":"")},i.a.createElement("span",{className:"fa fa-spinner fa-fw fa-pulse spinner",title:e({id:"generic_icons.loading",defaultMessage:"Loading Icon"})}),this.props.text)}}])&&c(n.prototype,r),a&&c(n,a),t}();m(f,"propTypes",{text:a.a.node}),m(f,"defaultProps",{text:null}),m(f,"contextTypes",{intl:s.i.isRequired})},1541:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return p}),n.d(t,"e",function(){return d});n(305),n(306),n(211);var r=n(2026),a=n.n(r),o=n(0),i=n(38);function s(e){var t="true"===e.EnableFileAttachments,n="true"===e.EnableMobileFileUpload;return!!t&&(!i.n()||n)}function l(e){return!i.n()||"true"===e.EnableMobileFileDownload}function c(e){var t=e;return e.length>o.Q.MAX_FILENAME_LENGTH&&(t=e.substring(0,Math.min(o.Q.MAX_FILENAME_LENGTH,e.length))+"..."),t}function u(e){var t=e.split("/"),n=t[0],r=t[1];if("video"===n)return"video";if("audio"===n)return"audio";if("image"===n)return"image";if(r){if("pdf"===r)return"pdf";if(r.includes("vnd.ms-excel")||r.includes("spreadsheetml")||r.includes("vnd.sun.xml.calc")||r.includes("opendocument.spreadsheet"))return"spreadsheet";if(r.includes("vnd.ms-powerpoint")||r.includes("presentationml")||r.includes("vnd.sun.xml.impress")||r.includes("opendocument.presentation"))return"presentation";if("msword"===r||r.includes("vnd.ms-word")||r.includes("officedocument.wordprocessingml")||r.includes("application/x-mswrite"))return"word"}return"other"}function p(e){var t=new DataView(e);if(65496!==t.getUint16(0,!1))return-2;for(var n=t.byteLength,r=2;r<n;){var a=t.getUint16(r,!1);if(r+=2,65505===a){if(1165519206!==t.getUint32(r+=2,!1))return-1;var o=18761===t.getUint16(r+=6,!1);r+=t.getUint32(r+4,o);var i=t.getUint16(r,o);r+=2;for(var s=0;s<i;s++)if(274===t.getUint16(r+12*s,o))return t.getUint16(r+12*s+8,o)}else{if(65280!=(65280&a))break;r+=t.getUint16(r,!1)}}return-1}function d(e){var t=a()(e);return{transform:t.transform,transformOrigin:t["transform-origin"]}}},1542:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(56);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e="fa fa-warning"+(this.props.additionalClassName?" "+this.props.additionalClassName:"");return i.a.createElement(s.c,{id:"generic_icons.warning",defaultMessage:"Warning Icon"},function(t){return i.a.createElement("i",{className:e,title:t})})}}])&&c(n.prototype,r),a&&c(n,a),t}();m(f,"propTypes",{additionalClassName:a.a.string}),m(f,"defaultProps",{additionalClassName:null})},1546:function(e,t,n){"use strict";n.d(t,"a",function(){return b});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(1763),l=n(1732),c=n(1614);n(2035);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=d(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==u(a)&&"function"!=typeof a?m(r):a,h(m(n),"hideProfilePopover",function(){n.refs.overlay.hide()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e="string"==typeof this.props.profileSrc&&""!==this.props.profileSrc?this.props.profileSrc:this.props.src,t="profile-icon ".concat(this.props.isEmoji?"emoji":"");return this.props.userId?i.a.createElement(s.a,{ref:"overlay",trigger:"click",placement:"right",rootClose:!0,overlay:i.a.createElement(l.a,{userId:this.props.userId,src:e,isBusy:this.props.isBusy,hide:this.hideProfilePopover,isRHS:this.props.isRHS,hasMention:this.props.hasMention})},i.a.createElement("span",{className:"status-wrapper"},i.a.createElement("span",{className:t},i.a.createElement("img",{className:"ProfilePicture more-modal__image",alt:"".concat(this.props.username||"user"," profile image"),width:this.props.width,height:this.props.width,src:this.props.src})),i.a.createElement(c.a,{status:this.props.status}))):i.a.createElement("span",{className:"status-wrapper"},i.a.createElement("span",{className:t},i.a.createElement("img",{className:"more-modal__image",alt:"",height:this.props.width,width:this.props.width,src:this.props.src})),i.a.createElement(c.a,{status:this.props.status}))}}])&&p(n.prototype,r),a&&p(n,a),t}();h(b,"defaultProps",{width:"36",height:"36",isRHS:!1,isEmoji:!1,hasMention:!1}),h(b,"propTypes",{src:a.a.string.isRequired,profileSrc:a.a.string,status:a.a.string,width:a.a.string,height:a.a.string,userId:a.a.string,username:a.a.string,isBusy:a.a.bool,isRHS:a.a.bool,hasMention:a.a.bool,isEmoji:a.a.bool,wrapperClass:a.a.string})},1547:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});n(116),n(25),n(117);var r=n(0);function a(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,l,"next",e)}function l(e){a(i,r,o,s,l,"throw",e)}s(void 0)})}}function i(e){return function(){var t=o(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.B.SET_MODAL_SEARCH,data:e}),t.abrupt("return",{data:!0});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(){var a=o(regeneratorRuntime.mark(function a(o){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o({type:r.B.SET_SYSTEM_USERS_SEARCH,data:{term:e,team:t,filter:n}}),a.abrupt("return",{data:!0});case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}},1549:function(e,t,n){"use strict";var r=n(418),a=n(35),o=(n(88),n(43),n(33),n(34),n(25),n(44),n(245),n(425),n(30)),i=n.n(o),s=n(7),l=n.n(s);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,m(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,l.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t=this,n=this.props.pluggableName;if(this.props.children)e=l.a.Children.only(this.props.children).type;else if(!n)return null;var r=this.props.components,a=e?this.props.children.props:{},o=n||e.getComponentName(),i=u({},this.props);if(Reflect.deleteProperty(i,"children"),Reflect.deleteProperty(i,"components"),Reflect.deleteProperty(i,"pluggableName"),i=u({},i,a),r.hasOwnProperty(o)){var s=r[o];this.props.pluggableId&&(s=s.filter(function(e){return e.id===t.props.pluggableId}));var c=s.map(function(e){var n=e.component;return l.a.createElement(n,Object.assign({},i,{theme:t.props.theme,key:o+e.id}))});return l.a.createElement(l.a.Fragment,null,c)}return null==e?null:l.a.cloneElement(this.props.children,u({},i))}}])&&p(n.prototype,r),a&&p(n,a),t}();h(b,"propTypes",{children:i.a.element,pluggableName:i.a.string,components:i.a.object.isRequired,theme:i.a.object.isRequired,pluggableId:i.a.string});t.a=Object(r.connect)(function(e){return{components:e.plugins.components,theme:Object(a.getTheme)(e)}})(b)},1553:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement("span",this.props,a.a.createElement(o.c,{id:"generic_icons.channel.public",defaultMessage:"Public Channel Icon"},function(e){return a.a.createElement("svg",{width:"13px",height:"13px",viewBox:"0 0 14 14",role:"icon","aria-label":e},a.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},a.a.createElement("g",{transform:"translate(-115.000000, -147.000000)",fillRule:"nonzero",fill:"inherit"},a.a.createElement("g",{transform:"translate(95.000000, 0.000000)"},a.a.createElement("g",{transform:"translate(20.000000, 113.000000)"},a.a.createElement("g",{transform:"translate(0.000000, 34.000000)"},a.a.createElement("path",{d:"M10.409,0.893375 C9.40275,0.329875 8.24075,0.00875 7,0 C3.13075,0 0,3.140375 0,7 C0,10.521875 2.594375,13.42775 5.97625,13.93 C6.314875,13.974625 6.6535,14 7,14 C8.24075,14 9.40275,13.678875 10.409,13.1145 C12.551875,11.918375 14,9.6285 14,7 C13.99125,4.3715 12.551875,2.090375 10.409,0.893375 Z M11.554375,4.375 L9.431625,4.375 C9.302125,3.5 9.10875,2.736125 8.86725,2.085125 C10.003875,2.519125 10.9515,3.5 11.554375,4.375 Z M6.941375,1.73775 C6.960625,1.736875 6.979875,1.73425 7,1.73425 C7.020125,1.73425 7.039375,1.736875 7.058625,1.73775 C7.340375,2.172625 7.697375,3.5 7.92225,4.375 L6.07775,4.375 C6.302625,3.5 6.659625,2.172625 6.941375,1.73775 Z M1.81475,7.875 C1.7675,7.875 1.73425,7.29925 1.73425,7 C1.73425,6.70075 1.764875,6.125 1.813,6.125 L4.396875,6.125 C4.384625,6.125 4.375,6.7025 4.375,7 C4.375,7.2975 4.384625,7.875 4.396875,7.875 L1.81475,7.875 Z M4.354875,11.54475 C4.346125,11.54475 4.337375,11.54475 4.337375,11.536 C3.548125,11.07575 2.893625,10.5 2.436875,9.625 L4.568375,9.625 C4.697875,10.5 4.890375,11.262125 5.131875,11.91225 C4.8615,11.81075 4.599875,11.692625 4.354875,11.54475 Z M4.568375,4.375 L2.443875,4.375 C3.045875,3.5 3.994375,2.517375 5.131875,2.083375 C4.89125,2.734375 4.697875,3.5 4.568375,4.375 Z M7.0595,12.26225 C7.039375,12.26225 7.020125,12.26575 7,12.26575 C6.979875,12.26575 6.960625,12.26225 6.9405,12.26225 C6.65875,11.8265 6.302625,11.375 6.07775,9.625 L7.921375,9.625 C7.697375,11.375 7.34125,11.8265 7.0595,12.26225 Z M8.11125,7.875 L5.88875,7.875 C5.873875,7.875 5.8625,7.30625 5.8625,7 C5.8625,6.69375 5.873875,6.125 5.88875,6.125 L8.11125,6.125 C8.126125,6.125 8.1375,6.69375 8.1375,7 C8.1375,7.30625 8.126125,7.875 8.11125,7.875 Z M10.409,11.0075 C10.13075,11.242 9.828,11.45025 9.506875,11.631375 C9.30125,11.74075 9.086875,11.839625 8.8655,11.923625 C9.107,11.270875 9.30125,10.5 9.431625,9.625 L11.557875,9.625 C11.25425,10.5 10.8675,10.618125 10.409,11.0075 Z M9.603125,7.875 C9.615375,7.875 9.625,7.2975 9.625,7 C9.625,6.7025 9.615375,6.125 9.603125,6.125 L12.186125,6.125 C12.235125,6.125 12.26575,6.70075 12.26575,7 C12.26575,7.29925 12.233375,7.875 12.18525,7.875 L9.603125,7.875 Z"})))))))}))}}])&&s(n.prototype,r),i&&s(n,i),t}()},1554:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement("span",this.props,a.a.createElement(o.c,{id:"generic_icons.channel.private",defaultMessage:"Private Channel Icon"},function(e){return a.a.createElement("svg",{width:"12px",height:"13px",viewBox:"0 0 13 15",role:"icon",title:e},a.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},a.a.createElement("g",{transform:"translate(-116.000000, -175.000000)",fillRule:"nonzero",fill:"inherit"},a.a.createElement("g",{transform:"translate(95.000000, 0.000000)"},a.a.createElement("g",{transform:"translate(20.000000, 113.000000)"},a.a.createElement("g",{transform:"translate(1.000000, 62.000000)"},a.a.createElement("path",{d:"M12.0714286,6.5 L11.1428571,6.5 L11.1428571,4.64285714 C11.1428571,2.07814286 9.06471429,0 6.5,0 C3.93528571,0 1.85714286,2.07814286 1.85714286,4.64285714 L1.85714286,6.5 L0.928571429,6.5 C0.415071429,6.5 0,7.00792857 0,7.52142857 L0,13.9285714 C0,14.4420714 0.415071429,14.8571429 0.928571429,14.8571429 L12.0714286,14.8571429 C12.5849286,14.8571429 13,14.4420714 13,13.9285714 L13,7.52142857 C13,7.00792857 12.5849286,6.5 12.0714286,6.5 Z M6.5,1.85714286 C8.03585714,1.85714286 9.28571429,3.107 9.28571429,4.64285714 L9.28571429,6.5 L8.35714286,6.5 L4.64285714,6.5 L3.71428571,6.5 L3.71428571,4.64285714 C3.71428571,3.107 4.96414286,1.85714286 6.5,1.85714286 Z"})))))))}))}}])&&s(n.prototype,r),i&&s(n,i),t}()},1558:function(e,t,n){"use strict";var r=n(418),a=n(20),o=n(12),i=n(96),s=n(14),l=n(24),c=n(1991),u=n(106),p=n(1528),d=n(1692),m=(n(88),n(43),n(7)),f=n.n(m),h=n(30),b=n.n(h),y=n(0),g=n(56),v=n(13),_=5184e6,E=1296e6;function w(){var e=Object(l.getLicense)(v.a.getState());return"true"===e.IsLicensed&&Date.now()-parseInt(e.ExpiresAt,10)>E}var O=n(57),S=n(1491),C=n(1766),P=n(1763);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=k(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==T(a)&&"function"!=typeof a?M(r):a,R(M(n),"handleClose",function(e){e.preventDefault(),n.props.handleClose&&n.props.handleClose()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,f.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){var e=document.body.getAttribute("announcementBarCount")||0;e++,document.body.classList.add("announcement-bar--fixed"),document.body.setAttribute("announcementBarCount",e)}},{key:"componentWillUnmount",value:function(){var e=document.body.getAttribute("announcementBarCount");e--,document.body.setAttribute("announcementBarCount",e),0===e&&document.body.classList.remove("announcement-bar--fixed")}},{key:"render",value:function(){if(!this.props.message)return null;var e,t="announcement-bar",n={},r={};this.props.color&&this.props.textColor?(n.backgroundColor=this.props.color,n.color=this.props.textColor,r.color=this.props.textColor):this.props.type===y.h.DEVELOPER?t="announcement-bar announcement-bar-developer":this.props.type===y.h.CRITICAL?t="announcement-bar announcement-bar-critical":this.props.type===y.h.SUCCESS&&(t="announcement-bar announcement-bar-success"),this.props.showCloseButton&&(e=f.a.createElement("a",{href:"#",className:"announcement-bar__close",style:r,onClick:this.handleClose},""));var a=this.props.message;"string"==typeof a&&(a=f.a.createElement(S.b,{id:this.props.message}));var o=f.a.createElement(C.a,{id:"announcement-bar__tooltip"},a);return f.a.createElement("div",{className:t,style:n},f.a.createElement(P.a,{delayShow:y.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:o},f.a.createElement("span",null,a)),e)}}])&&j(n.prototype,r),a&&j(n,a),t}();R(I,"propTypes",{showCloseButton:b.a.bool,color:b.a.string,textColor:b.a.string,type:b.a.string,message:b.a.node.isRequired,handleClose:b.a.func}),R(I,"defaultProps",{showCloseButton:!1,color:"",textColor:"",type:y.h.CRITICAL,handleClose:null});n(33),n(34),n(25),n(44),n(245);var A=n(87);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B="__announcement__",G=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=U(t).call(this,e),n=!a||"object"!==x(a)&&"function"!=typeof a?q(r):a,F(q(n),"handleDismiss",function(){n.props.allowDismissal&&(localStorage.setItem(B+n.props.text,!0),n.setState({dismissed:!0}),n.props.onDismissal&&n.props.onDismissal())}),n.state={dismissed:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,f.a.PureComponent),n=t,a=[{key:"getDerivedStateFromProps",value:function(e){return{dismissed:localStorage.getItem(B+e.text)}}}],(r=[{key:"render",value:function(){if(this.state.dismissed)return null;var e=this.props,t=e.allowDismissal,n=e.text,r=L(e,["allowDismissal","text"]);return f.a.createElement(I,Object.assign({},r,{showCloseButton:t,handleClose:this.handleDismiss,message:f.a.createElement("span",{dangerouslySetInnerHTML:{__html:A.e(n,{singleline:!0,mentionHighlight:!1})}})}))}}])&&D(n.prototype,r),a&&D(n,a),t}();function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}F(G,"propTypes",{allowDismissal:b.a.bool.isRequired,text:b.a.string.isRequired,onDismissal:b.a.func});var J=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=z(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==V(a)&&"function"!=typeof a?K(r):a,Q(K(n),"dismissExpiringLicense",function(){n.props.actions.dismissNotice(y.g.LICENSE_EXPIRING)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,f.a.PureComponent),n=t,(r=[{key:"render",value:function(){if(this.props.canViewSystemErrors){var e="https://licensing.mattermost.com/renew?id="+this.props.license.id+"&user_count="+this.props.totalUsers;if(w())return f.a.createElement(I,{type:y.h.CRITICAL,message:f.a.createElement(S.b,{id:y.g.LICENSE_EXPIRED,defaultMessage:"Enterprise license is expired and some features may be disabled. [Please renew](!{link}).",values:{link:e}})});if("true"===(t=Object(l.getLicense)(v.a.getState())).IsLicensed&&parseInt(t.ExpiresAt,10)-Date.now()<0)return f.a.createElement(I,{type:y.h.CRITICAL,message:f.a.createElement(S.b,{id:y.g.LICENSE_EXPIRED,defaultMessage:"Enterprise license is expired and some features may be disabled. [Please renew](!{link}).",values:{link:e}})});if(function(){var e=Object(l.getLicense)(v.a.getState());return"true"===e.IsLicensed&&parseInt(e.ExpiresAt,10)-Date.now()<=_}()&&!this.props.dismissedExpiringLicense)return f.a.createElement(I,{showCloseButton:!0,handleClose:this.dismissExpiringLicense,type:y.h.ANNOUNCEMENT,message:f.a.createElement(S.b,{id:y.g.LICENSE_EXPIRING,defaultMessage:"Enterprise license expires on {date, date, long}. [Please renew](!{link}).",values:{date:new Date(parseInt(this.props.license.ExpiresAt,10)),link:e}})})}else if(w())return f.a.createElement(I,{type:y.h.CRITICAL,message:f.a.createElement(g.c,{id:y.g.LICENSE_PAST_GRACE,defaultMessage:"Enterprise license is expired and some features may be disabled. Please contact your System Administrator for details."})});var t,n=this.context.intl.formatMessage;if("true"!==this.props.config.SendEmailNotifications&&"true"===this.props.config.EnablePreviewModeBanner){var r=n({id:y.g.PREVIEW_MODE,defaultMessage:"Preview Mode: Email notifications have not been configured"});return f.a.createElement(G,{allowDismissal:!0,text:r,type:y.h.ANNOUNCEMENT})}if(this.props.canViewSystemErrors&&""===this.props.config.SiteURL){var a,o;"true"===this.props.config.EnableSignUpWithGitLab?(a=Object(O.b)("announcement_bar.error.site_url_gitlab.full"),o="Please configure your [Site URL](https://docs.mattermost.com/administration/config-settings.html#site-url) in the [System Console](/admin_console/environment/web_server) or in gitlab.rb if you're using GitLab Mattermost."):(a=Object(O.b)("announcement_bar.error.site_url.full"),o="Please configure your [Site URL](https://docs.mattermost.com/administration/config-settings.html#site-url) in the [System Console](/admin_console/environment/web_server).");var i=n({id:a,defaultMessage:o});return f.a.createElement(G,{allowDismissal:!0,text:i,type:y.h.ANNOUNCEMENT})}return null}}])&&W(n.prototype,r),a&&W(n,a),t}();Q(J,"propTypes",{config:b.a.object,license:b.a.object,user:b.a.object,canViewSystemErrors:b.a.bool.isRequired,totalUsers:b.a.number,dismissedExpiringLicense:b.a.bool,actions:b.a.shape({dismissNotice:b.a.func.isRequired}).isRequired}),Q(J,"contextTypes",{intl:g.i});var Z=Object(r.connect)(function(e){return{dismissedExpiringLicense:Boolean(e.views.notice.hasBeenDismissed[y.g.LICENSE_EXPIRING])}},function(e){return{actions:Object(a.bindActionCreators)({dismissNotice:d.a},e)}})(J),X=n(1778);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(a=te(t).call(this,e))||"object"!==$(a)&&"function"!=typeof a?ne(r):a,ae(ne(n),"reloadPage",function(){window.location.reload()}),n.state={serverVersionOnAppLoad:e.serverVersion},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,f.a.PureComponent),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){return!t.serverVersionOnAppLoad&&e.serverVersion?{serverVersionOnAppLoad:e.serverVersion}:null}}],(r=[{key:"render",value:function(){var e=this.state.serverVersionOnAppLoad,t=this.props.serverVersion;return e?Object(X.a)(e,t)?null:f.a.createElement(I,{type:y.h.ANNOUNCEMENT,message:f.a.createElement(f.a.Fragment,null,f.a.createElement(g.c,{id:"version_bar.new",defaultMessage:"A new version of Mattermost is available."})," ",f.a.createElement("a",{onClick:this.reloadPage},f.a.createElement(g.c,{id:"version_bar.refresh",defaultMessage:"Refresh the app now"})),".")}):null}}])&&ee(n.prototype,r),a&&ee(n,a),t}();ae(oe,"propTypes",{serverVersion:b.a.string});var ie=Object(r.connect)(function(e){return{serverVersion:e.entities.general.serverVersion}})(oe);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de,me,fe,he=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ce(this,ue(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,f.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=null;"true"===this.props.config.EnableBanner&&this.props.config.BannerText.trim()&&(e=f.a.createElement(G,{color:this.props.config.BannerColor,textColor:this.props.config.BannerTextColor,allowDismissal:"true"===this.props.config.AllowBannerDismissal,text:this.props.config.BannerText}));var t=null;return this.props.latestError&&(t=f.a.createElement(I,{type:this.props.latestError.error.type,message:this.props.latestError.error.message,showCloseButton:!0,handleClose:this.props.actions.dismissError})),f.a.createElement(f.a.Fragment,null,e,t,f.a.createElement(ie,null),f.a.createElement(Z,{config:this.props.config,license:this.props.license,canViewSystemErrors:this.props.canViewSystemErrors,totalUsers:this.props.totalUsers,user:this.props.user}))}}])&&le(n.prototype,r),a&&le(n,a),t}();de=he,me="propTypes",fe={license:b.a.object,config:b.a.object,user:b.a.shape({email:b.a.string.isRequired,email_verified:b.a.bool}),canViewSystemErrors:b.a.bool.isRequired,latestError:b.a.object,totalUsers:b.a.number,actions:b.a.shape({dismissError:b.a.func.isRequired}).isRequired},me in de?Object.defineProperty(de,me,{value:fe,enumerable:!0,configurable:!0,writable:!0}):de[me]=fe;t.a=Object(r.connect)(function(e){var t=Object(i.haveISystemPermission)(e,{permission:s.Permissions.MANAGE_SYSTEM}),n=Object(l.getLicense)(e),r=Object(l.getConfig)(e),a=Object(o.getCurrentUser)(e),u=Object(c.getDisplayableErrors)(e),p=e.entities.admin.analytics.TOTAL_USERS,d=null;return u&&u.length>=1&&(d=u[0]),{license:n,config:r,user:a,canViewSystemErrors:t,latestError:d,totalUsers:p}},function(e){var t=u.dismissError.bind(null,0);return{actions:Object(a.bindActionCreators)({getStandardAnalytics:p.getStandardAnalytics,dismissError:t,dismissNotice:d.a},e)}})(he)},1560:function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(88),n(43),n(33),n(34),n(25),n(44),n(245);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(1526);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.spinning,n=e.spinningText,r=e.children,a=c(e,["spinning","spinningText","children"]);return i.a.createElement("button",Object.assign({className:"btn btn-primary",disabled:t},a),i.a.createElement(s.a,{loading:t,text:n},r))}}])&&u(n.prototype,r),a&&u(n,a),t}();f(h,"defaultProps",{spinning:!1}),f(h,"propTypes",{children:a.a.node,spinning:a.a.bool.isRequired,spinningText:a.a.node.isRequired,onClick:a.a.func})},1561:function(e,t,n){"use strict";n.d(t,"a",function(){return E});n(34),n(25),n(44),n(245),n(425),n(88),n(43),n(33),n(430);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(426),l=n.n(s),c=n(1678),u=n(0),p=n(38),d=n(23);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=u.Q.KeyCodes,E=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=b(t).call(this,e),n=!a||"object"!==m(a)&&"function"!=typeof a?y(r):a,v(y(n),"handleMentionKeyClick",function(e,t){if(n.props.isRHS===t){var r="@"+e;n.props.value&&/[^\s]$/.test(n.props.value)&&(r=" "+r),n.addTextAtCaret(r,"")}}),v(y(n),"getTextbox",function(){if(!n.refs.input)return null;var e=n.refs.input.getInput();return e.getDOMNode?e.getDOMNode():e}),v(y(n),"recalculateSize",function(){var e=n.refs.input.getInput();e.recalculateSize&&e.recalculateSize()}),v(y(n),"handleEmitClearSuggestions",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout(function(){n.clear()},e)}),v(y(n),"preventSuggestionListClose",function(){n.preventSuggestionListCloseFlag=!0}),v(y(n),"handleFocusOut",function(e){n.preventSuggestionListCloseFlag?n.preventSuggestionListCloseFlag=!1:n.container.contains(e.relatedTarget)||p.g()&&!e.relatedTarget||(n.handleEmitClearSuggestions(),n.setState({focused:!1}),n.props.onBlur&&n.props.onBlur())}),v(y(n),"handleFocusIn",function(e){n.container.contains(e.relatedTarget)||n.preventSuggestionListCloseFlag||(n.setState({focused:!0}),(n.props.openOnFocus||n.props.openWhenEmpty)&&setTimeout(function(){var e=n.getTextbox();if(e){var t=e.value.substring(0,e.selectionEnd);(n.props.openWhenEmpty||t.length>=n.props.requiredCharacters)&&n.handlePretextChanged(t)}}),n.props.onFocus&&n.props.onFocus())}),v(y(n),"handleChange",function(e){var t=n.getTextbox(),r=t.value.substring(0,t.selectionEnd).toLowerCase();n.composing||n.pretext===r||n.handlePretextChanged(r),n.props.onChange&&n.props.onChange(e)}),v(y(n),"handleCompositionStart",function(){n.composing=!0,n.props.onComposition&&n.props.onComposition()}),v(y(n),"handleCompositionUpdate",function(e){if(e.data){var t=n.getTextbox(),r=t.value.substring(0,t.selectionStart)+e.data;n.handlePretextChanged(r),n.props.onComposition&&n.props.onComposition()}}),v(y(n),"handleCompositionEnd",function(){n.composing=!1,n.props.onComposition&&n.props.onComposition()}),v(y(n),"addTextAtCaret",function(e,r){var a,o=n.getTextbox(),i=o.selectionEnd,s=n.props.value,l=o.value.substring(0,o.selectionEnd),c=!1;if(l.toLowerCase().endsWith(r.toLowerCase()))a=l.substring(0,l.length-r.length);else{var u=e.substring(r.length),p=t.findOverlap(l,u);c=0===p.length,a=l.substring(0,l.length-p.length-r.length)}var m,f=s.substring(i);if(m=c?l:a+e+" "+f,o.value=m,n.props.onChange){var h={target:o};n.props.onChange(h)}window.requestAnimationFrame(function(){o.value===m&&d.ib(o,a.length+e.length+1)})}),v(y(n),"replaceText",function(e){var t=n.getTextbox();if(t.value=e,n.props.onChange){var r={target:t};n.props.onChange(r)}}),v(y(n),"handleCompleteWord",function(e,t){if(n.props.replaceAllInputOnSelect?n.replaceText(e):n.addTextAtCaret(e,t),n.props.onItemSelected)for(var r=n.state.items,a=n.state.terms,o=0;o<a.length;o++)if(a[o]===e){n.props.onItemSelected(r[o]);break}n.clear(),n.refs.input.focus();var i=!0,s=!1,l=void 0;try{for(var c,u=n.props.providers[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var p=c.value;p.handleCompleteWord&&p.handleCompleteWord(e,t)}}catch(e){s=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw l}}}),v(y(n),"selectNext",function(){n.setSelectionByDelta(1)}),v(y(n),"selectPrevious",function(){n.setSelectionByDelta(-1)}),v(y(n),"setSelectionByDelta",function(e){var t=n.state.terms.indexOf(n.state.selection);-1!==t?((t+=e)<0?t=0:t>n.state.terms.length-1&&(t=n.state.terms.length-1),n.setState({selection:n.state.terms[t]})):n.setState({selection:""})}),v(y(n),"clear",function(){n.setState({cleared:!0,matchedPretext:[],terms:[],items:[],components:[]})}),v(y(n),"hasSuggestions",function(){return n.state.items.some(function(e){return!e.loading})}),v(y(n),"handleKeyDown",function(e){if((n.props.openWhenEmpty||n.props.value)&&n.hasSuggestions())if(d.S(e,_.UP))n.selectPrevious(),e.preventDefault();else if(d.S(e,_.DOWN))n.selectNext(),e.preventDefault();else if(d.S(e,_.ENTER)||n.props.completeOnTab&&d.S(e,_.TAB)){for(var t="",r=0;r<n.state.terms.length;r++)n.state.terms[r]===n.state.selection&&(t=n.state.matchedPretext[r]);n.pretext.endsWith(t)?n.handleCompleteWord(n.state.selection,t):(clearTimeout(n.timeoutId),n.nonDebouncedPretextChanged(n.pretext,!0)),n.props.onKeyDown&&n.props.onKeyDown(e),e.preventDefault()}else d.S(e,_.ESCAPE)?(n.clear(),n.setState({presentationType:"text"}),e.preventDefault(),e.stopPropagation()):n.props.onKeyDown&&n.props.onKeyDown(e);else n.props.onKeyDown&&n.props.onKeyDown(e)}),v(y(n),"handleReceivedSuggestions",function(e){for(var t=[],r=[],a=0;a<e.terms.length;a++)t.push(e.component),r.push(e.matchedPretext);var o=e.terms,i=e.items,s=n.state.selection;return o.length>0?n.state.selection&&-1!==o.indexOf(n.state.selection)||(s=o[0]):n.state.selection&&(s=""),n.setState({cleared:!1,selection:s,terms:o,items:i,components:t,matchedPretext:r}),{selection:s,matchedPretext:e.matchedPretext}}),v(y(n),"handleReceivedSuggestionsAndComplete",function(e){var t=n.handleReceivedSuggestions(e),r=t.selection,a=t.matchedPretext;r&&n.handleCompleteWord(r,a)}),v(y(n),"nonDebouncedPretextChanged",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.pretext=e;var r=!1,a=n.handleReceivedSuggestions;t&&(a=n.handleReceivedSuggestionsAndComplete);var o=!0,i=!1,s=void 0;try{for(var l,c=n.props.providers[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(r=u.handlePretextChanged(e,a)||r){n.setState({presentationType:u.presentationType(),allowDividers:u.allowDividers()});break}}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}r||n.clear()}),v(y(n),"debouncedPretextChanged",function(e){clearTimeout(n.timeoutId),n.timeoutId=setTimeout(function(){return n.nonDebouncedPretextChanged(e)},u.Q.SEARCH_TIMEOUT_MILLISECONDS)}),v(y(n),"handlePretextChanged",function(e){n.pretext=e,n.debouncedPretextChanged(e)}),v(y(n),"blur",function(){n.refs.input.blur()}),v(y(n),"setContainerRef",function(e){n.container&&(n.container.removeEventListener("focusin",n.handleFocusIn),n.container.removeEventListener("focusout",n.handleFocusOut)),e&&(e.addEventListener("focusin",n.handleFocusIn),e.addEventListener("focusout",n.handleFocusOut)),n.container=e}),n.suggestionReadOut=i.a.createRef(),n.composing=!1,n.pretext="",n.timeoutId="",n.preventSuggestionListCloseFlag=!1,n.state={focused:!1,cleared:!0,matchedPretext:[],items:[],terms:[],components:[],selection:"",allowDividers:!0,presentationType:"text"},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,i.a.Component),n=t,a=[{key:"findOverlap",value:function(e,t){for(var n=e.toLowerCase(),r=t.toLowerCase(),a=r.length;a>0;a--){var o=r.substring(0,a);if(n.endsWith(o))return o}return""}}],(r=[{key:"componentDidMount",value:function(){this.props.listenForMentionKeyClick&&l.a.addListener("mention_key_click",this.handleMentionKeyClick)}},{key:"componentWillUnmount",value:function(){l.a.removeListener("mention_key_click",this.handleMentionKeyClick)}},{key:"componentDidUpdate",value:function(e){if(e.contextId!==this.props.contextId){var t=this.getTextbox(),n=t.value.substring(0,t.selectionEnd).toLowerCase();this.handlePretextChanged(n)}}},{key:"render",value:function(){var e=this.props,t=e.listComponent,n=e.dateComponent,r=e.listStyle,a=e.renderNoResults,o=f(e,["listComponent","dateComponent","listStyle","renderNoResults"]),s=this.props.renderDividers&&this.state.allowDividers;Reflect.deleteProperty(o,"providers"),Reflect.deleteProperty(o,"onChange"),Reflect.deleteProperty(o,"onComposition"),Reflect.deleteProperty(o,"onItemSelected"),Reflect.deleteProperty(o,"completeOnTab"),Reflect.deleteProperty(o,"isRHS"),Reflect.deleteProperty(o,"requiredCharacters"),Reflect.deleteProperty(o,"openOnFocus"),Reflect.deleteProperty(o,"openWhenEmpty"),Reflect.deleteProperty(o,"onFocus"),Reflect.deleteProperty(o,"onBlur"),Reflect.deleteProperty(o,"containerClass"),Reflect.deleteProperty(o,"replaceAllInputOnSelect"),Reflect.deleteProperty(o,"renderDividers"),Reflect.deleteProperty(o,"contextId"),Reflect.deleteProperty(o,"listenForMentionKeyClick");var l=t,u=n;return i.a.createElement("div",{ref:this.setContainerRef,className:this.props.containerClass},i.a.createElement("div",{ref:this.suggestionReadOut,"aria-live":"polite",role:"alert",className:"sr-only"}),i.a.createElement(c.a,Object.assign({ref:"input",autoComplete:"off"},o,{onInput:this.handleChange,onCompositionStart:this.handleCompositionStart,onCompositionUpdate:this.handleCompositionUpdate,onCompositionEnd:this.handleCompositionEnd,onKeyDown:this.handleKeyDown})),(this.props.openWhenEmpty||this.props.value.length>=this.props.requiredCharacters)&&"text"===this.state.presentationType&&i.a.createElement(l,{ref:"list",ariaLiveRef:this.suggestionReadOut,open:this.state.focused,pretext:this.pretext,location:r,renderDividers:s,renderNoResults:a,onCompleteWord:this.handleCompleteWord,preventClose:this.preventSuggestionListClose,cleared:this.state.cleared,matchedPretext:this.state.matchedPretext,items:this.state.items,terms:this.state.terms,selection:this.state.selection,components:this.state.components}),(this.props.openWhenEmpty||this.props.value.length>=this.props.requiredCharacters)&&"date"===this.state.presentationType&&i.a.createElement(u,{ref:"date",items:this.state.items,terms:this.state.terms,components:this.state.components,matchedPretext:this.state.matchedPretext,onCompleteWord:this.handleCompleteWord}))}}])&&h(n.prototype,r),a&&h(n,a),t}();v(E,"propTypes",{listComponent:a.a.func.isRequired,dateComponent:a.a.func,value:a.a.string.isRequired,providers:a.a.arrayOf(a.a.object),listStyle:a.a.string,containerClass:a.a.string,renderDividers:a.a.bool,renderNoResults:a.a.bool,completeOnTab:a.a.bool,onFocus:a.a.func,onBlur:a.a.func,onChange:a.a.func,onKeyDown:a.a.func,onComposition:a.a.func,onItemSelected:a.a.func,isRHS:a.a.bool,requiredCharacters:a.a.number,openOnFocus:a.a.bool,disabled:a.a.bool,openWhenEmpty:a.a.bool,replaceAllInputOnSelect:a.a.bool,contextId:a.a.string,listenForMentionKeyClick:a.a.bool}),v(E,"defaultProps",{listStyle:"top",containerClass:"",renderDividers:!1,renderNoResults:!1,completeOnTab:!0,isRHS:!1,requiredCharacters:1,openOnFocus:!1,openWhenEmpty:!1,replaceAllInputOnSelect:!1,listenForMentionKeyClick:!1})},1562:function(e,t,n){"use strict";n.d(t,"a",function(){return E});n(88),n(43);var r=n(183),a=n.n(r),o=n(30),i=n.n(o),s=n(7),l=n.n(s),c=n(419),u=n.n(c),p=n(56),d=n(23),m=n(1491),f=n(1538);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=y(t).call(this,e))||"object"!==h(a)&&"function"!=typeof a?g(r):a).getContent=n.getContent.bind(g(n)),n.suggestionReadOut=l.a.createRef(),n.scrollToItem=n.scrollToItem.bind(g(n)),n.currentLabel="",n.currentItem={},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,l.a.PureComponent),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.selection!==e.selection&&this.props.selection&&this.scrollToItem(this.props.selection),Object(d.O)(this.currentItem)||this.generateLabel(this.currentItem)}},{key:"componentWillUnmount",value:function(){this.removeLabel()}},{key:"announceLabel",value:function(){var e=this.props.ariaLiveRef.current;e&&(e.innerHTML=this.currentLabel)}},{key:"removeLabel",value:function(){var e=this.props.ariaLiveRef.current;e&&(e.innerHTML="")}},{key:"generateLabel",value:function(e){e.username?(this.currentLabel=e.username,(e.first_name||e.last_name)&&e.nickname?this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name," ").concat(e.nickname):e.nickname?this.currentLabel+=" ".concat(e.nickname):(e.first_name||e.last_name)&&(this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name))):"mention.channels"===e.type&&(this.currentLabel=e.channel.display_name),this.currentLabel&&(this.currentLabel=this.currentLabel.toLowerCase()),this.announceLabel()}},{key:"getContent",value:function(){return a()(u.a.findDOMNode(this.refs.content))}},{key:"scrollToItem",value:function(e){var t=this.getContent();if(t&&0!==t.length){var n=t[0].clientHeight;if(n<t[0].scrollHeight){var r=t.scrollTop(),o=parseInt(t.css("padding-top"),10),i=parseInt(t.css("padding-top"),10),s=a()(u.a.findDOMNode(this.refs[e]));if(0===s.length)return;var l=s[0].offsetTop-parseInt(s.css("margin-top"),10),c=parseInt(s.css("margin-bottom"),10)+parseInt(s.css("padding-bottom"),10),p=s[0].offsetTop+s.height()+c;l-o<r?t.scrollTop(l-o):p+o+i>r+n&&t.scrollTop(p-n+o+i)}}}},{key:"renderDivider",value:function(e){return l.a.createElement("div",{key:e+"-divider",className:"suggestion-list__divider"},l.a.createElement("span",null,l.a.createElement(p.c,{id:"suggestion."+e})))}},{key:"renderNoResults",value:function(){return l.a.createElement("div",{key:"list-no-results",className:"suggestion-list__no-results"},l.a.createElement(m.b,{id:"suggestion_list.no_matches",defaultMessage:"No items match __{value}__",values:{value:this.props.pretext||'""'}}))}},{key:"render",value:function(){if(!this.props.open||this.props.cleared)return null;var e,t=[];if(0===this.props.items.length){if(!this.props.renderNoResults)return null;t.push(this.renderNoResults())}for(var n=0;n<this.props.items.length;n++){var r=this.props.items[n],a=this.props.terms[n],o=a===this.props.selection,i=this.props.components[n];this.props.renderDividers&&r.type!==e&&(t.push(this.renderDivider(r.type)),e=r.type),r.loading?t.push(l.a.createElement(f.a,{key:r.type})):(o&&(this.currentItem=r),t.push(l.a.createElement(i,{key:a,ref:a,item:this.props.items[n],term:a,matchedPretext:this.props.matchedPretext[n],isSelection:o,onClick:this.props.onCompleteWord})))}var s="suggestion-list suggestion-list--"+this.props.location,c="suggestion-list__content suggestion-list__content--"+this.props.location;return l.a.createElement("div",{className:s},l.a.createElement("div",{id:"suggestionList",ref:"content",className:c,onMouseDown:this.props.preventClose},t))}}])&&b(n.prototype,r),o&&b(n,o),t}();_(E,"propTypes",{ariaLiveRef:i.a.object,open:i.a.bool.isRequired,location:i.a.string,renderDividers:i.a.bool,renderNoResults:i.a.bool,onCompleteWord:i.a.func.isRequired,preventClose:i.a.func,pretext:i.a.string.isRequired,cleared:i.a.bool.isRequired,matchedPretext:i.a.array.isRequired,items:i.a.array.isRequired,terms:i.a.array.isRequired,selection:i.a.string.isRequired,components:i.a.array.isRequired}),_(E,"defaultProps",{renderDividers:!1,renderNoResults:!1})},1565:function(e,t,n){"use strict";n.d(t,"d",function(){return m}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return b}),n.d(t,"e",function(){return y});n(43),n(33),n(34),n(44),n(116),n(25),n(117);var r=n(6),a=n(75),o=n(308),i=n(16),s=n(40),l=n(119);function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,s,"next",e)}function s(e){p(o,r,a,i,s,"throw",e)}i(void 0)})}}function m(e,t){return function(){var n=d(regeneratorRuntime.mark(function n(r,l){var c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(o.removeUserFromTeam(e,t));case 2:return c=n.sent,r(Object(s.getUser)(t)),r(o.getTeamStats(e)),r(Object(a.getChannelStats)(Object(i.getCurrentChannelId)(l()))),n.abrupt("return",c);case 7:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()}function f(e,t){return function(){var n=d(regeneratorRuntime.mark(function n(a){var i,s,l,u,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(o.addUserToTeamFromInvite(e,t));case 2:if(i=n.sent,s=i.data,l=i.error,!s){n.next=12;break}return n.next=8,a(o.getTeam(s.team_id));case 8:return u=n.sent,p=u.data,a({type:r.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:c({},s,{delete_at:0,msg_count:0,mention_count:0})}),n.abrupt("return",{data:p});case 12:return n.abrupt("return",{error:l});case 13:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}function h(e,t){return function(){var n=d(regeneratorRuntime.mark(function n(a){var i,s,l,u,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(o.addUserToTeam(e,t));case 2:if(i=n.sent,s=i.data,l=i.error,!s){n.next=12;break}return n.next=8,a(o.getTeam(s.team_id));case 8:return u=n.sent,p=u.data,a({type:r.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:c({},s,{delete_at:0,msg_count:0,mention_count:0})}),n.abrupt("return",{data:p});case 12:return n.abrupt("return",{error:l});case 13:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}function b(e,t){return function(){var n=d(regeneratorRuntime.mark(function n(r,s){var l,c,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(o.addUsersToTeam(e,t));case 2:if(l=n.sent,c=l.data,!(u=l.error)){n.next=7;break}return n.abrupt("return",{error:u});case 7:return r(Object(a.getChannelStats)(Object(i.getCurrentChannelId)(s()))),n.abrupt("return",{data:c});case 9:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()}function y(e){return function(t,n){t(Object(a.viewChannel)(Object(i.getCurrentChannelId)(n()))),l.a.push(e)}}},1571:function(e,t,n){"use strict";n(88),n(43),n(33);var r=n(418),a=n(96),o=n(30),i=n.n(o),s=n(7),l=n.n(s);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,l.a.Component),n=t,(r=[{key:"render",value:function(){return this.props.hasPermission&&!this.props.invert?this.props.children:!this.props.hasPermission&&this.props.invert?this.props.children:null}}])&&u(n.prototype,r),a&&u(n,a),t}();f(h,"defaultProps",{invert:!1}),f(h,"propTypes",{permissions:i.a.arrayOf(i.a.string).isRequired,hasPermission:i.a.bool.isRequired,invert:i.a.bool.isRequired,children:i.a.node.isRequired});t.a=Object(r.connect)(function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,s=t.permissions[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=i.value;if(Object(a.haveISystemPermission)(e,{permission:l}))return{hasPermission:!0}}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return{hasPermission:!1}})(h)},1572:function(e,t,n){"use strict";n(44),n(118),n(210),n(156),n(88),n(43),n(245),n(33),n(34),n(25);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(56),l=n(1735),c=n(0),u=n(1521),p=n(23),d=n(1494);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=c.Q.KeyCodes,v=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=h(t).call(this,e))||"object"!==m(a)&&"function"!=typeof a?b(r):a).defaultOptionRenderer=n.defaultOptionRenderer.bind(b(n)),n.handleArrowPress=n.handleArrowPress.bind(b(n)),n.setSelected=n.setSelected.bind(b(n)),n.toSelect=-1,n.state={selected:-1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleArrowPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleArrowPress)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({selected:this.toSelect});var t=e.options;t&&t.length>0&&this.toSelect>=0&&this.props.onSelect(t[this.toSelect])}},{key:"componentDidUpdate",value:function(e,t){if(t.selected!==this.state.selected&&this.refs.list&&this.refs.selected){var n=this.refs.selected.getBoundingClientRect().top,r=this.refs.selected.getBoundingClientRect().bottom,a=this.refs.list.getBoundingClientRect().top;r>this.refs.list.getBoundingClientRect().bottom?this.refs.selected.scrollIntoView(!1):n<a&&this.refs.selected.scrollIntoView(!0)}}},{key:"setSelected",value:function(e){this.toSelect=e}},{key:"handleArrowPress",value:function(e){if(!Object(p.e)(e)||!e.shiftKey){var t=this.props.options;if(0!==t.length){var n;switch(e.key){case g.DOWN[0]:if(-1===this.state.selected){n=0;break}n=Math.min(this.state.selected+1,t.length-1);break;case g.UP[0]:if(-1===this.state.selected){n=0;break}n=Math.max(this.state.selected-1,0);break;default:return}e.preventDefault(),this.setState({selected:n}),this.setSelected(n),this.props.onSelect(t[n])}}}},{key:"defaultOptionRenderer",value:function(e,t,n){var r="";return t&&(r="more-modal__row--selected"),i.a.createElement("div",{ref:t?"selected":e.value,className:r,key:"multiselectoption"+e.value,onClick:function(){return n(e)}},e.label)}},{key:"render",value:function(){var e,t=this,n=this.props.options;if(this.props.loading)e=i.a.createElement("div",{"aria-hidden":!0},i.a.createElement(d.a,{position:"absolute",key:"loading"}));else if(null==n||0===n.length)e=i.a.createElement("div",{key:"no-users-found",className:"no-channel-message"},i.a.createElement("p",{className:"primary-message"},i.a.createElement(s.c,{id:"multiselect.list.notFound",defaultMessage:"No items found"})));else{var r;r=this.props.optionRenderer?this.props.optionRenderer:this.defaultOptionRenderer;var a=n.map(function(e,n){return r(e,t.state.selected===n,t.props.onAdd)}),o=n[this.state.selected],l=this.props.ariaLabelRenderer(o);e=i.a.createElement("div",{className:"more-modal__list"},i.a.createElement("div",{className:"sr-only","aria-live":"polite"},l),i.a.createElement("div",{ref:"list",role:"presentation","aria-hidden":!0},a))}return i.a.createElement("div",{className:"multi-select__wrapper","aria-live":"polite"},e)}}])&&f(n.prototype,r),a&&f(n,a),t}();function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){T(e,t,n[t])})}return e}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}v.defaultProps={options:[],perPage:50,onAction:function(){return null}},v.propTypes={options:a.a.arrayOf(a.a.object),optionRenderer:a.a.func,ariaLabelRenderer:a.a.func,page:a.a.number,perPage:a.a.number,onPageChange:a.a.func,onAdd:a.a.func,onSelect:a.a.func,loading:a.a.bool},n.d(t,"a",function(){return k});var j=c.i.KeyCodes,k=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=S(t).call(this,e),n=!a||"object"!==E(a)&&"function"!=typeof a?C(r):a,T(C(n),"handleA11yActivateEvent",function(){n.setState({a11yActive:!0})}),T(C(n),"handleA11yDeactivateEvent",function(){n.setState({a11yActive:!1})}),T(C(n),"nextPage",function(){n.props.handlePageChange&&n.props.handlePageChange(n.state.page+1,n.state.page),n.refs.list&&n.refs.list.setSelected(0),n.setState({page:n.state.page+1})}),T(C(n),"prevPage",function(){0!==n.state.page&&(n.props.handlePageChange&&n.props.handlePageChange(n.state.page-1,n.state.page),n.refs.list.setSelected(0),n.setState({page:n.state.page-1}))}),T(C(n),"resetPaging",function(){n.setState({page:0})}),T(C(n),"onSelect",function(e){n.selected=e}),T(C(n),"onAdd",function(e){if(!(n.props.maxValues&&n.props.values.length>=n.props.maxValues)){for(var t=0;t<n.props.values.length;t++)if(n.props.values[t].id===e.id)return;n.props.handleAdd(e),n.selected=null,n.refs.reactSelect.select.handleInputChange({currentTarget:{value:""}}),n.onInput(""),n.refs.reactSelect.focus();var r=n.props.submitImmediatelyOn;r&&r(e)&&n.props.handleSubmit([e])}}),T(C(n),"onInput",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"input-blur"!==t.action&&"menu-close"!==t.action&&n.state.input!==e&&(n.setState({input:e}),""===e?n.refs.list.setSelected(-1):n.refs.list.setSelected(0),n.selected=null,n.props.handleInput(e,C(n)))}),T(C(n),"onInputKeyDown",function(e){switch(e.key){case j.ENTER[0]:e.preventDefault()}}),T(C(n),"handleEnterPress",function(e){switch(e.key){case j.ENTER[0]:if(null==n.selected)return void n.props.handleSubmit();n.onAdd(n.selected)}}),T(C(n),"handleOnClick",function(e){e.preventDefault(),n.props.handleSubmit()}),T(C(n),"onChange",function(e,t){if("remove-value"===t.action||"pop-value"===t.action){for(var r=w(n.props.values),a=0;a<r.length;a++)if(r[a].id===t.removedValue.id){r.splice(a,1);break}n.props.handleDelete(r)}}),n.selected=null,n.state={page:0,input:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleEnterPress),this.refs.reactSelect&&(this.refs.reactSelect.select.inputRef.addEventListener(c.c.ACTIVATE,this.handleA11yActivateEvent),this.refs.reactSelect.select.inputRef.addEventListener(c.c.DEACTIVATE,this.handleA11yDeactivateEvent),this.refs.reactSelect.focus())}},{key:"componentWillUnmount",value:function(){this.refs.reactSelect.select.inputRef.removeEventListener(c.c.ACTIVATE,this.handleA11yActivateEvent),this.refs.reactSelect.select.inputRef.removeEventListener(c.c.DEACTIVATE,this.handleA11yDeactivateEvent),document.removeEventListener("keydown",this.handleEnterPress)}},{key:"render",value:function(){var e,t,n=this,r=Object.assign([],this.props.options),a=this.props,o=a.totalCount,c=a.users,p=a.values;this.props.numRemainingText?e=this.props.numRemainingText:null!=this.props.maxValues&&(e=i.a.createElement(s.c,{id:"multiselect.numRemaining",defaultMessage:"You can add {num, number} more. ",values:{num:this.props.maxValues-this.props.values.length}})),this.props.buttonSubmitText?t=this.props.buttonSubmitText:null!=this.props.maxValues&&(t=i.a.createElement(s.c,{id:"multiselect.go",defaultMessage:"Go"}));var d,m,f,h=[];this.props.noteText&&(f=i.a.createElement("div",{className:"multi-select__note"},i.a.createElement("div",{className:"note__icon"},i.a.createElement(s.c,{id:"generic_icons.info",defaultMessage:"Info Icon"},function(e){return i.a.createElement("span",{className:"fa fa-info",title:e})})),i.a.createElement("div",null,this.props.noteText)));for(var b,y={},g=0;g<p.length;g++)y[p[g].id]=!0;for(var _=r.length-1;_>=0;_--)y[r[_].id]&&r.splice(_,1);if(r&&r.length>this.props.perPage){var E=this.state.page*this.props.perPage,w=E+this.props.perPage;h=r.slice(E,w),this.props.loading||(r.length>w&&(d=i.a.createElement("button",{className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage},i.a.createElement(s.c,{id:"filtered_user_list.next",defaultMessage:"Next"}))),this.state.page>0&&(m=i.a.createElement("button",{className:"btn btn-link filter-control filter-control__prev",onClick:this.prevPage},i.a.createElement(s.c,{id:"filtered_user_list.prev",defaultMessage:"Previous"}))))}else h=r;return c&&c.length&&o&&(b=i.a.createElement(s.c,{id:"multiselect.numMembers",defaultMessage:"{memberOptions, number} of {totalCount, number} members",values:{memberOptions:h.length,totalCount:this.props.totalCount}})),i.a.createElement("div",{className:"filtered-user-list"},i.a.createElement("div",{className:"filter-row filter-row--full"},i.a.createElement("div",{className:"multi-select__container"},i.a.createElement(l.a,{id:"selectItems",ref:"reactSelect",isMulti:!0,options:this.props.options,styles:R,components:{Menu:M,IndicatorsContainer:M,MultiValueLabel:N(this.props.valueRenderer)},isClearable:!1,openMenuOnFocus:!1,menuIsOpen:!1,onInputChange:this.onInput,onKeyDown:this.onInputKeyDown,onChange:this.onChange,value:this.props.values,placeholder:this.props.placeholderText,inputValue:this.state.input,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return n.props.ariaLabelRenderer(e)},"aria-label":this.props.placeholderText,className:this.state.a11yActive?"multi-select__focused":""}),i.a.createElement(u.a,{id:"saveItems",saving:this.props.saving,disabled:this.props.saving,onClick:this.handleOnClick,defaultMessage:t,savingMessage:this.props.buttonSubmitLoadingText})),i.a.createElement("div",{className:"multi-select__help"},e,b),i.a.createElement("div",{className:"multi-select__help"},f)),i.a.createElement(v,{ref:"list",options:h,optionRenderer:this.props.optionRenderer,ariaLabelRenderer:this.props.ariaLabelRenderer,page:this.state.page,perPage:this.props.perPage,onPageChange:this.props.handlePageChange,onAdd:this.onAdd,onSelect:this.onSelect,loading:this.props.loading}),i.a.createElement("div",{className:"filter-controls"},m,d))}}])&&O(n.prototype,r),a&&O(n,a),t}();T(k,"propTypes",{users:a.a.arrayOf(a.a.object),totalCount:a.a.number,options:a.a.arrayOf(a.a.object),optionRenderer:a.a.func,values:a.a.arrayOf(a.a.object),valueRenderer:a.a.func,ariaLabelRenderer:a.a.func.isRequired,handleInput:a.a.func,handleDelete:a.a.func,perPage:a.a.number,handlePageChange:a.a.func,handleAdd:a.a.func,handleSubmit:a.a.func,noteText:a.a.node,maxValues:a.a.number,numRemainingText:a.a.node,buttonSubmitText:a.a.node,buttonSubmitLoadingText:a.a.node,submitImmediatelyOn:a.a.func,saving:a.a.bool,loading:a.a.bool,placeholderText:a.a.string}),T(k,"defaultProps",{ariaLabelRenderer:function(e){if(!e)return null;return e.label}});var M=function(){return null},N=function(e){return function(t){return i.a.createElement("div",{style:{paddingRight:"5px",paddingLeft:"5px",borderRight:"1px solid rgba(0, 126, 255, 0.24)"}},i.a.createElement(e,t))}},R={container:function(){return{display:"table-cell",paddingRight:"15px",verticalAlign:"top",width:"100%"}},control:function(e){return _({},e,{borderRadius:"1px",borderColor:"hsl(0,0%,80%)",minHeight:"36px","&:hover":{},boxShadow:"",backgroundColor:"hsl(0,0%,100%)"})},multiValue:function(e){return _({},e,{whiteSpace:"nowrap",border:"1px solid rgba(0, 126, 255, 0.24)",backgroundColor:"rgba(0, 126, 255, 0.08)",color:"#007eff"})},multiValueRemove:function(e){return _({},e,{":hover":{backgroundColor:"rgba(0, 126, 255, 0.15)"}})}}},1576:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement("span",this.props,a.a.createElement(o.c,{id:"generic_icons.archive",defaultMessage:"Archive Icon"},function(e){return a.a.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14",role:"icon","aria-label":e},a.a.createElement("path",{d:"M8.5 6.5q0-0.203-0.148-0.352t-0.352-0.148h-2q-0.203 0-0.352 0.148t-0.148 0.352 0.148 0.352 0.352 0.148h2q0.203 0 0.352-0.148t0.148-0.352zM13 5v7.5q0 0.203-0.148 0.352t-0.352 0.148h-11q-0.203 0-0.352-0.148t-0.148-0.352v-7.5q0-0.203 0.148-0.352t0.352-0.148h11q0.203 0 0.352 0.148t0.148 0.352zM13.5 1.5v2q0 0.203-0.148 0.352t-0.352 0.148h-12q-0.203 0-0.352-0.148t-0.148-0.352v-2q0-0.203 0.148-0.352t0.352-0.148h12q0.203 0 0.352 0.148t0.148 0.352z"}))}))}}])&&s(n.prototype,r),i&&s(n,i),t}()},1579:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement(o.c,{id:"generic_icons.success",defaultMessage:"Success Icon"},function(e){return a.a.createElement("i",{className:"fa fa-check",title:e})})}}])&&s(n.prototype,r),i&&s(n,i),t}()},1581:function(e,t,n){"use strict";function r(e,t){return e.views.modals.modalState[t]&&e.views.modals.modalState[t].open}n.d(t,"a",function(){return r})},1582:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement(o.c,{id:"generic_icons.add",defaultMessage:"Add Icon"},function(e){return a.a.createElement("i",{className:"fa fa-plus",title:e})})}}])&&s(n.prototype,r),i&&s(n,i),t}()},1589:function(e,t,n){"use strict";n(88),n(43),n(33);var r=n(418),a=n(96),o=n(30),i=n.n(o),s=n(7),l=n.n(s);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,l.a.Component),n=t,(r=[{key:"render",value:function(){return this.props.hasPermission&&!this.props.invert?this.props.children:!this.props.hasPermission&&this.props.invert?this.props.children:null}}])&&u(n.prototype,r),a&&u(n,a),t}();f(h,"defaultProps",{invert:!1}),f(h,"propTypes",{teamId:i.a.string,permissions:i.a.arrayOf(i.a.string).isRequired,hasPermission:i.a.bool.isRequired,invert:i.a.bool.isRequired,children:i.a.node.isRequired});t.a=Object(r.connect)(function(e,t){if(!t.teamId)return{hasPermission:!1};var n=!0,r=!1,o=void 0;try{for(var i,s=t.permissions[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=i.value;if(Object(a.haveITeamPermission)(e,{team:t.teamId,permission:l}))return{hasPermission:!0}}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return{hasPermission:!1}})(h)},1590:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(0),a=function(){return function(e){return e({type:r.e.TOGGLE_LHS})}},o=function(){return function(e){return e({type:r.e.OPEN_LHS})}},i=function(){return function(e){return e({type:r.e.CLOSE_LHS})}}},1591:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return V}),n.d(t,"a",function(){return W}),n.d(t,"d",function(){return K}),n.d(t,"i",function(){return Y}),n.d(t,"c",function(){return Q}),n.d(t,"f",function(){return X}),n.d(t,"g",function(){return $}),n.d(t,"e",function(){return ee}),n.d(t,"j",function(){return te}),n.d(t,"h",function(){return ne});n(117),n(116),n(43),n(44),n(305),n(306),n(947),n(422),n(185),n(74),n(120),n(33),n(34),n(945),n(425),n(156),n(25);var r=n(148),a=n(6),o=n(14),i=n(75),s=n(946),l=n(66),c=n(106),u=n(308),p=n(40),d=n(36),m=n(12),f=n(31),h=n(24),b=n(16),y=n(62),g=n(97),v=n(1503),_=n(1896),E=n(309),w=n(1511),O=n(119),S=n(1524),C=n(1493),P=n(423),T=n(215),j=n(311),k=n(13),M=n(1734),N=n(1873),R=n(0),I=n(421),A=n(307),x=n(2375),L=n(1867);function D(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){q(e,t,n[t])})}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=k.a.dispatch,F=k.a.getState,B=7,G={};function V(){if(window.WebSocket){var e=Object(h.getConfig)(F()),t="";e.WebsocketURL?t=e.WebsocketURL:("https:"===(t=new URL(Object(A.e)())).protocol?t.protocol="wss:":t.protocol="ws:",/:\d+$/.test(t.host)||("wss:"===t.protocol?t.host+=":"+e.WebsocketSecurePort:t.host+=":"+e.WebsocketPort),t=t.toString()),t.length>0&&"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t+=d.Client4.getUrlVersion()+"/websocket",M.a.setEventCallback(oe),M.a.setFirstConnectCallback(re),M.a.setReconnectCallback(function(){return Q(!1)}),M.a.setMissedEventCallback(function(){return Q(!1)}),M.a.setCloseCallback(ae),M.a.initialize(t)}else console.log("Browser does not support websocket")}function W(){M.a.close()}var z={};function K(e,t){z[e]=t}function Y(e){Reflect.deleteProperty(z,e)}function Q(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(W(),V()),H({type:a.GeneralTypes.WEBSOCKET_SUCCESS,timestamp:Date.now()}),Object(N.c)(),Object.values(z).forEach(function(e){e&&"function"==typeof e&&e()});var e=F();if(e.entities.teams.currentTeamId){var t=Object(b.getCurrentChannelId)(e),n=Object(y.getMostRecentPostIdInChannel)(e,t),r=Object(y.getPost)(e,n);H(Object(S.d)()),H(r?Object(w.n)(t,r.create_at):Object(l.getPosts)(t)),T.a(),H(u.getMyTeamUnreads())}e.websocket.lastDisconnectAt&&H(Object(p.checkForModifiedUsers)()),H(Object(_.b)()),H(Object(c.clearErrors)())}var J="",Z=9e5;function X(){clearInterval(J),J=setInterval(function(){null!=Object(m.getCurrentUser)(F())&&Q(!1)},Z)}function $(){clearInterval(J)}function ee(e,t,n){G[e]||(G[e]={}),G[e][t]=n}function te(e,t){var n=G[e];n&&Reflect.deleteProperty(n,t)}function ne(e){Reflect.deleteProperty(G,e)}function re(){H(Object(r.batchActions)([{type:a.GeneralTypes.WEBSOCKET_SUCCESS,timestamp:Date.now()},Object(c.clearErrors)()]))}function ae(e){e>B&&H(Object(c.logError)({type:"critical",message:R.g.WEBSOCKET_PORT_ERROR},!0)),H(Object(r.batchActions)([{type:a.GeneralTypes.WEBSOCKET_FAILURE,timestamp:Date.now()},Object(_.a)()]))}function oe(t){switch(t.event){case R.E.POSTED:case R.E.EPHEMERAL_MESSAGE:pe(t);break;case R.E.POST_EDITED:!function(e){var t=JSON.parse(e.data.post);H(Object(l.receivedPost)(t)),Object(l.getProfilesAndStatusesForPosts)([t],H,F);var n=Object(b.getCurrentChannelId)(F());n===e.broadcast.channel_id&&window.isActive&&H(Object(i.viewChannel)(n))}(t);break;case R.E.POST_DELETED:!function(e){var t=JSON.parse(e.data.post);H(Object(l.postDeleted)(t))}(t);break;case R.E.LEAVE_TEAM:!function(t){var n=F();H(Object(r.batchActions)([{type:a.UserTypes.RECEIVED_PROFILE_NOT_IN_TEAM,data:{id:t.data.team_id,user_id:t.data.user_id}},{type:a.TeamTypes.REMOVE_MEMBER_FROM_TEAM,data:{team_id:t.data.team_id,user_id:t.data.user_id}}])),Object(m.getCurrentUserId)(n)===t.data.user_id&&(H({type:a.TeamTypes.LEAVE_TEAM,data:{id:t.data.team_id}}),Object(f.getCurrentTeamId)(n)===t.data.team_id&&(e.location.pathname.startsWith("/admin_console")||C.f()))}(t);break;case R.E.UPDATE_TEAM:!function(e){H({type:a.TeamTypes.UPDATED_TEAM,data:JSON.parse(e.data.team)})}(t);break;case R.E.DELETE_TEAM:!function(e){var t=JSON.parse(e.data.team),n=k.a.getState(),o=n.entities.teams.teams;if(t&&o&&o[t.id]&&0===o[t.id].delete_at){var i=n.entities.users.currentUserId,s=n.entities.teams,l=s.currentTeamId,c=s.myMembers,u=Object.values(c),p=u.find(function(e){return e.user_id===i&&e.team_id===l}),d="";if(t&&p&&t.id===p.team_id){var m={};Object(f.getMyTeams)(n).forEach(function(e){m[e.id]=e});for(var h=0;h<u.length;h++){var y=u[h].team_id;if(m&&m[y]&&0===m[y].delete_at&&t.id!==y){d=y;break}}}if(H(Object(r.batchActions)([{type:a.TeamTypes.RECEIVED_TEAM_DELETED,data:{id:t.id}},{type:a.TeamTypes.UPDATED_TEAM,data:t}])),d){H({type:a.TeamTypes.SELECT_TEAM,data:d});var g=F(),v=Object(b.getRedirectChannelNameForTeam)(g,d);O.a.push("".concat(Object(f.getCurrentTeamUrl)(g),"/channels/").concat(v))}else O.a.push("/")}}(t);break;case R.E.ADDED_TO_TEAM:!function(e){de.apply(this,arguments)}(t);break;case R.E.USER_ADDED:!function(e){var t=Object(b.getCurrentChannelId)(F());t===e.broadcast.channel_id&&(H(Object(i.getChannelStats)(t)),H({type:a.UserTypes.RECEIVED_PROFILE_IN_CHANNEL,data:{id:e.broadcast.channel_id,user_id:e.data.user_id}}));var n=Object(f.getCurrentTeamId)(F()),r=Object(m.getCurrentUserId)(F());n===e.data.team_id&&r===e.data.user_id&&H(Object(i.getChannelAndMyMember)(e.broadcast.channel_id))}(t);break;case R.E.USER_REMOVED:!function(e){var t=F(),n=Object(b.getCurrentChannel)(t)||{},r=Object(m.getCurrentUserId)(t);if(e.broadcast.user_id===r){H(Object(S.d)());var o=Object(g.n)(t);if(e.data.channel_id===o&&H(Object(E.b)()),e.data.channel_id===n.id)if(e.data.remover_id===e.broadcast.user_id)O.a.push(Object(f.getCurrentRelativeTeamUrl)(t));else{var s=Object(m.getUser)(t,e.data.remover_id)||{};H(Object(v.b)({modalId:R.r.REMOVED_FROM_CHANNEL,dialogType:x.a,dialogProps:{channelName:n.display_name,remover:s.username}}))}H({type:a.ChannelTypes.LEAVE_CHANNEL,data:{id:e.data.channel_id,user_id:e.broadcast.user_id}})}else e.broadcast.channel_id===n.id&&(H(Object(i.getChannelStats)(n.id)),H({type:a.UserTypes.RECEIVED_PROFILE_NOT_IN_CHANNEL,data:{id:e.broadcast.channel_id,user_id:e.data.user_id}}))}(t);break;case R.E.USER_UPDATED:!function(e){var t=Object(m.getCurrentUser)(F()),n=e.data.user;t.id===n.id?n.update_at>t.update_at&&Object(p.getMe)()(H,F):H({type:a.UserTypes.RECEIVED_PROFILE,data:n})}(t);break;case R.E.ROLE_ADDED:!function(e){var t=JSON.parse(e.data.role);H({type:a.RoleTypes.RECEIVED_ROLE,data:t})}(t);break;case R.E.ROLE_REMOVED:!function(e){var t=JSON.parse(e.data.role);H({type:a.RoleTypes.ROLE_DELETED,data:t})}(t);break;case R.E.MEMBERROLE_UPDATED:!function(e){H({type:a.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:e.data.member})}(t);break;case R.E.ROLE_UPDATED:!function(e){var t=JSON.parse(e.data.role);H({type:a.RoleTypes.RECEIVED_ROLE,data:t})}(t);break;case R.E.CHANNEL_CREATED:!function(e){var t=e.data.channel_id,n=e.data.team_id,r=F();Object(f.getCurrentTeamId)(r)!==n||Object(b.getChannel)(r,t)||H(Object(i.getChannelAndMyMember)(t))}(t);break;case R.E.CHANNEL_DELETED:!function(e){var t=F(),n="true"===Object(h.getConfig)(t).ExperimentalViewArchivedChannels;if(Object(b.getCurrentChannelId)(t)===e.data.channel_id&&!n){var r=Object(f.getCurrentRelativeTeamUrl)(t),o=Object(f.getCurrentTeamId)(t),i=Object(b.getRedirectChannelNameForTeam)(t,o);O.a.push(r+"/channels/"+i)}H({type:a.ChannelTypes.RECEIVED_CHANNEL_DELETED,data:{id:e.data.channel_id,team_id:e.broadcast.team_id,deleteAt:e.data.delete_at,viewArchivedChannels:n}})}(t);break;case R.E.CHANNEL_CONVERTED:!function(e){var t=e.data.channel_id;if(t){var n=Object(b.getChannel)(F(),t);n&&H({type:a.ChannelTypes.RECEIVED_CHANNEL,data:U({},n,{type:o.General.PRIVATE_CHANNEL})})}}(t);break;case R.E.CHANNEL_UPDATED:H(function(e){return function(t,n){var r=JSON.parse(e.data.channel);t({type:a.ChannelTypes.RECEIVED_CHANNEL,data:r});var o=n();r.id===Object(b.getCurrentChannelId)(o)&&O.a.replace("".concat(Object(f.getCurrentRelativeTeamUrl)(o),"/channels/").concat(r.name))}}(t));break;case R.E.CHANNEL_MEMBER_UPDATED:!function(e){var t=JSON.parse(e.data.channelMember);H({type:a.ChannelTypes.RECEIVED_MY_CHANNEL_MEMBER,data:t})}(t);break;case R.E.DIRECT_ADDED:!function(e){H(Object(i.getChannelAndMyMember)(e.broadcast.channel_id))}(t);break;case R.E.PREFERENCE_CHANGED:!function(e){var t=JSON.parse(e.data.preference);H({type:a.PreferenceTypes.RECEIVED_PREFERENCES,data:[t]}),me(t)&&Object(j.j)()}(t);break;case R.E.PREFERENCES_CHANGED:!function(e){var t=JSON.parse(e.data.preferences);H({type:a.PreferenceTypes.RECEIVED_PREFERENCES,data:t}),-1!==t.findIndex(me)&&Object(j.j)()}(t);break;case R.E.PREFERENCES_DELETED:!function(e){var t=JSON.parse(e.data.preferences);H({type:a.PreferenceTypes.DELETED_PREFERENCES,data:t})}(t);break;case R.E.TYPING:H(function(e){return function(t,n){var r=n(),a=Object(h.getConfig)(r),i=Object(m.getCurrentUserId)(r),s=e.data.user_id,l={id:e.broadcast.channel_id+e.data.parent_id,userId:s,now:Date.now()};t({type:o.WebsocketEvents.TYPING,data:l}),setTimeout(function(){t({type:o.WebsocketEvents.STOP_TYPING,data:l})},parseInt(a.TimeBetweenUserTypingUpdatesMilliseconds,10)),s!==i&&t(Object(p.getMissingProfilesByIds)([s]));var c=Object(m.getStatusForUserId)(r,s);c!==o.General.ONLINE&&t(Object(p.getStatusesByIds)([s]))}}(t));break;case R.E.STATUS_CHANGED:!function(e){H({type:a.UserTypes.RECEIVED_STATUSES,data:[{user_id:e.data.user_id,status:e.data.status}]})}(t);break;case R.E.HELLO:!function(e){Object(s.setServerVersion)(e.data.server_version)(H,F)}(t);break;case R.E.REACTION_ADDED:!function(e){var t=JSON.parse(e.data.reaction);H(Object(l.getCustomEmojiForReaction)(t.emoji_name)),H({type:a.PostTypes.RECEIVED_REACTION,data:t})}(t);break;case R.E.REACTION_REMOVED:!function(e){var t=JSON.parse(e.data.reaction);H({type:a.PostTypes.REACTION_DELETED,data:t})}(t);break;case R.E.EMOJI_ADDED:!function(e){var t=JSON.parse(e.data.emoji);H({type:a.EmojiTypes.RECEIVED_CUSTOM_EMOJI,data:t})}(t);break;case R.E.CHANNEL_VIEWED:!function(e){window.isActive&&Object(b.getCurrentChannelId)(F())===e.data.channel_id||Object(m.getCurrentUserId)(F())!==e.broadcast.user_id||H(Object(i.markChannelAsRead)(e.data.channel_id,"",!1))}(t);break;case R.E.PLUGIN_ENABLED:!function(e){var t=e.data.manifest;Object(N.b)(t).catch(function(e){console.error(e.message)})}(t);break;case R.E.PLUGIN_DISABLED:!function(e){var t=e.data.manifest;Object(N.d)(t)}(t);break;case R.E.USER_ROLE_UPDATED:!function(t){var n=k.a.getState().entities.users.profiles[t.data.user_id];if(n){var r=t.data.roles,o=n.roles.includes(R.i.PERMISSIONS_SYSTEM_ADMIN)&&!r.includes(R.i.PERMISSIONS_SYSTEM_ADMIN);k.a.dispatch({type:a.UserTypes.RECEIVED_PROFILE,data:U({},n,{roles:r})}),o&&e.location.pathname.startsWith("/admin_console")&&C.f()}}(t);break;case R.E.CONFIG_CHANGED:!function(e){k.a.dispatch({type:a.GeneralTypes.CLIENT_CONFIG_RECEIVED,data:e.data.config})}(t);break;case R.E.LICENSE_CHANGED:!function(e){k.a.dispatch({type:a.GeneralTypes.CLIENT_LICENSE_RECEIVED,data:e.data.license})}(t);break;case R.E.PLUGIN_STATUSES_CHANGED:!function(e){k.a.dispatch({type:a.AdminTypes.RECEIVED_PLUGIN_STATUSES,data:e.data.plugin_statuses})}(t);break;case R.E.OPEN_DIALOG:!function(e){var t=e.data&&e.data.dialog||{},n=JSON.parse(t);k.a.dispatch({type:a.IntegrationTypes.RECEIVED_DIALOG,data:n});var r=F().entities.integrations.dialogTriggerId;if(n.trigger_id!==r)return;k.a.dispatch(Object(v.b)({modalId:R.r.INTERACTIVE_DIALOG,dialogType:L.a}))}(t)}Object.values(G).forEach(function(e){e&&e.hasOwnProperty(t.event)&&"function"==typeof e[t.event]&&e[t.event](t)})}var ie,se,le,ce,ue,pe=(ie=100,le=[],ce=0,ue=function(){se=null,le.length>0&&H(function(e){return function(t,n){var a=e.map(function(e){return JSON.parse(e.data.post)}),o=a.map(l.receivedNewPost);t(Object(r.batchActions)(o)),t(Object(l.getThreadsForPosts)(a)),Object(l.getProfilesAndStatusesForPosts)(a,t,n)}}(le)),le=[],ce=0},function(e){se&&ce>2?(le.push(e)>200&&(le=[],console.log("channel broken because of too many incoming messages")),clearTimeout(se),se=setTimeout(ue,ie)):(ce+=1,H(function(e){return function(t,n){var r=JSON.parse(e.data.post);t(Object(P.e)(r,e)),Object(l.getProfilesAndStatusesForPosts)([r],t,n),r.user_id===Object(m.getCurrentUserId)(n())||Object(I.e)(r)||t({type:a.UserTypes.RECEIVED_STATUSES,data:[{user_id:r.user_id,status:R.O.ONLINE}]})}}(e)),clearTimeout(se),se=setTimeout(ue,ie))});function de(){var e;return e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(u.getTeam(t.data.team_id));case 2:return e.next=4,H(u.getMyTeamMembers());case 4:return e.next=6,H(u.getMyTeamUnreads());case 6:case"end":return e.stop()}},e)}),(de=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){D(o,r,a,i,s,"next",e)}function s(e){D(o,r,a,i,s,"throw",e)}i(void 0)})}).apply(this,arguments)}function me(e){return e.category===R.i.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW&&"true"===e.value}}).call(this,n(41))},1595:function(e,t,n){"use strict";n.d(t,"a",function(){return b});n(88),n(43),n(33),n(34),n(25),n(44),n(245),n(425),n(74);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(23),l=n(1770);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=d(t).call(this,e),n=!a||"object"!==c(a)&&"function"!=typeof a?m(r):a,h(m(n),"handleLoad",function(e){if(n.mounted){var t=e.target;n.props.onImageLoaded&&t.naturalHeight&&n.props.onImageLoaded({height:t.naturalHeight,width:t.naturalWidth}),n.setState({loaded:!0,error:!1})}}),h(m(n),"handleError",function(){n.mounted&&(n.props.onImageLoadFail&&n.props.onImageLoadFail(),n.setState({error:!0}))}),h(m(n),"onEnterKeyDown",function(e){"Enter"===e.key&&n.props.onClick(e)}),h(m(n),"renderImageLoaderIfNeeded",function(){return n.state.loaded||!n.props.showLoader||n.state.error?null:i.a.createElement("div",{style:{position:"absolute",top:"50%",transform:"translate(-50%, -50%)",left:"50%"}},i.a.createElement(l.a,{containerClass:"file__image-loading"}))}),h(m(n),"renderImageOrPlaceholder",function(){var e,t=n.props,r=t.dimensions,a=t.fileInfo,o=t.src,l=u(t,["dimensions","fileInfo","src"]),c={},p=Object(s.ab)("file_attachment.thumbnail","file thumbnail");return a&&(p+=" ".concat(a.name).toLowerCase()),r&&r.width&&!n.state.loaded&&(e=i.a.createElement("div",{className:"image-loading__container ".concat(n.props.className),style:{maxWidth:r.width}},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(r.width," ").concat(r.height),style:{verticalAlign:"middle",maxHeight:r.height,maxWidth:r.width}}))),Reflect.deleteProperty(l,"showLoader"),Reflect.deleteProperty(l,"onImageLoaded"),Reflect.deleteProperty(l,"onImageLoadFail"),!n.state.loaded&&r&&(c={position:"absolute",top:0,height:1,width:1,visibility:"hidden",overflow:"hidden"}),i.a.createElement(i.a.Fragment,null,e,i.a.createElement("div",{className:"style--none file-preview__button",style:c},i.a.createElement("img",Object.assign({},l,{"aria-label":p,tabIndex:"0",onKeyDown:n.onEnterKeyDown,className:n.props.className,src:o,onError:n.handleError,onLoad:n.handleLoad}))))}),n.state={loaded:!1},n.heightTimeout=0,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.renderImageLoaderIfNeeded(),this.renderImageOrPlaceholder())}}])&&p(n.prototype,r),a&&p(n,a),t}();h(b,"propTypes",{src:a.a.string.isRequired,dimensions:a.a.object,fileInfo:a.a.object,showLoader:a.a.bool,onImageLoaded:a.a.func,onImageLoadFail:a.a.func,onClick:a.a.func,className:a.a.string})},1598:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(88),n(43),n(33),n(34),n(25),n(44),n(245);var r=n(7),a=n.n(r),o=n(30),i=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),u(this,p(n).apply(this,arguments))}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,a.a.PureComponent),r=n,(o=[{key:"render",value:function(){var t=this.props,n=t.id,r=t.show,o=t.icon,i=t.text,s=l(t,["id","show","icon","text"]);if(!r)return null;var c=i;return o&&(c=a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"icon"},o),i)),a.a.createElement("li",{className:"MenuItem",role:"menuitem",id:n},a.a.createElement(e,Object.assign({text:c},s)))}}])&&c(r.prototype,o),i&&c(r,i),n}();return m(t,"propTypes",{show:i.a.bool,id:i.a.string,icon:i.a.node,text:i.a.string}),m(t,"defaultProps",{show:!0}),t}},1599:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement("span",this.props,a.a.createElement(o.c,{id:"generic_icons.search",defaultMessage:"Search Icon"},function(e){return a.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 19 18",role:"icon","aria-label":e},a.a.createElement("g",{stroke:"inherit",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.a.createElement("g",{transform:"translate(-719.000000, -20.000000)",strokeWidth:"1.5"},a.a.createElement("g",{transform:"translate(0.000000, 1.000000)"},a.a.createElement("g",{transform:"translate(63.000000, 10.000000)"},a.a.createElement("g",{transform:"translate(657.000000, 10.000000)"},a.a.createElement("circle",{cx:"7",cy:"7",r:"7"}),a.a.createElement("path",{d:"M12.5,11.5 L16.5,15.5",strokeLinecap:"round"})))))))}))}}])&&s(n.prototype,r),i&&s(n,i),t}()},1600:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement(o.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},function(e){return a.a.createElement("i",{className:"fa fa-angle-left",title:e})})}}])&&s(n.prototype,r),i&&s(n,i),t}()},1602:function(e,t,n){"use strict";n.d(t,"a",function(){return m});n(88),n(43),n(33),n(34),n(25),n(44),n(245);var r=n(30),a=n.n(r),o=n(7),i=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=u(t).call(this,e))||"object"!==s(a)&&"function"!=typeof a?p(r):a).show=n.show.bind(p(n)),n.hide=n.hide.bind(p(n)),n.state={show:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.Component),n=t,(r=[{key:"show",value:function(e){e&&e.preventDefault(),this.setState({show:!0})}},{key:"hide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.children,a=n.dialogType,o=n.dialogProps,s=n.onClick,c=l(n,["children","dialogType","dialogProps","onClick"]),u=this.show;return s&&(u=function(e){s(),t.show(e)}),this.state.show&&(e=i.a.createElement(a,Object.assign({},o,{onHide:function(){t.hide(),o.onHide&&o.onHide()}}))),i.a.createElement("button",Object.assign({},c,{className:"style--none "+c.className,onClick:u}),r,e)}}])&&c(n.prototype,r),a&&c(n,a),t}();m.propTypes={children:a.a.node.isRequired,dialogType:a.a.func.isRequired,dialogProps:a.a.object,onClick:a.a.func,className:a.a.string},m.defaultProps={dialogProps:{},className:""}},1614:function(e,t,n){"use strict";n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(56);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){return i.a.createElement("span",this.props,i.a.createElement(s.c,{id:"mobile.set_status.away.icon",defaultMessage:"Away Icon"},function(e){return i.a.createElement("svg",{width:"13px",height:"13px",viewBox:"0 0 12 12",style:f,role:"icon","aria-label":e},i.a.createElement("path",{className:"away--icon",d:"M9.081,5.712C9.267,5.712 9.417,5.863 9.417,6.048L9.417,9.086L11.864,10.499C12.025,10.592 12.08,10.797 11.987,10.958L11.482,11.832C11.39,11.993 11.184,12.048 11.023,11.955L7.904,10.154C7.788,10.087 7.727,9.961 7.737,9.836C7.736,9.827 7.736,9.818 7.736,9.809L7.736,6.048C7.736,5.863 7.886,5.712 8.072,5.712L9.081,5.712ZM4.812,11.513L4.605,11.513C2.325,11.41 0.253,10.374 0.046,9.027C-0.058,8.923 0.046,8.509 0.046,8.405C0.15,7.576 0.357,6.437 0.771,5.815C0.978,5.401 2.015,5.297 2.015,5.297C2.015,5.297 2.015,7.369 4.605,7.369L5.019,7.369C4.915,7.784 4.812,8.198 4.812,8.612C4.812,9.648 5.226,10.581 5.848,11.41C5.537,11.513 5.123,11.513 4.812,11.513ZM4.605,0.117C6.034,0.117 7.195,1.277 7.195,2.707C7.195,4.136 6.034,5.297 4.605,5.297C3.175,5.297 2.015,4.136 2.015,2.707C2.015,1.277 3.175,0.117 4.605,0.117Z"}))}))}}])&&c(n.prototype,r),a&&c(n,a),t}(),f={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,g(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){return i.a.createElement("span",this.props,i.a.createElement(s.c,{id:"mobile.set_status.away.icon",defaultMessage:"Away Icon"},function(e){return i.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:E,role:"icon","aria-label":e},i.a.createElement("path",{className:"away--icon",d:"M10,0C15.519,0 20,4.481 20,10C20,15.519 15.519,20 10,20C4.481,20 0,15.519 0,10C0,4.481 4.481,0 10,0ZM10.27,3C10.949,3 11.5,3.586 11.5,4.307L11.5,9.379L15.002,12.881C15.492,13.37 15.499,14.158 15.019,14.638L14.638,15.019C14.158,15.499 13.37,15.492 12.881,15.002L8.887,11.008C8.739,10.861 8.636,10.686 8.576,10.501C8.528,10.402 8.5,10.299 8.5,10.193L8.5,4.307C8.5,3.586 9.051,3 9.73,3L10.27,3Z"}))}))}}])&&b(n.prototype,r),a&&b(n,a),t}(),E={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,C(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){return i.a.createElement("span",this.props,i.a.createElement(s.c,{id:"mobile.set_status.dnd.icon",defaultMessage:"Do Not Disturb Icon"},function(e){return i.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",width:"13px",height:"13px",viewBox:"-299 391 12 12",style:j,role:"icon","aria-label":e},i.a.createElement("g",null,i.a.createElement("ellipse",{className:"dnd--icon",cx:"-294.6",cy:"394",rx:"2.5",ry:"2.5"}),i.a.createElement("path",{className:"dnd--icon",d:"M-293.8,399.4c0-0.4,0.1-0.7,0.2-1c-0.3,0.1-0.6,0.2-1,0.2c-2.5,0-2.5-2-2.5-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5 c0,0.1-0.1,0.5,0,0.6c0.2,1.3,2.2,2.3,4.4,2.4c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0c0.7,0,1.4-0.1,2-0.3 C-293.3,401.5-293.8,400.5-293.8,399.4z"})),i.a.createElement("path",{className:"dnd--icon",d:"M-287,400c0,0.1-0.1,0.1-0.1,0.1l-4.9,0c-0.1,0-0.1-0.1-0.1-0.1v-1.6c0-0.1,0.1-0.1,0.1-0.1l4.9,0c0.1,0,0.1,0.1,0.1,0.1 V400z"}))}))}}])&&O(n.prototype,r),a&&O(n,a),t}(),j={enableBackground:"new -299 391 12 12"};function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,R(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){return i.a.createElement("span",this.props,i.a.createElement(s.c,{id:"mobile.set_status.dnd.icon",defaultMessage:"Do Not Disturb Icon"},function(e){return i.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:x,role:"icon","aria-label":e},i.a.createElement("path",{className:"dnd--icon",d:"M10,0c5.519,0 10,4.481 10,10c0,5.519 -4.481,10 -10,10c-5.519,0 -10,-4.481 -10,-10c0,-5.519 4.481,-10 10,-10Zm5.25,8.5l-10.5,0c-0.414,0 -0.75,0.336 -0.75,0.75l0,1.5c0,0.414 0.336,0.75 0.75,0.75l10.5,0c0.414,0 0.75,-0.336 0.75,-0.75l0,-1.5c0,-0.414 -0.336,-0.75 -0.75,-0.75Z"}))}))}}])&&M(n.prototype,r),a&&M(n,a),t}(),x={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U(this,q(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){return i.a.createElement("span",this.props,i.a.createElement(s.c,{id:"mobile.set_status.offline.icon",defaultMessage:"Offline Icon"},function(e){return i.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",width:"13px",height:"13px",viewBox:"-299 391 12 12",style:B,role:"icon","aria-label":e},i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("ellipse",{className:"offline--icon",cx:"-294.5",cy:"394",rx:"2.5",ry:"2.5"}),i.a.createElement("path",{className:"offline--icon",d:"M-294.3,399.7c0-0.4,0.1-0.8,0.2-1.2c-0.1,0-0.2,0-0.4,0c-2.5,0-2.5-2-2.5-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5 c0,0.1-0.1,0.5,0,0.6c0.2,1.3,2.2,2.3,4.4,2.4h0.1h0.1c0.3,0,0.7,0,1-0.1C-293.9,401.6-294.3,400.7-294.3,399.7z"}))),i.a.createElement("g",null,i.a.createElement("path",{className:"offline--icon",d:"M-288.9,399.4l1.8-1.8c0.1-0.1,0.1-0.3,0-0.3l-0.7-0.7c-0.1-0.1-0.3-0.1-0.3,0l-1.8,1.8l-1.8-1.8c-0.1-0.1-0.3-0.1-0.3,0 l-0.7,0.7c-0.1,0.1-0.1,0.3,0,0.3l1.8,1.8l-1.8,1.8c-0.1,0.1-0.1,0.3,0,0.3l0.7,0.7c0.1,0.1,0.3,0.1,0.3,0l1.8-1.8l1.8,1.8 c0.1,0.1,0.3,0.1,0.3,0l0.7-0.7c0.1-0.1,0.1-0.3,0-0.3L-288.9,399.4z"})))}))}}])&&D(n.prototype,r),a&&D(n,a),t}(),B={enableBackground:"new -299 391 12 12"};function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,z(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){return i.a.createElement("span",this.props,i.a.createElement(s.c,{id:"mobile.set_status.offline.icon",defaultMessage:"Offline Icon"},function(e){return i.a.createElement("svg",{width:"100%",height:"100%",className:"offline--icon",viewBox:"0 0 20 20",style:Q,role:"icon","aria-label":e},i.a.createElement("path",{d:"M10,0c5.519,0 10,4.481 10,10c0,5.519 -4.481,10 -10,10c-5.519,0 -10,-4.481 -10,-10c0,-5.519 4.481,-10 10,-10Zm0,2c4.415,0 8,3.585 8,8c0,4.415 -3.585,8 -8,8c-4.415,0 -8,-3.585 -8,-8c0,-4.415 3.585,-8 8,-8Z"}))}))}}])&&V(n.prototype,r),a&&V(n,a),t}(),Q={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),X(this,$(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){return i.a.createElement("span",this.props,i.a.createElement(s.c,{id:"mobile.set_status.online.icon",defaultMessage:"Online Icon"},function(e){return i.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",width:"13px",height:"13px",viewBox:"-243 245 12 12",style:ne,role:"icon","aria-label":e},i.a.createElement("g",null,i.a.createElement("path",{className:"online--icon",d:"M-236,250.5C-236,250.5-236,250.5-236,250.5C-236,250.5-236,250.5-236,250.5C-236,250.5-236,250.5-236,250.5z"}),i.a.createElement("ellipse",{className:"online--icon",cx:"-238.5",cy:"248",rx:"2.5",ry:"2.5"})),i.a.createElement("path",{className:"online--icon",d:"M-238.9,253.8c0-0.4,0.1-0.9,0.2-1.3c-2.2-0.2-2.2-2-2.2-2s-1,0.1-1.2,0.5c-0.4,0.6-0.6,1.7-0.7,2.5c0,0.1-0.1,0.5,0,0.6 c0.2,1.3,2.2,2.3,4.4,2.4c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0c0,0,0.1,0,0.1,0C-238.7,255.7-238.9,254.8-238.9,253.8z"}),i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{className:"online--icon",d:"M-232.3,250.1l1.3,1.3c0,0,0,0.1,0,0.1l-4.1,4.1c0,0,0,0-0.1,0c0,0,0,0,0,0l-2.7-2.7c0,0,0-0.1,0-0.1l1.2-1.2 c0,0,0.1,0,0.1,0l1.4,1.4l2.9-2.9C-232.4,250.1-232.3,250.1-232.3,250.1z"}))))}))}}])&&Z(n.prototype,r),a&&Z(n,a),t}(),ne={enableBackground:"new -243 245 12 12"};function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,ie(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){return i.a.createElement("span",this.props,i.a.createElement(s.c,{id:"mobile.set_status.online.icon",defaultMessage:"Online Icon"},function(e){return i.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",style:ce,role:"icon","aria-label":e},i.a.createElement("path",{className:"online--icon",d:"M10,0c5.519,0 10,4.481 10,10c0,5.519 -4.481,10 -10,10c-5.519,0 -10,-4.481 -10,-10c0,-5.519 4.481,-10 10,-10Zm6.19,7.18c0,0.208 -0.075,0.384 -0.224,0.53l-5.782,5.64l-1.087,1.059c-0.149,0.146 -0.33,0.218 -0.543,0.218c-0.213,0 -0.394,-0.072 -0.543,-0.218l-1.086,-1.059l-2.891,-2.82c-0.149,-0.146 -0.224,-0.322 -0.224,-0.53c0,-0.208 0.075,-0.384 0.224,-0.53l1.086,-1.059c0.149,-0.146 0.33,-0.218 0.543,-0.218c0.213,0 0.394,0.072 0.543,0.218l2.348,2.298l5.24,-5.118c0.149,-0.146 0.33,-0.218 0.543,-0.218c0.213,0 0.394,0.072 0.543,0.218l1.086,1.059c0.149,0.146 0.224,0.322 0.224,0.53Z"}))}))}}])&&ae(n.prototype,r),a&&ae(n,a),t}(),ce={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return be});var be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),de(this,me(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.button,n=e.status,r=e.type;if(!n)return null;var a="status "+this.props.className;t&&(a=this.props.className);var o="span";return o="avatar"===r?"online"===n?te:"away"===n?m:"dnd"===n?T:F:"online"===n?le:"away"===n?_:"dnd"===n?A:Y,i.a.createElement(o,{className:a})}}])&&pe(n.prototype,r),a&&pe(n,a),t}();he(be,"propTypes",{button:a.a.bool,status:a.a.string,className:a.a.string,type:a.a.string}),he(be,"defaultProps",{className:"",button:!1})},1616:function(e,t,n){"use strict";var r=n(418),a=n(24),o=(n(88),n(43),n(30)),i=n.n(o),s=n(7),l=n.n(s),c=n(421);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=d(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==u(a)&&"function"!=typeof a?m(r):a,h(m(n),"isSVGImage",function(){return n.props.imageMetadata?"svg"===n.props.imageMetadata.format:-1!==n.props.src.indexOf(".svg")}),h(m(n),"shouldRenderImage",function(){return n.props.enableSVGs||!n.isSVGImage()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,l.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=Object(c.f)(this.props.src,this.props.hasImageProxy);return this.shouldRenderImage()||(e=""),this.props.children(e)}}])&&p(n.prototype,r),a&&p(n,a),t}();h(b,"propTypes",{children:i.a.func.isRequired,enableSVGs:i.a.bool.isRequired,hasImageProxy:i.a.bool.isRequired,imageMetadata:i.a.object,src:i.a.string.isRequired});t.a=Object(r.connect)(function(e){var t=Object(a.getConfig)(e);return{enableSVGs:"true"===t.EnableSVGs,hasImageProxy:"true"===t.HasImageProxy}})(b)},1617:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return m}),n.d(t,"b",function(){return f});n(945),n(425),n(245),n(116),n(33),n(34),n(25),n(118),n(117);var r=n(946),a=n(40),o=n(36),i=n(0),s=n(1877),l=n(310);function c(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function u(){return function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t(Object(r.getClientConfig)()),t(Object(r.getLicenseConfig)())],e.next=3,Promise.all(n);case 3:if(o=e.sent,!(document.cookie.indexOf("MMUSERID=")>-1)){e.next=10;break}return e.t0=o,e.next=8,t(a.loadMe());case 8:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){c(o,r,a,i,s,"next",e)}function s(e){c(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()}var p={};function d(e,t){return p[e]=t,function(e,n){var r=n(),a=Object(l.a)(r),o=Object(l.b)(r,a),i={};Object.assign(i,o),o&&h(e,i,t(a),a)}}function m(e){Reflect.deleteProperty(p,e)}function f(e,t){return function(n){var r={};Object.values(p).forEach(function(t){Object.assign(r,t(e))}),"en"!==e?o.Client4.getTranslations(t).then(function(t){h(n,r,t,e)}).catch(function(){}):h(n,r,s,e)}}function h(e,t,n,r){Object.assign(t,n),e({type:i.e.RECEIVED_TRANSLATIONS,data:{locale:r,translations:t}})}},1622:function(e,t,n){"use strict";var r=n(119),a=n(206),o=n(147),i=n(13),s=n(0),l=n(23);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=i.a.dispatch,p=i.a.getState,d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"setItem",value:function(e,t){u(o.f(e,t))}},{key:"getItem",value:function(e,t){return a.d(e,t)(p())}},{key:"removeItem",value:function(e){u(o.d(e))}},{key:"setGlobalItem",value:function(e,t){u(o.e(e,t))}},{key:"getGlobalItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a.c(e,t)(p())}},{key:"removeGlobalItem",value:function(e){u(o.c(e))}},{key:"signalLogout",value:function(){if(this.isLocalStorageSupported()){var e=l.r();l.fb(s.G.ANNOUNCEMENT),sessionStorage.setItem(s.G.LOGOUT,e),localStorage.setItem(s.G.LOGOUT,e),localStorage.removeItem(s.G.LOGOUT)}}},{key:"isSignallingLogout",value:function(e){return e===sessionStorage.getItem(s.G.LOGOUT)}},{key:"signalLogin",value:function(){if(this.isLocalStorageSupported()){var e=l.r();sessionStorage.setItem(s.G.LOGIN,e),localStorage.setItem(s.G.LOGIN,e),localStorage.removeItem(s.G.LOGIN)}}},{key:"isSignallingLogin",value:function(e){return e===sessionStorage.getItem(s.G.LOGIN)}},{key:"clear",value:function(e){u(o.b(e))}},{key:"isLocalStorageSupported",value:function(){if(this.hasCheckedLocalStorage)return this.localStorageSupported;this.localStorageSupported=!1;try{localStorage.setItem("__testLocal__","1"),"1"===localStorage.getItem("__testLocal__")&&(this.localStorageSupported=!0),localStorage.removeItem("__testLocal__","1")}catch(e){this.localStorageSupported=!1}try{sessionStorage.setItem("__testSession__","1"),sessionStorage.removeItem("__testSession__")}catch(e){r.a.push("/error?type="+s.k.LOCAL_STORAGE)}return this.hasCheckedLocalStorage=!0,this.localStorageSupported}},{key:"hasSeenLandingPage",value:function(){return localStorage.getItem(s.G.LANDING_PAGE_SEEN)}},{key:"setLandingPageSeen",value:function(e){localStorage.setItem(s.G.LANDING_PAGE_SEEN,e)}}])&&c(t.prototype,n),i&&c(t,i),e}());t.a=d},1623:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(74);function r(e,t){return e?e.filter(function(e){return e&&!e.delete_at>0&&null!=e.display_name}).sort(function(e,n){return function(e,t,n){return t.display_name!==n.display_name?t.display_name.localeCompare(n.display_name,e,{numeric:!0}):t.name.localeCompare(n.name,e,{numeric:!0})}(t,e,n)}):[]}},1637:function(e,t,n){e.exports=n.p+"files/002bcefbc1ddd0bbe72d15a7873f7a78.png"},1638:function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d,m,f,h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props.children,t=this.props.divider||i.a.createElement("li",{className:"MenuGroup menu-divider"});return i.a.createElement(i.a.Fragment,null,t,e)}}])&&l(n.prototype,r),a&&l(n,a),t}();d=h,m="propTypes",f={divider:a.a.node,children:a.a.node},m in d?Object.defineProperty(d,m,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[m]=f},1639:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement("span",this.props,a.a.createElement(o.c,{id:"generic_icons.menu",defaultMessage:"Menu Icon"},function(e){return a.a.createElement("svg",{width:"16px",height:"10px",viewBox:"0 0 16 10",version:"1.1",role:"icon",title:e},a.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},a.a.createElement("g",{transform:"translate(-188.000000, -38.000000)",fillRule:"nonzero",fill:"inherit"},a.a.createElement("g",null,a.a.createElement("g",null,a.a.createElement("g",{transform:"translate(188.000000, 38.000000)"},a.a.createElement("path",{d:"M15.5,0 C15.776,0 16,0.224 16,0.5 L16,1.5 C16,1.776 15.776,2 15.5,2 L0.5,2 C0.224,2 0,1.776 0,1.5 L0,0.5 C0,0.224 0.224,0 0.5,0 L15.5,0 Z M15.5,4 C15.776,4 16,4.224 16,4.5 L16,5.5 C16,5.776 15.776,6 15.5,6 L0.5,6 C0.224,6 0,5.776 0,5.5 L0,4.5 C0,4.224 0.224,4 0.5,4 L15.5,4 Z M15.5,8 C15.776,8 16,8.224 16,8.5 L16,9.5 C16,9.776 15.776,10 15.5,10 L0.5,10 C0.224,10 0,9.776 0,9.5 L0,8.5 C0,8.224 0.224,8 0.5,8 L15.5,8 Z"})))))))}))}}])&&s(n.prototype,r),i&&s(n,i),t}()},1655:function(e,t,n){"use strict";n(43),n(33),n(34),n(25),n(44),n(245),n(74);var r=n(7),a=n.n(r),o=n(1928),i=n(1868),s=(n(88),n(30)),l=n.n(s),c=n(56);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h,b,y,g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,m(t).call(this,e))).state={katex:null},n}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a.a.Component),r=t,(o=[{key:"componentDidMount",value:function(){var e=this;n.e(33).then(n.t.bind(null,2384,7)).then(function(t){e.setState({katex:t})})}},{key:"render",value:function(){if(null==this.state.katex)return a.a.createElement("div",{className:"post-body--code tex"},this.props.content);try{var e=this.state.katex.renderToString(this.props.content,{throwOnError:!1,displayMode:!0});return a.a.createElement("div",{className:"post-body--code tex",dangerouslySetInnerHTML:{__html:e}})}catch(e){return a.a.createElement("div",{className:"post-body--code tex"},a.a.createElement(c.c,{id:"katex.error",defaultMessage:"Couldn't compile your Latex code. Please review the syntax and try again."}))}}}])&&p(r.prototype,o),i&&p(r,i),t}();h=g,b="propTypes",y={content:l.a.string.isRequired},b in h?Object.defineProperty(h,b,{value:y,enumerable:!0,configurable:!0,writable:!0}):h[b]=y;var v=n(1973),_=n(1616),E=n(1595);function w(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function O(e){var t=e.imageMetadata,n=e.src,r=w(e,["imageMetadata","src"]);return a.a.createElement(_.a,{src:n,imageMetadata:t},function(e){return e?a.a.createElement(E.a,Object.assign({},r,{src:e,dimensions:t})):a.a.createElement("a",{className:"theme markdown__link",href:n,rel:"noopener noreferrer",target:"_blank",title:r.title},r.alt)})}O.propTypes={alt:l.a.string,imageMetadata:l.a.object,src:l.a.string.isRequired,title:l.a.string};var S=n(418),C=n(249),P=n(129);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,M(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=":"+this.props.name+":";return this.props.imageUrl?a.a.createElement("span",{alt:e,className:"emoticon",title:e,style:{backgroundImage:"url("+this.props.imageUrl+")"}}):e}}])&&j(n.prototype,r),o&&j(n,o),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(R,"propTypes",{name:l.a.string.isRequired,imageUrl:l.a.string.isRequired});var I=Object(S.connect)(function(e,t){var n=Object(P.a)(e).get(t.name);return{imageUrl:n?Object(C.getEmojiImageUrl)(n):""}})(R);function A(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;var r=new o.Parser,s=new o.ProcessNodeDefinitions(a.a),l=[{replaceChildren:!1,shouldProcessNode:function(e){return"tag"===e.type&&"input"===e.name&&"checkbox"===e.attribs.type},processNode:function(e){var t=e.attribs||{};return e.attribs.checked=Boolean(t.checked),a.a.createElement("input",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){x(e,t,n[t])})}return e}({},e.attribs))}}];n.hasPluginTooltips&&l.push({replaceChildren:!0,shouldProcessNode:function(e){return"tag"===e.type&&"a"===e.name&&e.attribs.href},processNode:function(e,t){return a.a.createElement(v.a,{href:e.attribs.href,title:t[0]})}});"mentions"in n&&!n.mentions||l.push({replaceChildren:!0,shouldProcessNode:function(e){return e.attribs&&e.attribs["data-mention"]},processNode:function(e,n){var r=e.attribs["data-mention"];return a.a.createElement(i.a,{mentionName:r,isRHS:t,hasMention:!0},n)}});"emoji"in n&&!n.emoji||l.push({replaceChildren:!0,shouldProcessNode:function(e){return e.attribs&&e.attribs["data-emoticon"]},processNode:function(e){var t=e.attribs["data-emoticon"];return a.a.createElement(I,{name:t})}});return"images"in n&&!n.images||l.push({shouldProcessNode:function(e){return"tag"===e.type&&"img"===e.name},processNode:function(e){var t=e.attribs,r=t.class,o=A(t,["class"]);return a.a.createElement(O,Object.assign({className:r,imageMetadata:n.imagesMetadata&&n.imagesMetadata[o.src]},o,n.imageProps))}}),"latex"in n&&!n.latex||l.push({shouldProcessNode:function(e){return e.attribs&&e.attribs["data-latex"]},processNode:function(e){return a.a.createElement(g,{content:e.attribs["data-latex"]})}}),l.push({shouldProcessNode:function(){return!0},processNode:s.processDefaultNode}),r.parseWithInstructions(e,function(){return!0},l)}},1656:function(e,t,n){"use strict";var r=n(418),a=n(20),o=n(1503),i=(n(88),n(43),n(33),n(34),n(25),n(44),n(245),n(30)),s=n.n(i),l=n(7),c=n.n(l),u=n(56);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,h(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,c.a.Component),n=t,(r=[{key:"show",value:function(e){e&&e.preventDefault();var t=this.props,n={modalId:t.modalId,dialogProps:t.dialogProps,dialogType:t.dialogType};this.props.actions.openModal(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.onClick,a=d(t,["children","onClick"]),o=this.context.intl.formatMessage,i="".concat(a.accessibilityLabel," ").concat(o({id:"accessibility.button.dialog",defaultMessage:"Dialog"}));delete a.modalId,delete a.dialogType,delete a.dialogProps,delete a.accessibilityLabel;var s=function(){return e.show()};return r&&(s=function(t){r(),e.show(t)}),c.a.createElement("button",Object.assign({},a,{className:"style--none "+a.className,"data-toggle":"modal toggle","aria-label":i,onClick:s}),n)}}])&&m(n.prototype,r),a&&m(n,a),t}();y(g,"propTypes",{accessibilityLabel:s.a.string,children:s.a.node.isRequired,modalId:s.a.string.isRequired,dialogType:s.a.func.isRequired,dialogProps:s.a.object,onClick:s.a.func,className:s.a.string,actions:s.a.shape({openModal:s.a.func.isRequired}).isRequired}),y(g,"defaultProps",{dialogProps:{},className:""}),y(g,"contextTypes",{intl:u.i.isRequired});t.a=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({openModal:o.b},e)}})(g)},1657:function(e,t,n){"use strict";var r=n(418),a=n(20),o=n(40),i=n(24),s=n(12),l=(n(88),n(43),n(183)),c=n.n(l),u=n(7),p=n.n(u),d=n(1739),m=n(419),f=n.n(m),h=n(56),b=n(30),y=n.n(b),g=n(0),v=n(23),_=n(57),E=n(1498),w=n(428),O=n(1967),S=n.n(O),C=n(1762),P=n.n(C);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=Object(h.g)({general:{id:Object(_.b)("user.settings.modal.general"),defaultMessage:"General"},security:{id:Object(_.b)("user.settings.modal.security"),defaultMessage:"Security"},notifications:{id:Object(_.b)("user.settings.modal.notifications"),defaultMessage:"Notifications"},display:{id:Object(_.b)("user.settings.modal.display"),defaultMessage:"Display"},sidebar:{id:Object(_.b)("user.settings.modal.sidebar"),defaultMessage:"Sidebar"},advanced:{id:Object(_.b)("user.settings.modal.advanced"),defaultMessage:"Advanced"},checkEmail:{id:"user.settings.general.checkEmail",defaultMessage:"Check your email at {email} to verify the address. Cannot find the email?"},confirmTitle:{id:Object(_.b)("user.settings.modal.confirmTitle"),defaultMessage:"Discard Changes?"},confirmMsg:{id:Object(_.b)("user.settings.modal.confirmMsg"),defaultMessage:"You have unsaved changes, are you sure you want to discard them?"},confirmBtns:{id:Object(_.b)("user.settings.modal.confirmBtns"),defaultMessage:"Yes, Discard"}}),A=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=k(t).call(this,e),n=!a||"object"!==T(a)&&"function"!=typeof a?M(r):a,R(M(n),"handleResend",function(e){n.setState({resendStatus:"sending"}),n.props.actions.sendVerificationEmail(e).then(function(e){var t=e.data,r=e.error;t?n.setState({resendStatus:"success"}):r&&n.setState({resendStatus:"failure"})})}),R(M(n),"handleKeyDown",function(e){v.e(e)&&e.shiftKey&&v.S(e,g.Q.KeyCodes.A)&&n.handleHide()}),R(M(n),"handleHide",function(){n.requireConfirm?n.showConfirmModal(function(){return n.handleHide()}):n.setState({show:!1})}),R(M(n),"handleHidden",function(){n.setState({active_tab:"general",active_section:""}),n.props.onHide()}),R(M(n),"handleCollapse",function(){c()(f.a.findDOMNode(n.modalBodyRef.current)).closest(".modal-dialog").removeClass("display--content"),n.setState({active_tab:"",active_section:""})}),R(M(n),"handleConfirm",function(){n.setState({showConfirmModal:!1,enforceFocus:!0}),n.requireConfirm=!1,n.customConfirmAction=null,n.afterConfirm&&(n.afterConfirm(),n.afterConfirm=null)}),R(M(n),"handleCancelConfirmation",function(){n.setState({showConfirmModal:!1,enforceFocus:!0}),n.afterConfirm=null}),R(M(n),"showConfirmModal",function(e){e&&(n.afterConfirm=e),n.customConfirmAction?n.customConfirmAction(n.handleConfirm):n.setState({showConfirmModal:!0,enforceFocus:!1})}),R(M(n),"closeModal",function(){n.requireConfirm?n.showConfirmModal(n.closeModal):n.handleHide()}),R(M(n),"collapseModal",function(){n.requireConfirm?n.showConfirmModal(n.collapseModal):n.handleCollapse()}),R(M(n),"updateTab",function(e,t){!t&&n.requireConfirm?n.showConfirmModal(function(){return n.updateTab(e,!0)}):n.setState({active_tab:e,active_section:""})}),R(M(n),"updateSection",function(e,t){!t&&n.requireConfirm?n.showConfirmModal(function(){return n.updateSection(e,!0)}):n.setState({active_section:e})}),n.state={active_tab:"general",active_section:"",showConfirmModal:!1,enforceFocus:!0,show:!0},n.requireConfirm=!1,n.customConfirmAction=null,n.modalBodyRef=p.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,p.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e,t){v.U()||c()(".settings-content .minimize-settings").perfectScrollbar("update"),this.state.active_tab!==t.active_tab&&c()(f.a.findDOMNode(this.modalBodyRef.current)).scrollTop(0)}},{key:"render",value:function(){var e=this,t=this.props.intl.formatMessage;if(null==this.props.currentUser)return p.a.createElement("div",null);var n=[];return n.push({name:"general",uiName:t(I.general),icon:"icon fa fa-gear",iconTitle:v.ab("user.settings.general.icon","General Settings Icon")}),n.push({name:"security",uiName:t(I.security),icon:"icon fa fa-lock",iconTitle:v.ab("user.settings.security.icon","Security Settings Icon")}),n.push({name:"notifications",uiName:t(I.notifications),icon:"icon fa fa-exclamation-circle",iconTitle:v.ab("user.settings.notifications.icon","Notification Settings Icon")}),n.push({name:"display",uiName:t(I.display),icon:"icon fa fa-eye",iconTitle:v.ab("user.settings.display.icon","Display Settings Icon")}),n.push({name:"sidebar",uiName:t(I.sidebar),icon:"icon fa fa-columns",iconTitle:v.ab("user.settings.sidebar.icon","Sidebar Settings Icon")}),n.push({name:"advanced",uiName:t(I.advanced),icon:"icon fa fa-list-alt",iconTitle:v.ab("user.settings.advance.icon","Advanced Settings Icon")}),p.a.createElement(d.a,{id:"accountSettingsModal",dialogClassName:"a11y__modal settings-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleHidden,enforceFocus:this.state.enforceFocus,role:"dialog","aria-labelledby":"accountSettingsModalLabel"},p.a.createElement(d.a.Header,{id:"accountSettingsHeader",closeButton:!0},p.a.createElement(d.a.Title,{componentClass:"h1",id:"accountSettingsModalLabel"},p.a.createElement(h.c,{id:"user.settings.modal.title",defaultMessage:"Account Settings"}))),p.a.createElement(d.a.Body,{ref:this.modalBodyRef},p.a.createElement("div",{className:"settings-table"},p.a.createElement("div",{className:"settings-links"},p.a.createElement(w.a,{doLoad:P.a,tabs:n,activeTab:this.state.active_tab,updateTab:this.updateTab})),p.a.createElement("div",{className:"settings-content minimize-settings"},p.a.createElement(w.a,{doLoad:S.a,activeTab:this.state.active_tab,activeSection:this.state.active_section,updateSection:this.updateSection,updateTab:this.updateTab,closeModal:this.closeModal,collapseModal:this.collapseModal,setEnforceFocus:function(t){return e.setState({enforceFocus:t})},setRequireConfirm:function(t,n){e.requireConfirm=t,e.customConfirmAction=n}})))),p.a.createElement(E.a,{title:t(I.confirmTitle),message:t(I.confirmMsg),confirmButtonText:t(I.confirmBtns),show:this.state.showConfirmModal,onConfirm:this.handleConfirm,onCancel:this.handleCancelConfirmation}))}}])&&j(n.prototype,r),a&&j(n,a),t}();R(A,"propTypes",{currentUser:y.a.object.isRequired,onHide:y.a.func.isRequired,intl:h.i.isRequired,actions:y.a.shape({sendVerificationEmail:y.a.func.isRequred}).isRequired});var x=Object(h.h)(A);t.a=Object(r.connect)(function(e){var t=Object(i.getConfig)(e),n="true"===t.CloseUnusedDirectMessages,r="true"===t.ExperimentalChannelOrganization,a="true"===t.SendEmailNotifications,o="true"===t.RequireEmailVerification;return{currentUser:Object(s.getCurrentUser)(e),closeUnusedDirectMessages:n,experimentalChannelOrganization:r,sendEmailNotifications:a,requireEmailVerification:o}},function(e){return{actions:Object(a.bindActionCreators)({sendVerificationEmail:o.sendVerificationEmail},e)}})(x)},1658:function(e,t,n){"use strict";n(74),n(317),n(304);var r=n(418),a=n(20),o=n(1567),i=n(1601),s=n(31),l=n(1547),c=(n(210),n(156),n(88),n(43),n(422),n(116),n(118),n(245),n(33),n(34),n(25),n(117),n(30)),u=n.n(c),p=n(7),d=n.n(p),m=n(1739),f=n(56),h=n(14),b=n(0),y=n(23),g=n(1572),v=n(1637),_=n.n(v),E=n(1582);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function C(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){S(o,r,a,i,s,"next",e)}function s(e){S(o,r,a,i,s,"throw",e)}i(void 0)})}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=50,R=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=T(t).call(this,e),n=!a||"object"!==w(a)&&"function"!=typeof a?j(r):a,M(j(n),"handleHide",function(){n.props.actions.setModalSearchTerm(""),n.setState({show:!1})}),M(j(n),"handleExit",function(){n.props.onHide&&n.props.onHide()}),M(j(n),"handleResponse",function(e){var t=null;e&&e.message&&(t=e.message),n.setState({saving:!1,addError:t})}),M(j(n),"handleSubmit",function(){var e=C(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),0!==(r=n.state.values.map(function(e){return e.id})).length){e.next=4;break}return e.abrupt("return");case 4:if(!n.props.skipCommit){e.next=8;break}return n.props.onAddCallback&&n.props.onAddCallback(r),n.handleHide(),e.abrupt("return");case 8:n.setState({saving:!0}),r.forEach(function(){var e=C(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.linkGroupSyncable(t,n.props.currentTeamId,h.Groups.SYNCABLE_TYPE_TEAM,{auto_add:!0});case 2:r=e.sent,a=r.error,n.handleResponse(a),a||n.handleHide();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(j(n),"addValue",function(e){var t=Object.assign([],n.state.values),r=t.map(function(e){return e.id});e&&e.id&&-1===r.indexOf(e.id)&&t.push(e),n.setState({values:t})}),M(j(n),"setGroupsLoadingState",function(e){n.setState({loadingGroups:e})}),M(j(n),"handlePageChange",function(e,t){e>t&&(n.setGroupsLoadingState(!0),n.props.actions.getGroupsNotAssociatedToTeam(n.props.currentTeamId,n.props.searchTerm,e,N+1).then(function(){n.setGroupsLoadingState(!1)}))}),M(j(n),"handleDelete",function(e){n.setState({values:e})}),M(j(n),"search",function(e){n.props.actions.setModalSearchTerm(e)}),n.searchTimeoutId=0,n.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingGroups:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,d.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;Promise.all([this.props.actions.getGroupsNotAssociatedToTeam(this.props.currentTeamId,"",0,N+1),this.props.actions.getAllGroupsAssociatedToTeam(this.props.currentTeamId)]).then(function(){e.setGroupsLoadingState(!1)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);var n=e.searchTerm;if(""===n)return;this.searchTimeoutId=setTimeout(C(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setGroupsLoadingState(!0),e.next=3,t.props.actions.getGroupsNotAssociatedToTeam(t.props.currentTeamId,n);case 3:t.setGroupsLoadingState(!1);case 4:case"end":return e.stop()}},e)})),b.Q.SEARCH_TIMEOUT_MILLISECONDS)}}},{key:"renderOption",value:function(e,t,n){var r=t?"more-modal__row--selected":"";return d.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+r,onClick:function(){return n(e)}},d.a.createElement("img",{className:"more-modal__image",src:_.a,alt:"group picture",width:"32",height:"32"}),d.a.createElement("div",{className:"more-modal__details"},d.a.createElement("div",{className:"more-modal__name"},e.display_name,"","-","",d.a.createElement("span",{className:"more-modal__name_sub"},d.a.createElement(f.c,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),d.a.createElement("div",{className:"more-modal__actions"},d.a.createElement("div",{className:"more-modal__actions--round"},d.a.createElement(E.a,null))))}},{key:"renderValue",value:function(e){return e.data.display_name}},{key:"render",value:function(){var e=this,t=d.a.createElement("div",{id:"numGroupsRemaining"},d.a.createElement(f.c,{id:"multiselect.numGroupsRemaining",defaultMessage:"Use  to browse,  to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ",values:{num:10-this.state.values.length}})),n=Object(y.ab)("multiselect.add","Add"),r=Object(y.ab)("multiselect.adding","Adding..."),a=null;this.state.addError&&(a=d.a.createElement("div",{className:"has-error col-sm-12"},d.a.createElement("label",{className:"control-label font-weight--normal"},this.state.addError)));var o=this.props.groups;if(this.props.excludeGroups){o=o.filter(function(t){return!e.props.excludeGroups.find(function(e){return e.id===t.id})})}if(this.props.includeGroups){o=[].concat(O(o),O(this.props.includeGroups.filter(function(t){return e.props.includeGroups.find(function(e){return e.id===t.id})})))}return d.a.createElement(m.a,{id:"addGroupsToTeamModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},d.a.createElement(m.a.Header,{closeButton:!0},d.a.createElement(m.a.Title,{componentClass:"h1"},d.a.createElement(f.c,{id:"add_groups_to_team.title",defaultMessage:"Add New Groups To {teamName} Team",values:{teamName:d.a.createElement("strong",null,this.props.currentTeamName)}}))),d.a.createElement(m.a.Body,null,a,d.a.createElement(g.a,{key:"addGroupsToTeamKey",options:o,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,perPage:N,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:10,numRemainingText:t,buttonSubmitText:n,buttonSubmitLoadingText:r,saving:this.state.saving,loading:this.state.loadingGroups,placeholderText:Object(y.ab)("multiselect.addGroupsPlaceholder","Search and add groups")})))}}])&&P(n.prototype,r),a&&P(n,a),t}();M(R,"propTypes",{currentTeamName:u.a.string.isRequired,currentTeamId:u.a.string.isRequired,searchTerm:u.a.string.isRequired,groups:u.a.array.isRequired,excludeGroups:u.a.arrayOf(u.a.object),includeGroups:u.a.arrayOf(u.a.object),onHide:u.a.func,skipCommit:u.a.bool,onAddCallback:u.a.func,actions:u.a.shape({getGroupsNotAssociatedToTeam:u.a.func.isRequired,setModalSearchTerm:u.a.func.isRequired,linkGroupSyncable:u.a.func.isRequired,getAllGroupsAssociatedToTeam:u.a.func.isRequired}).isRequired});t.a=Object(r.connect)(function(e,t){var n=e.views.search.modalSearch,r=t.team||Object(s.getCurrentTeam)(e)||{},a=Object(i.getGroupsNotAssociatedToTeam)(e,r.id);if(n){var o=RegExp(n,"i");a=a.filter(function(e){return o.test(e.display_name)||o.test(e.name)})}return{currentTeamName:r.display_name,currentTeamId:r.id,skipCommit:t.skipCommit,onAddCallback:t.onAddCallback,excludeGroups:t.excludeGroups,searchTerm:n,groups:a}},function(e){return{actions:Object(a.bindActionCreators)({getGroupsNotAssociatedToTeam:o.getGroupsNotAssociatedToTeam,setModalSearchTerm:l.a,linkGroupSyncable:o.linkGroupSyncable,getAllGroupsAssociatedToTeam:o.getAllGroupsAssociatedToTeam},e)}})(R)},1659:function(e,t,n){"use strict";n(74),n(317),n(304);var r=n(418),a=n(20),o=n(1567),i=n(1601),s=n(16),l=n(1547),c=(n(210),n(156),n(88),n(43),n(422),n(116),n(118),n(245),n(33),n(34),n(25),n(117),n(30)),u=n.n(c),p=n(7),d=n.n(p),m=n(1739),f=n(56),h=n(14),b=n(0),y=n(23),g=n(1572),v=n(1637),_=n.n(v),E=n(1582);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function C(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){S(o,r,a,i,s,"next",e)}function s(e){S(o,r,a,i,s,"throw",e)}i(void 0)})}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=50,R=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=T(t).call(this,e),n=!a||"object"!==w(a)&&"function"!=typeof a?j(r):a,M(j(n),"handleHide",function(){n.props.actions.setModalSearchTerm(""),n.setState({show:!1})}),M(j(n),"handleExit",function(){n.props.onHide&&n.props.onHide()}),M(j(n),"handleResponse",function(e){var t=null;e&&e.message&&(t=e.message),n.setState({saving:!1,addError:t})}),M(j(n),"handleSubmit",function(){var e=C(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),0!==(r=n.state.values.map(function(e){return e.id})).length){e.next=4;break}return e.abrupt("return");case 4:if(!n.props.skipCommit){e.next=8;break}return n.props.onAddCallback&&n.props.onAddCallback(r),n.handleHide(),e.abrupt("return");case 8:n.setState({saving:!0}),r.forEach(function(){var e=C(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.linkGroupSyncable(t,n.props.currentChannelId,h.Groups.SYNCABLE_TYPE_CHANNEL,{auto_add:!0});case 2:r=e.sent,a=r.error,n.handleResponse(a),a||n.handleHide();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),M(j(n),"addValue",function(e){var t=Object.assign([],n.state.values),r=t.map(function(e){return e.id});e&&e.id&&-1===r.indexOf(e.id)&&t.push(e),n.setState({values:t})}),M(j(n),"setGroupsLoadingState",function(e){n.setState({loadingGroups:e})}),M(j(n),"handlePageChange",function(e,t){e>t&&(n.setGroupsLoadingState(!0),n.props.actions.getGroupsNotAssociatedToChannel(n.props.currentChannelId,n.props.searchTerm,e,N+1).then(function(){n.setGroupsLoadingState(!1)}))}),M(j(n),"handleDelete",function(e){n.setState({values:e})}),M(j(n),"search",function(e){n.props.actions.setModalSearchTerm(e)}),n.searchTimeoutId=0,n.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingGroups:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,d.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;Promise.all([this.props.actions.getGroupsNotAssociatedToChannel(this.props.currentChannelId,"",0,N+1),this.props.actions.getAllGroupsAssociatedToChannel(this.props.currentChannelId)]).then(function(){e.setGroupsLoadingState(!1)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);var n=e.searchTerm;if(""===n)return;this.searchTimeoutId=setTimeout(C(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setGroupsLoadingState(!0),e.next=3,t.props.actions.getGroupsNotAssociatedToChannel(t.props.currentChannelId,n);case 3:t.setGroupsLoadingState(!1);case 4:case"end":return e.stop()}},e)})),b.Q.SEARCH_TIMEOUT_MILLISECONDS)}}},{key:"renderOption",value:function(e,t,n){var r=t?"more-modal__row--selected":"";return d.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+r,onClick:function(){return n(e)}},d.a.createElement("img",{className:"more-modal__image",src:_.a,alt:"group picture",width:"32",height:"32"}),d.a.createElement("div",{className:"more-modal__details"},d.a.createElement("div",{className:"more-modal__name"},e.display_name,"","-","",d.a.createElement("span",{className:"more-modal__name_sub"},d.a.createElement(f.c,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),d.a.createElement("div",{className:"more-modal__actions"},d.a.createElement("div",{className:"more-modal__actions--round"},d.a.createElement(E.a,null))))}},{key:"renderValue",value:function(e){return e.data.display_name}},{key:"render",value:function(){var e=this,t=d.a.createElement("div",{id:"numGroupsRemaining"},d.a.createElement(f.c,{id:"multiselect.numGroupsRemaining",defaultMessage:"Use  to browse,  to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ",values:{num:10-this.state.values.length}})),n=Object(y.ab)("multiselect.add","Add"),r=Object(y.ab)("multiselect.adding","Adding..."),a=null;this.state.addError&&(a=d.a.createElement("div",{className:"has-error col-sm-12"},d.a.createElement("label",{className:"control-label font-weight--normal"},this.state.addError)));var o=this.props.groups;if(this.props.excludeGroups){o=o.filter(function(t){return!e.props.excludeGroups.find(function(e){return e.id===t.id})})}if(this.props.includeGroups){o=[].concat(O(o),O(this.props.includeGroups.filter(function(t){return e.props.includeGroups.find(function(e){return e.id===t.id})})))}return d.a.createElement(m.a,{id:"addGroupsToChannelModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},d.a.createElement(m.a.Header,{closeButton:!0},d.a.createElement(m.a.Title,null,d.a.createElement(f.c,{id:"add_groups_to_channel.title",defaultMessage:"Add New Groups To {channelName} Channel",values:{channelName:d.a.createElement("strong",null,this.props.currentChannelName)}}))),d.a.createElement(m.a.Body,null,a,d.a.createElement(g.a,{key:"addGroupsToChannelKey",options:o,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,perPage:N,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:10,numRemainingText:t,buttonSubmitText:n,buttonSubmitLoadingText:r,saving:this.state.saving,loading:this.state.loadingGroups,placeholderText:Object(y.ab)("multiselect.addGroupsPlaceholder","Search and add groups")})))}}])&&P(n.prototype,r),a&&P(n,a),t}();M(R,"propTypes",{currentChannelName:u.a.string.isRequired,currentChannelId:u.a.string.isRequired,searchTerm:u.a.string.isRequired,groups:u.a.array.isRequired,excludeGroups:u.a.arrayOf(u.a.object),includeGroups:u.a.arrayOf(u.a.object),onHide:u.a.func,skipCommit:u.a.bool,onAddCallback:u.a.func,actions:u.a.shape({getGroupsNotAssociatedToChannel:u.a.func.isRequired,setModalSearchTerm:u.a.func.isRequired,linkGroupSyncable:u.a.func.isRequired,getAllGroupsAssociatedToChannel:u.a.func.isRequired}).isRequired});t.a=Object(r.connect)(function(e,t){var n=e.views.search.modalSearch,r=t.channel||Object(s.getCurrentChannel)(e)||{},a=Object(i.getGroupsNotAssociatedToChannel)(e,r.id);if(n){var o=RegExp(n,"i");a=a.filter(function(e){return o.test(e.display_name)||o.test(e.name)})}return{currentChannelName:r.display_name,currentChannelId:r.id,skipCommit:t.skipCommit,onAddCallback:t.onAddCallback,excludeGroups:t.excludeGroups,searchTerm:n,groups:a}},function(e){return{actions:Object(a.bindActionCreators)({getGroupsNotAssociatedToChannel:o.getGroupsNotAssociatedToChannel,setModalSearchTerm:l.a,linkGroupSyncable:o.linkGroupSyncable,getAllGroupsAssociatedToChannel:o.getAllGroupsAssociatedToChannel},e)}})(R)},1660:function(e,t,n){"use strict";var r=n(418),a=n(24),o=n(1541),i=(n(88),n(43),n(74),n(30)),s=n.n(i),l=n(7),c=n.n(l),u=n(23);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b,y,g,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,f(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,c.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props.fileInfo,t=this.props.fileUrl,n=[];""!==e.extension&&n.push(u.ab("file_info_preview.type","File type ")+e.extension.toUpperCase()),n.push(u.ab("file_info_preview.size","Size ")+u.p(e.size));var r=n.join(", "),a=null;return a=this.props.canDownloadFiles?c.a.createElement("a",{className:"file-details__preview",href:t,target:"_blank",rel:"noopener noreferrer"},c.a.createElement("span",{className:"file-details__preview-helper"}),c.a.createElement("img",{alt:"file preview",src:u.x(e)})):c.a.createElement("span",{className:"file-details__preview"},c.a.createElement("span",{className:"file-details__preview-helper"}),c.a.createElement("img",{alt:"file preview",src:u.x(e)})),c.a.createElement("div",{className:"file-details__container"},a,c.a.createElement("div",{className:"file-details"},c.a.createElement("div",{className:"file-details__name"},e.name),c.a.createElement("div",{className:"file-details__info"},r)))}}])&&d(n.prototype,r),a&&d(n,a),t}();b=v,y="propTypes",g={fileInfo:s.a.object.isRequired,fileUrl:s.a.string.isRequired,canDownloadFiles:s.a.bool.isRequired},y in b?Object.defineProperty(b,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):b[y]=g;t.a=Object(r.connect)(function(e){var t=Object(a.getConfig)(e);return{canDownloadFiles:Object(o.a)(t)}})(v)},1661:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return l});var r=n(31),a=n(12),o=n(216),i=function(e){var t=Object(a.getCurrentUserId)(e),n=Object(r.getCurrentTeamId)(e);return o.a.getPreviousChannelName(t,n)},s=function(e){var t=Object(a.getCurrentUserId)(e),n=Object(r.getCurrentTeamId)(e);return o.a.getPenultimateChannelName(t,n)},l=function(e,t){var n=Object(a.getCurrentUserId)(e),i=Object(r.getTeamByName)(e,t),s=i&&i.id;return o.a.getPreviousChannelName(n,s)}},1676:function(e,t,n){"use strict";n.d(t,"a",function(){return _});n(88),n(43),n(245);var r=n(7),a=n.n(r),o=n(36),i=n(311),s=n(23),l=n(1506),c=n(1515),u=n(1516);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){return d(this,t),h(this,b(t).apply(this,arguments))}return y(t,u["a"]),f(t,[{key:"render",value:function(){var e=this.props,t=e.item,n="suggestion-list__item mentions__name";e.isSelection&&(n+=" suggestion--selected");var r=t.username,i="";return(t.first_name||t.last_name)&&t.nickname?i="- ".concat(s.z(t)," (").concat(t.nickname,")"):t.nickname?i="- (".concat(t.nickname,")"):(t.first_name||t.last_name)&&(i="- ".concat(s.z(t))),a.a.createElement("div",Object.assign({className:n,onClick:this.handleClick},u.a.baseProps),a.a.createElement("img",{alt:"",className:"admin-setting-user__image",src:o.Client4.getUsersRoute()+"/"+t.id+"/image?_="+(t.last_picture_update||0)}),a.a.createElement("span",{className:"admin-setting-user--align"},"@"+r),a.a.createElement(l.a,{show:Boolean(t.is_bot)}),a.a.createElement("span",{className:"admin-setting-user__fullname"}," ",i))}}]),t}(),_=function(e){function t(){return d(this,t),h(this,b(t).apply(this,arguments))}return y(t,c["a"]),f(t,[{key:"handlePretextChanged",value:function(e,t){var n=this,r=e.toLowerCase();return this.startNewRequest(r),Object(i.b)(r,function(e){if(!n.shouldCancelDispatch(r)){var a=Object.assign([],e.users);t({matchedPretext:r,terms:a.map(function(e){return e.username}),items:a,component:v})}}),!0}}]),t}()},1677:function(e,t,n){"use strict";n.d(t,"a",function(){return m});n(88),n(43);var r=n(7),a=n.n(r),o=n(30),i=n.n(o);n(1924);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return this.props.show?a.a.createElement("div",{className:"Badge"},a.a.createElement("div",{className:"Badge__box "+this.props.className},this.props.children)):null}}])&&l(n.prototype,r),o&&l(n,o),t}();d(m,"propTypes",{show:i.a.bool.isRequired,children:i.a.node.isRequired,className:i.a.string}),d(m,"defaultProps",{show:!0,className:""})},1678:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(88),n(43),n(33),n(34),n(25),n(44),n(425);var r=n(30),a=n.n(r),o=n(7),i=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return r=this,a=(e=u(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==s(a)&&"function"!=typeof a?p(r):a,m(p(n),"updateInputFromProps",function(){n.input&&n.input.value!==n.props.value&&(n.input.value=n.props.value)}),m(p(n),"getInput",function(){return n.input}),m(p(n),"setInput",function(e){n.input=e}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&(this.props.delayInputUpdate?requestAnimationFrame(this.updateInputFromProps):this.updateInputFromProps())}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.inputComponent,r=l(e,["value","inputComponent"]);return Reflect.deleteProperty(r,"delayInputUpdate"),i.a.createElement(n||"input",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}({},r,{ref:this.setInput,defaultValue:t}))}},{key:"value",get:function(){return this.input.value},set:function(e){this.input.value=e}}])&&c(n.prototype,r),a&&c(n,a),t}();m(f,"propTypes",{delayInputUpdate:a.a.bool,inputComponent:a.a.func,value:a.a.string.isRequired}),m(f,"defaultProps",{delayInputUpdate:!1,value:""})},1679:function(e,t,n){"use strict";n(245);var r=n(1925),a=n(0).Q.PayloadSources,o=Object.assign(new r.Dispatcher,{handleServerAction:function(e){e.type||console.warn("handleServerAction called with undefined action type");var t={source:a.SERVER_ACTION,action:e};this.dispatch(t)},handleViewAction:function(e){e.type||console.warn("handleViewAction called with undefined action type");var t={source:a.VIEW_ACTION,action:e};this.dispatch(t)}});t.a=o},1692:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0);function a(e){return function(t){return t({type:r.e.DISMISS_NOTICE,data:e}),{data:!0}}}},1693:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement("span",this.props,a.a.createElement(o.c,{id:"generic_icons.mattermost",defaultMessage:"Mattermost Logo"},function(e){return a.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 500 500",style:d.background,role:"icon","aria-label":e},a.a.createElement("g",{id:"XMLID_1_"},a.a.createElement("g",{id:"XMLID_3_"},a.a.createElement("path",{id:"XMLID_4_",style:d.st0,d:"M396.9,47.7l2.6,53.1c43,47.5,60,114.8,38.6,178.1c-32,94.4-137.4,144.1-235.4,110.9 S51.1,253.1,83,158.7C104.5,95.2,159.2,52,222.5,40.5l34.2-40.4C150-2.8,49.3,63.4,13.3,169.9C-31,300.6,39.1,442.5,169.9,486.7 s272.6-25.8,316.9-156.6C522.7,223.9,483.1,110.3,396.9,47.7z"})),a.a.createElement("path",{id:"XMLID_2_",style:d.st0,d:"M335.6,204.3l-1.8-74.2l-1.5-42.7l-1-37c0,0,0.2-17.8-0.4-22c-0.1-0.9-0.4-1.6-0.7-2.2 c0-0.1-0.1-0.2-0.1-0.3c0-0.1-0.1-0.2-0.1-0.2c-0.7-1.2-1.8-2.1-3.1-2.6c-1.4-0.5-2.9-0.4-4.2,0.2c0,0-0.1,0-0.1,0 c-0.2,0.1-0.3,0.1-0.4,0.2c-0.6,0.3-1.2,0.7-1.8,1.3c-3,3-13.7,17.2-13.7,17.2l-23.2,28.8l-27.1,33l-46.5,57.8 c0,0-21.3,26.6-16.6,59.4s29.1,48.7,48,55.1c18.9,6.4,48,8.5,71.6-14.7C336.4,238.4,335.6,204.3,335.6,204.3z"})))}))}}])&&s(n.prototype,r),i&&s(n,i),t}(),d={background:{enableBackground:"new 0 0 500 500"},st0:{fillRule:"evenodd",clipRule:"evenodd"}}},1694:function(e,t,n){e.exports=n.p+"files/325472601571f31e1bf00674c368d335.gif"},1697:function(e,t,n){"use strict";var r=n(7),a=n.n(r),o=n(30),i=n.n(o),s=n(1656),l=n(1598),c=function(e){var t=e.modalId,n=e.dialogType,r=e.dialogProps,o=e.text;return a.a.createElement(s.a,{accessibilityLabel:o,modalId:t,dialogType:n,dialogProps:r},o)};c.propTypes={modalId:i.a.string.isRequired,dialogType:i.a.func.isRequired,dialogProps:i.a.object,text:i.a.oneOfType([i.a.string,i.a.node]).isRequired};var u=Object(l.a)(c);u.displayName="MenuItemToggleModalRedux",t.a=u},1732:function(e,t,n){"use strict";var r=n(418),a=n(20),o=n(12),i=n(31),s=n(16),l=n(1524),c=(n(116),n(33),n(34),n(25),n(118),n(117),n(308)),u=n(75),p=n(97);function d(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function m(e){return function(){var t,n=(t=regeneratorRuntime.mark(function t(n,r){var a,o,l,d,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r(),o=Object(i.getCurrentTeamId)(a),l=Object(p.o)(a),d=Object(s.getCurrentChannel)(a),m=!1===l.exists?d.id:l.channel_id,t.abrupt("return",Promise.all([n(Object(c.getTeamMember)(o,e)),n(Object(u.getChannelMember)(m,e))]));case 6:case"end":return t.stop()}},t)}),function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(e){d(o,r,a,i,s,"next",e)}function s(e){d(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e,t){return n.apply(this,arguments)}}()}var f=n(1503),h=n(243),b=(n(44),n(88),n(43),n(245),n(30)),y=n.n(b),g=n(7),v=n.n(g),_=n(1763),E=n(1766),w=n(1767),O=n(56),S=n(426),C=n.n(S),P=n(1871),T=n(1657),j=n(119),k=n(1493),M=n(0),N=n(23),R=n(1549),I=n(1739),A=n(107),x=(n(74),n(305),n(306),n(185),n(952),n(212)),L=n(24),D=n(434),U=n(96),q=n(14),H=n(186),F=n(106),B=n(1553),G=n(1554),V=n(1576),W=n(13),z=n(1515),K=n(1516);function Y(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}function ee(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e,t,n){return(te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=function(e){function t(){return Z(this,t),ee(this,ne(t).apply(this,arguments))}return re(t,K["a"]),$(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.isSelection,r=t.channel,a=r.delete_at&&0!==r.delete_at,o="mentions__name";n&&(o+=" suggestion--selected");var i=r.display_name,s=null;return a?s=v.a.createElement(V.a,{className:"icon icon__archive"}):r.type===M.i.OPEN_CHANNEL?s=v.a.createElement(B.a,{className:"icon icon__globe icon--body"}):r.type===M.i.PRIVATE_CHANNEL&&(s=v.a.createElement(G.a,{className:"icon icon__lock icon--body"})),v.a.createElement("div",Object.assign({onClick:this.handleClick,className:o},K.a.baseProps),s,i)}}],[{key:"propTypes",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){J(e,t,n[t])})}return e}({},te(ne(t),"propTypes",this))}}]),t}(),ie="";function se(e,t){var n=!!e.channel.delete_at&&0!==e.channel.delete_at,r=!!t.channel.delete_at&&0!==t.channel.delete_at;if(n&&!r)return 1;if(!n&&r)return-1;var a=Object(D.getCurrentUserLocale)(W.a.getState()),o=e.channel,i=t.channel,s=o.display_name.toLowerCase(),l=i.display_name.toLowerCase(),c=s.startsWith(ie),u=l.startsWith(ie);return c&&u?Object(H.sortChannelsByTypeAndDisplayName)(a,o,i):c||u?c?-1:1:Object(H.sortChannelsByTypeAndDisplayName)(a,o,i)}var le=function(e){function t(){return Z(this,t),ee(this,ne(t).apply(this,arguments))}return re(t,z["a"]),$(t,[{key:"makeChannelSearchFilter",value:function(e){var t=e.toLowerCase();return function(e){var n=W.a.getState(),r=e.id,a=Object(i.getCurrentTeamId)(n),o=e.display_name;return e.type===M.i.OPEN_CHANNEL&&Object(U.haveIChannelPermission)(n,{channel:r,team:a,permission:q.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS})?o.toLowerCase().includes(t):!(e.type!==M.i.PRIVATE_CHANNEL||!Object(U.haveIChannelPermission)(n,{channel:r,team:a,permission:q.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS}))&&o.toLowerCase().includes(t)}}},{key:"handlePretextChanged",value:function(e,t){if(e){ie=e,this.startNewRequest(e);var n=W.a.getState(),r=Object(s.getChannelsInCurrentTeam)(n);this.formatChannelsAndDispatch(e,t,r),this.fetchChannels(e,t)}return!0}},{key:"fetchChannels",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t,n){var r,a,o,l,c,p,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=W.a.getState(),a=Object(i.getCurrentTeamId)(r)){e.next=4;break}return e.abrupt("return");case 4:return o=u.autocompleteChannelsForSearch(a,t)(W.a.dispatch,W.a.getState),l=[],e.prev=6,e.next=9,o;case 9:c=e.sent,p=c.data,l=p,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),W.a.dispatch(Object(F.logError)(e.t0));case 17:if(!this.shouldCancelDispatch(t)){e.next=19;break}return e.abrupt("return");case 19:d=Object(s.getChannelsInCurrentTeam)(r).concat(l),this.formatChannelsAndDispatch(t,n,d);case 21:case"end":return e.stop()}},e,this,[[6,14]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Y(o,r,a,i,s,"next",e)}function s(e){Y(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e,n){return t.apply(this,arguments)}}()},{key:"formatChannelsAndDispatch",value:function(e,t,n){var r=[],a=W.a.getState(),o=Object(x.getMyChannelMemberships)(a);if(!this.shouldCancelDispatch(e)){for(var i={},s=this.makeChannelSearchFilter(e),l="true"===Object(L.getConfig)(a).ExperimentalViewArchivedChannels,c=0,u=Object.keys(n);c<u.length;c++){var p=n[u[c]];if(p&&(!i[p.id]&&s(p))){var d=Object.assign({},p),m=0!==p.delete_at,f={channel:d,name:d.name,deactivated:!1};if(!l&&m)continue;if(!o[p.id])continue;if(m&&!o[p.id])continue;if(p.type===M.i.OPEN_CHANNEL)f.type=M.i.OPEN_CHANNEL;else{if(p.type!==M.i.PRIVATE_CHANNEL)continue;f.type=M.i.PRIVATE_CHANNEL}i[p.id]=!0,r.push(f)}}t({matchedPretext:e,terms:r.sort(se).map(function(e){return e.channel.name}),items:r,component:oe})}}}]),t}(),ce=n(1561),ue=n(1562);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=me(t).call(this,e),n=!a||"object"!==pe(a)&&"function"!=typeof a?fe(r):a,be(fe(n),"enableChannelProvider",function(){n.suggestionProviders[0].disableDispatches=!1}),be(fe(n),"focusTextbox",function(){if(null!=n.channelSearchBox){var e=n.channelSearchBox.getTextbox();document.activeElement!==e&&(e.focus(),Object(N.eb)(e))}}),be(fe(n),"onInputChange",function(e){n.setState({text:e.target.value,selectedChannelId:null})}),be(fe(n),"onHide",function(){n.setState({show:!1}),n.props.onHide()}),be(fe(n),"setSearchBoxRef",function(e){n.channelSearchBox=e,n.focusTextbox()}),be(fe(n),"handleSubmitError",function(e){e&&n.setState({submitError:e.message,saving:!1})}),be(fe(n),"didSelectChannel",function(e){var t=e.channel,r=n.props.user.id;n.setState({text:t.display_name,selectedChannelId:t.id,checkingForMembership:!0,submitError:""}),n.props.actions.getChannelMember(t.id,r).then(function(){n.setState({checkingForMembership:!1})})}),be(fe(n),"handleSubmit",function(e){e&&e.preventDefault&&e.preventDefault();var t=n.state.selectedChannelId,r=n.props.user;t&&(n.isUserMemberOfChannel(t)||n.state.saving||(n.setState({saving:!0}),n.props.actions.addChannelMember(t,r.id).then(function(e){var t=e.error;t?n.handleSubmitError(t):n.onHide()})))}),be(fe(n),"isUserMemberOfChannel",function(e){var t=n.props.user,r=n.props.channelMembers;return!!e&&(!!r[e]&&Boolean(r[e][t.id]))}),n.state={show:!0,saving:!1,checkingForMembership:!1,text:"",selectedChannelId:null,submitError:""},n.suggestionProviders=[new le],n.enableChannelProvider(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,v.a.Component),n=t,(r=[{key:"render",value:function(){var e,t=this.props.user,n=this.state.selectedChannelId,r=this.isUserMemberOfChannel(n),a=Object(A.getFullName)(t);a||(a="@".concat(t.username)),this.state.saving||(this.state.submitError?e=v.a.createElement("label",{id:"add-user-to-channel-modal__invite-error",className:"modal__error has-error control-label"},this.state.submitError):r&&(e=v.a.createElement("label",{id:"add-user-to-channel-modal__user-is-member",className:"modal__error has-error control-label"},v.a.createElement(O.c,{id:"add_user_to_channel_modal.membershipExistsError",defaultMessage:"{name} is already a member of that channel",values:{name:a}}))));var o=v.a.createElement(O.c,{id:"add_user_to_channel_modal.help",defaultMessage:"Type to find a channel. Use  to browse,  to select, ESC to dismiss."}),i=v.a.createElement(ce.a,{ref:this.setSearchBoxRef,className:"form-control focused",onChange:this.onInputChange,value:this.state.text,onKeyDown:this.handleKeyDown,onItemSelected:this.didSelectChannel,listComponent:ue.a,maxLength:"64",providers:this.suggestionProviders,listStyle:"bottom",completeOnTab:!1,renderDividers:!1,delayInputUpdate:!0,openWhenEmpty:!0}),s=r||this.state.checkingForMembership||Boolean(!this.state.selectedChannelId)||this.state.saving;return v.a.createElement(I.a,{dialogClassName:"a11y__modal modal--overflow",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,ref:"modal",enforceFocus:!0,role:"dialog","aria-labelledby":"addChannelModalLabel"},v.a.createElement(I.a.Header,{closeButton:!0},v.a.createElement(I.a.Title,{componentClass:"h1",id:"addChannelModalLabel"},v.a.createElement(O.c,{id:"add_user_to_channel_modal.title",defaultMessage:"Add {name} to a channel",values:{name:a}}))),v.a.createElement("form",{role:"form",onSubmit:this.handleSubmit},v.a.createElement(I.a.Body,null,v.a.createElement("div",{className:"modal__hint"},o),i,v.a.createElement("div",null,e,v.a.createElement("br",null))),v.a.createElement(I.a.Footer,null,v.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},v.a.createElement(O.c,{id:"add_user_to_channel_modal.cancel",defaultMessage:"Cancel"})),v.a.createElement("button",{type:"button",id:"add-user-to-channel-modal__add-button",className:"btn btn-primary",onClick:this.handleSubmit,disabled:s},v.a.createElement(O.c,{id:"add_user_to_channel_modal.add",defaultMessage:"Add"})))))}}])&&de(n.prototype,r),a&&de(n,a),t}();be(ye,"propTypes",{onHide:y.a.func.isRequired,user:y.a.object.isRequired,channelMembers:y.a.object.isRequired,actions:y.a.shape({addChannelMember:y.a.func.isRequired,getChannelMember:y.a.func.isRequired}).isRequired});var ge=Object(r.connect)(function(e){return{channelMembers:Object(s.getChannelMembersInChannels)(e)||{}}},function(e){return{actions:Object(a.bindActionCreators)({addChannelMember:u.addChannelMember,getChannelMember:u.getChannelMember},e)}})(ye),ve=n(1656);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,n){return t&&Oe(e.prototype,t),n&&Oe(e,n),e}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=Ee(t).call(this,e))||"object"!==_e(a)&&"function"!=typeof a?we(r):a).handleShowDirectChannel=n.handleShowDirectChannel.bind(we(n)),n.handleMentionKeyClick=n.handleMentionKeyClick.bind(we(n)),n.handleEditAccountSettings=n.handleEditAccountSettings.bind(we(n)),n.state={loadingDMChannel:-1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(t,v.a.PureComponent),Se(t,null,[{key:"getComponentName",value:function(){return"ProfilePopover"}}]),Se(t,[{key:"componentDidMount",value:function(){this.props.actions.getMembershipForCurrentEntities(this.props.userId)}},{key:"handleShowDirectChannel",value:function(e){var t=this,n=this.props.actions;if(e.preventDefault(),this.props.user){var r=this.props.user;-1===this.state.loadingDMChannel&&(this.setState({loadingDMChannel:r.id}),n.openDirectChannelToUserId(r.id).then(function(e){e.error||(N.U()&&k.c(),t.setState({loadingDMChannel:-1}),t.props.hide&&t.props.hide(),j.a.push("".concat(t.props.teamUrl,"/messages/@").concat(r.username)))}))}}},{key:"handleMentionKeyClick",value:function(e){e.preventDefault(),this.props.user&&(this.props.hide&&this.props.hide(),C.a.emit("mention_key_click",this.props.user.username,this.props.isRHS))}},{key:"handleEditAccountSettings",value:function(e){e.preventDefault(),this.props.user&&(this.props.hide&&this.props.hide(),this.props.actions.openModal({ModalId:M.r.USER_SETTINGS,dialogType:T.a}))}},{key:"render",value:function(){if(!this.props.user)return null;var e=Object.assign({},this.props);delete e.user,delete e.userId,delete e.src,delete e.status,delete e.hideStatus,delete e.isBusy,delete e.hide,delete e.isRHS,delete e.hasMention,delete e.dispatch,delete e.enableTimezone,delete e.currentUserId,delete e.currentTeamId,delete e.teamUrl,delete e.actions,delete e.isTeamAdmin,delete e.isChannelAdmin,delete e.canManageAnyChannelMembersInCurrentTeam,delete e.intl;var t=this.props.intl.formatMessage,n=[];n.push(v.a.createElement("img",{className:"user-popover__image",alt:"".concat(this.props.user.username||"user"," profile image"),src:this.props.src,height:"128",width:"128",key:"user-popover-image"}));var r=N.z(this.props.user);if((r||this.props.user.position)&&n.push(v.a.createElement("hr",{key:"user-popover-hr",className:"divider divider--expanded"})),r&&n.push(v.a.createElement(_.a,{delayShow:M.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:v.a.createElement(E.a,{id:"fullNameTooltip"},r),key:"user-popover-fullname"},v.a.createElement("div",{className:"overflow--ellipsis text-nowrap"},v.a.createElement("strong",null,r)))),this.props.user.is_bot&&n.push(v.a.createElement("div",{key:"bot-description",className:"overflow--ellipsis text-nowrap"},this.props.user.bot_description)),this.props.user.position){var a=this.props.user.position.substring(0,M.Q.MAX_POSITION_LENGTH);n.push(v.a.createElement(_.a,{delayShow:M.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:v.a.createElement(E.a,{id:"positionTooltip"},a),key:"user-popover-position"},v.a.createElement("div",{className:"overflow--ellipsis text-nowrap padding-bottom padding-top half"},a)))}var o,i=this.props.user.email;if(i&&!this.props.user.is_bot&&(n.push(v.a.createElement("hr",{key:"user-popover-hr2",className:"divider divider--expanded"})),n.push(v.a.createElement("div",{"data-toggle":"tooltip",title:i,key:"user-popover-email"},v.a.createElement("a",{href:"mailto:"+i,className:"text-nowrap text-lowercase user-popover__email padding-bottom half"},i)))),n.push(v.a.createElement(R.a,{key:"profilePopoverPluggable2",pluggableName:"PopoverUserAttributes",user:this.props.user,status:this.props.hideStatus?null:this.props.status})),this.props.enableTimezone&&this.props.user.timezone&&n.push(v.a.createElement("div",{key:"user-popover-local-time",className:"padding-bottom half"},v.a.createElement(O.c,{id:"user_profile.account.localTime",defaultMessage:"Local Time: "}),v.a.createElement(P.a,{userTimezone:this.props.user.timezone}))),this.props.user.id===this.props.currentUserId&&n.push(v.a.createElement("div",{"data-toggle":"tooltip",key:"user-popover-settings",className:"popover__row first"},v.a.createElement("a",{href:"#",onClick:this.handleEditAccountSettings},v.a.createElement("i",{className:"fa fa-pencil-square-o",title:t({id:"generic_icons.edit",defaultMessage:"Edit Icon"})}),v.a.createElement(O.c,{id:"user_profile.account.editSettings",defaultMessage:"Edit Account Settings"})))),this.props.user.id!==this.props.currentUserId&&(n.push(v.a.createElement("div",{"data-toggle":"tooltip",key:"user-popover-dm",className:"popover__row first"},v.a.createElement("a",{href:"#",className:"text-nowrap user-popover__email",onClick:this.handleShowDirectChannel},v.a.createElement("i",{className:"fa fa-paper-plane",title:t({id:"user_profile.send.dm.icon",defaultMessage:"Send Message Icon"})}),v.a.createElement(O.c,{id:"user_profile.send.dm",defaultMessage:"Send Message"})))),this.props.canManageAnyChannelMembersInCurrentTeam&&this.props.isInCurrentTeam)){var s=t({id:"user_profile.add_user_to_channel",defaultMessage:"Add to a Channel"});n.push(v.a.createElement("div",{"data-toggle":"tooltip",className:"popover__row first",key:"user-popover-add-to-channel"},v.a.createElement("a",{href:"#",className:"text-nowrap"},v.a.createElement(ve.a,{accessibilityLabel:s,ref:"addUserToChannelModalButton",modalId:M.r.ADD_USER_TO_CHANNEL,role:"menuitem",dialogType:ge,dialogProps:{user:this.props.user},onClick:this.props.hide},v.a.createElement("i",{className:"fa fa-user-plus",title:t({id:"user_profile.add_user_to_channel.icon",defaultMessage:"Add User to Channel Icon"})}),s))))}n.push(v.a.createElement(R.a,{key:"profilePopoverPluggable3",pluggableName:"PopoverUserActions",user:this.props.user,status:this.props.hideStatus?null:this.props.status})),this.props.user.is_bot?o=v.a.createElement("span",{className:"user-popover__role"},N.ab("bots.is_bot","BOT")):N.W(this.props.user.roles)?o=v.a.createElement("span",{className:"user-popover__role"},N.ab("admin.permissions.roles.system_admin.name","System Admin")):this.props.isTeamAdmin?o=v.a.createElement("span",{className:"user-popover__role"},N.ab("admin.permissions.roles.team_admin.name","Team Admin")):this.props.isChannelAdmin&&(o=v.a.createElement("span",{className:"user-popover__role"},N.ab("admin.permissions.roles.channel_admin.name","Channel Admin")));var l="@".concat(this.props.user.username);return this.props.hasMention&&(l=v.a.createElement("a",{onClick:this.handleMentionKeyClick},l)),l=v.a.createElement("span",null,v.a.createElement("span",{className:"user-popover__username"},l),o),v.a.createElement(w.a,Object.assign({},e,{title:l,id:"user-profile-popover"}),n)}}]),t}();Pe(Te,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Pe(e,t,n[t])})}return e}({src:y.a.string.isRequired,user:y.a.object,status:y.a.string,hideStatus:y.a.bool,hide:y.a.func,isRHS:y.a.bool,currentTeamId:y.a.string.isRequired,currentUserId:y.a.string.isRequired,hasMention:y.a.bool,isInCurrentTeam:y.a.bool.isRequired,teamUrl:y.a.string.isRequired,isTeamAdmin:y.a.bool.isRequired,isChannelAdmin:y.a.bool.isRequired,canManageAnyChannelMembersInCurrentTeam:y.a.bool.isRequired,actions:y.a.shape({getMembershipForCurrentEntities:y.a.func.isRequired,openDirectChannelToUserId:y.a.func.isRequired,openModal:y.a.func.isRequired}).isRequired,intl:O.i.isRequired},w.a.propTypes)),Pe(Te,"defaultProps",{isRHS:!1,hasMention:!1,status:M.O.OFFLINE}),delete Te.propTypes.id;var je=Object(O.h)(Te);t.a=Object(r.connect)(function(e,t){var n=t.userId,r=Object(i.getCurrentTeam)(e),a=Object(i.getTeamMember)(e,r.id,n),l=!1;a&&a.scheme_admin&&(l=!0);var c,u=Object(p.o)(e),d=Object(s.getCurrentChannel)(e);c=!1===u.exists?d.id:u.channel_id;var m=Object(s.getChannelMembersInChannels)(e)[c][n],f=!1;return"search"!==Object(p.k)(e)&&null!=m&&m.scheme_admin&&(f=!0),{currentTeamId:r.id,currentUserId:Object(o.getCurrentUserId)(e),enableTimezone:Object(h.a)(e),isTeamAdmin:l,isChannelAdmin:f,isInCurrentTeam:Boolean(a),canManageAnyChannelMembersInCurrentTeam:Object(s.canManageAnyChannelMembersInCurrentTeam)(e),status:Object(o.getStatusForUserId)(e,n),teamUrl:Object(i.getCurrentRelativeTeamUrl)(e),user:Object(o.getUser)(e,n)}},function(e){return{actions:Object(a.bindActionCreators)({openDirectChannelToUserId:l.e,openModal:f.b,getMembershipForCurrentEntities:m},e)}})(je)},1733:function(e,t,n){"use strict";n(74);var r=n(418),a=n(121),o=n(20),i=n(35),s=n(24),l=n(96),c=n(133),u=n(14),p=n(1528),d=n(1692),m=n(0),f=n(7),h=n.n(f),b=n(1491),y=n(1778),g=n(38),v=n(433),_=n.n(v),E=[{name:"apiv3_deprecation",adminOnly:!0,title:h.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Mattermost"}),icon:_.a,body:h.a.createElement(b.b,{id:"system_notice.body.api3",defaultMessage:"If youve created or installed integrations in the last two years, find out how [recent changes](!https://about.mattermost.com/default-apiv3-deprecation-guide) may have affected them."}),allowForget:!0,show:function(e,t){return!(t.InstallationDate>=new Date(2018,5,16,0,0,0,0).getTime())}},{name:"advanced_permissions",adminOnly:!0,title:h.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Mattermost"}),icon:_.a,body:h.a.createElement(b.b,{id:"system_notice.body.permissions",defaultMessage:"Some policy and permission System Console settings have moved with the release of [advanced permissions](!https://about.mattermost.com/default-advanced-permissions) in Enterprise E10 and E20."}),allowForget:!0,show:function(e,t,n){return"false"!==n.IsLicensed&&(!(t.InstallationDate>new Date(2018,5,16,0,0,0,0).getTime())&&!("true"===n.IsLicensed&&n.IssuedAt>new Date(2018,5,16,0,0,0,0).getTime()))}},{name:"ee_upgrade_advice",adminOnly:!0,title:h.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Mattermost"}),icon:_.a,body:h.a.createElement(b.b,{id:"system_notice.body.ee_upgrade_advice",defaultMessage:"Enterprise Edition is recommended to ensure optimal operation and reliability. [Learn more](!https://mattermost.com/performance)."}),allowForget:!1,show:function(e,t,n,r){return!!r.hasOwnProperty("TOTAL_USERS")&&(!(r.TOTAL_USERS<1e4)&&("true"!==n.IsLicensed||"true"!==n.Cluster))}},{name:"ie11_deprecation",title:h.a.createElement(b.b,{id:"system_notice.title",defaultMessage:"**Notice**\\nfrom Mattermost"}),icon:_.a,allowForget:!1,body:h.a.createElement(b.b,{id:"system_notice.body.ie11_deprecation",defaultMessage:"Your browser, IE11, will no longer be supported in an upcoming release. [Find out how to move to another browser in one simple step](!https://forum.mattermost.org/t/mattermost-is-dropping-support-for-internet-explorer-ie11-in-v5-16/7575)."}),show:function(e){return!y.b(e,"5.16.0")&&!!g.f()}}],w=(n(88),n(43),n(33),n(30)),O=n.n(w),S=n(56),C=n(1693);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=j(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==P(a)&&"function"!=typeof a?k(r):a,N(k(n),"getCurrentNotice",function(){var e=!0,t=!1,r=void 0;try{for(var a,o=n.props.notices[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value;if(!n.props.dismissedNotices[i.name]&&(!n.props.preferences[i.name]&&(!i.adminOnly||n.props.isSystemAdmin)&&i.show(n.props.serverVersion,n.props.config,n.props.license,n.props.analytics)))return i}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return null}),N(k(n),"hide",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.getCurrentNotice();t&&(e||n.props.actions.savePreferences(n.props.currentUserId,[{user_id:n.props.currentUserId,category:m.z.CATEGORY_SYSTEM_NOTICE,name:t.name,value:"dismissed"}]),n.props.actions.dismissNotice(t.name))}),N(k(n),"hideAndRemind",function(){n.hide(!0)}),N(k(n),"hideAndForget",function(){n.hide(!1)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,h.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.props.isSystemAdmin&&this.props.actions.getStandardAnalytics()}},{key:"componentDidUpdate",value:function(e){e.isSystemAdmin!==this.props.isSystemAdmin&&this.props.isSystemAdmin&&this.props.actions.getStandardAnalytics()}},{key:"render",value:function(){var e,t=this.getCurrentNotice(),n=this.context.intl.formatMessage;return null==t?null:(t.adminOnly&&(e=h.a.createElement("div",{className:"system-notice__info"},h.a.createElement("i",{className:"fa fa-eye",title:n({id:"system_notice.adminVisible.icon",defaultMessage:"Only visible to System Admins Icon"})}),h.a.createElement(S.c,{id:"system_notice.adminVisible",defaultMessage:"Only visible to System Admins"}))),h.a.createElement("div",{className:"system-notice bg--white shadow--2"},h.a.createElement("div",{className:"system-notice__header"},h.a.createElement("div",{className:"system-notice__logo"},h.a.createElement(C.a,null)),h.a.createElement("div",{className:"system-notice__title"},t.title)),h.a.createElement("div",{className:"system-notice__body"},t.body),e,h.a.createElement("div",{className:"system-notice__footer"},h.a.createElement("button",{id:"systemnotice_remindme",className:"btn btn-transparent",onClick:this.hideAndRemind},h.a.createElement(S.c,{id:"system_notice.remind_me",defaultMessage:"Remind me later"})),t.allowForget&&h.a.createElement("button",{id:"systemnotice_dontshow",className:"btn btn-transparent",onClick:this.hideAndForget},h.a.createElement(S.c,{id:"system_notice.dont_show",defaultMessage:"Don't show again"})))))}}])&&T(n.prototype,r),a&&T(n,a),t}();N(R,"propTypes",{currentUserId:O.a.string.isRequired,notices:O.a.arrayOf(O.a.object).isRequired,preferences:O.a.object.isRequired,dismissedNotices:O.a.object.isRequired,isSystemAdmin:O.a.bool,serverVersion:O.a.string.isRequired,config:O.a.object.isRequired,license:O.a.object.isRequired,analytics:O.a.object,actions:O.a.shape({savePreferences:O.a.func.isRequired,dismissNotice:O.a.func.isRequired,getStandardAnalytics:O.a.func.isRequired}).isRequired}),N(R,"contextTypes",{intl:S.i.isRequired});t.a=Object(r.connect)(function(){var e=Object(i.makeGetCategory)(),t=Object(a.a)(e,function(e){var t={};return e.forEach(function(e){t[e.name]=e}),t});return function(e){var n=Object(s.getLicense)(e),r=Object(s.getConfig)(e),a=e.entities.general.serverVersion,o=e.entities.admin.analytics;return{currentUserId:e.entities.users.currentUserId,preferences:t(e,m.z.CATEGORY_SYSTEM_NOTICE),dismissedNotices:e.views.notice.hasBeenDismissed,isSystemAdmin:Object(l.haveISystemPermission)(e,{permission:u.Permissions.MANAGE_SYSTEM}),notices:E,config:r,license:n,serverVersion:a,analytics:o}}},function(e){return{actions:Object(o.bindActionCreators)({savePreferences:c.savePreferences,dismissNotice:d.a,getStandardAnalytics:p.getStandardAnalytics},e)}})(R)},1734:function(e,t,n){"use strict";n(425);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conn=null,this.connectionUrl=null,this.sequence=1,this.eventSequence=0,this.connectFailCount=0,this.eventCallback=null,this.responseCallbacks={},this.firstConnectCallback=null,this.reconnectCallback=null,this.missedEventCallback=null,this.errorCallback=null,this.closeCallback=null}var t,n,a;return t=e,(n=[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connectionUrl,n=arguments.length>1?arguments[1]:void 0;this.conn||(null!=t?(0===this.connectFailCount&&console.log("websocket connecting to "+t),this.conn=new WebSocket(t),this.connectionUrl=t,this.conn.onopen=function(){e.eventSequence=0,n&&e.sendMessage("authentication_challenge",{token:n}),e.connectFailCount>0?(console.log("websocket re-established connection"),e.reconnectCallback&&e.reconnectCallback()):e.firstConnectCallback&&e.firstConnectCallback(),e.connectFailCount=0},this.conn.onclose=function(){e.conn=null,e.sequence=1,0===e.connectFailCount&&console.log("websocket closed"),e.connectFailCount++,e.closeCallback&&e.closeCallback(e.connectFailCount);var r=3e3;e.connectFailCount>7&&(r=3e3*e.connectFailCount*e.connectFailCount)>3e5&&(r=3e5),setTimeout(function(){e.initialize(t,n)},r)},this.conn.onerror=function(t){e.connectFailCount<=1&&(console.log("websocket error"),console.log(t)),e.errorCallback&&e.errorCallback(t)},this.conn.onmessage=function(t){var n=JSON.parse(t.data);n.seq_reply?(n.error&&console.log(n),e.responseCallbacks[n.seq_reply]&&(e.responseCallbacks[n.seq_reply](n),Reflect.deleteProperty(e.responseCallbacks,n.seq_reply))):e.eventCallback&&(n.seq!==e.eventSequence&&e.missedEventCallback&&(console.log("missed websocket event, act_seq="+n.seq+" exp_seq="+e.eventSequence),e.missedEventCallback()),e.eventSequence=n.seq+1,e.eventCallback(n))}):console.log("websocket must have connection url"))}},{key:"setEventCallback",value:function(e){this.eventCallback=e}},{key:"setFirstConnectCallback",value:function(e){this.firstConnectCallback=e}},{key:"setReconnectCallback",value:function(e){this.reconnectCallback=e}},{key:"setMissedEventCallback",value:function(e){this.missedEventCallback=e}},{key:"setErrorCallback",value:function(e){this.errorCallback=e}},{key:"setCloseCallback",value:function(e){this.closeCallback=e}},{key:"close",value:function(){this.connectFailCount=0,this.sequence=1,this.conn&&this.conn.readyState===WebSocket.OPEN&&(this.conn.onclose=function(){},this.conn.close(),this.conn=null,console.log("websocket closed"))}},{key:"sendMessage",value:function(e,t,n){var r={action:e,seq:this.sequence++,data:t};n&&(this.responseCallbacks[r.seq]=n),this.conn&&this.conn.readyState===WebSocket.OPEN?this.conn.send(JSON.stringify(r)):this.conn&&this.conn.readyState!==WebSocket.CLOSED||(this.conn=null,this.initialize())}},{key:"userTyping",value:function(e,t,n){var r={};r.channel_id=e,r.parent_id=t,this.sendMessage("user_typing",r,n)}},{key:"userUpdateActiveStatus",value:function(e,t,n){var r={user_is_active:e,manual:t};this.sendMessage("user_update_active_status",r,n)}},{key:"getStatuses",value:function(e){this.sendMessage("get_statuses",null,e)}},{key:"getStatusesByIds",value:function(e,t){var n={};n.user_ids=e,this.sendMessage("get_statuses_by_ids",n,t)}}])&&r(t.prototype,n),a&&r(t,a),e}());t.a=a},1738:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e.websocket}},1751:function(e,t,n){"use strict";n.d(t,"a",function(){return g});n(116),n(25),n(117),n(88),n(43),n(245);var r=n(7),a=n.n(r),o=n(1515),i=n(1516);function s(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,l,"next",e)}function l(e){s(o,r,a,i,l,"throw",e)}i(void 0)})}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function m(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return u(this,t),m(this,f(t).apply(this,arguments))}return h(t,i["a"]),d(t,[{key:"render",value:function(){var e=this.props,t=e.item,n="mentions__name";return e.isSelection&&(n+=" suggestion--selected"),a.a.createElement("div",Object.assign({className:n,onClick:this.handleClick},i.a.baseProps),t.text)}}]),t}(),g=function(e){function t(e){var n;return u(this,t),(n=m(this,f(t).call(this))).options=e,n}return h(t,o["a"]),d(t,[{key:"handlePretextChanged",value:function(e,t){return 0===e.length?(this.displayAllOptions(t),!0):!!e&&(this.filterOptions(e,t),!0)}},{key:"displayAllOptions",value:function(){var e=l(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.options.map(function(e){return e.text}),t({matchedPretext:"",terms:n,items:this.options,component:y});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"filterOptions",value:function(){var e=l(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.options.filter(function(e){return e.text.toLowerCase().indexOf(t)>=0}),a=r.map(function(e){return e.text}),n({matchedPretext:t,terms:a,items:r,component:y});case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),t}()},1752:function(e,t,n){"use strict";n.d(t,"a",function(){return y});n(88),n(43),n(245),n(74);var r=n(7),a=n.n(r),o=n(1524),i=n(1515),s=n(1516);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return c(this,t),d(this,m(t).apply(this,arguments))}return f(t,s["a"]),p(t,[{key:"render",value:function(){var e=this.props.isSelection,t=this.props.item,n=t.display_name,r=t.purpose,o="mentions__name no-flex";e&&(o+=" suggestion--selected");var i="(~"+t.name+")";return a.a.createElement("div",Object.assign({className:o,onClick:this.handleClick},s.a.baseProps),a.a.createElement("div",{className:"mention__align"},a.a.createElement("span",null,n),a.a.createElement("span",{className:"mention__channelname"}," ",i)),a.a.createElement("div",{className:"mention__purpose"},r))}}]),t}(),y=function(e){function t(){return c(this,t),d(this,m(t).apply(this,arguments))}return f(t,i["a"]),p(t,[{key:"handlePretextChanged",value:function(e,t){var n=this,r=e.toLowerCase();return this.startNewRequest(r),Object(o.b)(r,function(e){if(!n.shouldCancelDispatch(r)){var a=Object.assign([],e);t({matchedPretext:r,terms:a.map(function(e){return e.display_name}),items:a,component:b})}}),!0}}]),t}()},1753:function(e,t,n){"use strict";n.d(t,"a",function(){return h});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(1561),l=n(1562);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=p(t).call(this,e),n=!a||"object"!==c(a)&&"function"!=typeof a?d(r):a,f(d(n),"onChange",function(e){e&&e.target&&n.setState({input:e.target.value})}),f(d(n),"handleSelected",function(e){n.setState({input:""}),n.props.onSelected&&n.props.onSelected(e),requestAnimationFrame(function(){n.suggestionRef&&n.suggestionRef.blur()})}),f(d(n),"setSuggestionRef",function(e){n.suggestionRef=e}),f(d(n),"onFocus",function(){n.setState({focused:!0})}),f(d(n),"onBlur",function(){n.setState({focused:!1})}),n.state={input:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t,n=this.props,r=n.providers,a=n.placeholder,o=n.footer,c=n.label,u=n.labelClassName,p=n.helpText,d=n.inputClassName,m=n.value,f=this.state.focused,h=this.state.input;return f||(h=m),c&&(e=i.a.createElement("label",{className:"control-label "+u},c)),p&&(t=i.a.createElement("div",{className:"help-text"},p)),i.a.createElement("div",{className:"form-group"},e,i.a.createElement("div",{className:d},i.a.createElement(s.a,{placeholder:a,ref:this.setSuggestionRef,listComponent:l.a,className:"form-control",containerClass:"select-suggestion-container",value:h,onChange:this.onChange,onItemSelected:this.handleSelected,onFocus:this.onFocus,onBlur:this.onBlur,providers:r,completeOnTab:!0,renderDividers:!1,renderNoResults:!0,openOnFocus:!0,openWhenEmpty:!0,replaceAllInputOnSelect:!0}),t,o))}}])&&u(n.prototype,r),a&&u(n,a),t}();f(h,"propTypes",{providers:a.a.array.isRequired,value:a.a.string.isRequired,onSelected:a.a.func,label:a.a.node,labelClassName:a.a.string,inputClassName:a.a.string,helpText:a.a.node,placeholder:a.a.string,footer:a.a.node}),f(h,"defaultProps",{value:"",id:"",labelClassName:"",inputClassName:""})},1762:function(e,t,n){e.exports=function(e){n.e(32).then(function(t){e(n(2261))}.bind(null,n)).catch(n.oe)}},1768:function(e,t,n){"use strict";function r(e,t,n){var r=n.above,a=n.below;return e.top>r?"top":t-e.bottom>(a||r)?"bottom":"left"}n.d(t,"a",function(){return r})},1770:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(1538);function l(e){var t=e.loading,n=e.progress,r=e.containerClass,a=i.a.createElement("span",{className:"loader-percent"});return n&&(a=i.a.createElement("span",{className:"loader-percent"},"".concat(t," ").concat(n,"%"))),i.a.createElement("div",{className:r},i.a.createElement(s.a,null),a)}l.propTypes={progress:a.a.number,loading:a.a.string,containerClass:a.a.string},l.defaultProps={containerClass:"view-image__loading"}},1776:function(e,t,n){e.exports=function(e){n.e(26).then(function(t){e(n(2374))}.bind(null,n)).catch(n.oe)}},1777:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(0).k.PAGE_NOT_FOUND;var r=["/mfa/setup","/mfa/confirm"],a=["","email","ldap"];function o(e,t,n,o){return!("true"!==t.MFA||"true"!==n.EnableMultifactorAuthentication||"true"!==n.EnforceMultifactorAuthentication||-1!==r.indexOf(o)||!e||e.mfa_active||-1===a.indexOf(e.auth_service))}},1778:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});n(211);function r(e,t){if(e===t)return!0;return(e||"").split(".").slice(0,-2).join(".")===(t||"").split(".").slice(0,-2).join(".")}function a(e,t){if(e===t)return!0;for(var n=(e||"").split(".").filter(function(e){return null!==/^[0-9]+$/.exec(e)}),r=(t||"").split(".").filter(function(e){return null!==/^[0-9]+$/.exec(e)}),a=0;a<Math.max(n.length,r.length);a++){if((n[a]||0)>(r[a]||0))return!0;if((n[a]||0)<(r[a]||0))return!1}return!0}},1781:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(88),n(43),n(33),n(34),n(25),n(44),n(245),n(425);var r=n(30),a=n.n(r),o=n(7),i=n.n(o);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=u(t).call(this,e),n=!a||"object"!==s(a)&&"function"!=typeof a?p(r):a,m(p(n),"recalculateSize",function(){if(n.refs.reference&&n.refs.textarea){var e=n.refs.reference.scrollHeight,t=n.refs.textarea;if(e>0&&e!==n.height){var r=getComputedStyle(t),a=parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10);t.style.height=String(e+a)+"px",n.height=e,n.props.onHeightChange&&n.props.onHeightChange(e,parseInt(r.maxHeight,10))}}}),m(p(n),"getDOMNode",function(){return n.refs.textarea}),m(p(n),"handleChange",function(e){n.props.onChange&&n.props.onChange(e)}),n.height=0,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.Component),n=t,(r=[{key:"focus",value:function(){this.refs.textarea.focus()}},{key:"blur",value:function(){this.refs.textarea.blur()}},{key:"componentDidMount",value:function(){this.recalculateSize()}},{key:"componentDidUpdate",value:function(){this.recalculateSize()}},{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}({},this.props);Reflect.deleteProperty(e,"onHeightChange"),Reflect.deleteProperty(e,"providers"),Reflect.deleteProperty(e,"channelId");var t=e.value,n=e.defaultValue,r=e.placeholder,a=e.disabled,o=e.onInput,s=e.id,c=l(e,["value","defaultValue","placeholder","disabled","onInput","id"]),u={};this.height<=0?u.rows=1:u.height=this.height;var p=null,d=r.toLowerCase();return this.props.value||this.props.defaultValue||(p=i.a.createElement("div",Object.assign({},c,{style:h.placeholder}),r)),i.a.createElement("div",null,p,i.a.createElement("textarea",Object.assign({ref:"textarea",id:s},u,c,{role:"textbox","aria-label":d,disabled:a,onChange:this.handleChange,onInput:o,value:t,defaultValue:n})),i.a.createElement("div",{style:h.container},i.a.createElement("textarea",Object.assign({ref:"reference",id:s+"-reference",style:h.reference,disabled:!0,rows:"1"},c,{value:t||n}))))}},{key:"value",get:function(){return this.refs.textarea.value},set:function(e){this.refs.textarea.value=e}},{key:"selectionStart",get:function(){return this.refs.textarea.selectionStart},set:function(e){this.refs.textarea.selectionStart=e}},{key:"selectionEnd",get:function(){return this.refs.textarea.selectionEnd},set:function(e){this.refs.textarea.selectionEnd=e}}])&&c(n.prototype,r),a&&c(n,a),t}();m(f,"propTypes",{value:a.a.string,defaultValue:a.a.string,placeholder:a.a.string,onChange:a.a.func,onHeightChange:a.a.func}),m(f,"defaultProps",{placeholder:""});var h={container:{height:0,overflow:"hidden"},reference:{height:"auto",width:"100%"},placeholder:{overflow:"hidden",textOverflow:"ellipsis",opacity:.5,pointerEvents:"none",position:"absolute",whiteSpace:"nowrap"}}},1789:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(88),n(43);var r=n(7),a=n.n(r),o=n(56);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,a.a.PureComponent),n=t,(r=[{key:"render",value:function(){return a.a.createElement(o.c,{id:"generic_icons.edit",defaultMessage:"Edit Icon"},function(e){return a.a.createElement("i",{className:"fa fa-pencil",title:e})})}}])&&s(n.prototype,r),i&&s(n,i),t}()},1790:function(e,t,n){"use strict";n.d(t,"a",function(){return w});n(88),n(43),n(33),n(34),n(25),n(44);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(56),l=n(1763),c=n(1766),u=n(0),p=n(23),d=n(1541),m=n(1526),f=n(1501),h=n(1491);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=g(t).call(this,e),n=!a||"object"!==b(a)&&"function"!=typeof a?v(r):a,E(v(n),"handleCancel",function(e){n.setState({removeSrc:!1,setDefaultSrc:!1}),n.props.updateSection(e)}),E(v(n),"handleFileSelected",function(){n.confirmButton.current&&n.confirmButton.current.focus()}),E(v(n),"handleSave",function(e){e.preventDefault(),n.state.removeSrc?n.props.onRemove():n.state.setDefaultSrc?n.props.onSetDefault():n.props.onSubmit()}),E(v(n),"handleRemoveSrc",function(e){e.preventDefault(),n.setState({removeSrc:!0}),n.focusFirstElement()}),E(v(n),"handleSetDefaultSrc",function(e){e.preventDefault(),n.setState({setDefaultSrc:!0}),n.focusFirstElement()}),E(v(n),"handleFileChange",function(e){n.setState({removeSrc:!1,setDefaultSrc:!1}),n.props.onFileChange(e)}),E(v(n),"handleInputFile",function(){n.selectInput.current.value="",n.selectInput.current.click()}),E(v(n),"setPicture",function(e){if(e){n.previewBlob=URL.createObjectURL(e);var t=new FileReader;t.onload=function(e){var t=d.c(e.target.result),r=d.e(t);n.setState({image:n.previewBlob,orientationStyles:r})},t.readAsArrayBuffer(e)}}),E(v(n),"renderImg",function(){var e=n.props.imageContext;if(n.props.file){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){E(e,t,n[t])})}return e}({backgroundImage:"url("+n.state.image+")"},n.state.orientationStyles);return i.a.createElement("div",{className:"".concat(e,"-img-preview")},i.a.createElement("div",{className:"img-preview__image"},i.a.createElement("div",{alt:"".concat(e," image preview"),style:t,className:"".concat(e,"-img-preview")})))}if(n.state.setDefaultSrc)return i.a.createElement("img",{className:"".concat(e,"-img"),alt:"".concat(e," image"),src:n.props.defaultImageSrc});if(n.props.src&&!n.state.removeSrc){var r,a,o=i.a.createElement("img",{className:"".concat(e,"-img"),alt:"".concat(e," image"),src:n.props.src});return n.props.onRemove||n.props.onSetDefault?(n.props.onRemove?(r=i.a.createElement(s.c,{id:"setting_picture.remove",defaultMessage:"Remove this icon"}),a=n.handleRemoveSrc):n.props.onSetDefault&&(r=i.a.createElement(s.c,{id:"setting_picture.remove_profile_picture",defaultMessage:"Remove profile picture"}),a=n.handleSetDefaultSrc),i.a.createElement("div",{className:"".concat(e,"-img__container")},i.a.createElement("div",{className:"img-preview__image","aria-hidden":!0},o),i.a.createElement(l.a,{delayShow:u.i.OVERLAY_TIME_DELAY,placement:"right",overlay:i.a.createElement(c.a,{id:"removeIcon"},i.a.createElement("div",{"aria-hidden":!0},r))},i.a.createElement("button",{className:"".concat(e,"-img__remove"),onClick:a},i.a.createElement("span",{"aria-hidden":!0},""),i.a.createElement("span",{className:"sr-only"},r))))):o}return null}),n.settingList=i.a.createRef(),n.selectInput=i.a.createRef(),n.confirmButton=i.a.createRef(),n.state={image:null,removeSrc:!1,setDefaultSrc:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,o["Component"]),n=t,(r=[{key:"focusFirstElement",value:function(){this.settingList.current&&this.settingList.current.focus()}},{key:"componentDidMount",value:function(){this.focusFirstElement(),this.selectInput.current&&this.selectInput.current.addEventListener("input",this.handleFileSelected)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.file!==this.props.file&&(this.setState({image:null}),this.setPicture(e.file))}},{key:"componentWillUnmount",value:function(){this.previewBlob&&URL.revokeObjectURL(this.previewBlob),this.selectInput.current&&this.selectInput.current.removeEventListener("input",this.handleFileSelected)}},{key:"render",value:function(){var e,t,n=this.props.imageContext,r=this.renderImg(),a="btn btn-sm",o=!1;return this.props.submitActive||this.state.removeSrc||this.state.setDefaultSrc?a+=" btn-primary":(a+=" btn-inactive disabled",o=!0),e="team"===n?i.a.createElement(h.b,{id:"setting_picture.help.team",defaultMessage:"Upload a team icon in BMP, JPG or PNG format.\\nSquare images with a solid background color are recommended."}):i.a.createElement(s.c,{id:"setting_picture.help.profile",defaultMessage:"Upload a picture in BMP, JPG or PNG format. Maximum file size: {max}",values:{max:Object(p.p)(this.props.maxFileSize)}}),r&&(t=i.a.createElement("li",{className:"setting-list-item",role:"presentation"},r)),i.a.createElement("ul",{className:"section-max form-horizontal"},i.a.createElement("li",{className:"col-xs-12 section-title"},this.props.title),i.a.createElement("li",{className:"col-xs-offset-3 col-xs-8"},i.a.createElement("ul",{className:"setting-list",ref:this.settingList,tabIndex:"-1","aria-label":this.props.title,"aria-describedby":"setting-picture__helptext"},t,i.a.createElement("li",{id:"setting-picture__helptext",className:"setting-list-item padding-top x2",role:"presentation"},e),i.a.createElement("li",{className:"setting-list-item",role:"presentation"},i.a.createElement("hr",null),i.a.createElement(f.a,{errors:[this.props.clientError,this.props.serverError],type:"modal"}),i.a.createElement("input",{ref:this.selectInput,className:"hidden",accept:".jpg,.png,.bmp",type:"file",onChange:this.handleFileChange,disabled:this.props.loadingPicture,"aria-hidden":!0,tabIndex:"-1"}),i.a.createElement("button",{className:"btn btn-sm btn-primary btn-file sel-btn",disabled:this.props.loadingPicture,onClick:this.handleInputFile,"aria-label":Object(p.ab)("setting_picture.select","Select")},i.a.createElement(s.c,{id:"setting_picture.select",defaultMessage:"Select"})),i.a.createElement("button",{tabIndex:o?"-1":"0",ref:this.confirmButton,className:a,onClick:this.props.loadingPicture?function(){return!0}:this.handleSave,"aria-label":this.props.loadingPicture?Object(p.ab)("setting_picture.uploading","Uploading..."):Object(p.ab)("setting_picture.save","Save")},i.a.createElement(m.a,{loading:this.props.loadingPicture,text:Object(p.ab)("setting_picture.uploading","Uploading...")},i.a.createElement(s.c,{id:"setting_picture.save",defaultMessage:"Save"}))),i.a.createElement("button",{className:"btn btn-link btn-sm theme",href:"#",onClick:this.handleCancel,"aria-label":Object(p.ab)("setting_picture.cancel","Cancel")},i.a.createElement(s.c,{id:"setting_picture.cancel",defaultMessage:"Cancel"}))))))}}])&&y(n.prototype,r),a&&y(n,a),t}();E(w,"defaultProps",{imageContext:"profile"}),E(w,"propTypes",{clientError:a.a.string,serverError:a.a.string,src:a.a.string,defaultImageSrc:a.a.string,file:a.a.object,loadingPicture:a.a.bool,submitActive:a.a.bool,onRemove:a.a.func,onSetDefault:a.a.func,onSubmit:a.a.func,title:a.a.string,onFileChange:a.a.func,updateSection:a.a.func,imageContext:a.a.string,maxFileSize:a.a.number})},1794:function(e,t,n){"use strict";var r=n(7),a=n.n(r),o=n(30),i=n.n(o),s=n(1598),l=function(e){var t=e.url,n=e.text;return a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t},n)};l.propTypes={url:i.a.string.isRequired,text:i.a.oneOfType([i.a.string,i.a.node]).isRequired};var c=Object(s.a)(l);c.displayName="MenuItemExternalLink",t.a=c},1866:function(e,t,n){"use strict";n(88),n(43),n(304);var r=n(183),a=n.n(r),o=n(30),i=n.n(o),s=n(7),l=n.n(s),c=n(419),u=n.n(c),p=n(56),d=n(1678),m=n(0),f=n(1494),h=n(418),b=n(12),y=(n(245),n(156),n(25),n(36)),g=n(23),v=n(1546),_=n(1506),E=n(1491);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,C(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,l.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=null;this.props.actions&&(t=this.props.actions.map(function(t,n){return l.a.createElement(t,Object.assign({key:n.toString(),user:e.props.user,index:e.props.index,totalUsers:e.props.totalUsers},e.props.actionProps,e.props.actionUserProps))}));var n,r=this.props.user.email,a="more-modal__description";this.props.extraInfo&&this.props.extraInfo.length>0?(r=l.a.createElement(E.b,{id:"admin.user_item.emailTitle",defaultMessage:"**Email:** {email}",values:{email:this.props.user.email}}),a=""):n=this.props.user.status?this.props.user.status:this.props.status,this.props.user.is_bot&&(n=null,r=null);var o=null,i=null;return this.props.userCount>=0&&(o=g.h("userListRowName"+this.props.userCount),i=g.h("userListRowEmail"+this.props.userCount)),l.a.createElement("div",{key:this.props.user.id,className:"more-modal__row"},l.a.createElement(v.a,{src:y.Client4.getProfilePictureUrl(this.props.user.id,this.props.user.last_picture_update),status:n,width:"32",height:"32"}),l.a.createElement("div",{className:"more-modal__details"},l.a.createElement("div",{id:o,className:"more-modal__name"},g.m(this.props.user),l.a.createElement(_.a,{className:"badge-popoverlist",show:Boolean(this.props.user.is_bot)})),l.a.createElement("div",{id:i,className:a},r),this.props.extraInfo),l.a.createElement("div",{className:"more-modal__actions"},t))}}])&&O(n.prototype,r),a&&O(n,a),t}();T(j,"propTypes",{user:i.a.object.isRequired,status:i.a.string,extraInfo:i.a.arrayOf(i.a.object),actions:i.a.arrayOf(i.a.func),actionProps:i.a.object,actionUserProps:i.a.object,index:i.a.number,totalUsers:i.a.number,userCount:i.a.number}),T(j,"defaultProps",{extraInfo:[],actions:[],actionProps:{},actionUserProps:{}});var k=Object(h.connect)(function(e,t){var n=t.user||{};return{status:Object(b.getStatusForUserId)(e,n.id)}})(j);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=R(t).call(this,e))||"object"!==M(a)&&"function"!=typeof a?I(r):a).scrollToTop=n.scrollToTop.bind(I(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,l.a.Component),n=t,(r=[{key:"scrollToTop",value:function(){this.refs.container&&(this.refs.container.scrollTop=0)}},{key:"render",value:function(){var e,t=this,n=this.props.users,r=this.props.rowComponentType;return null==n?l.a.createElement(f.a,null):(e=n.length>0?n.map(function(e,a){return l.a.createElement(r,{key:e.id,user:e,extraInfo:t.props.extraInfo[e.id],actions:t.props.actions,actionProps:t.props.actionProps,actionUserProps:t.props.actionUserProps[e.id],index:a,totalUsers:n.length,userCount:a>=0&&a<m.Q.TEST_ID_COUNT?a:-1})}):l.a.createElement("div",{key:"no-users-found",className:"more-modal__placeholder-row"},l.a.createElement("p",null,l.a.createElement(p.c,{id:"user_list.notFound",defaultMessage:"No users found"}))),l.a.createElement("div",{ref:"container"},e))}}])&&N(n.prototype,r),a&&N(n,a),t}();x(L,"propTypes",{users:i.a.arrayOf(i.a.object),extraInfo:i.a.object,actions:i.a.arrayOf(i.a.func),actionProps:i.a.object,actionUserProps:i.a.object,rowComponentType:i.a.func}),x(L,"defaultProps",{users:[],extraInfo:{},actions:[],actionProps:{},rowComponentType:k});var D=n(1499),U=n(57);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return W});var W=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=F(t).call(this,e))||"object"!==q(a)&&"function"!=typeof a?B(r):a).nextPage=n.nextPage.bind(B(n)),n.previousPage=n.previousPage.bind(B(n)),n.focusSearchBar=n.focusSearchBar.bind(B(n)),n.handleInput=n.handleInput.bind(B(n)),n.renderCount=n.renderCount.bind(B(n)),n.nextTimeoutId=0,n.state={nextDisabled:!1},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,l.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.focusSearchBar()}},{key:"componentDidUpdate",value:function(e){this.props.page===e.page&&this.props.term===e.term||this.refs.userList.scrollToTop()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.nextTimeoutId)}},{key:"nextPage",value:function(e){var t=this;e.preventDefault(),this.setState({nextDisabled:!0}),this.nextTimeoutId=setTimeout(function(){return t.setState({nextDisabled:!1})},500),this.props.nextPage(),a()(u.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}},{key:"previousPage",value:function(e){e.preventDefault(),this.props.previousPage(),a()(u.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}},{key:"focusSearchBar",value:function(){this.props.focusOnMount&&this.refs.filter.focus()}},{key:"handleInput",value:function(e){this.props.onTermChange(e.target.value),this.props.search(e.target.value)}},{key:"renderCount",value:function(e){if(!e)return null;if(this.props.filter)return null;var t,n,r=e.length,a=this.props.total,o=Boolean(this.props.term);return o?(t=-1,n=-1):(t=this.props.page*this.props.usersPerPage,n=Math.min(t+this.props.usersPerPage,a)),this.props.renderCount?this.props.renderCount(r,this.props.total,t,n,o):this.props.total?o?l.a.createElement(p.c,{id:"filtered_user_list.countTotal",defaultMessage:"{count, number} {count, plural, one {member} other {members}} of {total, number} total",values:{count:r,total:a}}):l.a.createElement(p.c,{id:"filtered_user_list.countTotalPage",defaultMessage:"{startCount, number} - {endCount, number} {count, plural, one {member} other {members}} of {total, number} total",values:{count:r,startCount:t+1,endCount:n,total:a}}):null}},{key:"render",value:function(){var e,t,n,r;if(this.props.term||!this.props.users)n=this.props.users;else if(!this.props.term){var a=this.props.page*this.props.usersPerPage,o=a+this.props.usersPerPage;n=this.props.users.slice(a,o),o<this.props.users.length&&(e=l.a.createElement("button",{id:"searchableUserListNextBtn",className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled},l.a.createElement(p.c,{id:"filtered_user_list.next",defaultMessage:"Next"}))),this.props.page>0&&(t=l.a.createElement("button",{id:"searchableUserListPrevBtn",className:"btn btn-link filter-control filter-control__prev",onClick:this.previousPage},l.a.createElement(p.c,{id:"filtered_user_list.prev",defaultMessage:"Previous"})))}return r=this.props.renderFilterRow?this.props.renderFilterRow(this.handleInput):l.a.createElement("div",{className:"col-xs-12"},l.a.createElement(d.a,{id:"searchUsersInput",ref:"filter",className:"form-control filter-textbox",placeholder:{id:Object(U.b)("filtered_user_list.search"),defaultMessage:"Search users"},inputComponent:D.a,value:this.props.term,onInput:this.handleInput})),l.a.createElement("div",{className:"filtered-user-list"},l.a.createElement("div",{className:"filter-row"},r,l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("span",{id:"searchableUserListTotal",className:"member-count pull-left","aria-live":"polite"},this.renderCount(n)))),l.a.createElement("div",{className:"more-modal__list"},l.a.createElement(L,{ref:"userList",users:n,extraInfo:this.props.extraInfo,actions:this.props.actions,actionProps:this.props.actionProps,actionUserProps:this.props.actionUserProps,rowComponentType:this.props.rowComponentType})),l.a.createElement("div",{className:"filter-controls"},t,e))}}])&&H(n.prototype,r),o&&H(n,o),t}();V(W,"propTypes",{users:i.a.arrayOf(i.a.object),usersPerPage:i.a.number,total:i.a.number,extraInfo:i.a.object,nextPage:i.a.func.isRequired,previousPage:i.a.func.isRequired,search:i.a.func.isRequired,actions:i.a.arrayOf(i.a.func),actionProps:i.a.object,actionUserProps:i.a.object,focusOnMount:i.a.bool,renderCount:i.a.func,filter:i.a.string,renderFilterRow:i.a.func,page:i.a.number.isRequired,term:i.a.string.isRequired,onTermChange:i.a.func.isRequired,rowComponentType:i.a.func}),V(W,"defaultProps",{users:[],usersPerPage:50,extraInfo:{},actions:[],actionProps:{},actionUserProps:{},showTeamToggle:!1,focusOnMount:!1})},1867:function(e,t,n){"use strict";var r=n(418),a=n(20),o=n(1512),i=(n(88),n(43),n(116),n(44),n(74),n(33),n(34),n(25),n(117),n(7)),s=n.n(i),l=n(30),c=n.n(l),u=n(1739),p=n(56),d=n(1923),m=n(1560),f=n(23),h=(n(305),n(306),n(1751)),b=n(1676),y=n(1752),g=n(1870),v=n(1753);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=w(t).call(this,e),n=!a||"object"!==_(a)&&"function"!=typeof a?O(r):a,C(O(n),"handleSelected",function(e){var t=n.props,r=t.name,a=t.dataSource,o=t.onChange;"users"===a?(o(r,e.id),n.setState({value:e.username})):"channels"===a?(o(r,e.id),n.setState({value:e.display_name})):(o(r,e.value),n.setState({value:e.text}))}),n.providers=[],"select"===e.type&&("users"===e.dataSource?n.providers=[new b.a]:"channels"===e.dataSource?n.providers=[new y.a]:e.options&&(n.providers=[new h.a(e.options)])),n.state={value:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,s.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.name,n=e.subtype,r=e.displayName,a=e.value,o=e.placeholder,i=e.onChange,l=e.helpText,c=e.errorText,u=e.optional,d=this.props,m=d.type,f=d.maxLength,h=r;h=u?s.a.createElement(s.a.Fragment,null,r+" ",s.a.createElement("span",{className:"font-weight--normal light"},s.a.createElement(p.c,{id:"interactive_dialog.element.optional",defaultMessage:"(optional)"}))):s.a.createElement(s.a.Fragment,null,r,s.a.createElement("span",{className:"error-text"}," *"));var b=l;return c&&(b=s.a.createElement(s.a.Fragment,null,l,s.a.createElement("div",{className:"error-text margin-top x2"},c))),"text"===m||"textarea"===m?("text"===m?(f=f||150,m=n&&g.a.validTypes.includes(n)?n:"input"):f=f||3e3,s.a.createElement(g.a,{id:t,type:m,label:h,maxLength:f,value:a||"",placeholder:o,helpText:b,onChange:i,resizable:!1})):"select"===m?s.a.createElement(v.a,{id:t,providers:this.providers,onSelected:this.handleSelected,label:h,helpText:b,placeholder:o,value:this.state.value}):null}}])&&E(n.prototype,r),a&&E(n,a),t}();function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}C(P,"propTypes",{displayName:c.a.string.isRequired,name:c.a.string.isRequired,type:c.a.string.isRequired,subtype:c.a.string,placeholder:c.a.string,helpText:c.a.string,errorText:c.a.node,maxLength:c.a.number,dataSource:c.a.string,optional:c.a.bool,options:c.a.arrayOf(c.a.object),value:c.a.any,onChange:c.a.func});var A=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=M(t).call(this,e),n=!a||"object"!==T(a)&&"function"!=typeof a?N(r):a,I(N(n),"handleSubmit",function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var r,a,o,i,l,c,u,m,f,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=n.props.elements,a=n.state.values,o={},r&&r.forEach(function(e){var t=Object(d.checkDialogElementForError)(e,a[e.name]);t&&(o[e.name]=s.a.createElement(p.c,{id:t.id,defaultMessage:t.defaultMessage,values:t.values}))}),n.setState({errors:o}),0===Object.keys(o).length){e.next=8;break}return e.abrupt("return");case 8:return i=n.props,l=i.url,c=i.callbackId,u=i.state,m={url:l,callback_id:c,state:u,submission:a},n.setState({submitting:!0}),e.next=13,n.props.actions.submitInteractiveDialog(m);case 13:if(f=e.sent,h=f.data,n.setState({submitting:!1}),h&&h.errors&&0!==Object.keys(h.errors).length){e.next=19;break}return n.handleHide(!0),e.abrupt("return");case 19:if(!Object(d.checkIfErrorsMatchElements)(h.errors,r)){e.next=22;break}return n.setState({errors:h.errors}),e.abrupt("return");case 22:n.handleHide(!0);case 23:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){j(o,r,a,i,s,"next",e)}function s(e){j(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()),I(N(n),"onHide",function(){n.handleHide(!1)}),I(N(n),"handleHide",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.props,r=t.url,a=t.callbackId,o=t.state,i=t.notifyOnCancel;if(!e&&i){var s={url:r,callback_id:a,state:o,cancelled:!0};n.props.actions.submitInteractiveDialog(s)}n.setState({show:!1})}),I(N(n),"onChange",function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){I(e,t,n[t])})}return e}({},n.state.values,I({},e,t));n.setState({values:r})});var o={};return null!=e.elements&&e.elements.forEach(function(e){o[e.name]=e.default||null}),n.state={show:!0,values:o,errors:{},submitting:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,s.a.Component),n=t,(r=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.title,a=n.iconUrl,o=n.submitLabel,i=n.elements,l=s.a.createElement(p.c,{id:"interactive_dialog.submit",defaultMessage:"Submit"});return o&&(l=o),a&&(e=s.a.createElement("img",{id:"interactiveDialogIconUrl",alt:"modal title icon",className:"more-modal__image",width:"36",height:"36",src:a})),s.a.createElement(u.a,{id:"interactiveDialogModal",dialogClassName:"a11y__modal about-modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,backdrop:"static",role:"dialog","aria-labelledby":"interactiveDialogModalLabel"},s.a.createElement(u.a.Header,{closeButton:!0,style:{borderBottom:null==i&&"0px"}},s.a.createElement(u.a.Title,{componentClass:"h1",id:"interactiveDialogModalLabel"},e,r)),i&&s.a.createElement(u.a.Body,null,i.map(function(e){return s.a.createElement(P,{key:"dialogelement"+e.name,displayName:e.display_name,name:e.name,type:e.type,subtype:e.subtype,helpText:e.help_text,errorText:t.state.errors[e.name],placeholder:e.placeholder,minLength:e.min_length,maxLength:e.max_length,dataSource:e.data_source,optional:e.optional,options:e.options,value:t.state.values[e.name],onChange:t.onChange})})),s.a.createElement(u.a.Footer,null,s.a.createElement("button",{id:"interactiveDialogCancel",type:"button",className:"btn btn-link cancel-button",onClick:this.onHide},s.a.createElement(p.c,{id:"interactive_dialog.cancel",defaultMessage:"Cancel"})),s.a.createElement(m.a,{id:"interactiveDialogSubmit",type:"button",className:"btn btn-primary save-button",onClick:this.handleSubmit,spinning:this.state.submitting,spinningText:Object(f.ab)("interactive_dialog.submitting","Submitting...")},l)))}}])&&k(n.prototype,r),a&&k(n,a),t}();I(A,"propTypes",{url:c.a.string.isRequired,callbackId:c.a.string,elements:c.a.arrayOf(c.a.object),title:c.a.string.isRequired,iconUrl:c.a.string,submitLabel:c.a.string,notifyOnCancel:c.a.bool,state:c.a.string,onHide:c.a.func,actions:c.a.shape({submitInteractiveDialog:c.a.func.isRequired}).isRequired});t.a=Object(r.connect)(function(e){var t=e.entities.integrations.dialog;return t&&t.dialog?{url:t.url,callbackId:t.dialog.callback_id,elements:t.dialog.elements,title:t.dialog.title,iconUrl:t.dialog.icon_url,submitLabel:t.dialog.submit_label,notifyOnCancel:t.dialog.notify_on_cancel,state:t.dialog.state}:{}},function(e){return{actions:Object(a.bindActionCreators)({submitInteractiveDialog:o.submitInteractiveDialog},e)}})(A)},1868:function(e,t,n){"use strict";var r=n(418),a=n(35),o=n(12),i=(n(88),n(43),n(30)),s=n.n(i),l=n(7),c=n.n(l),u=n(1685),p=n(36),d=n(107),m=n(1732),f=n(1768);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=300,w=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=y(t).call(this,e),n=!a||"object"!==h(a)&&"function"!=typeof a?g(r):a,_(g(n),"handleClick",function(e){var t=n.overlayRef.current.getBoundingClientRect(),r=Object(f.a)(t,window.innerHeight,{above:E});n.setState({target:e.target,show:!n.state.show,placement:r})}),_(g(n),"hideOverlay",function(){n.setState({show:!1})}),n.state={user:n.getUserFromMentionName(e),show:!1},n.overlayRef=c.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,c.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.mentionName===this.props.mentionName&&e.usersByUsername===this.props.usersByUsername||this.setState({user:this.getUserFromMentionName(e)})}},{key:"getUserFromMentionName",value:function(e){for(var t=e.usersByUsername,n=e.mentionName.toLowerCase();n.length>0;){if(t.hasOwnProperty(n))return t[n];if(!/[._-]$/.test(n))break;n=n.substring(0,n.length-1)}return""}},{key:"render",value:function(){if(!this.state.user)return c.a.createElement(c.a.Fragment,null,this.props.children);var e=this.state.user,t=this.props.mentionName.substring(e.username.length),n="mention-link";return e.id===this.props.currentUserId&&(n+=" mention--highlight"),c.a.createElement("span",null,c.a.createElement(u.a,{placement:this.state.placement,show:this.state.show,target:this.state.target,rootClose:!0,onHide:this.hideOverlay},c.a.createElement(m.a,{userId:e.id,src:p.Client4.getProfilePictureUrl(e.id,e.last_picture_update),isRHS:this.props.isRHS,hasMention:this.props.hasMention,hide:this.hideOverlay})),c.a.createElement("a",{className:n,onClick:this.handleClick,ref:this.overlayRef},"@"+Object(d.displayUsername)(e,this.props.teammateNameDisplay)),t)}}])&&b(n.prototype,r),a&&b(n,a),t}();_(w,"propTypes",{children:s.a.node,currentUserId:s.a.string.isRequired,hasMention:s.a.bool,isRHS:s.a.bool,mentionName:s.a.string.isRequired,teammateNameDisplay:s.a.string.isRequired,usersByUsername:s.a.object.isRequired}),_(w,"defaultProps",{isRHS:!1,hasMention:!1});t.a=Object(r.connect)(function(e){return{currentUserId:Object(o.getCurrentUserId)(e),teammateNameDisplay:Object(a.getTeammateNameDisplaySetting)(e),usersByUsername:Object(o.getUsersByUsername)(e)}})(w)},1869:function(e,t,n){"use strict";var r=n(418),a=n(20),o=n(1503),i=(n(88),n(43),n(33),n(34),n(25),n(44),n(245),n(30)),s=n.n(i),l=n(7),c=n.n(l);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b,y,g,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,f(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,c.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.modals,n=p(e,["modals"]),r=t.modalState;if(!t)return c.a.createElement("div",null);var a=[];for(var o in r)if(r.hasOwnProperty(o)){var i=r[o];if(i.open){var s=c.a.createElement(i.dialogType,Object.assign({},i.dialogProps,{onHide:n.actions.closeModal.bind(this,o),key:"".concat(o,"_modal")}));a.push(s)}}return c.a.createElement("div",null,a)}}])&&d(n.prototype,r),a&&d(n,a),t}();b=v,y="propTypes",g={modals:s.a.object.isRequired,actions:s.a.shape({closeModal:s.a.func.isRequired}).isRequired},y in b?Object.defineProperty(b,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):b[y]=g;t.a=Object(r.connect)(function(e){return{modals:e.views.modals}},function(e){return{actions:Object(a.bindActionCreators)({closeModal:o.a},e)}})(v)},1870:function(e,t,n){"use strict";n(88),n(43),n(305),n(306);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=function(e){var t=e.children,n=e.footer,r=e.helpText,a=e.inputId,o=e.label,s=e.labelClassName,l=e.inputClassName;return i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{className:"control-label "+s,htmlFor:a},o),i.a.createElement("div",{className:l},t,i.a.createElement("div",{className:"help-text"},r),n))};s.propTypes={inputId:a.a.string,label:a.a.node.isRequired,labelClassName:a.a.string,inputClassName:a.a.string,children:a.a.node.isRequired,helpText:a.a.node,footer:a.a.node};var l=s;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return h});var h=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=p(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==c(a)&&"function"!=typeof a?d(r):a,f(d(n),"handleChange",function(e){"number"===n.props.type?n.props.onChange(n.props.id,parseInt(e.target.value,10)):n.props.onChange(n.props.id,e.target.value)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.resizable,t=this.props.type,n=null;if("textarea"===t){var r={};e||(r.resize="none"),n=i.a.createElement("textarea",{id:this.props.id,style:r,className:"form-control",rows:"5",placeholder:this.props.placeholder,value:this.props.value,maxLength:this.props.maxLength,onChange:this.handleChange,disabled:this.props.disabled})}else t=["input","email","tel","number","url"].includes(t)?t:"input",n=i.a.createElement("input",{id:this.props.id,className:"form-control",type:t,placeholder:this.props.placeholder,value:this.props.value,maxLength:this.props.maxLength,onChange:this.handleChange,disabled:this.props.disabled});return i.a.createElement(l,{label:this.props.label,labelClassName:this.props.labelClassName,inputClassName:this.props.inputClassName,helpText:this.props.helpText,inputId:this.props.id,footer:this.props.footer},n)}}])&&u(n.prototype,r),a&&u(n,a),t}();f(h,"validTypes",["input","textarea","number","email","tel","url"]),f(h,"propTypes",{id:a.a.string.isRequired,label:a.a.node.isRequired,labelClassName:a.a.string,placeholder:a.a.string,helpText:a.a.node,footer:a.a.node,value:a.a.oneOfType([a.a.string,a.a.number]).isRequired,inputClassName:a.a.string,maxLength:a.a.number,resizable:a.a.bool,onChange:a.a.func,disabled:a.a.bool,type:a.a.oneOf(h.validTypes)}),f(h,"defaultProps",{labelClassName:"",inputClassName:"",type:"input",maxLength:null,resizable:!0})},1871:function(e,t,n){"use strict";var r=n(418),a=n(12),o=n(316),i=n(314),s=n(35),l=n(243),c=n(0),u=(n(88),n(43),n(245),n(156),n(25),n(30)),p=n.n(u),d=n(7),m=n.n(d),f=n(56),h=n(302),b=n.n(h);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w,O,S,C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,m.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.enableTimezone,n=e.eventTime,r=e.timeZone,a=e.useMilitaryTime,o=n?new Date(n):new Date,i=b()(o);t&&r?(i.tz(r),i=i.toString()+" ("+i.tz()+")"):i=i.toString();var s=t&&r?{timeZone:r}:{};return m.a.createElement("time",{"aria-label":o,className:"post__time",dateTime:o.toISOString(),title:i,id:"localDateTime"},m.a.createElement(f.d,Object.assign({},s,{hour12:!a,value:o})))}}])&&g(n.prototype,r),a&&g(n,a),t}();w=C,O="propTypes",S={eventTime:p.a.number,useMilitaryTime:p.a.bool,timeZone:p.a.string,enableTimezone:p.a.bool},O in w?Object.defineProperty(w,O,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[O]=S;t.a=Object(r.connect)(function(e,t){var n,r=Object(a.getCurrentUserId)(e);return n=t.userTimezone?t.userTimezone:Object(o.getUserTimezone)(e,r),{enableTimezone:Object(l.a)(e),useMilitaryTime:Object(s.getBool)(e,c.z.CATEGORY_DISPLAY_SETTINGS,c.z.USE_MILITARY_TIME,!1),timeZone:Object(i.getUserCurrentTimezone)(n)}})(C)},1872:function(e,t,n){"use strict";var r=n(418),a=n(24),o=n(0),i=n(1581),s=(n(88),n(43),n(30)),l=n.n(s),c=n(7),u=n.n(c),p=n(1739),d=n(56),m=n(1491),f=n(1693);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=y(t).call(this,e))||"object"!==h(a)&&"function"!=typeof a?g(r):a).doHide=n.doHide.bind(g(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,u.a.PureComponent),n=t,(r=[{key:"doHide",value:function(){this.props.onHide()}},{key:"render",value:function(){var e,t,n,r,a=this.props.config,o=this.props.license,i=u.a.createElement(d.c,{id:"about.teamEditiont0",defaultMessage:"Team Edition"}),s=u.a.createElement(d.c,{id:"about.teamEditionSt",defaultMessage:"All your team communication in one place, instantly searchable and accessible anywhere."}),l=u.a.createElement("div",null,u.a.createElement(d.c,{id:"about.teamEditionLearn",defaultMessage:"Join the Mattermost community at "}),u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://www.mattermost.org/"},"mattermost.org"));"true"===a.BuildEnterpriseReady&&(i=u.a.createElement(d.c,{id:"about.teamEditiont1",defaultMessage:"Enterprise Edition"}),s=u.a.createElement(d.c,{id:"about.enterpriseEditionSt",defaultMessage:"Modern communication from behind your firewall."}),l=u.a.createElement("div",null,u.a.createElement(d.c,{id:"about.enterpriseEditionLearn",defaultMessage:"Learn more about Enterprise Edition at "}),u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://about.mattermost.com/"},"about.mattermost.com")),"true"===o.IsLicensed&&(i=u.a.createElement(d.c,{id:"about.enterpriseEditione1",defaultMessage:"Enterprise Edition"}),e=u.a.createElement("div",{className:"form-group"},u.a.createElement(d.c,{id:"about.licensed",defaultMessage:"Licensed to:"}),"",o.Company))),a.TermsOfServiceLink&&(t=u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:a.TermsOfServiceLink},u.a.createElement(d.c,{id:"about.tos",defaultMessage:"Terms of Service"}))),a.PrivacyPolicyLink&&(n=u.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:a.PrivacyPolicyLink},u.a.createElement(d.c,{id:"about.privacy",defaultMessage:"Privacy Policy"}))),a.TermsOfServiceLink&&a.PrivacyPolicyLink&&(r=u.a.createElement("span",null," - "));var c=u.a.createElement("div",null,u.a.createElement(d.c,{id:"about.buildnumber",defaultMessage:"Build Number:"}),u.a.createElement("span",{id:"buildnumberString"},""+a.BuildNumber));isNaN(a.BuildNumber)&&(c=null);var h=a.BuildNumber;return isNaN(a.BuildNumber)||(h="ci"),u.a.createElement(p.a,{dialogClassName:"a11y__modal about-modal",show:this.props.show,onHide:this.doHide,role:"dialog","aria-labelledby":"aboutModalLabel"},u.a.createElement(p.a.Header,{closeButton:!0},u.a.createElement(p.a.Title,{componentClass:"h1",id:"aboutModalLabel"},u.a.createElement(d.c,{id:"about.title",values:{appTitle:a.SiteName||"Mattermost"},defaultMessage:"About {appTitle}"}))),u.a.createElement(p.a.Body,null,u.a.createElement("div",{className:"about-modal__content"},u.a.createElement("div",{className:"about-modal__logo"},u.a.createElement(f.a,null)),u.a.createElement("div",null,u.a.createElement("h3",{className:"about-modal__title"},"Mattermost"," ",i),u.a.createElement("p",{className:"about-modal__subtitle padding-bottom"},s),u.a.createElement("div",{className:"form-group less"},u.a.createElement("div",null,u.a.createElement(d.c,{id:"about.version",defaultMessage:"Mattermost Version:"}),u.a.createElement("span",{id:"versionString"},""+h)),u.a.createElement("div",null,u.a.createElement(d.c,{id:"about.dbversion",defaultMessage:"Database Schema Version:"}),u.a.createElement("span",{id:"dbversionString"},""+a.Version)),c,u.a.createElement("div",null,u.a.createElement(d.c,{id:"about.database",defaultMessage:"Database:"}),""+a.SQLDriverName)),e)),u.a.createElement("div",{className:"about-modal__footer"},l,u.a.createElement("div",{className:"form-group"},u.a.createElement("div",{className:"about-modal__copyright"},u.a.createElement(d.c,{id:"about.copyright",defaultMessage:"Copyright 2015 - {currentYear} Mattermost, Inc. All rights reserved",values:{currentYear:(new Date).getFullYear()}})),u.a.createElement("div",{className:"about-modal__links"},t,r,n))),u.a.createElement("div",{className:"about-modal__notice form-group padding-top x2"},u.a.createElement("p",null,u.a.createElement(m.b,{id:"about.notice",defaultMessage:"Mattermost is made possible by the open source software used in our [server](!https://about.mattermost.com/platform-notice-txt/), [desktop](!https://about.mattermost.com/desktop-notice-txt/) and [mobile](!https://about.mattermost.com/mobile-notice-txt/) apps."}))),u.a.createElement("div",{className:"about-modal__hash"},u.a.createElement("p",null,u.a.createElement(d.c,{id:"about.hash",defaultMessage:"Build Hash:"}),"",a.BuildHash,u.a.createElement("br",null),u.a.createElement(d.c,{id:"about.hashee",defaultMessage:"EE Build Hash:"}),"",a.BuildHashEnterprise,u.a.createElement("br",null),u.a.createElement(d.c,{id:"about.hashwebapp",defaultMessage:"Webapp Build Hash:"}),"",this.props.webappBuildHash||"db8d4cdbbf41dbe6a6a33d78a07db4b6b8aae1a0\n"),u.a.createElement("p",null,u.a.createElement(d.c,{id:"about.date",defaultMessage:"Build Date:"}),"",a.BuildDate))))}}])&&b(n.prototype,r),a&&b(n,a),t}();_(E,"defaultProps",{show:!1}),_(E,"propTypes",{show:l.a.bool.isRequired,onHide:l.a.func.isRequired,config:l.a.object.isRequired,license:l.a.object.isRequired,webappBuildHash:l.a.string});t.a=Object(r.connect)(function(e){var t=o.r.ABOUT;return{config:Object(a.getConfig)(e),license:Object(a.getLicense)(e),show:Object(i.a)(e,t)}})(E)},1873:function(e,t,n){"use strict";n(44),n(945),n(33),n(34),n(118),n(120),n(305),n(306),n(116),n(25),n(117);var r=n(36),a=n(13),o=n(0),i=n(307),s=n(7),l=n.n(s),c=n(440),u=n.n(c),p=n(1591),d=n(309),m=n(1617),f=n(23);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:e,data:{id:r,pluginId:t,component:n}}),r}var y=function(e){return"function"==typeof e?l.a.createElement(e):e},g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t}var t,n,r;return t=e,(n=[{key:"registerRootComponent",value:function(e){return b("Root",this.id,e)}},{key:"registerPopoverUserAttributesComponent",value:function(e){return b("PopoverUserAttributes",this.id,e)}},{key:"registerPopoverUserActionsComponent",value:function(e){return b("PopoverUserActions",this.id,e)}},{key:"registerLeftSidebarHeaderComponent",value:function(e){return b("LeftSidebarHeader",this.id,e)}},{key:"registerBottomTeamSidebarComponent",value:function(e){return b("BottomTeamSidebar",this.id,e)}},{key:"registerPostMessageAttachmentComponent",value:function(e){return b("PostMessageAttachment",this.id,e)}},{key:"registerLinkTooltipComponent",value:function(e){return b("LinkTooltip",this.id,e)}},{key:"registerChannelHeaderButtonAction",value:function(e,t,n,r){var i=Object(f.r)(),s={id:i,pluginId:this.id,icon:y(e),action:t,dropdownText:y(n),tooltipText:r};return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"ChannelHeaderButton",data:s}),a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"MobileChannelHeaderButton",data:s}),i}},{key:"registerPostTypeComponent",value:function(e,t){var n=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_POST_COMPONENT,data:{id:n,pluginId:this.id,type:e,component:t}}),n}},{key:"registerPostCardTypeComponent",value:function(e,t){var n=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_POST_CARD_COMPONENT,data:{id:n,pluginId:this.id,type:e,component:t}}),n}},{key:"registerMainMenuAction",value:function(e,t,n){var r=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"MainMenu",data:{id:r,pluginId:this.id,text:y(e),action:t,mobileIcon:y(n)}}),r}},{key:"registerPostDropdownMenuAction",value:function(e,t,n){var r=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"PostDropdownMenu",data:{id:r,pluginId:this.id,text:y(e),action:t,filter:n}}),r}},{key:"registerPostDropdownMenuComponent",value:function(e){return b("PostDropdownMenuItem",this.id,e)}},{key:"registerFileUploadMethod",value:function(e,t,n){var r=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"FileUploadMethod",data:{id:r,pluginId:this.id,text:n,action:t,icon:e}}),r}},{key:"registerFilesWillUploadHook",value:function(e){var t=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"FilesWillUploadHook",data:{id:t,pluginId:this.id,hook:e}}),t}},{key:"unregisterComponent",value:function(e){a.a.dispatch({type:o.e.REMOVED_PLUGIN_COMPONENT,id:e})}},{key:"unregisterPostTypeComponent",value:function(e){a.a.dispatch({type:o.e.REMOVED_PLUGIN_POST_COMPONENT,id:e})}},{key:"registerReducer",value:function(e){u.a.register("plugins-"+this.id,e)}},{key:"registerWebSocketEventHandler",value:function(e,t){Object(p.e)(this.id,e,t)}},{key:"unregisterWebSocketEventHandler",value:function(e){Object(p.j)(this.id,e)}},{key:"registerReconnectHandler",value:function(e){Object(p.d)(this.id,e)}},{key:"unregisterReconnectHandler",value:function(){Object(p.i)(this.id)}},{key:"registerMessageWillBePostedHook",value:function(e){var t=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"MessageWillBePosted",data:{id:t,pluginId:this.id,hook:e}}),t}},{key:"registerSlashCommandWillBePostedHook",value:function(e){var t=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"SlashCommandWillBePosted",data:{id:t,pluginId:this.id,hook:e}}),t}},{key:"registerMessageWillFormatHook",value:function(e){var t=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"MessageWillFormat",data:{id:t,pluginId:this.id,hook:e}}),t}},{key:"registerFilePreviewComponent",value:function(e,t){var n=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"FilePreview",data:{id:n,pluginId:this.id,override:e,component:t}}),n}},{key:"registerTranslations",value:function(e){a.a.dispatch(Object(m.c)(this.id,e))}},{key:"registerRightHandSidebarComponent",value:function(e,t){var n=Object(f.r)();return a.a.dispatch({type:o.e.RECEIVED_PLUGIN_COMPONENT,name:"RightHandSidebarComponent",data:{id:n,pluginId:this.id,component:e,title:t}}),{id:n,showRHSPlugin:Object(d.m)(n)}}}])&&h(t.prototype,n),r&&h(t,r),e}();function v(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)})}}function E(){return w.apply(this,arguments)}function w(){return(w=_(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("true"===a.a.getState().entities.general.config.PluginsEnabled){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,O()(a.a.dispatch);case 4:if(t=e.sent,n=t.data,!(r=t.error)){e.next=10;break}return console.error(r),e.abrupt("return");case 10:if(null!=n&&0!==n.length){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,Promise.all(n.map(function(e){return C(e).catch(function(e){console.error(e.message)})}));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(){return function(){var e=_(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.Client4.getWebappPlugins();case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 9:return t({type:o.e.RECEIVED_WEBAPP_PLUGINS,data:n}),e.abrupt("return",{data:n});case 11:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()}n.d(t,"a",function(){return E}),n.d(t,"b",function(){return C}),n.d(t,"d",function(){return P}),n.d(t,"c",function(){return T}),window.plugins={},window.registerPlugin=function(e,t){window.plugins[e]=t};var S={};function C(e){return new Promise(function(t,n){var r=S[e.id];if(r&&r.webapp.bundle_path===e.webapp.bundle_path)t();else{r&&a.a.dispatch({type:o.e.REMOVED_WEBAPP_PLUGIN,data:e});var s=e.webapp.bundle_path;s.includes("/static/")&&!s.includes("/static/plugins/")&&(s=s.replace("/static/","/static/plugins/")),console.log("Loading "+e.id+" plugin");var l=document.createElement("script");l.id="plugin_"+e.id,l.type="text/javascript",l.src=Object(i.e)()+s,l.onload=function(){!function(e){var t=window.plugins[e.id],n=new g(e.id);t&&t.initialize&&t.initialize(n,a.a)}(e),console.log("Loaded "+e.id+" plugin"),t()},l.onerror=function(){n(new Error("Unable to load bundle for plugin "+e.id))},document.getElementsByTagName("head")[0].appendChild(l),S[e.id]=e}})}function P(e){if(S[e.id]){console.log("Removing "+e.id+" plugin"),delete S[e.id],a.a.dispatch({type:o.e.REMOVED_WEBAPP_PLUGIN,data:e});var t=window.plugins[e.id];t&&t.uninitialize?t.uninitialize():t&&t.deinitialize&&t.deinitialize(),Object(p.h)(e.id),Object(p.i)(e.id),Object(m.d)(e.id);var n=document.getElementById("plugin_"+e.id);n&&(n.parentNode.removeChild(n),console.log("Removed "+e.id+" plugin"))}}function T(){return j.apply(this,arguments)}function j(){return(j=_(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("true"===a.a.getState().entities.general.config.PluginsEnabled){e.next=2;break}return e.abrupt("return");case 2:return t=a.a.getState().plugins.plugins,e.next=5,O()(a.a.dispatch);case 5:if(n=e.sent,!(r=n.error)){e.next=10;break}return console.error(r),e.abrupt("return");case 10:i=a.a.getState().plugins.plugins,Object.values(i).forEach(function(e){var n=t[e.id];n&&n.version===e.version||C(e).catch(function(e){console.error(e.message)})}),Object.keys(t).forEach(function(e){if(!i.hasOwnProperty(e)){var n=t[e];a.a.dispatch({type:o.e.REMOVED_WEBAPP_PLUGIN,data:n}),P(n)}});case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}},1877:function(e){e.exports={"about.buildnumber":"Build Number:","about.copyright":"Copyright 2015 - {currentYear} Mattermost, Inc. All rights reserved","about.database":"Database:","about.date":"Build Date:","about.dbversion":"Database Schema Version:","about.enterpriseEditione1":"Enterprise Edition","about.enterpriseEditionLearn":"Learn more about Enterprise Edition at ","about.enterpriseEditionSt":"Modern communication from behind your firewall.","about.hash":"Build Hash:","about.hashee":"EE Build Hash:","about.hashwebapp":"Webapp Build Hash:","about.licensed":"Licensed to:","about.notice":"Mattermost is made possible by the open source software used in our [server](!https://about.mattermost.com/platform-notice-txt/), [desktop](!https://about.mattermost.com/desktop-notice-txt/) and [mobile](!https://about.mattermost.com/mobile-notice-txt/) apps.","about.privacy":"Privacy Policy","about.teamEditionLearn":"Join the Mattermost community at ","about.teamEditionSt":"All your team communication in one place, instantly searchable and accessible anywhere.","about.teamEditiont0":"Team Edition","about.teamEditiont1":"Enterprise Edition","about.title":"About {appTitle}","about.tos":"Terms of Service","about.version":"Mattermost Version:","access_history.title":"Access History","accessibility.button.attachment":"attachment","accessibility.button.dialog":"dialog","accessibility.sections.centerContent":"message list main region","accessibility.sections.centerFooter":"message input complimentary region","accessibility.sections.channelHeader":"channel header region","accessibility.sections.lhsHeader":"team menu region","accessibility.sections.lhsList":"channel sidebar region","accessibility.sections.rhsContent":"message details complimentary region","accessibility.sections.rhsFooter":"reply input region","accessibility.sidebar.types.mention":"mention","accessibility.sidebar.types.mentions":"mentions","accessibility.sidebar.types.private":"private channel","accessibility.sidebar.types.public":"public channel","accessibility.sidebar.types.unread":"unread","activity_log_modal.android":"Android","activity_log_modal.androidNativeApp":"Android Native App","activity_log_modal.androidNativeClassicApp":"Android Native Classic App","activity_log_modal.desktop":"Native Desktop App","activity_log_modal.iphoneNativeApp":"iPhone Native App","activity_log_modal.iphoneNativeClassicApp":"iPhone Native Classic App","activity_log.activeSessions":"Active Sessions","activity_log.browser":"Browser: {browser}","activity_log.firstTime":"First time active: {date}, {time}","activity_log.lastActivity":"Last activity: {date}, {time}","activity_log.logout":"Logout","activity_log.moreInfo":"More info","activity_log.os":"OS: {os}","activity_log.sessionId":"Session ID: {id}","activity_log.sessionsDescription":"Sessions are created when you log in to a new browser on a device. Sessions let you use Mattermost without having to log in again for a time period specified by the System Admin. If you want to log out sooner, use the 'Logout' button below to end a session.","add_channels_to_scheme.title":"Add Channels To **Channel Selection** List","add_command.autocomplete":"Autocomplete","add_command.autocomplete.help":"(Optional) Show slash command in autocomplete list.","add_command.autocompleteDescription":"Autocomplete Description","add_command.autocompleteDescription.help":"(Optional) Short description of slash command for the autocomplete list.","add_command.autocompleteDescription.placeholder":'Example: "Returns search results for patient records"',"add_command.autocompleteHint":"Autocomplete Hint","add_command.autocompleteHint.help":"(Optional) Arguments associated with your slash command, displayed as help in the autocomplete list.","add_command.autocompleteHint.placeholder":"Example: [Patient Name]","add_command.cancel":"Cancel","add_command.description":"Description","add_command.description.help":"Description for your incoming webhook.","add_command.displayName":"Title","add_command.displayName.help":"Choose a title to be displayed on the slash command settings page. Maximum 64 characters.","add_command.doneHelp":"Your slash command has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see [documentation](!https://docs.mattermost.com/developer/slash-commands.html) for further details).","add_command.iconUrl":"Response Icon","add_command.iconUrl.help":"(Optional) Choose a profile picture override for the post responses to this slash command. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels.","add_command.iconUrl.placeholder":"https://www.example.com/myicon.png","add_command.method":"Request Method","add_command.method.get":"GET","add_command.method.help":"The type of command request issued to the Request URL.","add_command.method.post":"POST","add_command.save":"Save","add_command.saving":"Saving...","add_command.token":"**Token**: {token}","add_command.trigger":"Command Trigger Word","add_command.trigger.help":"Trigger word must be unique, and cannot begin with a slash or contain any spaces.","add_command.trigger.helpExamples":"Examples: client, employee, patient, weather","add_command.trigger.helpReserved":"Reserved: {link}","add_command.trigger.helpReservedLinkText":"see list of built-in slash commands","add_command.trigger.placeholder":'Command trigger e.g. "hello" not including the slash',"add_command.triggerInvalidLength":"A trigger word must contain between {min} and {max} characters","add_command.triggerInvalidSlash":"A trigger word cannot begin with a /","add_command.triggerInvalidSpace":"A trigger word must not contain spaces","add_command.triggerRequired":"A trigger word is required","add_command.url":"Request URL","add_command.url.help":"The callback URL to receive the HTTP POST or GET event request when the slash command is run.","add_command.url.placeholder":"Must start with http:// or https://","add_command.urlRequired":"A request URL is required","add_command.username":"Response Username","add_command.username.help":'(Optional) Choose a username override for responses for this slash command. Usernames can consist of up to 22 characters consisting of lowercase letters, numbers and they symbols "-", "_", and "." .',"add_command.username.placeholder":"Username","add_emoji.cancel":"Cancel","add_emoji.header":"Add","add_emoji.image":"Image","add_emoji.image.button":"Select","add_emoji.image.help":"Choose the image for your emoji. The image can be a gif, png, or jpeg file with a max size of 1 MB. Dimensions will automatically resize to fit 128 by 128 pixels but keeping aspect ratio.","add_emoji.imageRequired":"An image is required for the emoji","add_emoji.name":"Name","add_emoji.name.help":"Choose a name for your emoji made of up to 64 characters consisting of lowercase letters, numbers, and the symbols '-' and '_'.","add_emoji.nameInvalid":"An emoji's name can only contain numbers, letters, and the symbols '-' and '_'.","add_emoji.nameRequired":"A name is required for the emoji","add_emoji.nameTaken":"This name is already in use by a system emoji. Please choose another name.","add_emoji.preview":"Preview","add_emoji.preview.sentence":"This is a sentence with {image} in it.","add_emoji.save":"Save","add_emoji.saving":"Saving...","add_groups_to_channel.title":"Add New Groups To {channelName} Channel","add_groups_to_team.title":"Add New Groups To {teamName} Team","add_incoming_webhook.cancel":"Cancel","add_incoming_webhook.channel":"Channel","add_incoming_webhook.channel.help":"The default public or private channel that receives the webhook payloads. You must belong to the private channel when setting up the webhook.","add_incoming_webhook.channelLocked":"Lock to this channel","add_incoming_webhook.channelLocked.help":"If set, the incoming webhook can only post to the channel selected above.","add_incoming_webhook.channelRequired":"A valid channel is required","add_incoming_webhook.description":"Description","add_incoming_webhook.description.help":"Description for your incoming webhook.","add_incoming_webhook.displayName":"Title","add_incoming_webhook.displayName.help":"Choose a title to be displayed on the webhook settings page. Maximum 64 characters.","add_incoming_webhook.doneHelp":"Your incoming webhook has been set up. Please send data to the following URL (see [documentation](!https://docs.mattermost.com/developer/webhooks-incoming.html) for further details).","add_incoming_webhook.icon_url":"Profile Picture","add_incoming_webhook.icon_url.help":"Choose the profile picture this integration will use when posting. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels.","add_incoming_webhook.save":"Save","add_incoming_webhook.saving":"Saving...","add_incoming_webhook.url":"**URL**: {url}","add_incoming_webhook.username":"Username","add_incoming_webhook.username.help":'Choose the username this integration will post as. Usernames can be up to 22 characters, and may contain lowercase letters, numbers and the symbols "-", "_", and "." .',"add_oauth_app.callbackUrls.help":"The redirect URIs to which the service will redirect users after accepting or denying authorization of your application, and which will handle authorization codes or access tokens. Must be a valid URL and start with http:// or https://.","add_oauth_app.callbackUrlsRequired":"One or more callback URLs are required","add_oauth_app.clientId":"**Client ID**: {id}","add_oauth_app.clientSecret":"**Client Secret**: {secret}","add_oauth_app.description.help":"Description for your OAuth 2.0 application.","add_oauth_app.descriptionRequired":"Description for the OAuth 2.0 application is required.","add_oauth_app.doneHelp":"Your OAuth 2.0 application has been set up. Please use the following Client ID and Client Secret when requesting authorization for your application (see [documentation](!https://docs.mattermost.com/developer/oauth-2-0-applications.html) for further details).","add_oauth_app.doneUrlHelp":"The following are your authorized redirect URL(s).","add_oauth_app.header":"Add","add_oauth_app.homepage.help":"The URL for the homepage of the OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL depending on your server configuration.","add_oauth_app.homepageRequired":"Homepage for the OAuth 2.0 application is required.","add_oauth_app.icon.help":"(Optional) The URL of the image used for your OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL.","add_oauth_app.name.help":"Display name for your OAuth 2.0 application made of up to 64 characters.","add_oauth_app.nameRequired":"Name for the OAuth 2.0 application is required.","add_oauth_app.trusted.help":"When true, the OAuth 2.0 application is considered trusted by the Mattermost server and doesn't require the user to accept authorization. When false, an additional window will appear, asking the user to accept or deny the authorization.","add_oauth_app.url":"**URL(s)**: {url}","add_outgoing_webhook.callbackUrls":"Callback URLs (One Per Line)","add_outgoing_webhook.callbackUrls.help":"The URL that messages will be sent to. If the URL is private, add it as a {link}.","add_outgoing_webhook.callbackUrls.helpLinkText":"trusted internal connection","add_outgoing_webhook.callbackUrlsRequired":"One or more callback URLs are required","add_outgoing_webhook.cancel":"Cancel","add_outgoing_webhook.channel":"Channel","add_outgoing_webhook.channel.help":"Public channel that delivers payload to webhook. Optional if at least one Trigger Word is specified.","add_outgoing_webhook.content_Type":"Content Type","add_outgoing_webhook.contentType.help1":"Choose the content type by which the request will be sent.","add_outgoing_webhook.contentType.help2":"If application/x-www-form-urlencoded is chosen, the server will encode the parameters in a URL format in the request body.","add_outgoing_webhook.contentType.help3":"If application/json is chosen, the server will format the request body as JSON.","add_outgoing_webhook.description":"Description","add_outgoing_webhook.description.help":"Description for your outgoing webhook.","add_outgoing_webhook.displayName":"Title","add_outgoing_webhook.displayName.help":"Choose a title to be displayed on the webhook settings page. Maximum 64 characters.","add_outgoing_webhook.doneHelp":"Your outgoing webhook has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see [documentation](!https://docs.mattermost.com/developer/webhooks-outgoing.html) for further details).","add_outgoing_webhook.icon_url":"Profile Picture","add_outgoing_webhook.icon_url.help":"Choose the profile picture this integration will use when posting. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels.","add_outgoing_webhook.save":"Save","add_outgoing_webhook.saving":"Saving...","add_outgoing_webhook.token":"**Token**: {token}","add_outgoing_webhook.token.message":"Make sure to add this bot account to teams and channels you want it to interact in. See [documentation](https://mattermost.com/pl/default-bot-accounts) to learn more.","add_outgoing_webhook.triggerWords":"Trigger Words (One Per Line)","add_outgoing_webhook.triggerWords.help":"Messages that start with one of the specified words will trigger the outgoing webhook. Optional if Channel is selected.","add_outgoing_webhook.triggerWordsOrChannelRequired":"A valid channel or a list of trigger words is required","add_outgoing_webhook.triggerWordsTriggerWhen":"Trigger When","add_outgoing_webhook.triggerWordsTriggerWhen.help":"Choose when to trigger the outgoing webhook; if the first word of a message matches a Trigger Word exactly, or if it starts with a Trigger Word.","add_outgoing_webhook.triggerWordsTriggerWhenFullWord":"First word matches a trigger word exactly","add_outgoing_webhook.triggerWordsTriggerWhenStartsWith":"First word starts with a trigger word","add_outgoing_webhook.username":"Username","add_outgoing_webhook.username.help":'Choose the username this integration will post as. Usernames can be up to 22 characters, and may contain lowercase letters, numbers and the symbols "-", "_", and ".".',"add_teams_to_scheme.confirmation.accept":"Yes, Move Team","add_teams_to_scheme.confirmation.message":"This team is already selected in another team scheme, are you sure you want to move it to this team scheme?","add_teams_to_scheme.confirmation.title":"Team Override Scheme Change?","add_teams_to_scheme.title":"Add Teams To **Team Selection** List","add_user_to_channel_modal.add":"Add","add_user_to_channel_modal.cancel":"Cancel","add_user_to_channel_modal.help":"Type to find a channel. Use  to browse,  to select, ESC to dismiss.","add_user_to_channel_modal.membershipExistsError":"{name} is already a member of that channel","add_user_to_channel_modal.title":"Add {name} to a channel","add_users_to_team.title":"Add New Members To {teamName} Team","admin.advance.cluster":"High Availability","admin.advance.metrics":"Performance Monitoring","admin.audits.reload":"Reload User Activity Logs","admin.authentication.email":"Email Authentication","admin.authentication.gitlab":"GitLab","admin.authentication.ldap":"AD/LDAP","admin.authentication.mfa":"Multi-factor Authentication","admin.authentication.oauth":"OAuth 2.0","admin.authentication.saml":"SAML 2.0","admin.authentication.signup":"Signup","admin.banner.heading":"Note:","admin.channel_settings.channel_detail.channel_configuration":"Channel Configuration","admin.channel_settings.channel_detail.channelName":"**Name**","admin.channel_settings.channel_detail.channelTeam":"**Team**","admin.channel_settings.channel_detail.groupsDescription":"Group members will be added to the channel based on your sync schedule.","admin.channel_settings.channel_detail.groupsTitle":"Groups","admin.channel_settings.channel_detail.manageDescription":"Choose between inviting members manually or syncing members automatically from groups.","admin.channel_settings.channel_detail.manageTitle":"Channel Management","admin.channel_settings.channel_detail.profileDescription":"Summary of the channel, including the channel name.","admin.channel_settings.channel_detail.profileTitle":"Channel Profile","admin.channel_settings.channel_detail.syncedGroupsDescription":"Add and remove team members based on their group membership on the next scheduled sync.","admin.channel_settings.channel_detail.syncedGroupsTitle":"Synced Groups","admin.channel_settings.channel_details.add_group":"Add Group","admin.channel_settings.channel_details.isPublic":"Public channel or private channel","admin.channel_settings.channel_details.isPublicDescr":"If `public` the channel is discoverable and any user can join, or if `private` invitations are required.","admin.channel_settings.channel_details.syncGroupMembers":"Sync Group Members","admin.channel_settings.channel_details.syncGroupMembersDescr":"When enabled, adding and removing users from groups will add or remove them from this channel. The only way of inviting members to this channel is by adding the groups they belong to. [Learn More](!https://www.mattermost.com/pl/default-ldap-group-constrained-team-channel.html)","admin.channel_settings.channel_list.managementHeader":"Management","admin.channel_settings.channel_list.nameHeader":"Name","admin.channel_settings.channel_list.no_channels_found":"No channels found","admin.channel_settings.channel_list.teamHeader":"Team","admin.channel_settings.channel_row.configure":"Edit","admin.channel_settings.description":"Showing {startCount, number} - {endCount, number} of {total, number} channels. Manage channel settings.","admin.channel_settings.groupsPageTitle":"{siteName} Channels","admin.channel_settings.title":"Channels","admin.cluster.ClusterName":"Cluster Name:","admin.cluster.ClusterNameDesc":"The cluster to join by name.  Only nodes with the same cluster name will join together.  This is to support Blue-Green deployments or staging pointing to the same database.","admin.cluster.ClusterNameEx":'E.g.: "Production" or "Staging"',"admin.cluster.enableDescription":"When true, Mattermost will run in High Availability mode. Please see [documentation](!http://docs.mattermost.com/deployment/cluster.html) to learn more about configuring High Availability for Mattermost.","admin.cluster.enableTitle":"Enable High Availability Mode:","admin.cluster.GossipPort":"Gossip Port:","admin.cluster.GossipPortDesc":"The port used for the gossip protocol.  Both UDP and TCP should be allowed on this port.","admin.cluster.GossipPortEx":'E.g.: "8074"',"admin.cluster.loadedFrom":"This configuration file was loaded from Node ID {clusterId}. Please see the Troubleshooting Guide in our [documentation](!http://docs.mattermost.com/deployment/cluster.html) if you are accessing the System Console through a load balancer and experiencing issues.","admin.cluster.noteDescription":"Changing properties in this section will require a server restart before taking effect.","admin.cluster.OverrideHostname":"Override Hostname:","admin.cluster.OverrideHostnameDesc":"The default value of <blank> will attempt to get the Hostname from the OS or use the IP Address.  You can override the hostname of this server with this property.  It is not recommended to override the Hostname unless needed. This property can also be set to a specific IP Address if needed.","admin.cluster.OverrideHostnameEx":'E.g.: "app-server-01"',"admin.cluster.should_not_change":"WARNING: These settings may not sync with the other servers in the cluster. High Availability inter-node communication will not start until you modify the config.json to be identical on all servers and restart Mattermost. Please see the [documentation](!http://docs.mattermost.com/deployment/cluster.html) on how to add or remove a server from the cluster. If you are accessing the System Console through a load balancer and experiencing issues, please see the Troubleshooting Guide in our [documentation](!http://docs.mattermost.com/deployment/cluster.html).","admin.cluster.status_table.config_hash":"Config File MD5","admin.cluster.status_table.hostname":"Hostname","admin.cluster.status_table.reload":" Reload Cluster Status","admin.cluster.status_table.status":"Status","admin.cluster.status_table.url":"Gossip Address","admin.cluster.status_table.version":"Version","admin.cluster.StreamingPort":"Streaming Port:","admin.cluster.StreamingPortDesc":"The port used for streaming data between servers.","admin.cluster.StreamingPortEx":'E.g.: "8075"',"admin.cluster.unknown":"unknown","admin.cluster.UseExperimentalGossip":"Use Experimental Gossip:","admin.cluster.UseExperimentalGossipDesc":"When true, the server will attempt to communicate via the gossip protocol over the gossip port.  When false the server will attempt to communicate over the streaming port. When false the gossip port and protocol are still used to determine cluster health.","admin.cluster.UseIpAddress":"Use IP Address:","admin.cluster.UseIpAddressDesc":"When true, the cluster will attempt to communicate via IP Address vs using the hostname.","admin.compliance_reports.desc":"Job Name:","admin.compliance_reports.desc_placeholder":'E.g. "Audit 445 for HR"',"admin.compliance_reports.emails":"Emails:","admin.compliance_reports.emails_placeholder":'E.g. "bill@example.com, bob@example.com"',"admin.compliance_reports.from":"From:","admin.compliance_reports.from_placeholder":'E.g. "2016-03-11"',"admin.compliance_reports.keywords":"Keywords:","admin.compliance_reports.keywords_placeholder":'E.g. "shorting stock"',"admin.compliance_reports.reload":"Reload Completed Compliance Reports","admin.compliance_reports.run":"Run Compliance Report","admin.compliance_reports.title":"Compliance Reports","admin.compliance_reports.to":"To:","admin.compliance_reports.to_placeholder":'E.g. "2016-03-15"',"admin.compliance_table.desc":"Description","admin.compliance_table.download":"Download","admin.compliance_table.params":"Params","admin.compliance_table.records":"Records","admin.compliance_table.status":"Status","admin.compliance_table.timestamp":"Timestamp","admin.compliance_table.type":"Type","admin.compliance_table.userId":"Requested By","admin.compliance.complianceMonitoring":"Compliance Monitoring","admin.compliance.directoryDescription":"Directory to which compliance reports are written. If blank, will be set to ./data/.","admin.compliance.directoryExample":'E.g.: "./data/"',"admin.compliance.directoryTitle":"Compliance Report Directory:","admin.compliance.enableDailyDesc":"When true, Mattermost will generate a daily compliance report.","admin.compliance.enableDailyTitle":"Enable Daily Report:","admin.compliance.enableDesc":"When true, Mattermost allows compliance reporting from the **Compliance and Auditing** tab. See [documentation](!https://docs.mattermost.com/administration/compliance.html) to learn more.","admin.compliance.enableTitle":"Enable Compliance Reporting:","admin.compliance.newComplianceExportBanner":"This feature is replaced by a new [Compliance Export]({siteURL}/admin_console/compliance/export) feature, and will be removed in a future release. We recommend migrating to the new system.","admin.complianceExport.createJob.help":"Initiates a Compliance Export job immediately.","admin.complianceExport.createJob.title":"Run Compliance Export Job Now","admin.complianceExport.exportFormat.actiance":"Actiance XML","admin.complianceExport.exportFormat.csv":"CSV","admin.complianceExport.exportFormat.description":'Format of the compliance export. Corresponds to the system that you want to import the data into.\n \nFor Actiance XML, compliance export files are written to the "exports" subdirectory of the configured [Local Storage Directory]({siteURL}/admin_console/environment/file_storage). For Global Relay EML, they are emailed to the configured email address.',"admin.complianceExport.exportFormat.globalrelay":"Global Relay EML","admin.complianceExport.exportFormat.title":"Export Format:","admin.complianceExport.exportJobStartTime.description":"Set the start time of the daily scheduled compliance export job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM.","admin.complianceExport.exportJobStartTime.example":'E.g.: "02:00"',"admin.complianceExport.exportJobStartTime.title":"Compliance Export time:","admin.complianceExport.globalRelayCustomerType.a10.description":"A10/Type 10","admin.complianceExport.globalRelayCustomerType.a9.description":"A9/Type 9","admin.complianceExport.globalRelayCustomerType.description":"Type of Global Relay customer account your organization has.","admin.complianceExport.globalRelayCustomerType.title":"Global Relay Customer Account:","admin.complianceExport.globalRelayEmailAddress.description":"The email address your Global Relay server monitors for incoming compliance exports.","admin.complianceExport.globalRelayEmailAddress.example":'E.g.: "globalrelay@mattermost.com"',"admin.complianceExport.globalRelayEmailAddress.title":"Global Relay Email Address:","admin.complianceExport.globalRelaySmtpPassword.description":"The password associated with the SMTP username.","admin.complianceExport.globalRelaySmtpPassword.example":'E.g.: "globalRelayPassword"',"admin.complianceExport.globalRelaySmtpPassword.title":"Global Relay SMTP Password:","admin.complianceExport.globalRelaySmtpUsername.description":"The username for authenticating to the Global Relay SMTP server.","admin.complianceExport.globalRelaySmtpUsername.example":'E.g.: "globalRelayUser"',"admin.complianceExport.globalRelaySmtpUsername.title":"Global Relay SMTP Username:","admin.complianceExport.messagesExportedCount":"{count} messages exported.","admin.complianceExport.title":"Compliance Export (Beta)","admin.complianceMonitoring.userActivityLogsTitle":"User Activity Logs","admin.connectionSecurityNone":"None","admin.connectionSecurityNoneDescription":"Mattermost will connect over an insecure connection.","admin.connectionSecurityStart":"STARTTLS","admin.connectionSecurityStartDescription":"Takes an existing insecure connection and attempts to upgrade it to a secure connection using TLS.","admin.connectionSecurityTitle":"Connection Security:","admin.connectionSecurityTls":"TLS","admin.connectionSecurityTlsDescription":"Encrypts the communication between Mattermost and your server.","admin.customization.androidAppDownloadLinkDesc":"Add a link to download the Android app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing.","admin.customization.androidAppDownloadLinkTitle":"Android App Download Link:","admin.customization.announcement.allowBannerDismissalDesc":"When true, users can dismiss the banner until its next update. When false, the banner is permanently visible until it is turned off by the System Admin.","admin.customization.announcement.allowBannerDismissalTitle":"Allow Banner Dismissal:","admin.customization.announcement.bannerColorTitle":"Banner Color:","admin.customization.announcement.bannerTextColorTitle":"Banner Text Color:","admin.customization.announcement.bannerTextDesc":"Text that will appear in the announcement banner.","admin.customization.announcement.bannerTextTitle":"Banner Text:","admin.customization.announcement.enableBannerDesc":"Enable an announcement banner across all teams.","admin.customization.announcement.enableBannerTitle":"Enable Announcement Banner:","admin.customization.appDownloadLinkDesc":'Add a link to a download page for the Mattermost apps. When a link is present, an option to "Download Mattermost Apps" will be added in the Main Menu so users can find the download page. Leave this field blank to hide the option from the Main Menu.',"admin.customization.appDownloadLinkTitle":"Mattermost Apps Download Page Link:","admin.customization.customUrlSchemes":"Custom URL Schemes:","admin.customization.customUrlSchemesDesc":'Allows message text to link if it begins with any of the comma-separated URL schemes listed. By default, the following schemes will create links: "http", "https", "ftp", "tel", and "mailto".',"admin.customization.customUrlSchemesPlaceholder":'E.g.: "git,smtp"',"admin.customization.enableCustomEmojiDesc":'Enable users to create custom emoji for use in messages. When enabled, Custom Emoji settings can be accessed by switching to a team and clicking the three dots above the channel sidebar, and selecting "Custom Emoji".',"admin.customization.enableCustomEmojiTitle":"Enable Custom Emoji:","admin.customization.enableEmojiPickerDesc":"The emoji picker allows users to select emoji to add as reactions or use in messages. Enabling the emoji picker with a large number of custom emoji may slow down performance.","admin.customization.enableEmojiPickerTitle":"Enable Emoji Picker:","admin.customization.enableGifPickerDesc":"Allow users to select GIFs from the emoji picker via a Gfycat integration.","admin.customization.enableGifPickerTitle":"Enable GIF Picker:","admin.customization.enableLinkPreviewsDesc":"Display a preview of website content below messages, when available. Users can disable these previews from Account Settings > Display > Website Link Previews. This setting only applies to websites with OpenGraph metadata and not for image links or YouTube previews.","admin.customization.enableLinkPreviewsTitle":"Enable Link Previews:","admin.customization.enableSVGsDesc":"Enable previews for SVG file attachments and allow them to appear in messages.","admin.customization.enableSVGsTitle":"Enable SVGs:","admin.customization.gfycatApiKey":"Gfycat API Key:","admin.customization.gfycatApiKeyDescription":"Request an API key at [https://developers.gfycat.com/signup/#](!https://developers.gfycat.com/signup/#). Enter the client ID you receive via email to this field. When blank, uses the default API key provided by Gfycat.","admin.customization.gfycatApiSecret":"Gfycat API Secret:","admin.customization.gfycatApiSecretDescription":"The API secret generated by Gfycat for your API key. When blank, uses the default API secret provided by Gfycat.","admin.customization.iosAppDownloadLinkDesc":"Add a link to download the iOS app. Users who access the site on a mobile web browser will be prompted with a page giving them the option to download the app. Leave this field blank to prevent the page from appearing.","admin.customization.iosAppDownloadLinkTitle":"iOS App Download Link:","admin.data_retention.confirmChangesModal.clarification":"Once deleted, messages and files cannot be retrieved.","admin.data_retention.confirmChangesModal.confirm":"Confirm Settings","admin.data_retention.confirmChangesModal.description":"Are you sure you want to apply the following data retention policy:","admin.data_retention.confirmChangesModal.description.itemFileDeletion":"All files will be permanently deleted after {days} days.","admin.data_retention.confirmChangesModal.description.itemFileIndefinite":"All files will be retained indefinitely.","admin.data_retention.confirmChangesModal.description.itemMessageDeletion":"All messages will be permanently deleted after {days} days.","admin.data_retention.confirmChangesModal.description.itemMessageIndefinite":"All messages will be retained indefinitely.","admin.data_retention.confirmChangesModal.title":"Confirm data retention policy","admin.data_retention.createJob.help":"Initiates a Data Retention deletion job immediately.","admin.data_retention.createJob.title":"Run Deletion Job Now","admin.data_retention.deletionJobStartTime.description":"Set the start time of the daily scheduled data retention job. Choose a time when fewer people are using your system. Must be a 24-hour time stamp in the form HH:MM.","admin.data_retention.deletionJobStartTime.example":'E.g.: "02:00"',"admin.data_retention.deletionJobStartTime.title":"Data Deletion Time:","admin.data_retention.enableFileDeletion.description":"Set how long Mattermost keeps file uploads in channels and direct messages.","admin.data_retention.enableFileDeletion.title":"File Retention:","admin.data_retention.enableMessageDeletion.description":"Set how long Mattermost keeps messages in channels and direct messages.","admin.data_retention.enableMessageDeletion.title":"Message Retention:","admin.data_retention.fileRetentionDays.description":"Set how many days file uploads are kept in Mattermost. Files older than the duration you set will be deleted nightly. The minimum time is one day.","admin.data_retention.fileRetentionDays.example":'E.g.: "60"',"admin.data_retention.keepFilesForTime":"Keep files for a set amount of time","admin.data_retention.keepFilesIndefinitely":"Keep all files indefinitely","admin.data_retention.keepMessageForTime":"Keep messages for a set amount of time","admin.data_retention.keepMessagesIndefinitely":"Keep all messages indefinitely","admin.data_retention.messageRetentionDays.description":"Set how many days messages are kept in Mattermost. Messages, including file attachments older than the duration you set will be deleted nightly. The minimum time is one day.","admin.data_retention.messageRetentionDays.example":'E.g.: "60"',"admin.data_retention.note.description":"Caution: Once a message or a file is deleted, the action is irreversible. Please be careful when setting up a custom data retention policy. See {documentationLink} to learn more.","admin.data_retention.note.description.documentationLinkText":"documentation","admin.data_retention.title":"Data Retention Policy","admin.database.title":"Database","admin.developer.title":"Developer Settings","admin.elasticsearch.bulkIndexingTitle":"Bulk Indexing:","admin.elasticsearch.connectionUrlDescription":"The address of the Elasticsearch server. {documentationLink}","admin.elasticsearch.connectionUrlExample":'E.g.: "https://elasticsearch.example.org:9200"',"admin.elasticsearch.connectionUrlExample.documentationLinkText":"Please see documentation with server setup instructions.","admin.elasticsearch.connectionUrlTitle":"Server Connection Address:","admin.elasticsearch.createJob.help":"All users, channels and posts in the database will be indexed from oldest to newest. Elasticsearch is available during indexing but search results may be incomplete until the indexing job is complete.","admin.elasticsearch.createJob.title":"Index Now","admin.elasticsearch.elasticsearch_test_button":"Test Connection","admin.elasticsearch.enableAutocompleteDescription":"Requires a successful connection to the Elasticsearch server. When true, Elasticsearch will be used for all autocompletion queries on users and channels using the latest index. Autocompletion results may be incomplete until a bulk index of the existing users and channels database is finished. When false, database autocomplete is used.","admin.elasticsearch.enableAutocompleteTitle":"Enable Elasticsearch for autocomplete queries:","admin.elasticsearch.enableIndexingDescription":'When true, indexing of new posts occurs automatically. Search queries will use database search until "Enable Elasticsearch for search queries" is enabled. {documentationLink}',"admin.elasticsearch.enableIndexingDescription.documentationLinkText":"Learn more about Elasticsearch in our documentation.","admin.elasticsearch.enableIndexingTitle":"Enable Elasticsearch Indexing:","admin.elasticsearch.enableSearchingDescription":"Requires a successful connection to the Elasticsearch server. When true, Elasticsearch will be used for all search queries using the latest index. Search results may be incomplete until a bulk index of the existing post database is finished. When false, database search is used.","admin.elasticsearch.enableSearchingTitle":"Enable Elasticsearch for search queries:","admin.elasticsearch.password":'E.g.: "yourpassword"',"admin.elasticsearch.passwordDescription":"(Optional) The password to authenticate to the Elasticsearch server.","admin.elasticsearch.passwordTitle":"Server Password:","admin.elasticsearch.percentComplete":"{percent}% Complete","admin.elasticsearch.purgeIndexesButton":"Purge Indexes","admin.elasticsearch.purgeIndexesButton.error":"Failed to purge indexes: {error}","admin.elasticsearch.purgeIndexesButton.label":"Purge Indexes:","admin.elasticsearch.purgeIndexesButton.success":"Indexes purged successfully.","admin.elasticsearch.purgeIndexesHelpText":"Purging will entirely remove the indexes on the Elasticsearch server. Search results may be incomplete until a bulk index of the existing database is rebuilt.","admin.elasticsearch.skipTLSVerificationDescription":"When true, Mattermost will not require the Elasticsearch certificate to be signed by a trusted Certificate Authority.","admin.elasticsearch.skipTLSVerificationTitle":"Skip TLS Verification:","admin.elasticsearch.sniffDescription":"When true, sniffing finds and connects to all data nodes in your cluster automatically.","admin.elasticsearch.sniffTitle":"Enable Cluster Sniffing:","admin.elasticsearch.testConfigSuccess":"Test successful. Configuration saved.","admin.elasticsearch.testHelpText":"Tests if the Mattermost server can connect to the Elasticsearch server specified. Testing the connection only saves the configuration if the test is successful. See log file for more detailed error messages.","admin.elasticsearch.title":"Elasticsearch","admin.elasticsearch.usernameDescription":"(Optional) The username to authenticate to the Elasticsearch server.","admin.elasticsearch.usernameExample":'E.g.: "elastic"',"admin.elasticsearch.usernameTitle":"Server Username:","admin.email.agreeHPNS":" I understand and accept the Mattermost Hosted Push Notification Service [Terms of Service](!https://about.mattermost.com/hpns-terms/) and [Privacy Policy](!https://about.mattermost.com/hpns-privacy/).","admin.email.allowEmailSignInDescription":"When true, Mattermost allows users to sign in using their email and password.","admin.email.allowEmailSignInTitle":"Enable sign-in with email: ","admin.email.allowSignupDescription":"When true, Mattermost allows account creation using email and password. This value should be false only when you want to limit sign up to a single sign-on service like AD/LDAP, SAML or GitLab.","admin.email.allowSignupTitle":"Enable account creation with email: ","admin.email.allowUsernameSignInDescription":"When true, users with email login can sign in using their username and password. This setting does not affect AD/LDAP login.","admin.email.allowUsernameSignInTitle":"Enable sign-in with username: ","admin.email.easHelp":"Learn more about compiling and deploying your own mobile apps from an [Enterprise App Store](!https://about.mattermost.com/default-enterprise-app-store).","admin.email.mhpns":"Use HPNS connection with uptime SLA to send notifications to iOS and Android apps","admin.email.mhpnsHelp":"Download [Mattermost iOS app](!https://about.mattermost.com/mattermost-ios-app/) from iTunes. Download [Mattermost Android app](!https://about.mattermost.com/mattermost-android-app/) from Google Play. Learn more about [HPNS](!https://about.mattermost.com/default-hpns/).","admin.email.mtpns":"Use TPNS connection to send notifications to iOS and Android apps","admin.email.mtpnsHelp":"Download [Mattermost iOS app](!https://about.mattermost.com/mattermost-ios-app/) from iTunes. Download [Mattermost Android app](!https://about.mattermost.com/mattermost-android-app/) from Google Play. Learn more about [TPNS](!https://about.mattermost.com/default-tpns/).","admin.email.pushOff":"Do not send push notifications","admin.email.pushOffHelp":"Please see [documentation on push notifications](!https://about.mattermost.com/default-mobile-push-notifications/) to learn more about setup options.","admin.email.pushServerEx":'E.g.: "https://push-test.mattermost.com"',"admin.email.pushServerTitle":"Push Notification Server:","admin.email.pushTitle":"Enable Push Notifications: ","admin.email.requireVerificationDescription":"Typically set to true in production. When true, Mattermost requires email verification after account creation prior to allowing login. Developers may set this field to false to skip sending verification emails for faster development.","admin.email.requireVerificationTitle":"Require Email Verification: ","admin.email.selfPush":"Manually enter Push Notification Service location","admin.environment.fileStorage":"File Storage","admin.environment.imageProxy":"Image Proxy","admin.environment.notifications":"Notifications","admin.environment.notifications.contents.full":"Send full message contents","admin.environment.notifications.contents.generic":"Send generic description with only sender name","admin.environment.notifications.contents.help":"**Send full message contents** - Sender name and channel are included in email notifications. Typically used for compliance reasons if Mattermost contains confidential information and policy dictates it cannot be stored in email.\n  **Send generic description with only sender name** - Only the name of the person who sent the message, with no information about channel name or message contents are included in email notifications. Typically used for compliance reasons if Mattermost contains confidential information and policy dictates it cannot be stored in email.","admin.environment.notifications.contents.label":"Email Notification Contents:","admin.environment.notifications.enable.help":"Typically set to true in production. When true, Mattermost attempts to send email notifications. Developers may set this field to false to skip email setup for faster development.","admin.environment.notifications.enable.label":"Enable Email Notifications:","admin.environment.notifications.enableConfirmNotificationsToChannel.help":"When true, users will be prompted to confirm when posting @channel and @all in channels with over five members. When false, no confirmation is required.","admin.environment.notifications.enableConfirmNotificationsToChannel.label":"Show @channel and @all confirmation dialog:","admin.environment.notifications.enableEmailBatching.help":"When true, users will have email notifications for multiple direct messages and mentions combined into a single email. Batching will occur at a default interval of 15 minutes, configurable in Account Settings > Notifications.","admin.environment.notifications.enableEmailBatching.label":"Enable Email Batching:","admin.environment.notifications.enablePreviewModeBanner.help":"When true, the Preview Mode banner is displayed so users are aware that email notifications are disabled. When false, the Preview Mode banner is not displayed to users.","admin.environment.notifications.enablePreviewModeBanner.label":"Enable Preview Mode Banner:","admin.environment.notifications.feedbackEmail.help":"Email address displayed on email account used when sending notification emails from Mattermost.","admin.environment.notifications.feedbackEmail.label":"Notification From Address:","admin.environment.notifications.feedbackEmail.placeholder":'Ex: "mattermost@yourcompany.com", "admin@yourcompany.com"',"admin.environment.notifications.feedbackOrganization.help":'Organization name and address displayed on email notifications from Mattermost, such as " ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA". If the field is left empty, the organization name and address will not be displayed.',"admin.environment.notifications.feedbackOrganization.label":"Notification Footer Mailing Address:","admin.environment.notifications.feedbackOrganization.placeholder":'Ex: " ABC Corporation, 565 Knight Way, Palo Alto, California, 94305, USA"',"admin.environment.notifications.notificationDisplay.help":"Display name on email account used when sending notification emails from Mattermost.","admin.environment.notifications.notificationDisplay.label":"Notification Display Name:","admin.environment.notifications.notificationDisplay.placeholder":'Ex: "Mattermost Notification", "System", "No-Reply"',"admin.environment.notifications.pushContents.full":"Send full message snippet","admin.environment.notifications.pushContents.generic":"Send generic description with sender and channel names","admin.environment.notifications.pushContents.genericNoChannel":"Send generic description with only sender name","admin.environment.notifications.pushContents.help":'**Send generic description with only sender name** - Includes only the name of the person who sent the message in push notifications, with no information about channel name or message contents.\n **Send generic description with sender and channel names** - Includes the name of the person who sent the message and the channel it was sent in, but not the message text.\n **Send full message snippet** - Includes a message excerpt in push notifications, which may contain confidential information sent in messages. If your Push Notification Service is outside your firewall, it is *highly recommended* this option only be used with an "https" protocol to encrypt the connection.',"admin.environment.notifications.pushContents.label":"Push Notification Contents:","admin.environment.notifications.replyToAddress.help":"Email address used in the Reply-To header when sending notification emails from Mattermost.","admin.environment.notifications.replyToAddress.label":"Notification Reply-To Address:","admin.environment.notifications.replyToAddress.placeholder":'Ex: "mattermost@yourcompany.com", "admin@yourcompany.com"',"admin.environment.pushNotificationServer":"Push Notification Server","admin.environment.sessionLengths":"Session Lengths","admin.environment.smtp":"SMTP","admin.environment.smtp.connectionSecurity.option.none":"None","admin.environment.smtp.connectionSecurity.option.starttls":"STARTTLS","admin.environment.smtp.connectionSecurity.option.tls":"TLS (Recommended)","admin.environment.smtp.connectionSecurity.title":"Connection Security:","admin.environment.smtp.connectionSmtpTest":"Test Connection","admin.environment.smtp.enableSecurityFixAlert.description":"When true, System Administrators are notified by email if a relevant security fix alert has been announced in the last 12 hours. Requires email to be enabled.","admin.environment.smtp.enableSecurityFixAlert.title":"Enable Security Alerts:","admin.environment.smtp.skipServerCertificateVerification.description":"When true, Mattermost will not verify the email server certificate.","admin.environment.smtp.skipServerCertificateVerification.title":"Skip Server Certificate Verification:","admin.environment.smtp.smtpAuth.description":"When true, SMTP Authentication is enabled.","admin.environment.smtp.smtpAuth.title":"Enable SMTP Authentication:","admin.environment.smtp.smtpFail":"Connection unsuccessful: {error}","admin.environment.smtp.smtpPassword.description":"Obtain this credential from administrator setting up your email server.","admin.environment.smtp.smtpPassword.placeholder":'Ex: "yourpassword", "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',"admin.environment.smtp.smtpPassword.title":"SMTP Server Password:","admin.environment.smtp.smtpPort.description":"Port of SMTP email server.","admin.environment.smtp.smtpPort.placeholder":'Ex: "25", "465", "587"',"admin.environment.smtp.smtpPort.title":"SMTP Server Port:","admin.environment.smtp.smtpServer.description":"Location of SMTP email server.","admin.environment.smtp.smtpServer.placeholder":'Ex: "smtp.yourcompany.com", "email-smtp.us-east-1.amazonaws.com"',"admin.environment.smtp.smtpServer.title":"SMTP Server:","admin.environment.smtp.smtpSuccess":"No errors were reported while sending an email. Please check your inbox to make sure.","admin.environment.smtp.smtpUsername.description":"Obtain this credential from administrator setting up your email server.","admin.environment.smtp.smtpUsername.placeholder":'Ex: "admin@yourcompany.com", "AKIADTOVBGERKLCBV"',"admin.environment.smtp.smtpUsername.title":"SMTP Server Username:","admin.environment.smtp.testing":"Testing...","admin.environment.webServer":"Web Server","admin.experimental.allowCustomThemes.desc":"Enables the **Display > Theme > Custom Theme** section in Account Settings.","admin.experimental.allowCustomThemes.title":"Allow Custom Themes:","admin.experimental.clientSideCertCheck.desc":"When **primary**, after the client side certificate is verified, users email is retrieved from the certificate and is used to log in without a password. When **secondary**, after the client side certificate is verified, users email is retrieved from the certificate and matched against the one supplied by the user. If they match, the user logs in with regular email/password credentials.","admin.experimental.clientSideCertCheck.title":"Client-Side Certification Login Method:","admin.experimental.clientSideCertEnable.desc":"Enables client-side certification for your Mattermost server. See [documentation](!https://docs.mattermost.com/deployment/certificate-based-authentication.html) to learn more.","admin.experimental.clientSideCertEnable.title":"Enable Client-Side Certification:","admin.experimental.closeUnusedDirectMessages.desc":"When true, direct message conversations with no activity for 7 days will be hidden from the sidebar. When false, conversations remain in the sidebar until they are manually closed.","admin.experimental.closeUnusedDirectMessages.title":"Autoclose Direct Messages in Sidebar:","admin.experimental.defaultTheme.desc":"Set a default theme that applies to all new users on the system.","admin.experimental.defaultTheme.title":"Default Theme:","admin.experimental.emailBatchingBufferSize.desc":"Specify the maximum number of notifications batched into a single email.","admin.experimental.emailBatchingBufferSize.example":'E.g.: "256"',"admin.experimental.emailBatchingBufferSize.title":"Email Batching Buffer Size:","admin.experimental.emailBatchingInterval.desc":"Specify the maximum frequency, in seconds, which the batching job checks for new notifications. Longer batching intervals will increase performance.","admin.experimental.emailBatchingInterval.example":'E.g.: "30"',"admin.experimental.emailBatchingInterval.title":"Email Batching Interval:","admin.experimental.emailSettingsLoginButtonBorderColor.desc":"Specify the color of the email login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.emailSettingsLoginButtonBorderColor.title":"Email Login Button Border Color:","admin.experimental.emailSettingsLoginButtonColor.desc":"Specify the color of the email login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.emailSettingsLoginButtonColor.title":"Email Login Button Color:","admin.experimental.emailSettingsLoginButtonTextColor.desc":"Specify the color of the email login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.emailSettingsLoginButtonTextColor.title":"Email Login Button Text Color:","admin.experimental.enableChannelViewedMessages.desc":"This setting determines whether `channel_viewed` WebSocket events are sent, which synchronize unread notifications across clients and devices. Disabling the setting in larger deployments may improve server performance.","admin.experimental.enableChannelViewedMessages.title":"Enable Channel Viewed WebSocket Messages:","admin.experimental.enablePreviewFeatures.desc":"When true, preview features can be enabled from **Account Settings > Advanced > Preview pre-release features**. When false, disables and hides preview features from **Account Settings > Advanced > Preview pre-release features**.","admin.experimental.enablePreviewFeatures.title":"Enable Preview Features:","admin.experimental.enableThemeSelection.desc":"Enables the **Display > Theme** tab in Account Settings so users can select their theme.","admin.experimental.enableThemeSelection.title":"Enable Theme Selection:","admin.experimental.enableTutorial.desc":"When true, users are prompted with a tutorial when they open Mattermost for the first time after account creation. When false, the tutorial is disabled, and users are placed in Town Square when they open Mattermost for the first time after account creation.","admin.experimental.enableTutorial.title":"Enable Tutorial:","admin.experimental.enableUserDeactivation.desc":"When true, users may deactivate their own account from **Account Settings > Advanced**. If a user deactivates their own account, they will get an email notification confirming they were deactivated. When false, users may not deactivate their own account.","admin.experimental.enableUserDeactivation.title":"Enable Account Deactivation:","admin.experimental.enableUserTypingMessages.desc":'This setting determines whether "user is typing..." messages are displayed below the message box. Disabling the setting in larger deployments may improve server performance.',"admin.experimental.enableUserTypingMessages.title":"Enable User Typing Messages:","admin.experimental.enableXToLeaveChannelsFromLHS.desc":"When true, users can leave Public and Private Channels by clicking the x beside the channel name. When false, users must use the **Leave Channel** option from the channel menu to leave channels.","admin.experimental.enableXToLeaveChannelsFromLHS.title":"Enable X to Leave Channels from Left-Hand Sidebar:","admin.experimental.experimentalChannelOrganization.desc":"Enables channel sidebar organization options in **Account Settings > Sidebar > Channel grouping and sorting** including options for grouping unread channels, sorting channels by most recent post and combining all channel types into a single list.","admin.experimental.experimentalChannelOrganization.title":"Sidebar Organization:","admin.experimental.experimentalEnableAuthenticationTransfer.desc":"When true, users can change their sign-in method to any that is enabled on the server, either via Account Settings or the APIs. When false, Users cannot change their sign-in method, regardless of which authentication options are enabled.","admin.experimental.experimentalEnableAuthenticationTransfer.title":"Allow Authentication Transfer:","admin.experimental.experimentalEnableAutomaticReplies.desc":"When true, users can enable Automatic Replies in **Account Settings > Notifications**. Users set a custom message that will be automatically sent in response to Direct Messages. When false, disables the Automatic Direct Message Replies feature and hides it from Account Settings.","admin.experimental.experimentalEnableAutomaticReplies.title":"Enable Automatic Replies:","admin.experimental.experimentalEnableDefaultChannelLeaveJoinMessages.desc":"This setting determines whether team leave/join system messages are posted in the default town-square channel.","admin.experimental.experimentalEnableDefaultChannelLeaveJoinMessages.title":"Enable Default Channel Leave/Join System Messages:","admin.experimental.experimentalEnableHardenedMode.desc":"Enables a hardened mode for Mattermost that makes user experience trade-offs in the interest of security. See [documentation](!https://docs.mattermost.com/administration/config-settings.html#enable-hardened-mode-experimental) to learn more.","admin.experimental.experimentalEnableHardenedMode.title":"Enable Hardened Mode:","admin.experimental.experimentalFeatures":"Experimental Features","admin.experimental.experimentalHideTownSquareinLHS.desc":"When true, hides Town Square in the left-hand sidebar if there are no unread messages in the channel. When false, Town Square is always visible in the left-hand sidebar even if all messages have been read.","admin.experimental.experimentalHideTownSquareinLHS.title":"Town Square is Hidden in Left-Hand Sidebar:","admin.experimental.experimentalLdapGroupSync.desc":"When true, enables **AD/LDAP Group Sync** configurable under **User Management > Groups**. See [documentation](!https://mattermost.com/pl/default-ldap-group-sync) to learn more.","admin.experimental.experimentalLdapGroupSync.title":"Enable AD/LDAP Group Sync:","admin.experimental.experimentalPrimaryTeam.desc":"The primary team of which users on the server are members. When a primary team is set, the options to join other teams or leave the primary team are disabled.","admin.experimental.experimentalPrimaryTeam.example":'E.g.: "teamname"',"admin.experimental.experimentalPrimaryTeam.title":"Primary Team:","admin.experimental.experimentalTimezone.desc":"Select the timezone used for timestamps in the user interface and email notifications. When true, the Timezone setting is visible in the Account Settings and a time zone is automatically assigned in the next active session. When false, the Timezone setting is hidden in the Account Settings.","admin.experimental.experimentalTimezone.title":"Timezone:","admin.experimental.experimentalTownSquareIsReadOnly.desc":"When true, only System Admins can post in Town Square. Other members are not able to post, reply, upload files, emoji react or pin messages to Town Square, nor are they able to change the channel name, header or purpose. When false, anyone can post in Town Square.","admin.experimental.experimentalTownSquareIsReadOnly.title":"Town Square is Read-Only:","admin.experimental.ldapSettingsLoginButtonBorderColor.desc":"Specify the color of the AD/LDAP login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.ldapSettingsLoginButtonBorderColor.title":"AD/LDAP Login Button Border Color:","admin.experimental.ldapSettingsLoginButtonColor.desc":"Specify the color of the AD/LDAP login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.ldapSettingsLoginButtonColor.title":"AD/LDAP Login Button Color:","admin.experimental.ldapSettingsLoginButtonTextColor.desc":"Specify the color of the AD/LDAP login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.ldapSettingsLoginButtonTextColor.title":"AD/LDAP Login Button Text Color:","admin.experimental.linkMetadataTimeoutMilliseconds.desc":"The number of milliseconds to wait for metadata from a third-party link. Used with Post Metadata.","admin.experimental.linkMetadataTimeoutMilliseconds.example":'E.g.: "5000"',"admin.experimental.linkMetadataTimeoutMilliseconds.title":"Link Metadata Timeout:","admin.experimental.samlSettingsLoginButtonBorderColor.desc":"Specify the color of the SAML login button border for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.samlSettingsLoginButtonBorderColor.title":"SAML login Button Border Color:","admin.experimental.samlSettingsLoginButtonColor.desc":"Specify the color of the SAML login button for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.samlSettingsLoginButtonColor.title":"SAML Login Button Color:","admin.experimental.samlSettingsLoginButtonTextColor.desc":"Specify the color of the SAML login button text for white labeling purposes. Use a hex code with a #-sign before the code. This setting only applies to the mobile apps.","admin.experimental.samlSettingsLoginButtonTextColor.title":"SAML login Button Text Color:","admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.desc":"The number of milliseconds to wait between emitting user typing websocket events.","admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.example":'E.g.: "5000"',"admin.experimental.timeBetweenUserTypingUpdatesMilliseconds.title":"User Typing Timeout:","admin.experimental.useChannelInEmailNotifications.desc":"When true, channel and team name appears in email notification subject lines. Useful for servers using only one team. When false, only team name appears in email notification subject line.","admin.experimental.useChannelInEmailNotifications.title":"Use Channel Name in Email Notifications:","admin.experimental.userStatusAwayTimeout.desc":'This setting defines the number of seconds after which the users status indicator changes to "Away", when they are away from Mattermost.',"admin.experimental.userStatusAwayTimeout.example":'E.g.: "300"',"admin.experimental.userStatusAwayTimeout.title":"User Status Away Timeout:","admin.false":"false","admin.field_names.allowBannerDismissal":"Allow banner dismissal","admin.field_names.bannerColor":"Banner color","admin.field_names.bannerText":"Banner text","admin.field_names.bannerTextColor":"Banner text color","admin.field_names.enableBanner":"Enable Announcement banner","admin.field_names.enableCommands":"Enable Custom Slash Commands","admin.field_names.enableConfirmNotificationsToChannel":"Show @channel and @all confirmation dialog","admin.field_names.enableIncomingWebhooks":"Enable Incoming Webhooks","admin.field_names.enableOAuthServiceProvider":"Enable OAuth 2.0 Service Provider","admin.field_names.enableOutgoingWebhooks":"Enable Outgoing Webhooks","admin.field_names.enablePostIconOverride":"Enable integrations to override profile picture icons","admin.field_names.enablePostUsernameOverride":"Enable integrations to override usernames","admin.field_names.enableUserAccessTokens":"Enable Personal Access Tokens","admin.field_names.enableUserCreation":"Enable Account Creation","admin.field_names.maxChannelsPerTeam":"Max Channels Per Team","admin.field_names.maxNotificationsPerChannel":"Max Notifications Per Channel","admin.field_names.maxUsersPerTeam":"Max Users Per Team","admin.field_names.postEditTimeLimit":"Edit post time limit","admin.field_names.restrictCreationToDomains":"Restrict account creation to specified email domains","admin.field_names.restrictDirectMessage":"Enable users to open Direct Message channels with","admin.field_names.teammateNameDisplay":"Teammate Name Display","admin.file_upload.chooseFile":"Choose File","admin.file_upload.noFile":"No file uploaded","admin.file_upload.uploadFile":"Upload","admin.file.enableFileAttachments":"Allow File Sharing:","admin.file.enableFileAttachmentsDesc":"When false, disables file sharing on the server. All file and image uploads on messages are forbidden across clients and devices, including mobile.","admin.file.enableMobileDownloadDesc":"When false, disables file downloads on mobile apps. Users can still download files from a mobile web browser.","admin.file.enableMobileDownloadTitle":"Allow File Downloads on Mobile:","admin.file.enableMobileUploadDesc":"When false, disables file uploads on mobile apps. If Allow File Sharing is set to true, users can still upload files from a mobile web browser.","admin.file.enableMobileUploadTitle":"Allow File Uploads on Mobile:","admin.general.localization.availableLocalesDescription":"Set which languages are available for users in Account Settings (leave this field blank to have all supported languages available). If you're manually adding new languages, the **Default Client Language** must be added before saving this setting.\n \nWould like to help with translations? Join the [Mattermost Translation Server](!http://translate.mattermost.com/) to contribute.","admin.general.localization.availableLocalesNoResults":"No results found","admin.general.localization.availableLocalesNotPresent":"The default client language must be included in the available list","admin.general.localization.availableLocalesTitle":"Available Languages:","admin.general.localization.clientLocaleDescription":"Default language for newly created users and pages where the user hasn't logged in.","admin.general.localization.clientLocaleTitle":"Default Client Language:","admin.general.localization.serverLocaleDescription":"Default language for system messages. Changing this will require a server restart before taking effect.","admin.general.localization.serverLocaleTitle":"Default Server Language:","admin.general.log":"Logging","admin.gitlab.authTitle":"Auth Endpoint:","admin.gitlab.clientIdDescription":"Obtain this value via the instructions above for logging into GitLab.","admin.gitlab.clientIdExample":'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',"admin.gitlab.clientIdTitle":"Application ID:","admin.gitlab.clientSecretDescription":"Obtain this value via the instructions above for logging into GitLab.","admin.gitlab.clientSecretExample":'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',"admin.gitlab.clientSecretTitle":"Application Secret Key:","admin.gitlab.enableDescription":'When true, Mattermost allows team creation and account signup using GitLab OAuth.\n \n1. Log in to your GitLab account and go to Profile Settings -> Applications.\n2. Enter Redirect URIs "<your-mattermost-url>/login/gitlab/complete" (example: http://localhost:8065/login/gitlab/complete) and "<your-mattermost-url>/signup/gitlab/complete".\n3. Then use "Application Secret Key" and "Application ID" fields from GitLab to complete the options below.\n4. Complete the Endpoint URLs below.',"admin.gitlab.EnableMarkdownDesc":'1. Log in to your GitLab account and go to Profile Settings -> Applications.\n2. Enter Redirect URIs "<your-mattermost-url>/login/gitlab/complete" (example: http://localhost:8065/login/gitlab/complete) and "<your-mattermost-url>/signup/gitlab/complete".\n3. Then use "Application Secret Key" and "Application ID" fields from GitLab to complete the options below.\n4. Complete the Endpoint URLs below.',"admin.gitlab.enableTitle":"Enable authentication with GitLab: ","admin.gitlab.siteUrl":"GitLab Site URL: ","admin.gitlab.siteUrlDescription":"Enter the URL of your GitLab instance, e.g. https://example.com:3000. If your GitLab instance is not set up with SSL, start the URL with http:// instead of https://.","admin.gitlab.siteUrlExample":"E.g.: https://","admin.gitlab.tokenTitle":"Token Endpoint:","admin.gitlab.userTitle":"User API Endpoint:","admin.google.authTitle":"Auth Endpoint:","admin.google.clientIdDescription":"The Client ID you received when registering your application with Google.","admin.google.clientIdExample":'E.g.: "7602141235235-url0fhs1mayfasbmop5qlfns8dh4.apps.googleusercontent.com"',"admin.google.clientIdTitle":"Client ID:","admin.google.clientSecretDescription":"The Client Secret you received when registering your application with Google.","admin.google.clientSecretExample":'E.g.: "H8sz0Az-dDs2p15-7QzD231"',"admin.google.clientSecretTitle":"Client Secret:","admin.google.EnableMarkdownDesc":'1. [Log in](!https://accounts.google.com/login) to your Google account.\n2. Go to [https://console.developers.google.com](!https://console.developers.google.com), click **Credentials** in the left hand sidebar and enter "Mattermost - your-company-name" as the **Project Name**, then click **Create**.\n3. Click the **OAuth consent screen** header and enter "Mattermost" as the **Product name shown to users**, then click **Save**.\n4. Under the **Credentials** header, click **Create credentials**, choose **OAuth client ID** and select **Web Application**.\n5. Under **Restrictions** and **Authorized redirect URIs** enter **your-mattermost-url/signup/google/complete** (example: http://localhost:8065/signup/google/complete). Click **Create**.\n6. Paste the **Client ID** and **Client Secret** to the fields below, then click **Save**.\n7. Finally, go to [Google+ API](!https://console.developers.google.com/apis/api/plus/overview) and click *Enable*. This might take a few minutes to propagate through Google`s systems.',"admin.google.tokenTitle":"Token Endpoint:","admin.google.userTitle":"User API Endpoint:","admin.group_settings.filters.isConfigured":"Is Configured","admin.group_settings.filters.isLinked":"Is Linked","admin.group_settings.filters.isUnconfigured":"Is Not Configured","admin.group_settings.filters.isUnlinked":"Is Not Linked","admin.group_settings.group_detail.group_configuration":"Group Configuration","admin.group_settings.group_detail.groupProfileDescription":"The name for this group.","admin.group_settings.group_detail.groupProfileTitle":"Group Profile","admin.group_settings.group_detail.groupTeamsAndChannelsDescription":"Set default teams and channels for group members. Teams added will include default channels, town-square, and off-topic. Adding a channel without setting the team will add the implied team to the listing below.","admin.group_settings.group_detail.groupTeamsAndChannelsTitle":"Team and Channel Membership","admin.group_settings.group_detail.groupUsersDescription":"Listing of users in Mattermost associated with this group.","admin.group_settings.group_detail.groupUsersTitle":"Users","admin.group_settings.group_detail.introBanner":"Configure default teams and channels and view users belonging to this group.","admin.group_settings.group_details.add_channel":"Add Channel","admin.group_settings.group_details.add_team":"Add Team","admin.group_settings.group_details.add_team_or_channel":"Add Team or Channel","admin.group_settings.group_details.group_profile.name":"Name:","admin.group_settings.group_details.group_teams_and_channels_row.remove":"Remove","admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_body":"Removing this membership will prevent future users in this group from being added to the '{name}' {displayType}.","admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_button":"Yes, Remove","admin.group_settings.group_details.group_teams_and_channels_row.remove.confirm_header":"Remove Membership from the '{name}' {displayType}?","admin.group_settings.group_details.group_teams_and_channels.no-teams-or-channels-speicified":"No teams or channels specified yet","admin.group_settings.group_details.group_users.email":"Email:","admin.group_settings.group_details.group_users.no-users-found":"No users found","admin.group_settings.group_details.menuAriaLabel":"Add Team or Channel Menu","admin.group_settings.group_profile.group_teams_and_channels.name":"Name","admin.group_settings.group_profile.group_users.ldapConnector":"AD/LDAP Connector is configured to sync and manage this group and its users. [Click here to view](/admin_console/authentication/ldap)","admin.group_settings.group_row.configure":"Configure","admin.group_settings.group_row.edit":"Edit","admin.group_settings.group_row.link_failed":"Link failed","admin.group_settings.group_row.linked":"Linked","admin.group_settings.group_row.linking":"Linking","admin.group_settings.group_row.not_linked":"Not Linked","admin.group_settings.group_row.unlink_failed":"Unlink failed","admin.group_settings.group_row.unlinking":"Unlinking","admin.group_settings.groups_list.link_selected":"Link Selected Groups","admin.group_settings.groups_list.mappingHeader":"Mattermost Linking","admin.group_settings.groups_list.nameHeader":"Name","admin.group_settings.groups_list.no_groups_found":"No groups found","admin.group_settings.groups_list.paginatorCount":"{startCount, number} - {endCount, number} of {total, number}","admin.group_settings.groups_list.unlink_selected":"Unlink Selected Groups","admin.group_settings.groupsPageTitle":"Groups","admin.group_settings.introBanner":"Groups are a way to organize users and apply actions to all users within that group.\nFor more information on Groups, please see [documentation](!https://www.mattermost.com/default-ad-ldap-groups).","admin.group_settings.ldapGroupsDescription":"Link and configure groups from your AD/LDAP to Mattermost. Please ensure you have configured a [group filter]({siteURL}/admin_console/authentication/ldap).","admin.group_settings.ldapGroupsTitle":"AD/LDAP Groups","admin.image.amazonS3BucketDescription":"Name you selected for your S3 bucket in AWS.","admin.image.amazonS3BucketExample":'E.g.: "mattermost-media"',"admin.image.amazonS3BucketTitle":"Amazon S3 Bucket:","admin.image.amazonS3EndpointDescription":'Hostname of your S3 Compatible Storage provider. Defaults to "s3.amazonaws.com".',"admin.image.amazonS3EndpointExample":'E.g.: "s3.amazonaws.com"',"admin.image.amazonS3EndpointTitle":"Amazon S3 Endpoint:","admin.image.amazonS3IdDescription":"(Optional) Only required if you do not want to authenticate to S3 using an [IAM role](!https://about.mattermost.com/default-iam-role). Enter the Access Key ID provided by your Amazon EC2 administrator.","admin.image.amazonS3IdExample":'E.g.: "AKIADTOVBGERKLCBV"',"admin.image.amazonS3IdTitle":"Amazon S3 Access Key ID:","admin.image.amazonS3RegionDescription":"AWS region you selected when creating your S3 bucket. If no region is set, Mattermost attempts to get the appropriate region from AWS, or sets it to 'us-east-1' if none found.","admin.image.amazonS3RegionExample":'E.g.: "us-east-1"',"admin.image.amazonS3RegionTitle":"Amazon S3 Region:","admin.image.amazonS3SecretDescription":"(Optional) The secret access key associated with your Amazon S3 Access Key ID.","admin.image.amazonS3SecretExample":'E.g.: "jcuS8PuvcpGhpgHhlcpT1Mx42pnqMxQY"',"admin.image.amazonS3SecretTitle":"Amazon S3 Secret Access Key:","admin.image.amazonS3SSEDescription":"When true, encrypt files in Amazon S3 using server-side encryption with Amazon S3-managed keys. See [documentation](!https://about.mattermost.com/default-server-side-encryption) to learn more.","admin.image.amazonS3SSETitle":"Enable Server-Side Encryption for Amazon S3:","admin.image.amazonS3SSLDescription":"When false, allow insecure connections to Amazon S3. Defaults to secure connections only.","admin.image.amazonS3SSLTitle":"Enable Secure Amazon S3 Connections:","admin.image.amazonS3TraceDescription":"(Development Mode) When true, log additional debugging information to the system logs.","admin.image.amazonS3TraceTitle":"Enable Amazon S3 Debugging:","admin.image.enableProxy":"Enable Image Proxy:","admin.image.enableProxyDescription":"When true, enables an image proxy for loading all Markdown images.","admin.image.localDescription":"Directory to which files and images are written. If blank, defaults to ./data/.","admin.image.localExample":'E.g.: "./data/"',"admin.image.localTitle":"Local Storage Directory:","admin.image.maxFileSizeDescription":"Maximum file size for message attachments in megabytes. Caution: Verify server memory can support your setting choice. Large file sizes increase the risk of server crashes and failed uploads due to network interruptions.","admin.image.maxFileSizeExample":"50","admin.image.maxFileSizeTitle":"Maximum File Size:","admin.image.proxyOptions":"Remote Image Proxy Options:","admin.image.proxyOptionsDescription":"Additional options such as the URL signing key. Refer to your image proxy documentation to learn more about what options are supported.","admin.image.proxyType":"Image Proxy Type:","admin.image.proxyTypeDescription":"Configure an image proxy to load all Markdown images through a proxy. The image proxy prevents users from making insecure image requests, provides caching for increased performance, and automates image adjustments such as resizing. See [documentation](!https://about.mattermost.com/default-image-proxy-documentation) to learn more.","admin.image.proxyURL":"Remote Image Proxy URL:","admin.image.proxyURLDescription":"URL of your remote image proxy server.","admin.image.publicLinkDescription":'32-character salt added to signing of public image links. Randomly generated on install. Click "Regenerate" to create new salt.',"admin.image.publicLinkTitle":"Public Link Salt:","admin.image.shareDescription":"Allow users to share public links to files and images.","admin.image.shareTitle":"Enable Public File Links: ","admin.image.storeAmazonS3":"Amazon S3","admin.image.storeDescription":'Storage system where files and image attachments are saved.\n \nSelecting "Amazon S3" enables fields to enter your Amazon credentials and bucket details.\n \nSelecting "Local File System" enables the field to specify a local file directory.',"admin.image.storeLocal":"Local File System","admin.image.storeTitle":"File Storage System:","admin.integrations.botAccounts":"Bot Accounts","admin.integrations.botAccounts.title":"Bot Accounts","admin.integrations.cors":"CORS","admin.integrations.gif":"GIF (Beta)","admin.integrations.integrationManagement":"Integration Management","admin.integrations.integrationManagement.title":"Integration Management","admin.jobTable.cancelButton":"Cancel","admin.jobTable.headerExtraInfo":"Details","admin.jobTable.headerFinishAt":"Finish Time","admin.jobTable.headerRunTime":"Run Time","admin.jobTable.headerStatus":"Status","admin.jobTable.jobId":"Job ID: ","admin.jobTable.lastActivityAt":"Last Activity: ","admin.jobTable.runLengthMinutes":" minutes","admin.jobTable.runLengthSeconds":" seconds","admin.jobTable.statusCanceled":"Canceled","admin.jobTable.statusCanceling":"Canceling...","admin.jobTable.statusError":"Error","admin.jobTable.statusInProgress":"In Progress","admin.jobTable.statusPending":"Pending","admin.jobTable.statusSuccess":"Success","admin.ldap.baseDesc":"The Base DN is the Distinguished Name of the location where Mattermost should start its search for users in the AD/LDAP tree.","admin.ldap.baseEx":'E.g.: "ou=Unit Name,dc=corp,dc=example,dc=com"',"admin.ldap.baseTitle":"BaseDN:","admin.ldap.bindPwdDesc":'Password of the user given in "Bind Username".',"admin.ldap.bindPwdTitle":"Bind Password:","admin.ldap.bindUserDesc":"The username used to perform the AD/LDAP search. This should typically be an account created specifically for use with Mattermost. It should have access limited to read the portion of the AD/LDAP tree specified in the BaseDN field.","admin.ldap.bindUserTitle":"Bind Username:","admin.ldap.emailAttrDesc":"The attribute in the AD/LDAP server used to populate the email address field in Mattermost.","admin.ldap.emailAttrEx":'E.g.: "mail" or "userPrincipalName"',"admin.ldap.emailAttrTitle":"Email Attribute:","admin.ldap.enableDesc":"When true, Mattermost allows login using AD/LDAP","admin.ldap.enableSyncDesc":"When true, Mattermost periodically synchronizes users from AD/LDAP. When false, user attributes are updated from AD/LDAP during user login only.","admin.ldap.enableSyncTitle":"Enable Synchronization with AD/LDAP:","admin.ldap.enableTitle":"Enable sign-in with AD/LDAP:","admin.ldap.firstnameAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the first name of users in Mattermost. When set, users cannot edit their first name, since it is synchronized with the LDAP server. When left blank, users can set their first name in Account Settings.","admin.ldap.firstnameAttrEx":'E.g.: "givenName"',"admin.ldap.firstnameAttrTitle":"First Name Attribute:","admin.ldap.groupDisplayNameAttributeDesc":"The attribute in the AD/LDAP server used to populate the group display names.","admin.ldap.groupDisplayNameAttributeEx":'E.g.: "cn"',"admin.ldap.groupDisplayNameAttributeTitle":"Group Display Name Attribute:","admin.ldap.groupFilterEx":'E.g.: "(objectClass=group)"',"admin.ldap.groupFilterFilterDesc":"(Optional) Enter an AD/LDAP filter to use when searching for group objects. Only the groups selected by the query will be available to Mattermost. From [User Management > Groups](/admin_console/user_management/groups), select which AD/LDAP groups should be linked and configured.","admin.ldap.groupFilterTitle":"Group Filter:","admin.ldap.groupIdAttributeDesc":"The attribute in the AD/LDAP server used as a unique identifier for Groups. This should be a AD/LDAP attribute with a value that does not change such as `entryUUID` for LDAP or `objectGUID` for Active Directory.","admin.ldap.groupIdAttributeEx":'E.g.: "objectGUID" or "entryUUID"',"admin.ldap.groupIdAttributeTitle":"Group ID Attribute:","admin.ldap.idAttrDesc":"The attribute in the AD/LDAP server used as a unique identifier in Mattermost. It should be an AD/LDAP attribute with a value that does not change such as `entryUUID` for LDAP or `objectGUID` for Active Directory. If a user's ID Attribute changes, it will create a new Mattermost account unassociated with their old one.\n \nIf you need to change this field after users have already logged in, use the [mattermost ldap idmigrate](!https://about.mattermost.com/default-mattermost-ldap-idmigrate) CLI tool.","admin.ldap.idAttrEx":'E.g.: "objectGUID" or "entryUUID"',"admin.ldap.idAttrTitle":"ID Attribute: ","admin.ldap.jobExtraInfo.addedGroupMembers":"Added {groupMemberAddCount, number} group members.","admin.ldap.jobExtraInfo.deactivatedUsers":"Deactivated {deleteCount, number} users.","admin.ldap.jobExtraInfo.deletedGroupMembers":"Deleted {groupMemberDeleteCount, number} group members.","admin.ldap.jobExtraInfo.deletedGroups":"Deleted {groupDeleteCount, number} groups.","admin.ldap.jobExtraInfo.updatedUsers":"Updated {updateCount, number} users.","admin.ldap.lastnameAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the last name of users in Mattermost. When set, users cannot edit their last name, since it is synchronized with the LDAP server. When left blank, users can set their last name in Account Settings.","admin.ldap.lastnameAttrEx":'E.g.: "sn"',"admin.ldap.lastnameAttrTitle":"Last Name Attribute:","admin.ldap.ldap_test_button":"AD/LDAP Test","admin.ldap.loginAttrDesc":'The attribute in the AD/LDAP server used to log in to Mattermost. Normally this attribute is the same as the "Username Attribute" field above.\n \nIf your team typically uses domain/username to log in to other services with AD/LDAP, you may enter domain/username in this field to maintain consistency between sites.',"admin.ldap.loginAttrTitle":"Login ID Attribute: ","admin.ldap.loginIdAttrEx":'E.g.: "sAMAccountName"',"admin.ldap.loginNameDesc":'The placeholder text that appears in the login field on the login page. Defaults to "AD/LDAP Username".',"admin.ldap.loginNameEx":'E.g.: "AD/LDAP Username"',"admin.ldap.loginNameTitle":"Login Field Name:","admin.ldap.maxPageSizeEx":'E.g.: "2000"',"admin.ldap.maxPageSizeHelpText":"The maximum number of users the Mattermost server will request from the AD/LDAP server at one time. 0 is unlimited.","admin.ldap.maxPageSizeTitle":"Maximum Page Size:","admin.ldap.nicknameAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the nickname of users in Mattermost. When set, users cannot edit their nickname, since it is synchronized with the LDAP server. When left blank, users can set their nickname in Account Settings.","admin.ldap.nicknameAttrEx":'E.g.: "nickname"',"admin.ldap.nicknameAttrTitle":"Nickname Attribute:","admin.ldap.portDesc":"The port Mattermost will use to connect to the AD/LDAP server. Default is 389.","admin.ldap.portEx":'E.g.: "389"',"admin.ldap.portTitle":"AD/LDAP Port:","admin.ldap.positionAttrDesc":"(Optional) The attribute in the AD/LDAP server used to populate the position field in Mattermost. When set, users cannot edit their position, since it is synchronized with the LDAP server. When left blank, users can set their position in Account Settings.","admin.ldap.positionAttrEx":'E.g.: "title"',"admin.ldap.positionAttrTitle":"Position Attribute:","admin.ldap.queryDesc":"The timeout value for queries to the AD/LDAP server. Increase if you are getting timeout errors caused by a slow AD/LDAP server.","admin.ldap.queryEx":'E.g.: "60"',"admin.ldap.queryTitle":"Query Timeout (seconds):","admin.ldap.serverDesc":"The domain or IP address of AD/LDAP server.","admin.ldap.serverEx":'E.g.: "10.0.0.23"',"admin.ldap.serverTitle":"AD/LDAP Server:","admin.ldap.skipCertificateVerification":"Skip Certificate Verification:","admin.ldap.skipCertificateVerificationDesc":"Skips the certificate verification step for TLS or STARTTLS connections. Not recommended for production environments where TLS is required. For testing only.","admin.ldap.sync_button":"AD/LDAP Synchronize Now","admin.ldap.syncIntervalHelpText":'AD/LDAP Synchronization updates Mattermost user information to reflect updates on the AD/LDAP server. For example, when a user\'s name changes on the AD/LDAP server, the change updates in Mattermost when synchronization is performed. Accounts removed from or disabled in the AD/LDAP server have their Mattermost accounts set to "Inactive" and have their account sessions revoked. Mattermost performs synchronization on the interval entered. For example, if 60 is entered, Mattermost synchronizes every 60 minutes.',"admin.ldap.syncIntervalTitle":"Synchronization Interval (minutes):","admin.ldap.syncNowHelpText":'Initiates an AD/LDAP synchronization immediately. See the table below for status of each synchronization. Please review "System Console > Logs" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.',"admin.ldap.testFailure":"AD/LDAP Test Failure: {error}","admin.ldap.testHelpText":'Tests if the Mattemost server can connect to the AD/LDAP server specified. Please review "System Console > Logs" and [documentation](!https://mattermost.com/default-ldap-docs) to troubleshoot errors.',"admin.ldap.testSuccess":"AD/LDAP Test Successful","admin.ldap.userFilterDisc":"(Optional) Enter an AD/LDAP filter to use when searching for user objects. Only the users selected by the query will be able to access Mattermost. For Active Directory, the query to filter out disabled users is (&(objectCategory=Person)(!(UserAccountControl:1.2.840.113556.1.4.803:=2))).","admin.ldap.userFilterEx":'E.g.: "(objectClass=user)"',"admin.ldap.userFilterTitle":"User Filter:","admin.ldap.usernameAttrDesc":"The attribute in the AD/LDAP server used to populate the username field in Mattermost. This may be the same as the Login ID Attribute.","admin.ldap.usernameAttrEx":'E.g.: "sAMAccountName"',"admin.ldap.usernameAttrTitle":"Username Attribute:","admin.license.choose":"Choose File","admin.license.edition":"Edition: ","admin.license.key":"License Key: ","admin.license.keyRemove":"Remove Enterprise License and Downgrade Server","admin.license.noFile":"No file uploaded","admin.license.removing":"Removing License...","admin.license.title":"Edition and License","admin.license.type":"License: ","admin.license.upload":"Upload","admin.license.uploadDesc":"Upload a license key for Mattermost Enterprise Edition to upgrade this server. [Visit us online](!http://mattermost.com) to learn more about the benefits of Enterprise Edition or to purchase a key.","admin.license.uploading":"Uploading License...","admin.log.consoleDescription":"Typically set to false in production. Developers may set this field to true to output log messages to console based on the console level option.  If true, server writes messages to the standard output stream (stdout). Changing this setting requires a server restart before taking effect.","admin.log.consoleJsonTitle":"Output console logs as JSON:","admin.log.consoleTitle":"Output logs to console: ","admin.log.enableDiagnostics":"Enable Diagnostics and Error Reporting:","admin.log.enableDiagnosticsDescription":"Enable this feature to improve the quality and performance of Mattermost by sending error reporting and diagnostic information to Mattermost, Inc. Read our [privacy policy](!https://about.mattermost.com/default-privacy-policy/) to learn more.","admin.log.enableWebhookDebugging":"Enable Webhook Debugging:","admin.log.enableWebhookDebuggingDescription":"When true, sends webhook debug messages to the server logs. To also output the request body of incoming webhooks, set {boldedLogLevel} to 'DEBUG'.","admin.log.fileDescription":"Typically set to true in production. When true, logged events are written to the mattermost.log file in the directory specified in the File Log Directory field. The logs are rotated at 10,000 lines and archived to a file in the same directory, and given a name with a datestamp and serial number. For example, mattermost.2017-03-31.001. Changing this setting requires a server restart before taking effect.","admin.log.fileJsonTitle":"Output file logs as JSON:","admin.log.fileLevelDescription":"This setting determines the level of detail at which log events are written to the log file. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.","admin.log.fileLevelTitle":"File Log Level:","admin.log.fileTitle":"Output logs to file: ","admin.log.jsonDescription":"When true, logged events are written in a machine readable JSON format. Otherwise they are printed as plain text. Changing this setting requires a server restart before taking effect.","admin.log.levelDescription":"This setting determines the level of detail at which log events are written to the console. ERROR: Outputs only error messages. INFO: Outputs error messages and information around startup and initialization. DEBUG: Prints high detail for developers working on debugging issues.","admin.log.levelTitle":"Console Log Level:","admin.log.locationDescription":"The location of the log files. If blank, they are stored in the ./logs directory. The path that you set must exist and Mattermost must have write permissions in it. Changing this setting requires a server restart before taking effect.","admin.log.locationPlaceholder":"Enter your file location","admin.log.locationTitle":"File Log Directory:","admin.log.logLevel":"Log Level","admin.logs.bannerDesc":"To look up users by User ID or Token ID, go to Reporting > Users and paste the ID into the search filter.","admin.logs.next":"Next","admin.logs.prev":"Previous","admin.logs.reload":"Reload","admin.logs.title":"Server Logs","admin.manage_roles.additionalRoles":"Select additional permissions for the account. [Read more about roles and permissions](!https://about.mattermost.com/default-permissions).","admin.manage_roles.allowUserAccessTokens":"Allow this account to generate [personal access tokens](!https://about.mattermost.com/default-user-access-tokens).","admin.manage_roles.allowUserAccessTokensDesc":"Removing this permission doesn't delete existing tokens. To delete them, go to the user's Manage Tokens menu.","admin.manage_roles.cancel":"Cancel","admin.manage_roles.manageRolesTitle":"Manage Roles","admin.manage_roles.postAllPublicRole":"Access to post to all Mattermost public channels.","admin.manage_roles.postAllPublicRoleTitle":"post:channels","admin.manage_roles.postAllRole":"Access to post to all Mattermost channels including direct messages.","admin.manage_roles.postAllRoleTitle":"post:all","admin.manage_roles.save":"Save","admin.manage_roles.saveError":"Unable to save roles.","admin.manage_roles.systemAdmin":"System Admin","admin.manage_roles.systemMember":"Member","admin.manage_tokens.manageTokensTitle":"Manage Personal Access Tokens","admin.manage_tokens.userAccessTokensDescription":"Personal access tokens function similarly to session tokens and can be used by integrations to [interact with this Mattermost server](!https://about.mattermost.com/default-api-authentication). Tokens are disabled if the user is deactivated. Learn more about [personal access tokens](!https://about.mattermost.com/default-user-access-tokens).","admin.manage_tokens.userAccessTokensIdLabel":"Token ID: ","admin.manage_tokens.userAccessTokensNameLabel":"Token Description: ","admin.manage_tokens.userAccessTokensNone":"No personal access tokens.","admin.metrics.enableDescription":"When true, Mattermost will enable performance monitoring collection and profiling. Please see [documentation](!http://docs.mattermost.com/deployment/metrics.html) to learn more about configuring performance monitoring for Mattermost.","admin.metrics.enableTitle":"Enable Performance Monitoring:","admin.metrics.listenAddressDesc":"The address the server will listen on to expose performance metrics.","admin.metrics.listenAddressEx":'E.g.: ":8067"',"admin.metrics.listenAddressTitle":"Listen Address:","admin.mfa.bannerDesc":"[Multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) is available for accounts with AD/LDAP or email login. If other login methods are used, MFA should be configured with the authentication provider.","admin.nav.administratorsGuide":"Administrator's Guide","admin.nav.commercialSupport":"Commercial Support","admin.nav.menuAriaLabel":"Admin Console Menu","admin.nav.switch":"Team Selection","admin.nav.troubleshootingForum":"Troubleshooting Forum","admin.oauth.gitlab":"GitLab","admin.oauth.google":"Google Apps","admin.oauth.off":"Do not allow sign-in via an OAuth 2.0 provider","admin.oauth.office365":"Office 365","admin.oauth.providerDescription":"When true, Mattermost can act as an OAuth 2.0 service provider allowing Mattermost to authorize API requests from external applications. See [documentation](!https://docs.mattermost.com/developer/oauth-2-0-applications.html) to learn more.","admin.oauth.providerTitle":"Enable OAuth 2.0 Service Provider: ","admin.oauth.select":"Select OAuth 2.0 service provider:","admin.office365.authTitle":"Auth Endpoint:","admin.office365.clientIdDescription":"The Application/Client ID you received when registering your application with Microsoft.","admin.office365.clientIdExample":'E.g.: "adf3sfa2-ag3f-sn4n-ids0-sh1hdax192qq"',"admin.office365.clientIdTitle":"Application ID:","admin.office365.clientSecretDescription":"The Application Secret Password you generated when registering your application with Microsoft.","admin.office365.clientSecretExample":'E.g.: "shAieM47sNBfgl20f8ci294"',"admin.office365.clientSecretTitle":"Application Secret Password:","admin.office365.EnableMarkdownDesc":'1. [Log in](!https://login.microsoftonline.com/) to your Microsoft or Office 365 account. Make sure it`s the account on the same [tenant](!https://msdn.microsoft.com/en-us/library/azure/jj573650.aspx#Anchor_0) that you would like users to log in with.\n2. Go to [https://apps.dev.microsoft.com](!https://apps.dev.microsoft.com), click **Go to app list** > **Add an app** and use "Mattermost - your-company-name" as the **Application Name**.\n3. Under **Application Secrets**, click **Generate New Password** and paste it to the **Application Secret Password** field below.\n4. Under **Platforms**, click **Add Platform**, choose **Web** and enter **your-mattermost-url/signup/office365/complete** (example: http://localhost:8065/signup/office365/complete) under **Redirect URIs**. Also uncheck **Allow Implicit Flow**.\n5. Finally, click **Save** and then paste the **Application ID** below.',"admin.office365.tokenTitle":"Token Endpoint:","admin.office365.userTitle":"User API Endpoint:","admin.password.lowercase":"At least one lowercase letter","admin.password.minimumLength":"Minimum Password Length:","admin.password.minimumLengthDescription":"Minimum number of characters required for a valid password. Must be a whole number greater than or equal to {min} and less than or equal to {max}.","admin.password.minimumLengthExample":'E.g.: "5"',"admin.password.number":"At least one number","admin.password.preview":"Error message preview","admin.password.symbol":'At least one symbol (e.g. "~!@#$%^&*()")',"admin.password.uppercase":"At least one uppercase letter","admin.permissions.documentationLinkText":"documentation","admin.permissions.group.delete_posts.description":"Delete own and others' posts.","admin.permissions.group.delete_posts.name":"Delete Posts","admin.permissions.group.edit_posts.description":"Edit own and others' posts.","admin.permissions.group.edit_posts.name":"Edit Posts","admin.permissions.group.integrations.description":"Manage OAuth 2.0, slash commands, webhooks and emoji.","admin.permissions.group.integrations.name":"Integrations & Customizations","admin.permissions.group.posts.description":"Write, edit and delete posts.","admin.permissions.group.posts.name":"Manage Posts","admin.permissions.group.private_channel.description":"Create and archive channels, manage settings and members.","admin.permissions.group.private_channel.name":"Manage Private Channels","admin.permissions.group.public_channel.description":"Join, create and archive channels, manage settings and members.","admin.permissions.group.public_channel.name":"Manage Public Channels","admin.permissions.group.reactions.description":"Add and delete reactions on posts.","admin.permissions.group.reactions.name":"Post Reactions","admin.permissions.group.send_invites.description":"Add team members, send email invites and share team invite link.","admin.permissions.group.send_invites.name":"Add Team Members","admin.permissions.group.teams_team_scope.description":"Manage team members.","admin.permissions.group.teams_team_scope.name":"Teams","admin.permissions.group.teams.description":"Create teams and manage members.","admin.permissions.group.teams.name":"Teams","admin.permissions.inherited_from":"Inherited from <a>{name}</a>.","admin.permissions.introBanner":"Permission Schemes set the default permissions for Team Admins, Channel Admins and everyone else. Learn more about permission schemes in our [documentation](!https://about.mattermost.com/default-advanced-permissions).","admin.permissions.loadingMoreSchemes":"Loading...","admin.permissions.loadMoreSchemes":"Load more schemes","admin.permissions.permission.assign_system_admin_role.description":"Assign system admin role","admin.permissions.permission.assign_system_admin_role.name":"Assign system admin role","admin.permissions.permission.create_direct_channel.description":"Create direct channel","admin.permissions.permission.create_direct_channel.name":"Create direct channel","admin.permissions.permission.create_emojis.description":"Allow users to create custom emoji.","admin.permissions.permission.create_emojis.name":"Create Custom Emoji","admin.permissions.permission.create_group_channel.description":"Create group channel","admin.permissions.permission.create_group_channel.name":"Create group channel","admin.permissions.permission.create_private_channel.description":"Create new private channels.","admin.permissions.permission.create_private_channel.name":"Create Channels","admin.permissions.permission.create_public_channel.description":"Create new public channels.","admin.permissions.permission.create_public_channel.name":"Create Channels","admin.permissions.permission.create_team.description":"Create new teams.","admin.permissions.permission.create_team.name":"Create Teams","admin.permissions.permission.create_user_access_token.description":"Create user access token","admin.permissions.permission.create_user_access_token.name":"Create user access token","admin.permissions.permission.delete_emojis.description":"Allow users to delete custom emoji that they created.","admin.permissions.permission.delete_emojis.name":"Delete Own Custom Emoji","admin.permissions.permission.delete_others_emojis.description":"Allow users to delete custom emoji that were created by other users.","admin.permissions.permission.delete_others_emojis.name":"Delete Others' Custom Emoji","admin.permissions.permission.delete_others_posts.description":"Posts made by other users can be deleted.","admin.permissions.permission.delete_others_posts.name":"Delete Others' Posts","admin.permissions.permission.delete_post.description":"Author's own posts can be deleted.","admin.permissions.permission.delete_post.name":"Delete Own Posts","admin.permissions.permission.delete_private_channel.description":"Archive private channels.","admin.permissions.permission.delete_private_channel.name":"Archive Channels","admin.permissions.permission.delete_public_channel.description":"Archive public channels.","admin.permissions.permission.delete_public_channel.name":"Archive Channels","admin.permissions.permission.edit_other_users.description":"Edit other users","admin.permissions.permission.edit_other_users.name":"Edit other users","admin.permissions.permission.edit_others_posts.description":"Allow users to edit others' posts.","admin.permissions.permission.edit_others_posts.name":"Edit Others' Posts","admin.permissions.permission.edit_post.description":"{editTimeLimitButton} after posting, allow users to edit their own posts.","admin.permissions.permission.edit_post.name":"Edit Own Posts","admin.permissions.permission.import_team.description":"Import team","admin.permissions.permission.import_team.name":"Import team","admin.permissions.permission.list_team_channels.description":"List team channels","admin.permissions.permission.list_team_channels.name":"List team channels","admin.permissions.permission.list_users_without_team.description":"List users without team","admin.permissions.permission.list_users_without_team.name":"List users without team","admin.permissions.permission.manage_channel_roles.description":"Manage channel roles","admin.permissions.permission.manage_channel_roles.name":"Manage channel roles","admin.permissions.permission.manage_incoming_webhooks.description":"Create, edit, and delete incoming webhooks.","admin.permissions.permission.manage_incoming_webhooks.name":"Manage Incoming Webhooks","admin.permissions.permission.manage_jobs.description":"Manage jobs","admin.permissions.permission.manage_jobs.name":"Manage jobs","admin.permissions.permission.manage_oauth.description":"Create, edit and delete OAuth 2.0 application tokens.","admin.permissions.permission.manage_oauth.name":"Manage OAuth Applications","admin.permissions.permission.manage_outgoing_webhooks.description":"Create, edit, and delete outgoing webhooks.","admin.permissions.permission.manage_outgoing_webhooks.name":"Manage Outgoing Webhooks","admin.permissions.permission.manage_private_channel_members.description":"Add and remove private channel members.","admin.permissions.permission.manage_private_channel_members.name":"Manage Channel Members","admin.permissions.permission.manage_private_channel_properties.description":"Update private channel names, headers and purposes.","admin.permissions.permission.manage_private_channel_properties.name":"Manage Channel Settings","admin.permissions.permission.manage_public_channel_members.description":"Add and remove public channel members.","admin.permissions.permission.manage_public_channel_members.name":"Manage Channel Members","admin.permissions.permission.manage_public_channel_properties.description":"Update public channel names, headers and purposes.","admin.permissions.permission.manage_public_channel_properties.name":"Manage Channel Settings","admin.permissions.permission.manage_roles.description":"Manage roles","admin.permissions.permission.manage_roles.name":"Manage roles","admin.permissions.permission.manage_slash_commands.description":"Create, edit and delete custom slash commands.","admin.permissions.permission.manage_slash_commands.name":"Manage Slash Commands","admin.permissions.permission.manage_system.description":"Manage system","admin.permissions.permission.manage_system.name":"Manage system","admin.permissions.permission.manage_team_roles.description":"Manage team roles","admin.permissions.permission.manage_team_roles.name":"Manage team roles","admin.permissions.permission.manage_team.description":"Manage team","admin.permissions.permission.manage_team.name":"Manage team","admin.permissions.permission.permanent_delete_user.description":"Permanent delete user","admin.permissions.permission.permanent_delete_user.name":"Permanent delete user","admin.permissions.permission.read_channel.description":"Read channel","admin.permissions.permission.read_channel.name":"Read channel","admin.permissions.permission.read_user_access_token.description":"Read user access token","admin.permissions.permission.read_user_access_token.name":"Read user access token","admin.permissions.permission.remove_user_from_team.description":"Remove user from team","admin.permissions.permission.remove_user_from_team.name":"Remove user from team","admin.permissions.permission.revoke_user_access_token.description":"Revoke user access token","admin.permissions.permission.revoke_user_access_token.name":"Revoke user access token","admin.permissions.permission.upload_file.description":"Upload file","admin.permissions.permission.upload_file.name":"Upload file","admin.permissions.permission.view_team.description":"View team","admin.permissions.permission.view_team.name":"View team","admin.permissions.permissionSchemes":"Permission Schemes","admin.permissions.permissionSchemes.cancel":"Cancel","admin.permissions.permissionsSchemeSummary.delete":"Delete","admin.permissions.permissionsSchemeSummary.deleteConfirmButton":"Yes, Delete","admin.permissions.permissionsSchemeSummary.deleteConfirmQuestion":"The permissions in the teams using this scheme will reset to the defaults in the System Scheme. Are you sure you want to delete the {schemeName} scheme?","admin.permissions.permissionsSchemeSummary.deleteSchemeTitle":"Delete {scheme} scheme?","admin.permissions.permissionsSchemeSummary.deleting":"Deleting...","admin.permissions.permissionsSchemeSummary.edit":"Edit","admin.permissions.permissionsSchemeSummary.moreTeams":"+{number} more","admin.permissions.permissionsTree.description":"Description","admin.permissions.permissionsTree.permission":"Permission","admin.permissions.roles.all_users.name":"All Members","admin.permissions.roles.channel_admin.name":"Channel Admin","admin.permissions.roles.channel_user.name":"Channel User","admin.permissions.roles.system_admin.name":"System Admin","admin.permissions.roles.system_user.name":"System User","admin.permissions.roles.team_admin.name":"Team Admin","admin.permissions.roles.team_user.name":"Team User","admin.permissions.systemScheme":"System Scheme","admin.permissions.systemScheme.allMembersDescription":"Permissions granted to all members, including administrators and newly created users.","admin.permissions.systemScheme.allMembersTitle":"All Members","admin.permissions.systemScheme.channelAdminsDescription":"Permissions granted to channel creators and any users promoted to Channel Administrator.","admin.permissions.systemScheme.channelAdminsTitle":"Channel Administrators","admin.permissions.systemScheme.introBanner":"Configure the default permissions for Team Admins, Channel Admins and other members. This scheme is inherited by all teams unless a [Team Override Scheme](!https://about.mattermost.com/default-team-override-scheme) is applied in specific teams.","admin.permissions.systemScheme.resetDefaultsButton":"Reset to Defaults","admin.permissions.systemScheme.resetDefaultsButtonModalBody":"This will reset all selections on this page to their default settings. Are you sure you want to reset?","admin.permissions.systemScheme.resetDefaultsButtonModalTitle":"Reset to Default?","admin.permissions.systemScheme.resetDefaultsConfirmationButton":"Yes, Reset","admin.permissions.systemScheme.systemAdminsDescription":"Full permissions granted to System Administrators.","admin.permissions.systemScheme.systemAdminsTitle":"System Administrators","admin.permissions.systemScheme.teamAdminsDescription":"Permissions granted to team creators and any users promoted to Team Administrator.","admin.permissions.systemScheme.teamAdminsTitle":"Team Administrators","admin.permissions.systemSchemeBannerButton":"Edit Scheme","admin.permissions.systemSchemeBannerText":"Set the default permissions inherited by all teams unless a [Team Override Scheme](!https://about.mattermost.com/default-team-override-scheme) is applied.","admin.permissions.systemSchemeBannerTitle":"System Scheme","admin.permissions.teamOverrideSchemesBannerText":"Use when specific teams need permission exceptions to the [System Scheme](!https://about.mattermost.com/default-system-scheme).","admin.permissions.teamOverrideSchemesInProgress":"Migration job in progress: Team Override Schemes are not available until the job server completes the permissions migration. Learn more in the {documentationLink}.","admin.permissions.teamOverrideSchemesNewButton":"New Team Override Scheme","admin.permissions.teamOverrideSchemesNoJobsEnabled":"Migration job on hold: Team Override Schemes are not available until the job server can execute the permissions migration. The job will be automatically started when the job server is enabled. Learn more in the {documentationLink}.","admin.permissions.teamOverrideSchemesNoSchemes":"No team override schemes created.","admin.permissions.teamOverrideSchemesTitle":"Team Override Schemes","admin.permissions.teamScheme":"Team Scheme","admin.permissions.teamScheme.addTeams":"Add Teams","admin.permissions.teamScheme.introBanner":"[Team Override Schemes](!https://about.mattermost.com/default-team-override-scheme) set the permissions for Team Admins, Channel Admins and other members in specific teams. Use a Team Override Scheme when specific teams need permission exceptions to the [System Scheme](!https://about.mattermost.com/default-system-scheme).","admin.permissions.teamScheme.noTeams":"No team selected. Please add teams to this list.","admin.permissions.teamScheme.removeTeam":"Remove","admin.permissions.teamScheme.schemeDescriptionLabel":"Scheme Description:","admin.permissions.teamScheme.schemeDescriptionPlaceholder":"Scheme Description","admin.permissions.teamScheme.schemeDetailsDescription":"Set the name and description for this scheme.","admin.permissions.teamScheme.schemeDetailsTitle":"Scheme Details","admin.permissions.teamScheme.schemeNameLabel":"Scheme Name:","admin.permissions.teamScheme.schemeNamePlaceholder":"Scheme Name","admin.permissions.teamScheme.selectTeamsDescription":"Select teams where permission exceptions are required.","admin.permissions.teamScheme.selectTeamsTitle":"Select teams to override permissions","admin.plugin.choose":"Choose File","admin.plugin.cluster_instance":"Cluster Instance","admin.plugin.disable":"Disable","admin.plugin.disabling":"Disabling...","admin.plugin.enable":"Enable","admin.plugin.enabling":"Enabling...","admin.plugin.error.activate":"Unable to upload the plugin. It may conflict with another plugin on your server.","admin.plugin.error.extract":"Encountered an error when extracting the plugin. Review your plugin file content and try again.","admin.plugin.installedDesc":"Installed plugins on your Mattermost server. Pre-packaged plugins are installed by default, and can be disabled but not removed.","admin.plugin.installedTitle":"Installed Plugins: ","admin.plugin.management.title":"Plugin Management","admin.plugin.multiple_versions_warning":"There are multiple versions of this plugin installed across your cluster. Re-install this plugin to ensure it works consistently.","admin.plugin.no_plugins":"No installed plugins.","admin.plugin.prepackaged":"pre-packaged","admin.plugin.remove":"Remove","admin.plugin.removing":"Removing...","admin.plugin.settingsButton":"Settings","admin.plugin.state":"State","admin.plugin.state.failed_to_start":"Failed to start","admin.plugin.state.failed_to_start.description":"This plugin failed to start. Check your system logs for errors.","admin.plugin.state.failed_to_stay_running":"Crashing","admin.plugin.state.failed_to_stay_running.description":"This plugin crashed multiple times and is no longer running. Check your system logs for errors.","admin.plugin.state.not_running":"Not running","admin.plugin.state.not_running.description":"This plugin is not enabled.","admin.plugin.state.running":"Running","admin.plugin.state.running.description":"This plugin is running.","admin.plugin.state.starting":"Starting","admin.plugin.state.starting.description":"This plugin is starting.","admin.plugin.state.stopping":"Stopping","admin.plugin.state.stopping.description":"This plugin is stopping.","admin.plugin.state.unknown":"Unknown","admin.plugin.upload":"Upload","admin.plugin.upload.overwrite_modal.desc":"A plugin with this ID already exists. Would you like to overwrite it?","admin.plugin.upload.overwrite_modal.overwrite":"Overwrite","admin.plugin.upload.overwrite_modal.title":"Overwrite existing plugin?","admin.plugin.uploadAndPluginDisabledDesc":"To enable plugins, set **Enable Plugins** to true. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more.","admin.plugin.uploadDesc":"Upload a plugin for your Mattermost server. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more.","admin.plugin.uploadDisabledDesc":"Enable plugin uploads in config.json. See [documentation](!https://about.mattermost.com/default-plugin-uploads) to learn more.","admin.plugin.uploading":"Uploading...","admin.plugin.uploadTitle":"Upload Plugin: ","admin.plugin.version_title":"Version","admin.plugins.pluginManagement":"Plugin Management","admin.plugins.settings.enable":"Enable Plugins: ","admin.plugins.settings.enableDesc":"When true, enables plugins on your Mattermost server. Use plugins to integrate with third-party systems, extend functionality, or customize the user interface of your Mattermost server. See [documentation](!https://about.mattermost.com/default-plugins) to learn more.","admin.privacy.showEmailDescription":"When false, hides the email address of members from everyone except System Administrators.","admin.privacy.showEmailTitle":"Show Email Address: ","admin.privacy.showFullNameDescription":"When false, hides the full name of members from everyone except System Administrators. Username is shown in place of full name.","admin.privacy.showFullNameTitle":"Show Full Name: ","admin.purge.button":"Purge All Caches","admin.purge.purgeDescription":"This will purge all the in-memory caches for things like sessions, accounts, channels, etc. Deployments using High Availability will attempt to purge all the servers in the cluster. Purging the caches may adversely impact performance.","admin.purge.purgeFail":"Purging unsuccessful: {error}","admin.rate.enableLimiterDescription":"When true, APIs are throttled at rates specified below.","admin.rate.enableLimiterTitle":"Enable Rate Limiting: ","admin.rate.httpHeaderDescription":'When filled in, vary rate limiting by HTTP header field specified (e.g. when configuring NGINX set to "X-Real-IP", when configuring AmazonELB set to "X-Forwarded-For").',"admin.rate.httpHeaderExample":'E.g.: "X-Real-IP", "X-Forwarded-For"',"admin.rate.httpHeaderTitle":"Vary rate limit by HTTP header:","admin.rate.maxBurst":"Maximum Burst Size:","admin.rate.maxBurstDescription":"Maximum number of requests allowed beyond the per second query limit.","admin.rate.maxBurstExample":'E.g.: "100"',"admin.rate.memoryDescription":'Maximum number of users sessions connected to the system as determined by "Vary rate limit by remote address" and "Vary rate limit by HTTP header" settings below.',"admin.rate.memoryExample":'E.g.: "10000"',"admin.rate.memoryTitle":"Memory Store Size:","admin.rate.noteDescription":"Changing properties in this section will require a server restart before taking effect.","admin.rate.queriesDescription":"Throttles API at this number of requests per second.","admin.rate.queriesExample":'E.g.: "10"',"admin.rate.queriesTitle":"Maximum Queries per Second:","admin.rate.remoteDescription":"When true, rate limit API access by IP address.","admin.rate.remoteTitle":"Vary rate limit by remote address: ","admin.rate.title":"Rate Limiting","admin.rate.varyByUser":"Vary rate limit by user: ","admin.rate.varyByUserDescription":"When true, rate limit API access by user authentication token.","admin.recycle.button":"Recycle Database Connections","admin.recycle.recycleDescription":'Deployments using multiple databases can switch from one master database to another without restarting the Mattermost server by updating "config.json" to the new desired configuration and using the {reloadConfiguration} feature to load the new settings while the server is running. The administrator should then use {featureName} feature to recycle the database connections based on the new settings.',"admin.recycle.recycleDescription.featureName":"Recycle Database Connections","admin.recycle.recycleDescription.reloadConfiguration":"Environment > Web Server > Reload Configuration from Disk","admin.recycle.reloadFail":"Recycling unsuccessful: {error}","admin.regenerate":"Regenerate","admin.reload.button":"Reload Configuration From Disk","admin.reload.reloadDescription":'Deployments using multiple databases can switch from one master database to another without restarting the Mattermost server by updating "config.json" to the new desired configuration and using the {featureName} feature to load the new settings while the server is running. The administrator should then use the {recycleDatabaseConnections} feature to recycle the database connections based on the new settings.',"admin.reload.reloadDescription.featureName":"Reload Configuration from Disk","admin.reload.reloadDescription.recycleDatabaseConnections":"Environment > Database > Recycle Database Connections","admin.reload.reloadFail":"Reloading unsuccessful: {error}","admin.requestButton.loading":" Loading...","admin.requestButton.requestFailure":"Test Failure: {error}","admin.requestButton.requestSuccess":"Test Successful","admin.reset_email.cancel":"Cancel","admin.reset_email.newEmail":"New Email","admin.reset_email.reset":"Reset","admin.reset_email.titleReset":"Update Email","admin.reset_password.cancel":"Cancel","admin.reset_password.curentPassword":"Current Password","admin.reset_password.missing_current":"Please enter your current password.","admin.reset_password.newPassword":"New Password","admin.reset_password.reset":"Reset","admin.reset_password.titleReset":"Reset Password","admin.reset_password.titleSwitch":"Switch Account to Email/Password","admin.revoke_token_button.delete":"Delete","admin.s3.connectionS3Test":"Test Connection","admin.s3.s3Fail":"Connection unsuccessful: {error}","admin.s3.s3Success":"Connection was successful","admin.s3.testing":"Testing...","admin.saml.assertionConsumerServiceURLEx":'E.g.: "https://<your-mattermost-url>/login/sso/saml"',"admin.saml.assertionConsumerServiceURLPopulatedDesc":"This field is also known as the Assertion Consumer Service URL.","admin.saml.assertionConsumerServiceURLTitle":"Service Provider Login URL:","admin.saml.emailAttrDesc":"The attribute in the SAML Assertion that will be used to populate the email addresses of users in Mattermost.","admin.saml.emailAttrEx":'E.g.: "Email" or "PrimaryEmail"',"admin.saml.emailAttrTitle":"Email Attribute:","admin.saml.enableDescription":"When true, Mattermost allows login using SAML 2.0. Please see [documentation](!http://docs.mattermost.com/deployment/sso-saml.html) to learn more about configuring SAML for Mattermost.","admin.saml.enableSyncWithLdapDescription":"When true, Mattermost periodically synchronizes SAML user attributes, including user deactivation and removal, from AD/LDAP. Enable and configure synchronization settings at **Authentication > AD/LDAP**. When false, user attributes are updated from SAML during user login. See [documentation](!https://about.mattermost.com/default-saml-ldap-sync) to learn more.","admin.saml.enableSyncWithLdapIncludeAuthDescription":"When true, Mattermost will override the SAML ID attribute with the AD/LDAP ID attribute if configured or override the SAML Email attribute with the AD/LDAP Email attribute if SAML ID attribute is not present.  This will allow you automatically migrate users from Email binding to ID binding to prevent creation of new users when an email address changes for a user. Moving from true to false, will remove the override from happening.\n \n**Note:** SAML IDs must match the LDAP IDs to prevent disabling of user accounts.  Please review [documentation](!https://docs.mattermost.com/deployment/sso-saml-ldapsync.html) for more information.","admin.saml.enableSyncWithLdapIncludeAuthTitle":"Override SAML bind data with AD/LDAP information:","admin.saml.enableSyncWithLdapTitle":"Enable Synchronizing SAML Accounts With AD/LDAP:","admin.saml.enableTitle":"Enable Login With SAML 2.0:","admin.saml.encryptDescription":"When false, Mattermost will not decrypt SAML Assertions encrypted with your Service Provider Public Certificate. Not recommended for production environments. For testing only.","admin.saml.encryptTitle":"Enable Encryption:","admin.saml.firstnameAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the first name of users in Mattermost.","admin.saml.firstnameAttrEx":'E.g.: "FirstName"',"admin.saml.firstnameAttrTitle":"First Name Attribute:","admin.saml.idAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to bind users from SAML to users in Mattermost.","admin.saml.idAttrEx":'E.g.: "Id"',"admin.saml.idAttrTitle":"Id Attribute:","admin.saml.idpCertificateFileDesc":"The public authentication certificate issued by your Identity Provider.","admin.saml.idpCertificateFileRemoveDesc":"Remove the public authentication certificate issued by your Identity Provider.","admin.saml.idpCertificateFileTitle":"Identity Provider Public Certificate:","admin.saml.idpDescriptorUrlDesc":"The issuer URL for the Identity Provider you use for SAML requests.","admin.saml.idpDescriptorUrlEx":'E.g.: "https://idp.example.org/SAML2/issuer"',"admin.saml.idpDescriptorUrlTitle":"Identity Provider Issuer URL:","admin.saml.idpUrlDesc":"The URL where Mattermost sends a SAML request to start login sequence.","admin.saml.idpUrlEx":'E.g.: "https://idp.example.org/SAML2/SSO/Login"',"admin.saml.idpUrlTitle":"SAML SSO URL:","admin.saml.lastnameAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the last name of users in Mattermost.","admin.saml.lastnameAttrEx":'E.g.: "LastName"',"admin.saml.lastnameAttrTitle":"Last Name Attribute:","admin.saml.localeAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the language of users in Mattermost.","admin.saml.localeAttrEx":'E.g.: "Locale" or "PrimaryLanguage"',"admin.saml.localeAttrTitle":"Preferred Language Attribute:","admin.saml.loginButtonTextDesc":'(Optional) The text that appears in the login button on the login page. Defaults to "SAML".',"admin.saml.loginButtonTextEx":'E.g.: "OKTA"',"admin.saml.loginButtonTextTitle":"Login Button Text:","admin.saml.nicknameAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the nickname of users in Mattermost.","admin.saml.nicknameAttrEx":'E.g.: "Nickname"',"admin.saml.nicknameAttrTitle":"Nickname Attribute:","admin.saml.positionAttrDesc":"(Optional) The attribute in the SAML Assertion that will be used to populate the position of users in Mattermost.","admin.saml.positionAttrEx":'E.g.: "Role"',"admin.saml.positionAttrTitle":"Position Attribute:","admin.saml.privateKeyFileFileDesc":"The private key used to decrypt SAML Assertions from the Identity Provider.","admin.saml.privateKeyFileFileRemoveDesc":"Remove the private key used to decrypt SAML Assertions from the Identity Provider.","admin.saml.privateKeyFileTitle":"Service Provider Private Key:","admin.saml.publicCertificateFileDesc":"The certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Mattermost is the Service Provider.","admin.saml.publicCertificateFileRemoveDesc":"Remove the certificate used to generate the signature on a SAML request to the Identity Provider for a service provider initiated SAML login, when Mattermost is the Service Provider.","admin.saml.publicCertificateFileTitle":"Service Provider Public Certificate:","admin.saml.remove.idp_certificate":"Remove Identity Provider Certificate","admin.saml.remove.privKey":"Remove Service Provider Private Key","admin.saml.remove.sp_certificate":"Remove Service Provider Certificate","admin.saml.removing.certificate":"Removing Certificate...","admin.saml.removing.privKey":"Removing Private Key...","admin.saml.signRequestDescription":"When true, Mattermost will sign the SAML request using your private key. When false, Mattermost will not sign the SAML request.","admin.saml.signRequestTitle":"Sign Request:","admin.saml.uploading.certificate":"Uploading Certificate...","admin.saml.uploading.privateKey":"Uploading Private Key...","admin.saml.usernameAttrDesc":"The attribute in the SAML Assertion that will be used to populate the username field in Mattermost.","admin.saml.usernameAttrEx":'E.g.: "Username"',"admin.saml.usernameAttrTitle":"Username Attribute:","admin.saml.verifyDescription":"When false, Mattermost will not verify that the signature sent from a SAML Response matches the Service Provider Login URL. Not recommended for production environments. For testing only.","admin.saml.verifyTitle":"Verify Signature:","admin.saving":"Saving Config...","admin.security.password":"Password","admin.security.requireEmailVerification.disabled":"Email verification cannot be changed while sending emails is disabled.","admin.service.attemptDescription":"Number of login attempts allowed before a user is locked out and required to reset their password via email.","admin.service.attemptExample":'E.g.: "10"',"admin.service.attemptTitle":"Maximum Login Attempts:","admin.service.cmdsDesc":"When true, custom slash commands will be allowed. See [documentation](!http://docs.mattermost.com/developer/slash-commands.html) to learn more.","admin.service.cmdsTitle":"Enable Custom Slash Commands: ","admin.service.complianceExportDesc":"When true, Mattermost will export all messages that were posted in the last 24 hours. The export task is scheduled to run once per day. See [the documentation](!https://about.mattermost.com/default-compliance-export-documentation) to learn more.","admin.service.complianceExportTitle":"Enable Compliance Export:","admin.service.corsAllowCredentialsDescription":"When true, requests that pass validation will include the Access-Control-Allow-Credentials header.","admin.service.corsAllowCredentialsLabel":"CORS Allow Credentials:","admin.service.corsDebugDescription":'When true, prints messages to the logs to help when developing an integration that uses CORS. These messages will include the structured key value pair "source":"cors".',"admin.service.CorsDebugLabel":"CORS Debug:","admin.service.corsDescription":'Enable HTTP Cross origin request from a specific domain. Use "*" if you want to allow CORS from any domain or leave it blank to disable it. Should not be set to "*" in production.',"admin.service.corsEx":"http://example.com","admin.service.corsExposedHeadersDescription":"Whitelist of headers that will be accessible to the requester.","admin.service.corsExposedHeadersTitle":"CORS Exposed Headers:","admin.service.corsHeadersEx":"X-My-Header","admin.service.corsTitle":"Enable cross-origin requests from:","admin.service.developerDesc":"When true, JavaScript errors are shown in a purple bar at the top of the user interface. Not recommended for use in production. ","admin.service.developerTitle":"Enable Developer Mode: ","admin.service.disableBotOwnerDeactivatedTitle":"Disable bot accounts when owner is deactivated:","admin.service.disableBotWhenOwnerIsDeactivated":"When a user is deactivated, disables all bot accounts managed by the user. To re-enable bot accounts, go to **Integrations > Bot Accounts**.","admin.service.enableBotAccountCreation":"When true, users can create bot accounts for integrations in **Integrations > Bot Accounts**. Bot accounts are similar to user accounts except they cannot be used to log in. See [documentation](https://mattermost.com/pl/default-bot-accounts) to learn more.","admin.service.enableBotTitle":"Enable Bot Account Creation: ","admin.service.enforceMfaDesc":"When true, [multi-factor authentication](!https://docs.mattermost.com/deployment/auth.html) is required for login. New users will be required to configure MFA on signup. Logged in users without MFA configured are redirected to the MFA setup page until configuration is complete.\n \nIf your system has users with login methods other than AD/LDAP and email, MFA must be enforced with the authentication provider outside of Mattermost.","admin.service.enforceMfaTitle":"Enforce Multi-factor Authentication:","admin.service.forward80To443":"Forward port 80 to 443:","admin.service.forward80To443Description":"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.","admin.service.forward80To443Description.disabled":"Forwards all insecure traffic from port 80 to secure port 443. Not recommended when using a proxy server.\n \nThis setting cannot be enabled until your server is [listening](#ListenAddress) on port 443.","admin.service.googleDescription":"Set this key to enable the display of titles for embedded YouTube video previews. Without the key, YouTube previews will still be created based on hyperlinks appearing in messages or comments but they will not show the video title. View a [Google Developers Tutorial](!https://www.youtube.com/watch?v=Im69kzhpR3I) for instructions on how to obtain a key and add YouTube Data API v3 as a service to your key.","admin.service.googleExample":'E.g.: "7rAh6iwQCkV4cA1Gsg3fgGOXJAQ43QV"',"admin.service.googleTitle":"Google API Key:","admin.service.iconDescription":"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.mattermost.com/integrations/zapier.html), will be allowed to change the profile picture they post with. Note: Combined with allowing integrations to override usernames, users may be able to perform phishing attacks by attempting to impersonate other users.","admin.service.iconTitle":"Enable integrations to override profile picture icons:","admin.service.insecureTlsDesc":"When true, any outgoing HTTPS requests will accept unverified, self-signed certificates. For example, outgoing webhooks to a server with a self-signed TLS certificate, using any domain, will be allowed. Note that this makes these connections susceptible to man-in-the-middle attacks.","admin.service.insecureTlsTitle":"Enable Insecure Outgoing Connections: ","admin.service.integrationAdmin":"Restrict managing integrations to Admins:","admin.service.integrationAdminDesc":"When true, webhooks and slash commands can only be created, edited and viewed by Team and System Admins, and OAuth 2.0 applications by System Admins. Integrations are available to all users after they have been created by the Admin.","admin.service.internalConnectionsDesc":"A whitelist of local network addresses that can be requested by the Mattermost server on behalf of a client. Care should be used when configuring this setting to prevent unintended access to your local network. See [documentation](https://mattermost.com/pl/default-allow-untrusted-internal-connections) to learn more.","admin.service.internalConnectionsEx":"webhooks.internal.example.com 127.0.0.1 10.0.16.0/28","admin.service.internalConnectionsTitle":"Allow untrusted internal connections to: ","admin.service.letsEncryptCertificateCacheFile":"Let's Encrypt Certificate Cache File:","admin.service.letsEncryptCertificateCacheFileDescription":"Certificates retrieved and other data about the Let's Encrypt service will be stored in this file.","admin.service.listenAddress":"Listen Address:","admin.service.listenDescription":'The address and port to which to bind and listen. Specifying ":8065" will bind to all network interfaces. Specifying "127.0.0.1:8065" will only bind to the network interface having that IP address. If you choose a port of a lower level (called "system ports" or "well-known ports", in the range of 0-1023), you must have permissions to bind to that port. On Linux you can use: "sudo setcap cap_net_bind_service=+ep ./bin/mattermost" to allow Mattermost to bind to well-known ports.',"admin.service.listenExample":'E.g.: ":8065"',"admin.service.mfaDesc":"When true, users with AD/LDAP or email login can add multi-factor authentication to their account using Google Authenticator.","admin.service.mfaTitle":"Enable Multi-factor Authentication:","admin.service.minimumHashtagLengthDescription":"Minimum number of characters in a hashtag. This must be greater than or equal to 2. MySQL databases must be configured to support searching strings shorter than three characters, [see documentation](!https://dev.mysql.com/doc/refman/8.0/en/fulltext-fine-tuning.html).","admin.service.minimumHashtagLengthExample":'E.g.: "3"',"admin.service.minimumHashtagLengthTitle":"Minimum Hashtag Length:","admin.service.mobileSessionDays":"Session Length Mobile (days):","admin.service.mobileSessionDaysDesc":"The number of days from the last time a user entered their credentials to the expiry of the user's session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.","admin.service.outWebhooksDesc":"When true, outgoing webhooks will be allowed. See [documentation](!http://docs.mattermost.com/developer/webhooks-outgoing.html) to learn more.","admin.service.outWebhooksTitle":"Enable Outgoing Webhooks: ","admin.service.overrideDescription":"When true, webhooks, slash commands and other integrations, such as [Zapier](!https://docs.mattermost.com/integrations/zapier.html), will be allowed to change the username they are posting as. Note: Combined with allowing integrations to override profile picture icons, users may be able to perform phishing attacks by attempting to impersonate other users.","admin.service.overrideTitle":"Enable integrations to override usernames:","admin.service.readTimeout":"Read Timeout:","admin.service.readTimeoutDescription":"Maximum time allowed from when the connection is accepted to when the request body is fully read.","admin.service.sessionCache":"Session Cache (minutes):","admin.service.sessionCacheDesc":"The number of minutes to cache a session in memory.","admin.service.sessionDaysEx":'E.g.: "30"',"admin.service.sessionIdleTimeout":"Session Idle Timeout (minutes):","admin.service.sessionIdleTimeoutDesc":"The number of minutes from the last time a user was active on the system to the expiry of the user's session. Once expired, the user will need to log in to continue. Minimum is 5 minutes, and 0 is unlimited.\n \nApplies to the desktop app and browsers. For mobile apps, use an EMM provider to lock the app when not in use. In High Availability mode, enable IP hash load balancing for reliable timeout measurement.","admin.service.sessionIdleTimeoutEx":'E.g.: "60"',"admin.service.siteURL":"Site URL:","admin.service.siteURLDescription":"The URL that users will use to access Mattermost. Standard ports, such as 80 and 443, can be omitted, but non-standard ports are required. For example: http://example.com:8065. This setting is required.\n \nMattermost may be hosted at a subpath. For example: http://example.com:8065/company/mattermost. A restart is required before the server will work correctly.","admin.service.siteURLExample":'E.g.: "http://example.com:8065"',"admin.service.ssoSessionDays":"Session Length SSO (days):","admin.service.ssoSessionDaysDesc":"The number of days from the last time a user entered their credentials to the expiry of the user's session. If the authentication method is SAML or GitLab, the user may automatically be logged back in to Mattermost if they are already logged in to SAML or GitLab. After changing this setting, the setting will take effect after the next time the user enters their credentials.","admin.service.testingDescription":"When true, /test slash command is enabled to load test accounts, data and text formatting. Changing this requires a server restart before taking effect.","admin.service.testingTitle":"Enable Testing Commands: ","admin.service.tlsCertFile":"TLS Certificate File:","admin.service.tlsCertFileDescription":"The certificate file to use.","admin.service.tlsKeyFile":"TLS Key File:","admin.service.tlsKeyFileDescription":"The private key file to use.","admin.service.useLetsEncrypt":"Use Let's Encrypt:","admin.service.useLetsEncryptDescription":"Enable the automatic retrieval of certificates from Let's Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.","admin.service.useLetsEncryptDescription.disabled":"Enable the automatic retrieval of certificates from Let's Encrypt. The certificate will be retrieved when a client attempts to connect from a new domain. This will work with multiple domains.\n \nThis setting cannot be enabled unless the [Forward port 80 to 443](#Forward80To443) setting is set to true.","admin.service.userAccessTokensDescription":"When true, users can create [user access tokens](!https://about.mattermost.com/default-user-access-tokens) for integrations in **Account Settings > Security**. They can be used to authenticate against the API and give full access to the account.\n\n To manage who can create personal access tokens or to search users by token ID, go to the **User Management > Users** page.","admin.service.userAccessTokensTitle":"Enable Personal Access Tokens: ","admin.service.webhooksDescription":"When true, incoming webhooks will be allowed. To help combat phishing attacks, all posts from webhooks will be labelled by a BOT tag. See [documentation](!http://docs.mattermost.com/developer/webhooks-incoming.html) to learn more.","admin.service.webhooksTitle":"Enable Incoming Webhooks: ","admin.service.webSessionDays":"Session Length AD/LDAP and Email (days):","admin.service.webSessionDaysDesc":"The number of days from the last time a user entered their credentials to the expiry of the user's session. After changing this setting, the new session length will take effect after the next time the user enters their credentials.","admin.service.writeTimeout":"Write Timeout:","admin.service.writeTimeoutDescription":"If using HTTP (insecure), this is the maximum time allowed from the end of reading the request headers until the response is written. If using HTTPS, it is the total time from when the connection is accepted until the response is written.","admin.set_by_env":"This setting has been set through an environment variable. It cannot be changed through the System Console.","admin.sidebar.about":"About","admin.sidebar.announcement":"Announcement Banner","admin.sidebar.authentication":"Authentication","admin.sidebar.channels":"Channels","admin.sidebar.compliance":"Compliance","admin.sidebar.complianceExport":"Compliance Export (Beta)","admin.sidebar.complianceMonitoring":"Compliance Monitoring","admin.sidebar.cors":"CORS","admin.sidebar.customization":"Customization","admin.sidebar.customTermsOfService":"Custom Terms of Service (Beta)","admin.sidebar.database":"Database","admin.sidebar.dataRetentionPolicy":"Data Retention Policy","admin.sidebar.developer":"Developer","admin.sidebar.elasticsearch":"Elasticsearch","admin.sidebar.email":"Email","admin.sidebar.emoji":"Emoji","admin.sidebar.environment":"Environment","admin.sidebar.experimental":"Experimental","admin.sidebar.experimentalFeatures":"Features","admin.sidebar.fileSharingDownloads":"File Sharing and Downloads","admin.sidebar.fileStorage":"File Storage","admin.sidebar.filter":"Find settings","admin.sidebar.filter-clear":"Clear search","admin.sidebar.gif":"GIF (Beta)","admin.sidebar.gitlab":"GitLab","admin.sidebar.groups":"Groups","admin.sidebar.highAvailability":"High Availability","admin.sidebar.imageProxy":"Image Proxy","admin.sidebar.integrations":"Integrations","admin.sidebar.ldap":"AD/LDAP","admin.sidebar.license":"Edition and License","admin.sidebar.localization":"Localization","admin.sidebar.logging":"Logging","admin.sidebar.logs":"Server Logs","admin.sidebar.metrics":"Performance Monitoring","admin.sidebar.mfa":"MFA","admin.sidebar.notifications":"Notifications","admin.sidebar.oauth":"OAuth 2.0","admin.sidebar.password":"Password","admin.sidebar.permissions":"Permissions","admin.sidebar.plugins":"Plugins (Beta)","admin.sidebar.posts":"Posts","admin.sidebar.publicLinks":"Public Links","admin.sidebar.pushNotificationServer":"Push Notification Server","admin.sidebar.rateLimiting":"Rate Limiting","admin.sidebar.reporting":"Reporting","admin.sidebar.saml":"SAML 2.0","admin.sidebar.sessionLengths":"Session Lengths","admin.sidebar.signup":"Signup","admin.sidebar.site":"Site Configuration","admin.sidebar.siteStatistics":"Site Statistics","admin.sidebar.smtp":"SMTP","admin.sidebar.teams":"Teams","admin.sidebar.teamStatistics":"Team Statistics","admin.sidebar.userManagement":"User Management","admin.sidebar.users":"Users","admin.sidebar.usersAndTeams":"Users and Teams","admin.sidebar.webServer":"Web Server","admin.sidebarHeader.systemConsole":"System Console","admin.site.announcementBanner":"Announcement Banner","admin.site.customization":"Customization","admin.site.emoji":"Emoji","admin.site.fileSharingDownloads":"File Sharing and Downloads","admin.site.localization":"Localization","admin.site.posts":"Posts","admin.site.public_links":"Public Links","admin.site.usersAndTeams":"Users and Teams","admin.sql.connMaxLifetimeDescription":"Maximum lifetime (in milliseconds) for a connection to the database.","admin.sql.connMaxLifetimeExample":'E.g.: "3600000"',"admin.sql.connMaxLifetimeTitle":"Maximum Connection Lifetime:","admin.sql.dataSource":"Data Source:","admin.sql.dataSourceDescription":"Set the database source in the config.json file.","admin.sql.driverName":"Driver Name:","admin.sql.driverNameDescription":"Set the database driver in the config.json file.","admin.sql.maxConnectionsDescription":"Maximum number of idle connections held open to the database.","admin.sql.maxConnectionsExample":'E.g.: "10"',"admin.sql.maxConnectionsTitle":"Maximum Idle Connections:","admin.sql.maxOpenDescription":"Maximum number of open connections held open to the database.","admin.sql.maxOpenExample":'E.g.: "10"',"admin.sql.maxOpenTitle":"Maximum Open Connections:","admin.sql.noteDescription":"Changing properties in this section will require a server restart before taking effect.","admin.sql.queryTimeoutDescription":"The number of seconds to wait for a response from the database after opening a connection and sending the query. Errors that you see in the UI or in the logs as a result of a query timeout can vary depending on the type of query.","admin.sql.queryTimeoutExample":'E.g.: "30"',"admin.sql.queryTimeoutTitle":"Query Timeout:","admin.sql.traceDescription":"(Development Mode) When true, executing SQL statements are written to the log.","admin.sql.traceTitle":"SQL Statement Logging: ","admin.support.aboutDesc":"The URL for the About link on the Mattermost login and sign-up pages. If this field is empty, the About link is hidden from users.","admin.support.aboutTitle":"About Link:","admin.support.emailHelp":"Email address displayed on email notifications and during tutorial for end users to ask support questions.","admin.support.emailTitle":"Support Email:","admin.support.enableTermsOfServiceHelp":"When true, new users must accept the terms of service before accessing any Mattermost teams on desktop, web or mobile. Existing users must accept them after login or a page refresh.\n \nTo update terms of service link displayed in account creation and login pages, go to [Site Configuration > Customization](../site_config/customization).","admin.support.enableTermsOfServiceTitle":"Enable Custom Terms of Service:","admin.support.helpDesc":"The URL for the Help link on the Mattermost login page, sign-up pages, and Main Menu. If this field is empty, the Help link is hidden from users.","admin.support.helpTitle":"Help Link:","admin.support.privacyDesc":"The URL for the Privacy link on the login and sign-up pages. If this field is empty, the Privacy link is hidden from users.","admin.support.privacyTitle":"Privacy Policy Link:","admin.support.problemDesc":"The URL for the Report a Problem link in the Main Menu. If this field is empty, the link is removed from the Main Menu.","admin.support.problemTitle":"Report a Problem Link:","admin.support.termsDesc":'Link to the terms under which users may use your online service. By default, this includes the "Mattermost Conditions of Use (End Users)" explaining the terms under which Mattermost software is provided to end users. If you change the default link to add your own terms for using the service you provide, your new terms must include a link to the default terms so end users are aware of the Mattermost Conditions of Use (End User) for Mattermost software.',"admin.support.termsOfServiceReAcceptanceHelp":"The number of days before Terms of Service acceptance expires, and the terms must be re-accepted.","admin.support.termsOfServiceReAcceptanceTitle":"Re-Acceptance Period:","admin.support.termsOfServiceTextHelp":"Text that will appear in your custom Terms of Service. Supports Markdown-formatted text.","admin.support.termsOfServiceTextTitle":"Custom Terms of Service Text:","admin.support.termsOfServiceTitle":"Custom Terms of Service (Beta)","admin.support.termsTitle":"Terms of Service Link:","admin.system_users.allUsers":"All Users","admin.system_users.inactive":"Inactive","admin.system_users.noTeams":"No Teams","admin.system_users.system_admin":"System Admin","admin.system_users.title":"{siteName} Users","admin.systemUserDetail.title":"User Configuration","admin.team_channel_settings.cancel":"Cancel","admin.team_channel_settings.group_list.membersHeader":"Member Count","admin.team_channel_settings.group_list.nameHeader":"Name","admin.team_channel_settings.group_list.no-groups":"No groups specified yet","admin.team_channel_settings.group_list.no-synced-groups":"At least one group must be specified","admin.team_channel_settings.group_row.members":"{memberCount, number} {memberCount, plural, one {member} other {members}}","admin.team_channel_settings.group_row.remove":"Remove","admin.team_channel_settings.list.paginatorCount":"{startCount, number} - {endCount, number} of {total, number}","admin.team_channel_settings.need_domains":"Please specify emails domains.","admin.team_channel_settings.need_groups":"You must add at least one group to manage this team by sync group members.","admin.team_channel_settings.removeConfirmModal.message":"{amount, number} {amount, plural, one {user} other {users}} will be removed on the next AD/LDAP synchronization. They are not in groups linked to this {type}. Are you sure you wish to remove these users?","admin.team_channel_settings.removeConfirmModal.remove":"Save and Remove Users","admin.team_channel_settings.removeConfirmModal.title":"Save and remove {amount, number} {amount, plural, one {user} other {users}}?","admin.team_channel_settings.saving":"Saving Config...","admin.team_channel_settings.user_list.groupsHeader":"Groups","admin.team_channel_settings.user_list.nameHeader":"Name","admin.team_channel_settings.user_list.roleHeader":"Role","admin.team_channel_settings.users_will_be_removed":"{amount, number} {amount, plural, one {User} other {Users}} will be removed from this team. They are not in groups linked to this team.","admin.team_channel_settings.usersToBeRemovedModal.close":"Close","admin.team_channel_settings.usersToBeRemovedModal.message":"The members listed below are not in any of the groups currently linked to this team. Because this team is set to be managed by group sync they will all be removed once saved.","admin.team_channel_settings.usersToBeRemovedModal.title":"**{total, number} {total, plural, one {User} other {Users}}** To Be Removed","admin.team_channel_settings.view_removed_users":"View These Users","admin.team_settings.description":"Showing {startCount, number} - {endCount, number} of {total, number} teams. Manage team settings.","admin.team_settings.groupsPageTitle":"{siteName} Teams","admin.team_settings.team_detail.group_configuration":"Team Configuration","admin.team_settings.team_detail.groupsDescription":"Group members will be added to the team.","admin.team_settings.team_detail.groupsTitle":"Groups","admin.team_settings.team_detail.manageDescription":"Choose between inviting members manually or syncing members automatically from groups.","admin.team_settings.team_detail.manageTitle":"Team Management","admin.team_settings.team_detail.profileDescription":"Summary of the team, including team name and description.","admin.team_settings.team_detail.profileNoDescription":"No team description added.","admin.team_settings.team_detail.profileTitle":"Team Profile","admin.team_settings.team_detail.syncedGroupsDescription":"Add and remove team members based on their group membership.","admin.team_settings.team_detail.syncedGroupsTitle":"Synced Groups","admin.team_settings.team_detail.teamDescription":"**Team Description**:","admin.team_settings.team_detail.teamName":"**Team Name**:","admin.team_settings.team_details.add_group":"Add Group","admin.team_settings.team_details.anyoneCanJoin":"Anyone can join this team","admin.team_settings.team_details.anyoneCanJoinDescr":"This team can be discovered allowing anyone with an account to join this team.","admin.team_settings.team_details.csvDomains":"Comma Separated Email Domain List","admin.team_settings.team_details.specificDomains":"Only specific email domains can join this team","admin.team_settings.team_details.specificDomainsDescr":"Users can only join the team if their email matches one of the specified domains","admin.team_settings.team_details.syncGroupMembers":"Sync Group Members","admin.team_settings.team_details.syncGroupMembersDescr":"When enabled, adding and removing users from groups will add or remove them from this team. The only way of inviting members to this team is by adding the groups they belong to. [Learn More](!https://www.mattermost.com/pl/default-ldap-group-constrained-team-channel.html)","admin.team_settings.team_list.mappingHeader":"Management","admin.team_settings.team_list.nameHeader":"Name","admin.team_settings.team_list.no_teams_found":"No teams found","admin.team_settings.team_row.configure":"Edit","admin.team_settings.title":"Teams","admin.team.brandDesc":"Enable custom branding to show an image of your choice, uploaded below, and some help text, written below, on the login page.","admin.team.brandDescriptionHelp":'Description of service shown in login screens and UI. When not specified, "All team communication in one place, searchable and accessible anywhere" is displayed.',"admin.team.brandDescriptionTitle":"Site Description: ","admin.team.brandImageTitle":"Custom Brand Image:","admin.team.brandTextDescription":"Text that will appear below your custom brand image on your login screen. Supports Markdown-formatted text. Maximum 500 characters allowed.","admin.team.brandTextTitle":"Custom Brand Text:","admin.team.brandTitle":"Enable Custom Branding: ","admin.team.chooseImage":"Choose New Image","admin.team.editOthersPostsDesc":"When true, Team Administrators and System Administrators can edit other user's posts.  When false, only System Administrators can edit other user's posts.","admin.team.editOthersPostsTitle":"Allow Team Administrators to edit others posts:","admin.team.emailInvitationsDescription":"When true users can invite others to the system using email.","admin.team.emailInvitationsTitle":"Enable Email Invitations: ","admin.team.invalidateEmailInvitesDescription":"This will invalidate active email invitations that have not been accepted by the user.  By default email invitations expire after 48 hours.","admin.team.invalidateEmailInvitesFail":"Unable to invalidate pending email invites: {error}","admin.team.invalidateEmailInvitesSuccess":"Pending email invitations invalidated successfully","admin.team.invalidateEmailInvitesTitle":"Invalidate pending email invites","admin.team.maxChannelsDescription":"Maximum total number of channels per team, including both active and archived channels.","admin.team.maxChannelsExample":'E.g.: "100"',"admin.team.maxChannelsTitle":"Max Channels Per Team:","admin.team.maxNotificationsPerChannelDescription":"Maximum total number of users in a channel before users typing messages, @all, @here, and @channel no longer send notifications because of performance.","admin.team.maxNotificationsPerChannelExample":'E.g.: "1000"',"admin.team.maxNotificationsPerChannelTitle":"Max Notifications Per Channel:","admin.team.maxUsersDescription":"Maximum total number of users per team, including both active and inactive users.","admin.team.maxUsersExample":'E.g.: "25"',"admin.team.maxUsersTitle":"Max Users Per Team:","admin.team.noBrandImage":"No brand image uploaded","admin.team.openServerDescription":"When true, anyone can signup for a user account on this server without the need to be invited.","admin.team.openServerTitle":"Enable Open Server: ","admin.team.restrict_direct_message_any":"Any user on the Mattermost server","admin.team.restrict_direct_message_team":"Any member of the team","admin.team.restrictDescription":'User accounts can only be created from a specific domain (e.g. "mattermost.org") or list of comma-separated domains (e.g. "corp.mattermost.com, mattermost.org"). This setting only affects email login.',"admin.team.restrictDirectMessage":"Enable users to open Direct Message channels with:","admin.team.restrictDirectMessageDesc":"'Any user on the Mattermost server' enables users to open a Direct Message channel with any user on the server, even if they are not on any teams together. 'Any member of the team' limits the ability in the Direct Messages 'More' menu to only open Direct Message channels with users who are in the same team.\n \nNote: This setting only affects the UI, not permissions on the server.","admin.team.restrictExample":'E.g.: "corp.mattermost.com, mattermost.org"',"admin.team.restrictTitle":"Restrict account creation to specified email domains:","admin.team.showFullname":"Show first and last name","admin.team.showNickname":"Show nickname if one exists, otherwise show first and last name","admin.team.showUsername":"Show username (default)","admin.team.siteNameDescription":'Name of service shown in login screens and UI. When not specified, it defaults to "Mattermost".',"admin.team.siteNameExample":'E.g.: "Mattermost"',"admin.team.siteNameTitle":"Site Name:","admin.team.teamCreationDescription":"When false, only System Administrators can create teams.","admin.team.teamCreationTitle":"Enable Team Creation: ","admin.team.teammateNameDisplay":"Teammate Name Display:","admin.team.teammateNameDisplayDesc":"Set how to display users' names in posts and the Direct Messages list.","admin.team.upload":"Upload","admin.team.uploadDesc":"Customize your user experience by adding a custom image to your login screen. Recommended maximum image size is less than 2 MB.","admin.team.uploaded":"Uploaded!","admin.team.uploading":"Uploading...","admin.team.userCreationDescription":"When false, the ability to create accounts is disabled. The create account button displays error when pressed.","admin.team.userCreationTitle":"Enable Account Creation: ","admin.true":"true","admin.user_item.authServiceEmail":"**Sign-in Method:** Email","admin.user_item.authServiceNotEmail":"**Sign-in Method:** {service}","admin.user_item.emailTitle":"**Email:** {email}","admin.user_item.inactive":"Inactive","admin.user_item.makeActive":"Activate","admin.user_item.makeInactive":"Deactivate","admin.user_item.makeMember":"Make Member","admin.user_item.makeTeamAdmin":"Make Team Admin","admin.user_item.manageRoles":"Manage Roles","admin.user_item.manageTeams":"Manage Teams","admin.user_item.manageTokens":"Manage Tokens","admin.user_item.member":"Member","admin.user_item.menuAriaLabel":"User Actions Menu","admin.user_item.mfaNo":"**MFA**: No","admin.user_item.mfaYes":"**MFA**: Yes","admin.user_item.resetEmail":"Update Email","admin.user_item.resetMfa":"Remove MFA","admin.user_item.resetPwd":"Reset Password","admin.user_item.revokeSessions":"Revoke Sessions","admin.user_item.switchToEmail":"Switch to Email/Password","admin.user_item.sysAdmin":"System Admin","admin.user_item.teamAdmin":"Team Admin","admin.user_item.teamMember":"Team Member","admin.user_item.userAccessTokenPostAll":"(can create post:all personal access tokens)","admin.user_item.userAccessTokenPostAllPublic":"(can create post:channels personal access tokens)","admin.user_item.userAccessTokenYes":"(can create personal access tokens)","admin.userManagement.userDetail.authenticationMethod":"Authentication Method","admin.userManagement.userDetail.email":"Email","admin.userManagement.userDetail.role":"Role","admin.userManagement.userDetail.username":"Username","admin.viewArchivedChannelsHelpText":"(Experimental) When true, allows users to share permalinks and search for content of channels that have been archived. Users can only view the content in channels of which they were a member before the channel was archived.","admin.viewArchivedChannelsTitle":"Allow users to view archived channels:","admin.webserverModeDisabled":"Disabled","admin.webserverModeDisabledDescription":"The Mattermost server will not serve static files.","admin.webserverModeGzip":"gzip","admin.webserverModeGzipDescription":"The Mattermost server will serve static files compressed with gzip.","admin.webserverModeHelpText":"gzip compression applies to static content files. It is recommended to enable gzip to improve performance unless your environment has specific restrictions, such as a web proxy that distributes gzip files poorly.","admin.webserverModeTitle":"Webserver Mode:","admin.webserverModeUncompressed":"Uncompressed","admin.webserverModeUncompressedDescription":"The Mattermost server will serve static files uncompressed.","analytics.chart.loading":"Loading...","analytics.chart.meaningful":"Not enough data for a meaningful representation.","analytics.system.activeUsers":"Active Users With Posts","analytics.system.channelTypes":"Channel Types","analytics.system.dailyActiveUsers":"Daily Active Users","analytics.system.info":"Only data for the chosen team is calculated. Excludes posts made in direct message channels, which are not tied to a team.","analytics.system.infoAndSkippedIntensiveQueries":"Only data for the chosen team is calculated. Excludes posts made in direct message channels, which are not tied to a team. \n \n To maximize performance, some statistics are disabled. You can [re-enable them in config.json](!https://docs.mattermost.com/administration/statistics.html).","analytics.system.monthlyActiveUsers":"Monthly Active Users","analytics.system.postTypes":"Posts, Files and Hashtags","analytics.system.privateGroups":"Private Channels","analytics.system.publicChannels":"Public Channels","analytics.system.skippedIntensiveQueries":"To maximize performance, some statistics are disabled. You can [re-enable them in config.json](!https://docs.mattermost.com/administration/statistics.html).","analytics.system.textPosts":"Posts with Text-only","analytics.system.title":"System Statistics","analytics.system.totalBotPosts":"Total Posts from Bots","analytics.system.totalChannels":"Total Channels","analytics.system.totalCommands":"Total Commands","analytics.system.totalFilePosts":"Posts with Files","analytics.system.totalHashtagPosts":"Posts with Hashtags","analytics.system.totalIncomingWebhooks":"Incoming Webhooks","analytics.system.totalMasterDbConnections":"Master DB Conns","analytics.system.totalOutgoingWebhooks":"Outgoing Webhooks","analytics.system.totalPosts":"Total Posts","analytics.system.totalReadDbConnections":"Replica DB Conns","analytics.system.totalSessions":"Total Sessions","analytics.system.totalTeams":"Total Teams","analytics.system.totalUsers":"Total Active Users","analytics.system.totalWebsockets":"WebSocket Conns","analytics.team.activeUsers":"Active Users With Posts","analytics.team.newlyCreated":"Newly Created Users","analytics.team.noTeams":"There are no teams on this server for which to view statistics.","analytics.team.privateGroups":"Private Channels","analytics.team.publicChannels":"Public Channels","analytics.team.recentUsers":"Recent Active Users","analytics.team.title":"Team Statistics for {team}","analytics.team.totalPosts":"Total Posts","analytics.team.totalUsers":"Total Active Users","announcement_bar.error.email_verification_required":"Check your email inbox to verify the address.","announcement_bar.error.license_expired":"Enterprise license is expired and some features may be disabled. [Please renew](!{link}).","announcement_bar.error.license_expiring":"Enterprise license expires on {date, date, long}. [Please renew](!{link}).","announcement_bar.error.past_grace":"Enterprise license is expired and some features may be disabled. Please contact your System Administrator for details.","announcement_bar.error.preview_mode":"Preview Mode: Email notifications have not been configured","announcement_bar.error.site_url_gitlab.full":"Please configure your [Site URL](https://docs.mattermost.com/administration/config-settings.html#site-url) in the [System Console](/admin_console/environment/web_server) or in gitlab.rb if you're using GitLab Mattermost.","announcement_bar.error.site_url.full":"Please configure your [Site URL](https://docs.mattermost.com/administration/config-settings.html#site-url) in the [System Console](/admin_console/environment/web_server).","announcement_bar.notification.email_verified":"Email verified","api.channel.add_member.added":"{addedUsername} added to the channel by {username}.","api.channel.delete_channel.archived":"{username} archived the channel.","api.channel.join_channel.post_and_forget":"{username} joined the channel.","api.channel.leave.left":"{username} left the channel.","api.channel.post_convert_channel_to_private.updated_from":"{username} converted the channel from public to private","api.channel.post_update_channel_displayname_message_and_forget.updated_from":"{username} updated the channel display name from: {old} to: {new}","api.channel.post_update_channel_header_message_and_forget.removed":"{username} removed the channel header (was: {old})","api.channel.post_update_channel_header_message_and_forget.updated_from":"{username} updated the channel header from: {old} to: {new}","api.channel.post_update_channel_header_message_and_forget.updated_to":"{username} updated the channel header to: {new}","api.channel.remove_member.removed":"{removedUsername} was removed from the channel","api.team.add_member.added":"{addedUsername} added to the team by {username}","api.team.join_team.post_and_forget":"{username} joined the team.","api.team.leave.left":"{username} left the team.","api.team.remove_user_from_team.removed":"{removedUsername} was removed from the team.","app.channel.post_update_channel_purpose_message.removed":"{username} removed the channel purpose (was: {old})","app.channel.post_update_channel_purpose_message.updated_from":"{username} updated the channel purpose from: {old} to: {new}","app.channel.post_update_channel_purpose_message.updated_to":"{username} updated the channel purpose to: {new}",archivedChannelMessage:"You are viewing an **archived channel**. New messages cannot be posted.","atmos/camo":"atmos/camo","audit_table.accountActive":"Account activated","audit_table.accountInactive":"Account deactivated","audit_table.action":"Action","audit_table.attemptedAllowOAuthAccess":"Attempted to allow a new OAuth service access","audit_table.attemptedLicenseAdd":"Attempted to add new license","audit_table.attemptedLogin":"Attempted to login","audit_table.attemptedOAuthToken":"Attempted to get an OAuth access token","audit_table.attemptedPassword":"Attempted to change password","audit_table.attemptedRegisterApp":"Attempted to register a new OAuth Application with ID {id}","audit_table.attemptedReset":"Attempted to reset password","audit_table.attemptedWebhookCreate":"Attempted to create a webhook","audit_table.attemptedWebhookDelete":"Attempted to delete a webhook","audit_table.authenticated":"Successfully authenticated","audit_table.by":" by {username}","audit_table.byAdmin":" by an admin","audit_table.channelCreated":"Created the {channelName} channel","audit_table.channelDeleted":"Archived the channel with the URL {url}","audit_table.establishedDM":"Established a direct message channel with {username}","audit_table.failedExpiredLicenseAdd":"Failed to add a new license as it has either expired or not yet been started","audit_table.failedInvalidLicenseAdd":"Failed to add an invalid license","audit_table.failedLogin":"FAILED login attempt","audit_table.failedOAuthAccess":"Failed to allow a new OAuth service access - the redirect URI did not match the previously registered callback","audit_table.failedPassword":"Failed to change password - tried to update user password who was logged in through OAuth","audit_table.failedWebhookCreate":"Failed to create a webhook - bad channel permissions","audit_table.failedWebhookDelete":"Failed to delete a webhook - inappropriate conditions","audit_table.headerUpdated":"Updated the {channelName} channel header","audit_table.ip":"IP Address","audit_table.licenseRemoved":"Successfully removed a license","audit_table.loginAttempt":" (Login attempt)","audit_table.loginFailure":" (Login failure)","audit_table.logout":"Logged out of your account","audit_table.member":"member","audit_table.nameUpdated":"Updated the {channelName} channel name","audit_table.oauthTokenFailed":"Failed to get an OAuth access token - {token}","audit_table.revokedAll":"Revoked all current sessions for the team","audit_table.sentEmail":"Sent an email to {email} to reset your password","audit_table.session":"Session ID","audit_table.sessionRevoked":"The session with id {sessionId} was revoked","audit_table.successfullLicenseAdd":"Successfully added new license","audit_table.successfullLogin":"Successfully logged in","audit_table.successfullOAuthAccess":"Successfully gave a new OAuth service access","audit_table.successfullOAuthToken":"Successfully added a new OAuth service","audit_table.successfullPassword":"Successfully changed password","audit_table.successfullReset":"Successfully reset password","audit_table.successfullWebhookCreate":"Successfully created a webhook","audit_table.successfullWebhookDelete":"Successfully deleted a webhook","audit_table.timestamp":"Timestamp","audit_table.updatedRol":"Updated user role(s) to ","audit_table.updateGeneral":"Updated the general settings of your account","audit_table.updateGlobalNotifications":"Updated your global notification settings","audit_table.updatePicture":"Updated your profile picture","audit_table.userAdded":"Added {username} to the {channelName} channel","audit_table.userId":"User ID","audit_table.userRemoved":"Removed {username} to the {channelName} channel","audit_table.verified":"Successfully verified your email address","authorize.access":"Allow **{appName}** access?","authorize.allow":"Allow","authorize.app":"The app **{appName}** would like the ability to access and modify your basic information.","authorize.deny":"Deny","authorize.title":"**{appName}** would like to connect to your **Mattermost** user account","backstage_list.search":"Search","backstage_navbar.backToMattermost":"Back to {siteName}","backstage_sidebar.bots":"Bot Accounts","backstage_sidebar.emoji":"Custom Emoji","backstage_sidebar.integrations":"Integrations","backstage_sidebar.integrations.commands":"Slash Commands","backstage_sidebar.integrations.incoming_webhooks":"Incoming Webhooks","backstage_sidebar.integrations.oauthApps":"OAuth 2.0 Applications","backstage_sidebar.integrations.outgoing_webhooks":"Outgoing Webhooks","bot.add.description":"Description","bot.add.description.help":"(Optional) Let others know what this bot does.","bot.add.display_name.help":"(Optional) You can choose to display your bot's full name rather than its username.","bot.add.post_all":"post:all","bot.add.post_all.enabled":"Enabled","bot.add.post_all.help":"Bot will have access to post to all Mattermost channels including direct messages.","bot.add.post_channels":"post:channels","bot.add.post_channels.enabled":"Enabled","bot.add.post_channels.help":"Bot will have access to post to all Mattermost public channels.","bot.add.role":"Role","bot.add.role.help":"Choose what role the bot should have.","bot.add.username.help":"You can use lowercase letters, numbers, periods, dashes, and underscores.","bot.create_failed":"Failed to create bot","bot.create_token.close":"Close","bot.edit_failed":"Failed to edit bot","bot.manage.create_token":"Create New Token","bot.manage.disable":"Disable","bot.manage.enable":"Enable","bot.remove_profile_picture":"Remove Bot Icon","bot.token.default.description":"Default Token","bot.token.error.description":"Please enter a description.","bots.add.displayName":"Display Name","bots.add.icon":"Bot Icon","bots.add.username":"Username","bots.disabled":"Disabled","bots.image.upload":"Upload an image","bots.is_bot":"BOT","bots.manage.add":"Add Bot Account","bots.manage.add.cancel":"Cancel","bots.manage.add.create":"Create Bot Account","bots.manage.add.creating":"Creating...","bots.manage.add.invalid_username":"Usernames have to begin with a lowercase letter and be 3-22 characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.","bots.manage.bot_accounts":"Bot Accounts","bots.manage.created.text":"Your bot account **{botname}** has been created successfully. Please use the following access token to connect to the bot (see [documentation](https://mattermost.com/pl/default-bot-accounts) for further details).","bots.manage.description":"Use bot accounts to integrate with Mattermost through plugins or the API","bots.manage.edit":"Edit","bots.manage.edit.editing":"Updating...","bots.manage.edit.title":"Update","bots.manage.empty":"No bot accounts found","bots.manage.emptySearch":"No bot accounts match **{searchTerm}**","bots.manage.header":"Bot Accounts","bots.manage.help":"Use {botAccounts} to integrate with Mattermost through plugins or the API. Bot accounts are available to everyone on your server.","bots.manage.search":"Search Bot Accounts","bots.managed_by":"Managed by ","bots.token.confirm":"Delete","bots.token.confirm_text":"Are you sure you want to delete the token?","bots.token.delete":"Delete Token","center_panel.archived.closeChannel":"Close Channel","center_panel.permalink.archivedChannel":"You are viewing an **archived channel**. ","center_panel.recent":"Click here to jump to recent messages. ","center_panel.recent.icon":"Jump to recent messages Icon","change_url.close":"Close","change_url.endWithLetter":"URL must end with a letter or number.","change_url.invalidUrl":"Invalid URL","change_url.longer":"URL must be two or more characters.","change_url.noUnderscore":"URL can not contain two underscores in a row.","change_url.startWithLetter":"URL must start with a letter or number.","change_url.urlLabel":"Channel URL","channel_flow.alreadyExist":"A channel with that URL already exists","channel_flow.changeUrlDescription":"Some characters are not allowed in URLs and may be removed.","channel_flow.changeUrlTitle":"Change Channel URL","channel_flow.create":"Create Channel","channel_flow.handleTooShort":"Channel URL must be 2 or more lowercase alphanumeric characters","channel_flow.invalidName":"Invalid Channel Name","channel_flow.set_url_title":"Set Channel URL","channel_header.addChannelHeader":"Add a channel description","channel_header.channelMembers":"Members","channel_header.convert":"Convert to Private Channel","channel_header.delete":"Archive Channel","channel_header.directchannel.you":"{displayname} (you) ","channel_header.flagged":"Flagged Posts","channel_header.groupConstrained":"Members managed by linked groups.","channel_header.leave":"Leave Channel","channel_header.manageMembers":"Manage Members","channel_header.menuAriaLabel":"Channel Menu","channel_header.mute":"Mute Channel","channel_header.pinnedPosts":"Pinned Posts","channel_header.recentMentions":"Recent Mentions","channel_header.rename":"Rename Channel","channel_header.search":"Search","channel_header.setHeader":"Edit Channel Header","channel_header.setPurpose":"Edit Channel Purpose","channel_header.unmute":"Unmute Channel","channel_header.viewMembers":"View Members","channel_info.about":"About","channel_info.header":"Header:","channel_info.id":"ID: ","channel_info.notFound":"No Channel Found","channel_info.purpose":"Purpose:","channel_info.url":"URL:","channel_invite.addNewMembers":"Add New Members to ","channel_loader.posted":"Posted","channel_loader.postedImage":" posted an image","channel_loader.socketError":"Please check connection, Mattermost unreachable. If issue persists, ask administrator to [check WebSocket port](!https://about.mattermost.com/default-websocket-port-help).","channel_loader.someone":"Someone","channel_loader.something":" did something new","channel_loader.unknown_error":"We received an unexpected status code from the server.","channel_loader.uploadedFile":" uploaded a file","channel_loader.uploadedImage":" uploaded an image","channel_members_dropdown.channel_admin":"Channel Admin","channel_members_dropdown.channel_member":"Channel Member","channel_members_dropdown.make_channel_admin":"Make Channel Admin","channel_members_dropdown.make_channel_member":"Make Channel Member","channel_members_dropdown.menuAriaLabel":"Channel member role change","channel_members_dropdown.remove_from_channel":"Remove From Channel","channel_members_dropdown.remove_member":"Remove Member","channel_members_modal.addNew":" Add New Members","channel_members_modal.members":" Members","channel_modal.cancel":"Cancel","channel_modal.createNew":"Create New Channel","channel_modal.descriptionHelp":"Describe how this channel should be used.","channel_modal.displayNameError":"Channel name must be 2 or more characters","channel_modal.edit":"Edit","channel_modal.header":"Header","channel_modal.headerEx":'E.g.: "[Link Title](http://example.com)"',"channel_modal.headerHelp":"Set text that will appear in the header of the channel beside the channel name. For example, include frequently used links by typing [Link Title](http://example.com).","channel_modal.modalTitle":"New Channel","channel_modal.name":"Name","channel_modal.nameEx":'E.g.: "Bugs", "Marketing", ""',"channel_modal.optional":"(optional)","channel_modal.privateHint":" - Only invited members can join this channel.","channel_modal.privateName":"Private","channel_modal.publicHint":" - Anyone can join this channel.","channel_modal.publicName":"Public","channel_modal.purpose":"Purpose","channel_modal.purposeEx":'E.g.: "A channel to file bugs and improvements"',"channel_modal.type":"Type","channel_notifications.allActivity":"For all activity","channel_notifications.globalDefault":"Global default","channel_notifications.ignoreChannelMentions":"Ignore mentions for @channel, @here and @all","channel_notifications.ignoreChannelMentions.help":"When enabled, @channel, @here and @all will not trigger mentions or mention notifications in this channel.","channel_notifications.ignoreChannelMentions.off.title":"Off","channel_notifications.ignoreChannelMentions.on.title":"On","channel_notifications.levels.all":"All","channel_notifications.levels.default":"Default","channel_notifications.levels.mention":"Mention","channel_notifications.levels.none":"None","channel_notifications.muteChannel.help":"Muting turns off desktop, email and push notifications for this channel. The channel will not be marked as unread unless you're mentioned.","channel_notifications.muteChannel.off.title":"Off","channel_notifications.muteChannel.on.title":"On","channel_notifications.muteChannel.on.title.collapse":"Mute is enabled. Desktop, email and push notifications will not be sent for this channel.","channel_notifications.muteChannel.settings":"Mute channel","channel_notifications.never":"Never","channel_notifications.onlyMentions":"Only for mentions","channel_notifications.override":'Selecting an option other than "Default" will override the global notification settings. Desktop notifications are available on Firefox, Safari, and Chrome.',"channel_notifications.overridePush":'Selecting an option other than "Global default" will override the global notification settings for mobile push notifications in account settings. Push notifications must be enabled by the System Admin.',"channel_notifications.preferences":"Notification Preferences for ","channel_notifications.push":"Send mobile push notifications","channel_notifications.sendDesktop":"Send desktop notifications","channel_select.placeholder":"--- Select a channel ---","channel_switch_modal.deactivated":"Deactivated","channel_switch_modal.title":"Switch Channels","channel_toggle_button.private":"Private","channel_toggle_button.public":"Public","channelHeader.addToFavorites":"Add to Favorites","channelHeader.removeFromFavorites":"Remove from Favorites","channelHeader.unmute":"Unmute","claim.email_to_ldap.enterLdapPwd":"Enter the ID and password for your AD/LDAP account","claim.email_to_ldap.enterPwd":"Enter the password for your {site} email account","claim.email_to_ldap.ldapId":"AD/LDAP ID","claim.email_to_ldap.ldapIdError":"Please enter your AD/LDAP ID.","claim.email_to_ldap.ldapPasswordError":"Please enter your AD/LDAP password.","claim.email_to_ldap.ldapPwd":"AD/LDAP Password","claim.email_to_ldap.pwd":"Password","claim.email_to_ldap.pwdError":"Please enter your password.","claim.email_to_ldap.ssoNote":"You must already have a valid AD/LDAP account","claim.email_to_ldap.ssoType":"Upon claiming your account, you will only be able to login with AD/LDAP","claim.email_to_ldap.switchTo":"Switch account to AD/LDAP","claim.email_to_ldap.title":"Switch Email/Password Account to AD/LDAP","claim.email_to_oauth.enterPwd":"Enter the password for your {site} account","claim.email_to_oauth.pwd":"Password","claim.email_to_oauth.pwdError":"Please enter your password.","claim.email_to_oauth.ssoNote":"You must already have a valid {type} account","claim.email_to_oauth.ssoType":"Upon claiming your account, you will only be able to login with {type} SSO","claim.email_to_oauth.switchTo":"Switch account to {uiType}","claim.email_to_oauth.title":"Switch Email/Password Account to {uiType}","claim.ldap_to_email.confirm":"Confirm Password","claim.ldap_to_email.email":"After switching your authentication method, you will use {email} to login. Your AD/LDAP credentials will no longer allow access to Mattermost.","claim.ldap_to_email.enterLdapPwd":"{ldapPassword}:","claim.ldap_to_email.enterPwd":"New email login password:","claim.ldap_to_email.ldapPasswordError":"Please enter your AD/LDAP password.","claim.ldap_to_email.ldapPwd":"AD/LDAP Password","claim.ldap_to_email.pwd":"Password","claim.ldap_to_email.pwdError":"Please enter your password.","claim.ldap_to_email.pwdNotMatch":"Passwords do not match.","claim.ldap_to_email.switchTo":"Switch account to email/password","claim.ldap_to_email.title":"Switch AD/LDAP Account to Email/Password","claim.oauth_to_email.confirm":"Confirm Password","claim.oauth_to_email.description":"Upon changing your account type, you will only be able to login with your email and password.","claim.oauth_to_email.enterNewPwd":"Enter a new password for your {site} email account","claim.oauth_to_email.enterPwd":"Please enter a password.","claim.oauth_to_email.newPwd":"New Password","claim.oauth_to_email.pwdNotMatch":"Passwords do not match.","claim.oauth_to_email.switchTo":"Switch {type} to email and password","claim.oauth_to_email.title":"Switch {type} Account to Email","combined_system_message.added_to_channel.many_expanded":"{users} and {lastUser} were **added to the channel** by {actor}.","combined_system_message.added_to_channel.one":"{firstUser} **added to the channel** by {actor}.","combined_system_message.added_to_channel.one_you":"You were **added to the channel** by {actor}.","combined_system_message.added_to_channel.two":"{firstUser} and {secondUser} **added to the channel** by {actor}.","combined_system_message.added_to_team.many_expanded":"{users} and {lastUser} were **added to the team** by {actor}.","combined_system_message.added_to_team.one":"{firstUser} **added to the team** by {actor}.","combined_system_message.added_to_team.one_you":"You were **added to the team** by {actor}.","combined_system_message.added_to_team.two":"{firstUser} and {secondUser} **added to the team** by {actor}.","combined_system_message.joined_channel.many_expanded":"{users} and {lastUser} **joined the channel**.","combined_system_message.joined_channel.one":"{firstUser} **joined the channel**.","combined_system_message.joined_channel.one_you":"You **joined the channel**.","combined_system_message.joined_channel.two":"{firstUser} and {secondUser} **joined the channel**.","combined_system_message.joined_team.many_expanded":"{users} and {lastUser} **joined the team**.","combined_system_message.joined_team.one":"{firstUser} **joined the team**.","combined_system_message.joined_team.one_you":"You **joined the team**.","combined_system_message.joined_team.two":"{firstUser} and {secondUser} **joined the team**.","combined_system_message.left_channel.many_expanded":"{users} and {lastUser} **left the channel**.","combined_system_message.left_channel.one":"{firstUser} **left the channel**.","combined_system_message.left_channel.one_you":"You **left the channel**.","combined_system_message.left_channel.two":"{firstUser} and {secondUser} **left the channel**.","combined_system_message.left_team.many_expanded":"{users} and {lastUser} **left the team**.","combined_system_message.left_team.one":"{firstUser} **left the team**.","combined_system_message.left_team.one_you":"You **left the team**.","combined_system_message.left_team.two":"{firstUser} and {secondUser} **left the team**.","combined_system_message.removed_from_channel.many_expanded":"{users} and {lastUser} were **removed from the channel**.","combined_system_message.removed_from_channel.one":"{firstUser} was **removed from the channel**.","combined_system_message.removed_from_channel.one_you":"You were **removed from the channel**.","combined_system_message.removed_from_channel.two":"{firstUser} and {secondUser} were **removed from the channel**.","combined_system_message.removed_from_team.many_expanded":"{users} and {lastUser} were **removed from the team**.","combined_system_message.removed_from_team.one":"{firstUser} was **removed from the team**.","combined_system_message.removed_from_team.one_you":"You were **removed from the team**.","combined_system_message.removed_from_team.two":"{firstUser} and {secondUser} were **removed from the team**.","combined_system_message.you":"You","confirm_modal.cancel":"Cancel","convert_channel.cancel":"No, cancel","convert_channel.confirm":"Yes, convert to private channel","convert_channel.question1":"When you convert **{display_name}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.","convert_channel.question2":"The change is permanent and cannot be undone.","convert_channel.question3":"Are you sure you want to convert **{display_name}** to a private channel?","convert_channel.title":"Convert {display_name} to a private channel?","copy_url_context_menu.getChannelLink":"Copy Link","create_comment.addComment":"Add a comment...","create_comment.comment":"Add Comment","create_comment.commentTitle":"Comment","create_comment.file":"File uploading","create_comment.files":"Files uploading","create_post.comment":"Comment","create_post.deactivated":"You are viewing an archived channel with a deactivated user.","create_post.error_message":"Your message is too long. Character count: {length}/{limit}","create_post.fileProcessing":"Processing...","create_post.icon":"Send Post Icon","create_post.post":"Post","create_post.read_only":"This channel is read-only. Only members with permission can post here.","create_post.send_message":"Send a message","create_post.shortcutsNotSupported":"Keyboard shortcuts are not supported on your device.","create_post.tutorialTip.title":"Sending Messages","create_post.tutorialTip1":"Type here to write a message and press **Enter** to post it.","create_post.tutorialTip2":"Click the **Attachment** button to upload an image or a file.","create_post.write":"Write to {channelDisplayName}","create_team.agreement":"By proceeding to create your account and use {siteName}, you agree to our [Terms of Service]({TermsOfServiceLink}) and [Privacy Policy]({PrivacyPolicyLink}). If you do not agree, you cannot use {siteName}.","create_team.display_name.charLength":"Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description later.","create_team.display_name.nameHelp":"Name your team in any language. Your team name shows in menus and headings.","create_team.display_name.next":"Next","create_team.display_name.required":"This field is required","create_team.display_name.teamName":"Team Name","create_team.team_url.back":"Back to previous step","create_team.team_url.charLength":"Name must be {min} or more characters up to a maximum of {max}","create_team.team_url.creatingTeam":"Creating team...","create_team.team_url.finish":"Finish","create_team.team_url.hint1":"Short and memorable is best","create_team.team_url.hint2":"Use lowercase letters, numbers and dashes","create_team.team_url.hint3":"Must start with a letter and can't end in a dash","create_team.team_url.regex":"Use only lower case letters, numbers and dashes. Must start with a letter and can't end in a dash.","create_team.team_url.required":"This field is required","create_team.team_url.taken":"This URL [starts with a reserved word](!https://docs.mattermost.com/help/getting-started/creating-teams.html#team-url) or is unavailable. Please try another.","create_team.team_url.teamUrl":"Team URL","create_team.team_url.unavailable":"This URL is taken or unavailable. Please try another.","create_team.team_url.webAddress":"Choose the web address of your new team:","custom_emoji.header":"Custom Emoji","deactivate_member_modal.deactivate":"Deactivate","deactivate_member_modal.desc":"This action deactivates {username}. They will be logged out and not have access to any teams or channels on this system.\n","deactivate_member_modal.desc.confirm":" Are you sure you want to deactivate {username}?","deactivate_member_modal.desc.for_users_with_bot_accounts":"This action deactivates {username}.\n \n * They will be logged out and not have access to any teams or channels on this system.\n * Bot accounts they manage will be disabled along with their integrations. To enable them again, go to Integrations > Bot Accounts. [Learn more about bot accounts](!https://mattermost.com/pl/default-bot-accounts).\n \n \n","deactivate_member_modal.sso_warning":"You must also deactivate this user in the SSO provider or they will be reactivated on next login or sync.","deactivate_member_modal.title":"Deactivate {username}","default_channel.purpose":"Post messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team.","delete_channel.cancel":"Cancel","delete_channel.confirm":"Confirm ARCHIVE Channel","delete_channel.del":"Archive","delete_channel.question":"This will archive the channel from the team and make its contents inaccessible for all users. \n \nAre you sure you wish to archive the **{display_name}** channel?","delete_channel.viewArchived.question":"This will archive the channel from the team. Channel contents will still be accessible by channel members.\n \nAre you sure you wish to archive the **{display_name}** channel?","delete_post.cancel":"Cancel","delete_post.comment":"Comment","delete_post.confirm":"Confirm {term} Delete","delete_post.del":"Delete","delete_post.post":"Post","delete_post.question":"Are you sure you want to delete this {term}?","delete_post.warning":"This post has {count, number} {count, plural, one {comment} other {comments}} on it.","device_icons.android":"Android Icon","device_icons.apple":"Apple Icon","device_icons.linux":"Linux Icon","device_icons.windows":"Windows Icon","discard_changes_modal.leave":"Yes, Discard","discard_changes_modal.message":"You have unsaved changes, are you sure you want to discard them?","discard_changes_modal.title":"Discard Changes?","edit_channel_header_modal.cancel":"Cancel","edit_channel_header_modal.description":"Edit the text appearing next to the channel name in the channel header.","edit_channel_header_modal.error":"This channel header is too long, please enter a shorter one","edit_channel_header_modal.save":"Save","edit_channel_header_modal.title":"Edit Header for {channel}","edit_channel_header_modal.title_dm":"Edit Header","edit_channel_header.editHeader":"Edit the Channel Header...","edit_channel_header.previewHeader":"Edit header","edit_channel_private_purpose_modal.body":'This text appears in the "View Info" modal of the private channel.',"edit_channel_purpose_modal.body":'Describe how this channel should be used. This text appears in the channel list in the "More..." menu and helps others decide whether to join.',"edit_channel_purpose_modal.cancel":"Cancel","edit_channel_purpose_modal.error":"This channel purpose is too long, please enter a shorter one","edit_channel_purpose_modal.save":"Save","edit_channel_purpose_modal.title1":"Edit Purpose","edit_channel_purpose_modal.title2":"Edit Purpose for ","edit_command.update":"Update","edit_command.updating":"Updating...","edit_post.cancel":"Cancel","edit_post.edit":"Edit {title}","edit_post.editPost":"Edit the post...","edit_post.save":"Save","edit_post.time_limit_button.for_n_seconds":"For {n} seconds","edit_post.time_limit_button.no_limit":"Anytime","edit_post.time_limit_modal.description":'Setting a time limit applies to all users who have the "Edit Post" permissions in any permission scheme.',"edit_post.time_limit_modal.invalid_time_limit":"Invalid time limit","edit_post.time_limit_modal.option_label_anytime":"Anytime","edit_post.time_limit_modal.option_label_time_limit.postinput":"seconds after posting","edit_post.time_limit_modal.option_label_time_limit.preinput":"Can edit for","edit_post.time_limit_modal.save_button":"Save Edit Time","edit_post.time_limit_modal.subscript":"Set the length of time users have to edit their messages after posting.","edit_post.time_limit_modal.title":"Configure Global Edit Post Time Limit","email_verify.almost":"{siteName}: You are almost done","email_verify.failed":" Failed to send verification email.","email_verify.notVerifiedBody":"Please verify your email address. Check your inbox for an email.","email_verify.resend":"Resend Email","email_verify.sent":" Verification email sent.","emoji_list.actions":"Actions","emoji_list.add":"Add Custom Emoji","emoji_list.creator":"Creator","emoji_list.delete":"Delete","emoji_list.delete.confirm.button":"Delete","emoji_list.delete.confirm.msg":"This action permanently deletes the custom emoji. Are you sure you want to delete it?","emoji_list.delete.confirm.title":"Delete Custom Emoji","emoji_list.empty":"No Custom Emoji Found","emoji_list.header":"Custom Emoji","emoji_list.help":"Custom emoji are available to everyone on your server. Type ':' followed by two characters in a message box to bring up the emoji selection menu.","emoji_list.help2":"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: '# :smile:'.","emoji_list.image":"Image","emoji_list.name":"Name","emoji_list.search":"Search Custom Emoji","emoji_picker_item.emoji_aria_label":"{emojiName} emoji","emoji_picker.activity":"Activity","emoji_picker.close":"Close","emoji_picker.custom":"Custom","emoji_picker.emojiPicker":"Emoji Picker","emoji_picker.flags":"Flags","emoji_picker.foods":"Foods","emoji_picker.header":"Emoji Picker","emoji_picker.nature":"Nature","emoji_picker.objects":"Objects","emoji_picker.people":"People","emoji_picker.places":"Places","emoji_picker.recent":"Recently Used","emoji_picker.search":"Search Emoji","emoji_picker.search_emoji":"Search for an emoji","emoji_picker.searchResults":"Search Results","emoji_picker.symbols":"Symbols","error.channel_not_found.message":"The channel you're requesting is private or does not exist. Please contact an Administrator to be added to the channel.","error.channel_not_found.title":"Channel Not Found","error.channelNotFound.link":"Back to {defaultChannelName}","error.generic.link":"Back to {siteName}","error.generic.link_login":"Back to login page","error.generic.message":"An error has occurred.","error.generic.title":"Error","error.local_storage.help1":"Enable cookies","error.local_storage.help2":"Turn off private browsing","error.local_storage.help3":"Use a supported browser (IE 11, Chrome 61+, Firefox 60+, Safari 12+, Edge 42+)","error.local_storage.message":"Mattermost was unable to load because a setting in your browser prevents the use of its local storage features. To allow Mattermost to load, try the following actions:","error.local_storage.title":"Cannot Load Mattermost","error.not_found.message":"The page you were trying to reach does not exist","error.not_found.title":"Page not found","error.oauth_access_denied":"You must authorize Mattermost to log in with {service}.","error.oauth_access_denied.title":"Authorization Error","error.oauth_missing_code":"The service provider {service} did not provide an authorization code in the redirect URL.","error.oauth_missing_code.forum":"If you reviewed the above and are still having trouble with configuration, you may post in our {link} where we'll be happy to help with issues during setup.","error.oauth_missing_code.forum.link":"Troubleshooting forum","error.oauth_missing_code.gitlab":"For {link} please make sure you followed the setup instructions.","error.oauth_missing_code.gitlab.link":"GitLab","error.oauth_missing_code.google":"For {link} make sure your administrator enabled the Google+ API.","error.oauth_missing_code.google.link":"Google Apps","error.oauth_missing_code.office365":"For {link} make sure the administrator of your Microsoft organization has enabled the Mattermost app.","error.oauth_missing_code.office365.link":"Office 365","error.oauth_missing_code.title":"Mattermost needs your help","error.team_not_found.message":"The team you're requesting is private or does not exist. Please contact your Administrator for an invitation.","error.team_not_found.title":"Team Not Found","file_attachment.thumbnail":"file thumbnail","file_info_preview.size":"Size ","file_info_preview.type":"File type ","file_upload.disabled":"File attachments are disabled.","file_upload.drag_folder":"Folders cannot be uploaded. Please drag all files separately.","file_upload.fileAbove":"File above {max}MB cannot be uploaded: {filename}","file_upload.filesAbove":"Files above {max}MB cannot be uploaded: {filenames}","file_upload.generic_error":"There was a problem uploading your files.","file_upload.limited":"Uploads limited to {count, number} files maximum. Please use additional posts for more files.","file_upload.menuAriaLabel":"Upload type selector","file_upload.pasted":"Image Pasted at ","file_upload.upload_files":"Upload files","file_upload.zeroBytesFile":"You are uploading an empty file: {filename}","file_upload.zeroBytesFiles":"You are uploading empty files: {filenames}","filtered_channels_list.search":"Search channels","filtered_user_list.countTotal":"{count, number} {count, plural, one {member} other {members}} of {total, number} total","filtered_user_list.countTotalPage":"{startCount, number} - {endCount, number} {count, plural, one {member} other {members}} of {total, number} total","filtered_user_list.next":"Next","filtered_user_list.prev":"Previous","filtered_user_list.search":"Search users","filtered_user_list.team":"Team:","filtered_user_list.userStatus":"User Status:","flag_post.flag":"Flag for follow up","flag_post.unflag":"Unflag","general_button.close":"Close","general_tab.allowedDomains":"Allow only users with a specific email domain to join this team","general_tab.allowedDomainsEdit":"Click 'Edit' to add an email domain whitelist.","general_tab.AllowedDomainsExample":"corp.mattermost.com, mattermost.org","general_tab.AllowedDomainsInfo":'Users can only join the team if their email matches a specific domain (e.g. "mattermost.org") or list of comma-separated domains (e.g. "corp.mattermost.com, mattermost.org").',"general_tab.chooseDescription":"Please choose a new description for your team","general_tab.codeDesc":"Click 'Edit' to regenerate Invite Code.","general_tab.codeLongDesc":"The Invite Code is used as part of the URL in the team invitation link created by {getTeamInviteLink} in the main menu. Regenerating creates a new team invitation link and invalidates the previous link.","general_tab.codeTitle":"Invite Code","general_tab.emptyDescription":"Click 'Edit' to add a team description.","general_tab.getTeamInviteLink":"Get Team Invite Link","general_tab.no":"No","general_tab.openInviteDesc":"When allowed, a link to this team will be included on the landing page allowing anyone with an account to join this team.","general_tab.openInviteTitle":"Allow any user with an account on this server to join this team","general_tab.regenerate":"Regenerate","general_tab.required":"This field is required","general_tab.teamDescription":"Team Description","general_tab.teamDescriptionInfo":"Team description provides additional information to help users select the right team. Maximum of 50 characters.","general_tab.teamIcon":"Team Icon","general_tab.teamIconEditHint":"Click 'Edit' to upload an image.","general_tab.teamIconEditHintMobile":"Click to upload an image","general_tab.teamIconError":"An error occurred while selecting the image.","general_tab.teamIconInvalidFileType":"Only BMP, JPG or PNG images may be used for team icons","general_tab.teamIconLastUpdated":"Image last updated {date}","general_tab.teamIconTooLarge":"Unable to upload team icon. File is too large.","general_tab.teamName":"Team Name","general_tab.teamNameInfo":"Set the name of the team as it appears on your sign-in screen and at the top of the left-hand sidebar.","general_tab.teamNameRestrictions":"Team Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description.","general_tab.title":"General Settings","general_tab.yes":"Yes","generic_icons.add":"Add Icon","generic_icons.add-mail":"Add Mail Icon","generic_icons.archive":"Archive Icon","generic_icons.arrow.down":"Down Arrow Icon","generic_icons.attach":"Attachment Icon","generic_icons.back":"Back Icon","generic_icons.bot":"Bot Icon","generic_icons.breadcrumb":"Breadcrumb Icon","generic_icons.channel.draft":"Channel Draft Icon","generic_icons.channel.private":"Private Channel Icon","generic_icons.channel.public":"Public Channel Icon","generic_icons.close":"Close Icon","generic_icons.collapse":"Collapse Icon","generic_icons.download":"Download Icon","generic_icons.dropdown":"Dropdown Icon","generic_icons.edit":"Edit Icon","generic_icons.expand":"Expand Icon","generic_icons.fail":"Faliure Icon","generic_icons.flag":"Flag Icon","generic_icons.flagged":"Flagged Icon","generic_icons.info":"Info Icon","generic_icons.loading":"Loading Icon","generic_icons.logout":"Logout Icon","generic_icons.mail":"Mail Icon","generic_icons.mattermost":"Mattermost Logo","generic_icons.member":"Member Icon","generic_icons.mention":"Mention Icon","generic_icons.menu":"Menu Icon","generic_icons.message":"Message Icon","generic_icons.muted":"Muted Icon","generic_icons.next":"Next Icon","generic_icons.pin":"Pin Icon","generic_icons.previous":"Previous Icon","generic_icons.reload":"Reload Icon","generic_icons.remove":"Remove Icon","generic_icons.reply":"Reply Icon","generic_icons.search":"Search Icon","generic_icons.select":"Select Icon","generic_icons.settings":"Settings Icon","generic_icons.success":"Success Icon","generic_icons.upload":"Upload Icon","generic_icons.warning":"Warning Icon","get_app.alreadyHaveIt":"Already have it?","get_app.androidAppName":"Mattermost for Android","get_app.androidHeader":"Mattermost works best if you switch to our Android app","get_app.continue":"continue","get_app.continueWithBrowser":"Or {link}","get_app.continueWithBrowserLink":"continue with browser","get_app.iosHeader":"Mattermost works best if you switch to our iPhone app","get_app.mattermostInc":"Mattermost, Inc","get_app.openMattermost":"Open Mattermost","get_link.clipboard":" Link copied","get_link.close":"Close","get_link.copy":"Copy Link","get_post_link_modal.help":"The link below allows authorized users to see your post.","get_post_link_modal.title":"Copy Permalink","get_public_link_modal.help":"The link below allows anyone to see this file without being registered on this server.","get_public_link_modal.title":"Copy Public Link","get_team_invite_link_modal.help":"Send teammates the link below for them to sign-up to this team site. The Team Invite Link can be shared with multiple teammates as it does not change unless it's regenerated in Team Settings by a Team Admin.","get_team_invite_link_modal.helpDisabled":"User creation has been disabled for your team. Please ask your Team Administrator for details.","get_team_invite_link_modal.title":"Team Invite Link","gif_picker.gfycat":"Search Gfycat","group_list_modal.addGroupButton":"Add Groups","group_list_modal.removeGroupButton":"Remove Group",groups:"{team} Groups","help.attaching.downloading.description":"Download an attached file by clicking the download icon next to the file thumbnail or by opening the file previewer and clicking **Download**.","help.attaching.downloading.title":"Downloading Files","help.attaching.dragdrop.description":"Upload a file or selection of files by dragging the files from your computer into the right-hand sidebar or center pane. Dragging and dropping attaches the files to the message input box, then you can optionally type a message and press **ENTER** to post.","help.attaching.dragdrop.title":"Drag and Drop","help.attaching.icon.description":"Alternatively, upload files by clicking the grey paperclip icon inside the message input box. This opens up your system file viewer where you can navigate to the desired files and then click **Open** to upload the files to the message input box. Optionally type a message and then press **ENTER** to post.","help.attaching.icon.title":"Attachment Icon","help.attaching.limitations.description":"Mattermost supports a maximum of five attached files per post, each with a maximum file size of 50Mb.","help.attaching.limitations.title":"File Size Limitations","help.attaching.methods.description":"Attach a file by drag and drop or by clicking the attachment icon in the message input box.","help.attaching.methods.title":"Attachment Methods","help.attaching.notSupported":"Document preview (Word, Excel, PPT) is not yet supported.","help.attaching.pasting.description":"On Chrome and Edge browsers, it is also possible to upload files by pasting them from the clipboard. This is not yet supported on other browsers.","help.attaching.pasting.title":"Pasting Images","help.attaching.previewer.description":"Mattermost has a built in file previewer that is used to view media, download files and share public links. Click the thumbnail of an attached file to open it in the file previewer.","help.attaching.previewer.title":"File Previewer","help.attaching.publicLinks.description":"Public links allow you to share file attachments with people outside your Mattermost team. Open the file previewer by clicking on the thumbnail of an attachment, then click **Get Public Link**. This opens a dialog box with a link to copy. When the link is shared and opened by another user, the file will automatically download.","help.attaching.publicLinks.title":"Sharing Public Links","help.attaching.publicLinks2":"If **Get Public Link** is not visible in the file previewer and you prefer the feature enabled, you can request that your System Admin enable the feature from the System Console under **Security** > **Public Links**.","help.attaching.supported.description":"If you are trying to preview a media type that is not supported, the file previewer will open a standard media attachment icon. Supported media formats depend heavily on your browser and operating system, but the following formats are supported by Mattermost on most browsers:","help.attaching.supported.title":"Supported Media Types","help.attaching.supportedListItem1":"Images: BMP, GIF, JPG, JPEG, PNG","help.attaching.supportedListItem2":"Video: MP4","help.attaching.supportedListItem3":"Audio: MP3, M4A","help.attaching.supportedListItem4":"Documents: PDF","help.attaching.title":"Attaching Files","help.commands.builtin.description":"The following slash commands are available on all Mattermost installations:","help.commands.builtin.title":"Built-in Commands","help.commands.builtin2":"Begin by typing `/` and a list of slash command options appears above the text input box. The autocomplete suggestions help by providing a format example in black text and a short description of the slash command in grey text.","help.commands.custom.description":"Custom slash commands integrate with external applications. For example, a team might configure a custom slash command to check internal health records with `/patient joe smith` or check the weekly weather forecast in a city with `/weather toronto week`. Check with your System Admin or open the autocomplete list by typing `/` to determine if your team configured any custom slash commands.","help.commands.custom.title":"Custom Commands","help.commands.custom2":"Custom slash commands are disabled by default and can be enabled by the System Admin in the **System Console** > **Integrations** > **Webhooks and Commands**. Learn about configuring custom slash commands on the [developer slash command documentation page](!http://docs.mattermost.com/developer/slash-commands.html).","help.commands.intro1":"Slash commands perform operations in Mattermost by typing into the text input box. Enter a `/` followed by a command and some arguments to perform actions.","help.commands.intro2":"Built-in slash commands come with all Mattermost installations and custom slash commands are configurable to interact with external applications. Learn about configuring custom slash commands on the [developer slash command documentation page](!http://docs.mattermost.com/developer/slash-commands.html).","help.commands.title":"Executing Commands","help.composing.deleting.description":"Delete a message by clicking the **[...]** icon next to any message text that you've composed, then click **Delete**. System and Team Admins can delete any message on their system or team.","help.composing.deleting.title":"Deleting a message","help.composing.editing.description":"Edit a message by clicking the **[...]** icon next to any message text that you've composed, then click **Edit**. After making modifications to the message text, press **ENTER** to save the modifications. Message edits do not trigger new @mention notifications, desktop notifications or notification sounds.","help.composing.editing.title":"Editing a Message","help.composing.linking.description":"The **Permalink** feature creates a link to any message. Sharing this link with other users in the channel lets them view the linked message in the Message Archives. Users who are not a member of the channel where the message was posted cannot view the permalink. Get the permalink to any message by clicking the **[...]** icon next to the message text > **Permalink** > **Copy Link**.","help.composing.linking.title":"Linking to a message","help.composing.posting.description":"Write a message by typing into the text input box, then press ENTER to send it. Use SHIFT+ENTER to create a new line without sending a message. To send messages by pressing CTRL+ENTER go to **Main Menu > Account Settings > Send messages on CTRL+ENTER**.","help.composing.posting.title":"Posting a Message","help.composing.posts.description":"Posts can be considered parent messages. They are the messages that often start a thread of replies. Posts are composed and sent from the text input box at the bottom of the center pane.","help.composing.posts.title":"Posts","help.composing.replies.description1":"Reply to a message by clicking the reply icon next to any message text. This action opens the right-hand sidebar where you can see the message thread, then compose and send your reply. Replies are indented slightly in the center pane to indicate that they are child messages of a parent post.","help.composing.replies.description2":"When composing a reply in the right-hand side, click the expand/collapse icon with two arrows at the top of the sidebar to make things easier to read.","help.composing.replies.title":"Replies","help.composing.title":"Sending Messages","help.composing.types.description":"Reply to posts to keep conversations organized in threads.","help.composing.types.title":"Message Types","help.formatting.checklist":"Make a task list by including square brackets:","help.formatting.checklistExample":"- [ ] Item one\n- [ ] Item two\n- [x] Completed item","help.formatting.code.description":"Create a code block by indenting each line by four spaces, or by placing ``` on the line above and below your code.","help.formatting.code.title":"Code Block","help.formatting.codeBlock":"Code block","help.formatting.emojis.description":"Open the emoji autocomplete by typing `:`. A full list of emojis can be found [here](!http://www.emoji-cheat-sheet.com/). It is also possible to create your own [Custom Emoji](!http://docs.mattermost.com/help/settings/custom-emoji.html) if the emoji you want to use doesn't exist.","help.formatting.emojis.title":"Emojis","help.formatting.example":"Example:","help.formatting.githubTheme":"**GitHub Theme**","help.formatting.headings.description":"Make a heading by typing # and a space before your title. For smaller headings, use more #'s.","help.formatting.headings.title":"Headings","help.formatting.headings2":"Alternatively, you can underline the text using `===` or `---` to create headings.","help.formatting.headings2Example":"Large Heading\n-------------","help.formatting.headingsExample":"## Large Heading\n### Smaller Heading\n#### Even Smaller Heading","help.formatting.images.description":"Create in-line images using an `!` followed by the alt text in square brackets and the link in normal brackets. Add hover text by placing it in quotes after the link.","help.formatting.images.title":"In-line Images","help.formatting.imagesExample":'![alt text](link "hover text")\n\nand\n\n[![Build Status](https://travis-ci.org/mattermost/mattermost-server.svg?branch=master)](https://travis-ci.org/mattermost/mattermost-server) [![Github](https://assets-cdn.github.com/favicon.ico)](https://github.com/mattermost/mattermost-server)',"help.formatting.inline.description":"Create in-line monospaced font by surrounding it with backticks.","help.formatting.inline.title":"In-line Code","help.formatting.intro":"Markdown makes it easy to format messages. Type a message as you normally would, and use these rules to render it with special formatting.","help.formatting.lines.description":"Create a line by using three `*`, `_`, or `-`.","help.formatting.lines.title":"Lines","help.formatting.linkEx":"[Check out Mattermost!](https://about.mattermost.com/)","help.formatting.links.description":"Create labeled links by putting the desired text in square brackets and the associated link in normal brackets.","help.formatting.links.title":"Links","help.formatting.listExample":"* list item one\n* list item two\n    * item two sub-point","help.formatting.lists.description":"Create a list by using `*` or `-` as bullets. Indent a bullet point by adding two spaces in front of it.","help.formatting.lists.title":"Lists","help.formatting.monokaiTheme":"**Monokai Theme**","help.formatting.ordered":"Make it an ordered list by using numbers instead:","help.formatting.orderedExample":"1. Item one\n2. Item two","help.formatting.quotes.description":"Create block quotes using `>`.","help.formatting.quotes.title":"Block quotes","help.formatting.quotesExample":"`> block quotes` renders as:","help.formatting.quotesRender":"> block quotes","help.formatting.renders":"Renders as:","help.formatting.solirizedDarkTheme":"**Solarized Dark Theme**","help.formatting.solirizedLightTheme":"**Solarized Light Theme**","help.formatting.style.description":"You can use either `_` or `*` around a word to make it italic. Use two to make it bold.","help.formatting.style.listItem1":"`_italics_` renders as _italics_","help.formatting.style.listItem2":"`**bold**` renders as **bold**","help.formatting.style.listItem3":"`**_bold-italic_**` renders as **_bold-italics_**","help.formatting.style.listItem4":"`~~strikethrough~~` renders as ~~strikethrough~~","help.formatting.style.title":"Text Style","help.formatting.supportedSyntax":"Supported languages are: `as`, `applescript`, `osascript`, `scpt`, `bash`, `sh`, `zsh`, `clj`, `boot`, `cl2`, `cljc`, `cljs`, `cljs.hl`, `cljscm`, `cljx`, `hic`, `coffee`, `_coffee`, `cake`, `cjsx`, `cson`, `iced`, `cpp`, `c`, `cc`, `h`, `c++`, `h++`, `hpp`, `cs`, `csharp`, `css`, `d`, `di`, `dart`, `delphi`, `dpr`, `dfm`, `pas`, `pascal`, `freepascal`, `lazarus`, `lpr`, `lfm`, `diff`, `django`, `jinja`, `dockerfile`, `docker`, `erl`, `f90`, `f95`, `fsharp`, `fs`, `gcode`, `nc`, `go`, `groovy`, `handlebars`, `hbs`, `html.hbs`, `html.handlebars`, `hs`, `hx`, `java`, `jsp`, `js`, `jsx`, `json`, `jl`, `kt`, `ktm`, `kts`, `less`, `lisp`, `lua`, `mk`, `mak`, `md`, `mkdown`, `mkd`, `matlab`, `m`, `mm`, `objc`, `obj-c`, `ml`, `perl`, `pl`, `php`, `php3`, `php4`, `php5`, `php6`, `ps`, `ps1`, `pp`, `py`, `gyp`, `r`, `ruby`, `rb`, `gemspec`, `podspec`, `thor`, `irb`, `rs`, `scala`, `scm`, `sld`, `scss`, `st`, `styl`, `sql`, `swift`, `tex`, `vbnet`, `vb`, `bas`, `vbs`, `v`, `veo`, `xml`, `html`, `xhtml`, `rss`, `atom`, `xsl`, `plist`, `yaml`","help.formatting.syntax.description":"To add syntax highlighting, type the language to be highlighted after the ``` at the beginning of the code block. Mattermost also offers four different code themes (GitHub, Solarized Dark, Solarized Light, Monokai) that can be changed in **Account Settings** > **Display** > **Theme** > **Custom Theme** > **Center Channel Styles**","help.formatting.syntax.title":"Syntax Highlighting","help.formatting.syntaxEx":'```go\npackage main\nimport "fmt"\nfunc main() \\{\n    fmt.Println("Hello, ")\n\\}\n```',"help.formatting.tableExample":"| Left-Aligned  | Center Aligned  | Right Aligned |\n| :------------ |:---------------:| -----:|\n| Left column 1 | this text       |  $100 |\n| Left column 2 | is              |   $10 |\n| Left column 3 | centered        |    $1 |","help.formatting.tables.description":"Create a table by placing a dashed line under the header row and separating the columns with a pipe `|`. (The columns don't need to line up exactly for it to work). Choose how to align table columns by including colons `:` within the header row.","help.formatting.tables.title":"Tables","help.formatting.title":"Formatting Text","help.learnMore":"Learn more about:","help.link.attaching":"Attaching Files","help.link.commands":"Executing Commands","help.link.composing":"Composing Messages and Replies","help.link.formatting":"Formatting Messages using Markdown","help.link.mentioning":"Mentioning Teammates","help.link.messaging":"Basic Messaging","help.mentioning.channel.description":"You can mention an entire channel by typing `@channel`. All members of the channel will receive a mention notification that behaves the same way as if the members had been mentioned personally.","help.mentioning.channel.title":"@Channel","help.mentioning.channelExample":"@channel great work on interviews this week. I think we found some excellent potential candidates!","help.mentioning.mentions.description":"Use @mentions to get the attention of specific team members.","help.mentioning.mentions.title":"@Mentions","help.mentioning.recent.description":"Click `@` next to the search box to query for your most recent @mentions and words that trigger mentions. Click **Jump** next to a search result in the right-hand sidebar to jump the center pane to the channel and location of the message with the mention.","help.mentioning.recent.title":"Recent Mentions","help.mentioning.title":"Mentioning Teammates","help.mentioning.triggers.description":'In addition to being notified by @username and @channel, you can customize words that trigger mention notifications in **Account Settings** > **Notifications** > **Words that trigger mentions**. By default, you will receive mention notifications on your first name, and you can add more words by typing them into the input box separated by commas. This is useful if you want to be notified of all posts on certain topics, for example, "interviewing" or "marketing".',"help.mentioning.triggers.title":"Words That Trigger Mentions","help.mentioning.username.description1":"You can mention a teammate by using the `@` symbol plus their username to send them a mention notification.","help.mentioning.username.description2":"Type `@` to bring up a list of team members who can be mentioned. To filter the list, type the first few letters of any username, first name, last name, or nickname. The **Up** and **Down** arrow keys can then be used to scroll through entries in the list, and pressing **ENTER** will select which user to mention. Once selected, the username will automatically replace the full name or nickname. The following example sends a special mention notification to **alice** that alerts her of the channel and message where she has been mentioned. If **alice** is away from Mattermost and has [email notifications](!http://docs.mattermost.com/help/getting-started/configuring-notifications.html#email-notifications) turned on, then she will receive an email alert of her mention along with the message text.","help.mentioning.username.title":"@Username","help.mentioning.usernameCont":"If the user you mentioned does not belong to the channel, a System Message will be posted to let you know. This is a temporary message only seen by the person who triggered it. To add the mentioned user to the channel, go to the dropdown menu beside the channel name and select **Add Members**.","help.mentioning.usernameExample":"@alice how did your interview go with the new candidate?","help.messaging.attach":"**Attach files** by dragging and dropping into Mattermost or clicking the attachment icon in the text input box.","help.messaging.emoji":'**Quickly add emoji** by typing ":", which will open an emoji autocomplete. If the existing emoji don\'t cover what you want to express, you can also create your own [Custom Emoji](!http://docs.mattermost.com/help/settings/custom-emoji.html).',"help.messaging.format":"**Format your messages** using Markdown that supports text styling, headings, links, emoticons, code blocks, block quotes, tables, lists and in-line images.","help.messaging.notify":"**Notify teammates** when they are needed by typing `@username`.","help.messaging.reply":"**Reply to messages** by clicking the reply arrow next to the message text.","help.messaging.title":"Messaging Basics","help.messaging.write":"**Write messages** using the text input box at the bottom of Mattermost. Press ENTER to send a message. Use SHIFT+ENTER to create a new line without sending a message.","installed_command.header":"Slash Commands","installed_commands.add":"Add Slash Command","installed_commands.delete.confirm":"This action permanently deletes the slash command and breaks any integrations using it. Are you sure you want to delete it?","installed_commands.empty":"No commands found","installed_commands.emptySearch":"No commands match **{searchTerm}**","installed_commands.header":"Slash Commands","installed_commands.help":"Use slash commands to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.","installed_commands.help.appDirectory":"App Directory","installed_commands.help.buildYourOwn":"Build your own","installed_commands.search":"Search Slash Commands","installed_commands.unnamed_command":"Unnamed Slash Command","installed_incoming_webhooks.add":"Add Incoming Webhook","installed_incoming_webhooks.delete.confirm":"This action permanently deletes the incoming webhook and breaks any integrations using it. Are you sure you want to delete it?","installed_incoming_webhooks.empty":"No incoming webhooks found","installed_incoming_webhooks.emptySearch":"No incoming webhooks match **{searchTerm}**","installed_incoming_webhooks.header":"Incoming Webhooks","installed_incoming_webhooks.help":"Use incoming webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.","installed_incoming_webhooks.help.appDirectory":"App Directory","installed_incoming_webhooks.help.buildYourOwn":"Build your own","installed_incoming_webhooks.search":"Search Incoming Webhooks","installed_incoming_webhooks.unknown_channel":"A Private Webhook","installed_integrations.callback_urls":"Callback URLs: {urls}","installed_integrations.client_id":"Client ID: **{clientId}**","installed_integrations.client_secret":"Client Secret: **{clientSecret}**","installed_integrations.content_type":"Content-Type: {contentType}","installed_integrations.creation":"Created by {creator} on {createAt, date, full}","installed_integrations.delete":"Delete","installed_integrations.edit":"Edit","installed_integrations.hideSecret":"Hide Secret","installed_integrations.regenSecret":"Regenerate Secret","installed_integrations.regenToken":"Regenerate Token","installed_integrations.showSecret":"Show Secret","installed_integrations.token":"Token: {token}","installed_integrations.triggerWhen":"Trigger When: {triggerWhen}","installed_integrations.triggerWords":"Trigger Words: {triggerWords}","installed_integrations.unnamed_oauth_app":"Unnamed OAuth 2.0 Application","installed_integrations.url":"URL: {url}","installed_oauth_apps.add":"Add OAuth 2.0 Application","installed_oauth_apps.callbackUrls":"Callback URLs (One Per Line)","installed_oauth_apps.cancel":"Cancel","installed_oauth_apps.delete.confirm":"This action permanently deletes the OAuth 2.0 application and breaks any integrations using it. Are you sure you want to delete it?","installed_oauth_apps.description":"Description","installed_oauth_apps.empty":"No OAuth 2.0 Applications found","installed_oauth_apps.emptySearch":"No OAuth 2.0 Applications match **{searchTerm}**","installed_oauth_apps.header":"OAuth 2.0 Applications","installed_oauth_apps.help":"Create {oauthApplications} to securely integrate bots and third-party apps with Mattermost. Visit the {appDirectory} to find available self-hosted apps.","installed_oauth_apps.help.appDirectory":"App Directory","installed_oauth_apps.help.oauthApplications":"OAuth 2.0 applications","installed_oauth_apps.homepage":"Homepage","installed_oauth_apps.iconUrl":"Icon URL","installed_oauth_apps.is_trusted":"Is Trusted: **{isTrusted}**","installed_oauth_apps.name":"Display Name","installed_oauth_apps.save":"Save","installed_oauth_apps.saving":"Saving...","installed_oauth_apps.search":"Search OAuth 2.0 Applications","installed_oauth_apps.trusted":"Is Trusted","installed_oauth_apps.trusted.no":"No","installed_oauth_apps.trusted.yes":"Yes","installed_outgoing_webhooks.add":"Add Outgoing Webhook","installed_outgoing_webhooks.delete.confirm":"This action permanently deletes the outgoing webhook and breaks any integrations using it. Are you sure you want to delete it?","installed_outgoing_webhooks.empty":"No outgoing webhooks found","installed_outgoing_webhooks.emptySearch":"No outgoing webhooks match **{searchTerm}**","installed_outgoing_webhooks.header":"Outgoing Webhooks","installed_outgoing_webhooks.help":"Use outgoing webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.","installed_outgoing_webhooks.help.appDirectory":"App Directory","installed_outgoing_webhooks.help.buildYourOwn":"Build your own","installed_outgoing_webhooks.search":"Search Outgoing Webhooks","installed_outgoing_webhooks.unknown_channel":"A Private Webhook","integrations.add":"Add","integrations.command.description":"Slash commands send events to external integrations","integrations.command.title":"Slash Command","integrations.delete.confirm.button":"Delete","integrations.delete.confirm.title":"Delete Integration","integrations.done":"Done","integrations.edit":"Edit","integrations.header":"Integrations","integrations.help":"Visit the {appDirectory} to find self-hosted, third-party apps and integrations for Mattermost.","integrations.help.appDirectory":"App Directory","integrations.incomingWebhook.description":"Incoming webhooks allow external integrations to send messages","integrations.incomingWebhook.title":"Incoming Webhook","integrations.oauthApps.description":"OAuth 2.0 allows external applications to make authorized requests to the Mattermost API","integrations.oauthApps.title":"OAuth 2.0 Applications","integrations.outgoingWebhook.description":"Outgoing webhooks allow external integrations to receive and respond to messages","integrations.outgoingWebhook.title":"Outgoing Webhook","integrations.successful":"Setup Successful","interactive_dialog.cancel":"Cancel","interactive_dialog.element.optional":"(optional)","interactive_dialog.submit":"Submit","interactive_dialog.submitting":"Submitting...","intro_messages.addGroups":"Add groups to this private channel","intro_messages.addGroupsToTeam":"Add other groups to this team","intro_messages.anyMember":" Any member can join and read this channel.","intro_messages.beginning":"Beginning of {name}","intro_messages.creator":"This is the start of the {name} channel, created by {creator} on {date}.","intro_messages.creatorPrivate":"This is the start of the {name} private channel, created by {creator} on {date}.","intro_messages.default":"**Welcome to {display_name}!**\n \nPost messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team.","intro_messages.DM":"This is the start of your direct message history with {teammate}.\nDirect messages and files shared here are not shown to people outside this area.","intro_messages.GM":"This is the start of your group message history with {names}.\nMessages and files shared here are not shown to people outside this area.","intro_messages.group_message":"This is the start of your group message history with these teammates. Messages and files shared here are not shown to people outside this area.","intro_messages.invite":"Invite others to this channel","intro_messages.inviteOthers":"Invite others to this team","intro_messages.invitePrivate":"Invite others to this private channel","intro_messages.noCreator":"This is the start of the {name} channel, created on {date}.","intro_messages.noCreatorPrivate":"This is the start of the {name} private channel, created on {date}.","intro_messages.offTopic":"This is the start of {display_name}, a channel for non-work-related conversations.","intro_messages.onlyInvited":" Only invited members can see this private channel.","intro_messages.purpose":" This channel's purpose is: {purpose}","intro_messages.purposePrivate":" This private channel's purpose is: {purpose}","intro_messages.readonly.default":"**Welcome to {display_name}!**\n \nMessages can only be posted by system admins. Everyone automatically becomes a permanent member of this channel when they join the team.","intro_messages.setHeader":"Set a Header","intro_messages.teammate":"This is the start of your direct message history with this teammate. Direct messages and files shared here are not shown to people outside this area.","invite_member.addAnother":"Add another","invite_member.autoJoin":"People invited automatically join the **{channel}** channel.","invite_member.cancel":"Cancel","invite_member.content":"Email is currently disabled for your team, and email invitations cannot be sent. Contact your System Administrator to enable email and email invitations.","invite_member.disabled":"User creation has been disabled for your team. Please ask your Team Administrator for details.","invite_member.emailError":"Please enter a valid email address","invite_member.firstname":"First name","invite_member.inviteLink":"Team Invite Link","invite_member.lastname":"Last name","invite_member.modalButton":"Yes, Discard","invite_member.modalMessage":"You have unsent invitations, are you sure you want to discard them?","invite_member.modalTitle":"Discard Invitations?","invite_member.newMember":"Send Email Invite","invite_member.send":"Send Invitation","invite_member.send2":"Send Invitations","invite_member.sending":" Sending","invite_member.teamInviteLink":"You can also invite people using the {link}.",join_team_group_constrained_denied:"You need to be a member of a linked group to join this team.",join_team_group_constrained_denied_admin:"You need to be a member of a linked group to join this team. You can add a group to this team [here]({siteURL}/admin_console/user_management/groups).","katex.error":"Couldn't compile your Latex code. Please review the syntax and try again.","last_users_message.added_to_channel.type":"were **added to the channel** by {actor}.","last_users_message.added_to_team.type":"were **added to the team** by {actor}.","last_users_message.first":"{firstUser} and ","last_users_message.joined_channel.type":"**joined the channel**.","last_users_message.joined_team.type":"**joined the team**.","last_users_message.left_channel.type":"**left the channel**.","last_users_message.left_team.type":"**left the team**.","last_users_message.others":"{numOthers} others ","last_users_message.removed_from_channel.type":"were **removed from the channel**.","last_users_message.removed_from_team.type":"were **removed from the team**.","leave_private_channel_modal.leave":"Yes, leave channel","leave_private_channel_modal.message":"Are you sure you wish to leave the private channel {channel}? You must be re-invited in order to re-join this channel in the future.","leave_private_channel_modal.title":"Leave Private Channel {channel}","leave_team_modal.desc":"You will be removed from all public and private channels.  If the team is private you will not be able to rejoin the team.  Are you sure?","leave_team_modal.no":"No","leave_team_modal.title":"Leave the team?","leave_team_modal.yes":"Yes","list_modal.paginatorCount":"{startCount, number} - {endCount, number} of {total, number} total","loading_screen.loading":"Loading",local:"local","login_mfa.enterToken":"To complete the sign in process, please enter a token from your smartphone's authenticator","login_mfa.submit":"Submit","login_mfa.submitting":"Submitting...","login_mfa.token":"MFA Token","login.changed":" Sign-in method changed successfully","login.create":"Create one now","login.createTeam":"Create a new team","login.email":"Email","login.forgot":"I forgot my password","login.get_terms_error":"Unable to load terms of service. If this issue persists, contact your System Administrator.","login.gitlab":"GitLab","login.google":"Google Apps","login.invalidPassword":"Your password is incorrect.","login.ldapCreate":" Enter your AD/LDAP username and password to create an account.","login.ldapUsername":"AD/LDAP Username","login.ldapUsernameLower":"AD/LDAP username","login.noAccount":"Don't have an account? ","login.noEmail":"Please enter your email","login.noEmailLdapUsername":"Please enter your email or {ldapUsername}","login.noEmailUsername":"Please enter your email or username","login.noEmailUsernameLdapUsername":"Please enter your email, username or {ldapUsername}","login.noLdapUsername":"Please enter your {ldapUsername}","login.noMethods":"No sign-in methods are enabled. Please contact your System Administrator.","login.noPassword":"Please enter your password","login.noUsername":"Please enter your username","login.noUsernameLdapUsername":"Please enter your username or {ldapUsername}","login.office365":"Office 365","login.or":"or","login.password":"Password","login.passwordChanged":" Password updated successfully","login.placeholderOr":" or ","login.session_expired":"Your session has expired. Please log in again.","login.session_expired.notification":"Session Expired: Please sign in to continue receiving notifications.","login.session_expired.title":"* {siteName} - Session Expired","login.signIn":"Sign in","login.signInLoading":"Signing in...","login.signInWith":"Sign in with:","login.terms_rejected":"You must agree to the terms of service before accessing {siteName}. Please contact your System Administrator for more details.","login.username":"Username","login.userNotFound":"We couldn't find an account matching your login credentials.","login.verified":" Email Verified","manage_channel_groups_modal.search_placeholder":"Search groups","manage_team_groups_modal.search_placeholder":"Search groups","members_popover.button.message":"message","members_popover.manageMembers":"Manage Members","members_popover.title":"Channel Members","members_popover.viewMembers":"View Members","message_submit_error.invalidCommand":"Command with a trigger of '{command}' not found. ","message_submit_error.sendAsMessageLink":"Click here to send as a message.","mfa.confirm.complete":"**Set up complete!**","mfa.confirm.okay":"Okay","mfa.confirm.secure":"Your account is now secure. Next time you sign in, you will be asked to enter a code from the Google Authenticator app on your phone.","mfa.setup.badCode":"Invalid code. If this issue persists, contact your System Administrator.","mfa.setup.code":"MFA Code","mfa.setup.codeError":"Please enter the code from Google Authenticator.","mfa.setup.required":"**Multi-factor authentication is required on {siteName}.**","mfa.setup.save":"Save","mfa.setup.secret":"Secret: {secret}","mfa.setup.step1":"**Step 1: **On your phone, download Google Authenticator from [iTunes](!https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8') or [Google Play](!https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en)","mfa.setup.step2":"**Step 2: **Use Google Authenticator to scan this QR code, or manually type in the secret key","mfa.setup.step3":"**Step 3: **Enter the code generated by Google Authenticator","mfa.setupTitle":"Multi-factor Authentication Setup","mobile.set_status.away.icon":"Away Icon","mobile.set_status.dnd.icon":"Do Not Disturb Icon","mobile.set_status.offline.icon":"Offline Icon","mobile.set_status.online.icon":"Online Icon","modal.manual_status.ask":"Do not ask me again","modal.manual_status.auto_responder.message_":'Would you like to switch your status to "{status}" and disable Automatic Replies?',"modal.manual_status.auto_responder.message_away":'Would you like to switch your status to "Away" and disable Automatic Replies?',"modal.manual_status.auto_responder.message_dnd":'Would you like to switch your status to "Do Not Disturb" and disable Automatic Replies?',"modal.manual_status.auto_responder.message_offline":'Would you like to switch your status to "Offline" and disable Automatic Replies?',"modal.manual_status.auto_responder.message_online":'Would you like to switch your status to "Online" and disable Automatic Replies?',"modal.manual_status.button_":'Yes, set my status to "{status}"',"modal.manual_status.button_away":'Yes, set my status to "Away"',"modal.manual_status.button_dnd":'Yes, set my status to "Do Not Disturb"',"modal.manual_status.button_offline":'Yes, set my status to "Offline"',"modal.manual_status.button_online":'Yes, set my status to "Online"',"modal.manual_status.cancel_":'No, keep it as "{status}"',"modal.manual_status.cancel_away":'No, keep it as "Away"',"modal.manual_status.cancel_dnd":'No, keep it as "Do Not Disturb"',"modal.manual_status.cancel_offline":'No, keep it as "Offline"',"modal.manual_status.cancel_ooo":'No, keep it as "Out of Office"',"modal.manual_status.message_":'Would you like to switch your status to "{status}"?',"modal.manual_status.message_away":'Would you like to switch your status to "Away"?',"modal.manual_status.message_dnd":'Would you like to switch your status to "Do Not Disturb"?',"modal.manual_status.message_offline":'Would you like to switch your status to "Offline"?',"modal.manual_status.message_online":'Would you like to switch your status to "Online"?',"modal.manual_status.title_":'Your status is set to "{status}"',"modal.manual_status.title_away":'Your status is set to "Away"',"modal.manual_status.title_dnd":'Your status is set to "Do Not Disturb"',"modal.manual_status.title_offline":'Your status is set to "Offline"',"modal.manual_status.title_ooo":'Your status is set to "Out of Office"',"more_channels.create":"Create New Channel","more_channels.createClick":"Click 'Create New Channel' to make a new one","more_channels.join":"Join","more_channels.joining":"Joining...","more_channels.next":"Next","more_channels.noMore":"No more channels to join","more_channels.prev":"Previous","more_channels.title":"More Channels","more_direct_channels.directchannel.deactivated":"{displayname} - Deactivated","more_direct_channels.directchannel.you":"{displayname} (you)","more_direct_channels.new_convo_note":"This will start a new conversation. If you're adding a lot of people, consider creating a private channel instead.","more_direct_channels.new_convo_note.full":"You've reached the maximum number of people for this conversation. Consider creating a private channel instead.","more_direct_channels.title":"Direct Messages","more_public_direct_channels.channels":"Channels","more_public_direct_channels.direct_messages":"Direct Messages","more_public_direct_channels.title":"Channels and Direct Messages","msg_typing.areTyping":"{users} and {last} are typing...","msg_typing.isTyping":"{user} is typing...","multiselect.add":"Add","multiselect.addChannelsPlaceholder":"Search and add channels","multiselect.addGroupsPlaceholder":"Search and add groups","multiselect.adding":"Adding...","multiselect.addTeamsPlaceholder":"Search and add teams","multiselect.go":"Go","multiselect.list.notFound":"No items found","multiselect.loading":"Loading...","multiselect.numGroupsRemaining":"Use  to browse,  to select. You can add {num, number} more {num, plural, one {group} other {groups}}. ","multiselect.numMembers":"{memberOptions, number} of {totalCount, number} members","multiselect.numPeopleRemaining":"Use  to browse,  to select. You can add {num, number} more {num, plural, one {person} other {people}}. ","multiselect.numRemaining":"You can add {num, number} more","multiselect.placeholder":"Search and add members","multiselect.selectChannels":"Use  to browse,  to select.","multiselect.selectTeams":"Use  to browse,  to select.","navbar_dropdown.about":"About {appTitle}","navbar_dropdown.accountSettings":"Account Settings","navbar_dropdown.addGroupsToTeam":"Add Groups to Team","navbar_dropdown.addMemberToTeam":"Add Members to Team","navbar_dropdown.console":"System Console","navbar_dropdown.create":"Create a New Team","navbar_dropdown.emoji":"Custom Emoji","navbar_dropdown.help":"Help","navbar_dropdown.integrations":"Integrations","navbar_dropdown.inviteMember":"Send Email Invite","navbar_dropdown.join":"Join Another Team","navbar_dropdown.keyboardShortcuts":"Keyboard Shortcuts","navbar_dropdown.leave":"Leave Team","navbar_dropdown.leave.icon":"Leave Team Icon","navbar_dropdown.logout":"Logout","navbar_dropdown.manageGroups":"Manage Groups","navbar_dropdown.manageMembers":"Manage Members","navbar_dropdown.menuAriaLabel":"main menu","navbar_dropdown.nativeApps":"Download Apps","navbar_dropdown.report":"Report a Problem","navbar_dropdown.switchTo":"Switch to ","navbar_dropdown.teamLink":"Get Team Invite Link","navbar_dropdown.teamSettings":"Team Settings","navbar_dropdown.viewMembers":"View Members","navbar.addGroups":"Add Groups","navbar.addMembers":"Add Members","navbar.click":"Click here","navbar.clickToAddHeader":"{clickHere} to add one.","navbar.noHeader":"No channel header yet.","navbar.preferences":"Notification Preferences","navbar.toggle2":"Toggle sidebar","navbar.viewInfo":"View Info","navbar.viewPinnedPosts":"View Pinned Posts","notification.dm":"Direct Message","notify_all.confirm":"Confirm","notify_all.question":"By using @all or @channel you are about to send notifications to {totalMembers} people. Are you sure you want to do this?","notify_all.question_timezone":"By using @all or @channel you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?","notify_all.title.confirm":"Confirm sending notifications to entire channel",numMembers:"{num, number} {num, plural, one {member} other {members}}","password_form.change":"Change my password","password_form.enter":"Enter a new password for your {siteName} account.","password_form.error":"Please enter at least {chars} characters.","password_form.pwd":"Password","password_form.title":"Password Reset","password_send.checkInbox":"Please check your inbox.","password_send.description":"To reset your password, enter the email address you used to sign up","password_send.email":"Email","password_send.error":"Please enter a valid email address.","password_send.link":"If the account exists, a password reset email will be sent to:","password_send.reset":"Reset my password","password_send.title":"Password Reset",passwordRequirements:"Password Requirements:","pdf_preview.max_pages":"Download to read more pages","pending_post_actions.cancel":"Cancel","pending_post_actions.retry":"Retry","permalink.error.access":"Permalink belongs to a deleted message or to a channel to which you do not have access.","permalink.error.title":"Message Not Found","post_body.check_for_out_of_channel_groups_mentions.message":"did not get notified by this mention because they are not in the channel. They cannot be added to the channel because they are not a member of the linked groups. To add them to this channel, they must be added to the linked groups.","post_body.check_for_out_of_channel_mentions.link.and":" and ","post_body.check_for_out_of_channel_mentions.link.private":"add them to this private channel","post_body.check_for_out_of_channel_mentions.link.public":"add them to the channel","post_body.check_for_out_of_channel_mentions.message_last":"? They will have access to all message history.","post_body.check_for_out_of_channel_mentions.message.multiple":"did not get notified by this mention because they are not in the channel. Would you like to ","post_body.check_for_out_of_channel_mentions.message.one":"did not get notified by this mention because they are not in the channel. Would you like to ","post_body.commentedOn":"Commented on {name}'s message: ","post_body.deleted":"(message deleted)","post_body.plusMore":" plus {count, number} other {count, plural, one {file} other {files}}","post_delete.notPosted":"Comment could not be posted","post_delete.okay":"Okay","post_delete.someone":"Someone deleted the message on which you tried to post a comment.","post_info.auto_responder":"AUTOMATIC REPLY","post_info.bot":"BOT","post_info.comment_icon.tooltip.reply":"Reply","post_info.del":"Delete","post_info.dot_menu.tooltip.more_actions":"More Actions","post_info.edit":"Edit","post_info.info.view_additional_info":"View additional info","post_info.menuAriaLabel":"Post extra options","post_info.message.show_less":"Show Less","post_info.message.show_more":"Show More","post_info.message.visible":"(Only visible to you)","post_info.message.visible.compact":" (Only visible to you)","post_info.permalink":"Permalink","post_info.pin":"Pin to channel","post_info.pinned":"Pinned","post_info.reply":"Reply","post_info.system":"System","post_info.tooltip.add_reactions":"Add Reaction","post_info.unpin":"Un-pin from channel","post_message_view.edited":"(edited)","post.ariaLabel.attachment":", 1 attachment","post.ariaLabel.attachmentMultiple":", {attachmentCount} attachments","post.ariaLabel.message":"{authorName} at {time} {date} wrote, {message}","post.ariaLabel.messageIsFlagged":", message is flagged","post.ariaLabel.messageIsFlaggedAndPinned":", message is flagged and pinned","post.ariaLabel.messageIsPinned":", message is pinned","post.ariaLabel.reaction":", 1 reaction","post.ariaLabel.reactionMultiple":", {reactionCount} reactions","post.ariaLabel.replyMessage":"{authorName} at {time} {date} wrote a reply, {message}","posts_view.loadMore":"Load more messages","posts_view.maxLoaded":"Looking for a specific message? Try searching for it","posts_view.newMsg":"New Messages","posts_view.newMsgBelow":"New {count, plural, one {message} other {messages}}","quick_switch_modal.channels":"Channels","quick_switch_modal.channelsShortcut.mac":"- K","quick_switch_modal.channelsShortcut.windows":"- CTRL+K","quick_switch_modal.help":"Start typing then use TAB to toggle channels/teams,  to browse,  to select, and ESC to dismiss.","quick_switch_modal.help_mobile":"Type to find a channel.","quick_switch_modal.help_no_team":"Type to find a channel. Use  to browse,  to select, ESC to dismiss.","quick_switch_modal.teams":"Teams","quick_switch_modal.teamsShortcut.mac":"- K","quick_switch_modal.teamsShortcut.windows":"- CTRL+ALT+K","reaction_list.addReactionTooltip":"Add reaction","reaction.add.ariaLabel":"add reaction","reaction.clickToAdd":"(click to add)","reaction.clickToRemove":"(click to remove)","reaction.container.ariaLabel":"reactions","reaction.othersReacted":"{otherUsers, number} {otherUsers, plural, one {user} other {users}}","reaction.reacted":"{users} {reactionVerb} with {emoji}","reaction.reactionVerb.user":"reacted","reaction.reactionVerb.users":"reacted","reaction.reactionVerb.you":"reacted","reaction.reactionVerb.youAndUsers":"reacted","reaction.reactWidth.ariaLabel":"react with","reaction.removeReact.ariaLabel":"remove reaction","reaction.usersAndOthersReacted":"{users} and {otherUsers, number} other {otherUsers, plural, one {user} other {users}}","reaction.usersReacted":"{users} and {lastUser}","reaction.you":"You",remove_group_confirm_button:"Yes, Remove Group and {memberCount, plural, one {Member} other {Members}}",remove_group_confirm_message:"{memberCount, number} {memberCount, plural, one {member} other {members}} associated to this group will be removed from the team on the next scheduled AD/LDAP synchronization. Are you sure you wish to remove this group and {memberCount} {memberCount, plural, one {member} other {members}}?",remove_group_confirm_title:"Remove Group and {memberCount, number} {memberCount, plural, one {Member} other {Members}}","removed_channel.channelName":"the channel","removed_channel.from":"Removed from ","removed_channel.okay":"Okay","removed_channel.remover":"{remover} removed you from {channel}","removed_channel.someone":"Someone","rename_channel.cancel":"Cancel","rename_channel.defaultError":" - Cannot be changed for the default channel","rename_channel.displayName":"Display Name","rename_channel.displayNameHolder":"Enter display name","rename_channel.handleHolder":"lowercase alphanumeric characters","rename_channel.lowercase":"Must be lowercase alphanumeric characters","rename_channel.maxLength":"This field must be less than {maxLength, number} characters","rename_channel.minLength":"Channel name must be {minLength, number} or more characters","rename_channel.required":"This field is required","rename_channel.save":"Save","rename_channel.title":"Rename Channel","rename_channel.url":"URL","revoke_user_sessions_modal.desc":"This action revokes all sessions for {username}. They will be logged out from all devices. Are you sure you want to revoke all sessions for {username}?","revoke_user_sessions_modal.revoke":"Revoke","revoke_user_sessions_modal.title":"Revoke Sessions for {username}","rhs_card.jump":"Jump","rhs_card.message_by":"Message by {avatar} {user}","rhs_comment.comment":"Comment","rhs_header.backToFlaggedTooltip":"Back to Flagged Posts","rhs_header.backToPinnedTooltip":"Back to Pinned Posts","rhs_header.backToResultsTooltip":"Back to Search Results","rhs_header.closeSidebarTooltip":"Close Sidebar","rhs_header.closeTooltip.icon":"Close Sidebar Icon","rhs_header.details":"Message Details","rhs_header.expandSidebarTooltip":"Expand Sidebar","rhs_header.expandSidebarTooltip.icon":"Expand Sidebar Icon","rhs_header.expandTooltip.icon":"Shrink Sidebar Icon","rhs_header.shrinkSidebarTooltip":"Shrink Sidebar","rhs_root.direct":"Direct Message","rhs_root.mobile.add_reaction":"Add Reaction","rhs_root.mobile.flag":"Flag","rhs_root.mobile.unflag":"Unflag","rhs_thread.rootPostDeletedMessage.body":"Part of this thread has been deleted due to a data retention policy. You can no longer reply to this thread.","save_button.save":"Save","save_button.saving":"Saving","search_bar.clear":"Clear search query","search_bar.search":"Search","search_bar.usage.tips":'* Use **"quotation marks"** to search for phrases\n* Use **from:** to find posts from specific users and **in:** to find posts in specific channels\n* Use **on:** to find posts on a specific date\n* Use **before:** to find posts before a specific date\n* Use **after:** to find posts after a specific date',"search_bar.usage.title":"Search Options","search_header.loading":"Searching...","search_header.results":"Search Results","search_header.title2":"Recent Mentions","search_header.title3":"Flagged Posts","search_header.title4":"Pinned posts in {channelDisplayName}","search_header.title5":"Extra information","search_item.channelArchived":"Archived","search_item.direct":"Direct Message (with {username})","search_item.jump":"Jump","search_results.noResults":"No results found. Try again?","search_results.noResults.partialPhraseSuggestion":'If you\'re searching a partial phrase (ex. searching "rea", looking for "reach" or "reaction"), append a * to your search term.',"search_results.noResults.stopWordsSuggestion":'Two letter searches and common words like "this", "a" and "is" won\'t appear in search results due to excessive results returned.',"search_results.usage.dataRetention":"Only messages posted in the last {days} days are returned. Contact your System Administrator for more detail.","search_results.usageFlag1":"You haven't flagged any messages yet.","search_results.usageFlag2":"You can add a flag to messages and comments by clicking the {flagIcon} icon next to the timestamp.","search_results.usageFlag4":"Flags are a way to mark messages for follow up. Your flags are personal, and cannot be seen by other users.","search_results.usagePin1":"There are no pinned messages yet.","search_results.usagePin2":"All members of this channel can pin important or useful messages.","search_results.usagePin3":"Pinned messages are visible to all channel members.","search_results.usagePin4":'To pin a message: Go to the message that you want to pin and click [...] > "Pin to channel".',"select_team.icon":"Select Team Icon","select_team.join.icon":"Join Team Icon","select_team.private.icon":"Private Team","setting_item_max.cancel":"Cancel","setting_item_min.edit":"Edit","setting_picture.cancel":"Cancel","setting_picture.help.profile":"Upload a picture in BMP, JPG or PNG format. Maximum file size: {max}","setting_picture.help.team":"Upload a team icon in BMP, JPG or PNG format.\nSquare images with a solid background color are recommended.","setting_picture.remove":"Remove this icon","setting_picture.remove_profile_picture":"Remove profile picture","setting_picture.save":"Save","setting_picture.select":"Select","setting_picture.uploading":"Uploading...","setting_upload.import":"Import","setting_upload.noFile":"No file selected.","setting_upload.select":"Select file","shortcuts.browser.channel_next":"Forward in history:\tAlt|Right","shortcuts.browser.channel_next.mac":"Forward in history:\t|]","shortcuts.browser.channel_prev":"Back in history:\tAlt|Left","shortcuts.browser.channel_prev.mac":"Back in history:\t|[","shortcuts.browser.font_decrease":"Zoom out:\tCtrl|-","shortcuts.browser.font_decrease.mac":"Zoom out:\t|-","shortcuts.browser.font_increase":"Zoom in:\tCtrl|+","shortcuts.browser.font_increase.mac":"Zoom in:\t|+","shortcuts.browser.header":"Built-in Browser Commands","shortcuts.browser.highlight_next":"Highlight text to the next line:\tShift|Down","shortcuts.browser.highlight_prev":"Highlight text to the previous line:\tShift|Up","shortcuts.browser.input.header":"Works inside an input field","shortcuts.browser.newline":"Create a new line:\tShift|Enter","shortcuts.files.header":"Files","shortcuts.files.upload":"Upload files:\tCtrl|U","shortcuts.files.upload.mac":"Upload files:\t|U","shortcuts.header":"Keyboard Shortcuts\tCtrl|/","shortcuts.header.mac":"Keyboard Shortcuts\t|/","shortcuts.info":"Begin a message with / for a list of all the commands at your disposal.","shortcuts.msgs.comp.channel":"Channel:\t~|[a-z]|Tab","shortcuts.msgs.comp.emoji":"Emoji:\t:|[a-z]|Tab","shortcuts.msgs.comp.header":"Autocomplete","shortcuts.msgs.comp.username":"Username:\t@|[a-z]|Tab","shortcuts.msgs.edit":"Edit last message in channel:\tUp","shortcuts.msgs.header":"Messages","shortcuts.msgs.input.header":"Works inside an empty input field","shortcuts.msgs.reply":"Reply to last message in channel:\tShift|Up","shortcuts.msgs.reprint_next":"Reprint next message:\tCtrl|Down","shortcuts.msgs.reprint_next.mac":"Reprint next message:\t|Down","shortcuts.msgs.reprint_prev":"Reprint previous message:\tCtrl|Up","shortcuts.msgs.reprint_prev.mac":"Reprint previous message:\t|Up","shortcuts.nav.direct_messages_menu":"Direct messages menu:\tCtrl|Shift|K","shortcuts.nav.direct_messages_menu.mac":"Direct messages menu:\t|Shift|K","shortcuts.nav.focus_center":"Set focus to input field:\tCtrl|Shift|L","shortcuts.nav.focus_center.mac":"Set focus to input field:\t|Shift|L","shortcuts.nav.header":"Navigation","shortcuts.nav.next":"Next channel:\tAlt|Down","shortcuts.nav.next.mac":"Next channel:\t|Down","shortcuts.nav.prev":"Previous channel:\tAlt|Up","shortcuts.nav.prev.mac":"Previous channel:\t|Up","shortcuts.nav.recent_mentions":"Recent mentions:\tCtrl|Shift|M","shortcuts.nav.recent_mentions.mac":"Recent mentions:\t|Shift|M","shortcuts.nav.settings":"Account settings:\tCtrl|Shift|A","shortcuts.nav.settings.mac":"Account settings:\t|Shift|A","shortcuts.nav.switcher":"Quick channel switcher:\tCtrl|K","shortcuts.nav.switcher.mac":"Quick channel switcher:\t|K","shortcuts.nav.unread_next":"Next unread channel:\tAlt|Shift|Down","shortcuts.nav.unread_next.mac":"Next unread channel:\t|Shift|Down","shortcuts.nav.unread_prev":"Previous unread channel:\tAlt|Shift|Up","shortcuts.nav.unread_prev.mac":"Previous unread channel:\t|Shift|Up","sidebar_header.tutorial.body1":"The **Main Menu** is where you can **Invite New Members**, access your **Account Settings** and set your **Theme Color**.","sidebar_header.tutorial.body2":"Team administrators can also access their **Team Settings** from this menu.","sidebar_header.tutorial.body3":"System administrators will find a **System Console** option to administrate the entire system.","sidebar_header.tutorial.title":"Main Menu","sidebar_right_menu.console":"System Console","sidebar_right_menu.flagged":"Flagged Posts","sidebar_right_menu.recentMentions":"Recent Mentions","sidebar.browseChannelDirectChannel":"Browse Channels and Direct Messages","sidebar.createChannel":"Create new public channel","sidebar.createDirectMessage":"Create new direct message","sidebar.createGroup":"Create new private channel","sidebar.createPublicPrivateChannel":"Create new public or private channel","sidebar.directchannel.you":"{displayname} (you)","sidebar.leave":"Leave channel","sidebar.mainMenu":"Main Menu","sidebar.moreDmAria":"more direct messages","sidebar.moreElips":"More...","sidebar.morePublicAria":"more public channels","sidebar.morePublicDmAria":"more public channels and direct messages","sidebar.removeList":"Remove from list","sidebar.tutorialScreen1.body":"**Channels** organize conversations across different topics. They're open to everyone on your team. To send private communications use **Direct Messages** for a single person or **Private Channels** for multiple people.","sidebar.tutorialScreen1.title":"Channels","sidebar.tutorialScreen2.body1":"Here are two public channels to start:","sidebar.tutorialScreen2.body2":"**{townsquare}** is a place for team-wide communication. Everyone in your team is a member of this channel.","sidebar.tutorialScreen2.body3":"**{offtopic}** is a place for fun and humor outside of work-related channels. You and your team can decide what other channels to create.","sidebar.tutorialScreen2.title":'"{townsquare}" and "{offtopic}" channels',"sidebar.tutorialScreen3.body1":'Click **"More..."** to create a new channel or join an existing one.',"sidebar.tutorialScreen3.body2":'You can also create a new channel by clicking the **"+" symbol** next to the public or private channel header.',"sidebar.tutorialScreen3.title":"Creating and Joining Channels","sidebar.types.alpha":"CHANNELS","sidebar.types.direct":"DIRECT MESSAGES","sidebar.types.favorite":"FAVORITE CHANNELS","sidebar.types.private":"PRIVATE CHANNELS","sidebar.types.public":"PUBLIC CHANNELS","sidebar.types.recent":"RECENT ACTIVITY","sidebar.types.unreads":"UNREADS","sidebar.unreads":"More unreads",signup_team_system_console:"Go to System Console","signup_team.join_open":"Teams you can join: ","signup_team.no_open_teams":"No teams are available to join. Please ask your administrator for an invite.","signup_team.no_open_teams_canCreate":"No teams are available to join. Please create a new team or ask your administrator for an invite.","signup_user_completed.choosePwd":"Choose your password","signup_user_completed.chooseUser":"Choose your username","signup_user_completed.create":"Create Account","signup_user_completed.emailHelp":"Valid email required for sign-up","signup_user_completed.emailIs":"Your email address is **{email}**. You'll use this address to sign in to {siteName}.","signup_user_completed.expired":"You've already completed the signup process for this invitation or this invitation has expired.","signup_user_completed.failed_update_user_state":"Please clear your cache and try to log in.","signup_user_completed.haveAccount":"Already have an account?","signup_user_completed.invalid_invite":"The invite link was invalid.  Please speak with your Administrator to receive an invitation.","signup_user_completed.lets":"Let's create your account","signup_user_completed.no_open_server":"This server does not allow open signups.  Please speak with your Administrator to receive an invitation.","signup_user_completed.none":"No user creation method has been enabled.  Please contact an administrator for access.","signup_user_completed.required":"This field is required","signup_user_completed.reserved":"This username is reserved, please choose a new one.","signup_user_completed.signIn":"Click here to sign in.","signup_user_completed.userHelp":"You can use lowercase letters, numbers, periods, dashes, and underscores.","signup_user_completed.usernameLength":"Usernames have to begin with a lowercase letter and be {min}-{max} characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.","signup_user_completed.validEmail":"Please enter a valid email address","signup_user_completed.whatis":"What's your email address?","signup.email":"Email and Password","signup.email.icon":"Email Icon","signup.gitlab":"GitLab Single Sign-On","signup.google":"Google Account","signup.ldap":"AD/LDAP Credentials","signup.ldap.icon":"AD/LDAP Icon","signup.office365":"Office 365","signup.saml.icon":"SAML Icon","signup.title":"Create an account with:","status_dropdown.menuAriaLabel":"set status","status_dropdown.set_away":"Away","status_dropdown.set_dnd":"Do Not Disturb","status_dropdown.set_dnd.extra":"Disables Desktop and Push Notifications","status_dropdown.set_offline":"Offline","status_dropdown.set_online":"Online","status_dropdown.set_ooo":"Out of Office","status_dropdown.set_ooo.extra":"Automatic Replies are enabled","string.id":"default message","suggestion_list.no_matches":"No items match __{value}__","suggestion.archive":"Archived Channels","suggestion.mention.all":"Notifies everyone in this channel","suggestion.mention.channel":"Notifies everyone in this channel","suggestion.mention.channels":"My Channels","suggestion.mention.here":"Notifies everyone online in this channel","suggestion.mention.members":"Channel Members","suggestion.mention.morechannels":"Other Channels","suggestion.mention.moremembers":"Other Members","suggestion.mention.nonmembers":"Not in Channel","suggestion.mention.special":"Special Mentions","suggestion.mention.unread.channels":"Unread Channels","suggestion.search.direct":"Direct Messages","suggestion.search.private":"Private Channels","suggestion.search.public":"Public Channels","system_notice.adminVisible":"Only visible to System Admins","system_notice.adminVisible.icon":"Only visible to System Admins Icon","system_notice.body.api3":"If youve created or installed integrations in the last two years, find out how [recent changes](!https://about.mattermost.com/default-apiv3-deprecation-guide) may have affected them.","system_notice.body.ee_upgrade_advice":"Enterprise Edition is recommended to ensure optimal operation and reliability. [Learn more](!https://mattermost.com/performance).","system_notice.body.ie11_deprecation":"Your browser, IE11, will no longer be supported in an upcoming release. [Find out how to move to another browser in one simple step](!https://forum.mattermost.org/t/mattermost-is-dropping-support-for-internet-explorer-ie11-in-v5-16/7575).","system_notice.body.permissions":"Some policy and permission System Console settings have moved with the release of [advanced permissions](!https://about.mattermost.com/default-advanced-permissions) in Enterprise E10 and E20.","system_notice.dont_show":"Don't show again","system_notice.remind_me":"Remind me later","system_notice.title":"**Notice**\nfrom Mattermost","system_users_list.count":"{count, number} {count, plural, one {user} other {users}}","system_users_list.countPage":"{startCount, number} - {endCount, number} {count, plural, one {user} other {users}} of {total, number} total","system_users_list.countSearch":"{count, number} {count, plural, one {user} other {users}} of {total, number} total","team_channel_settings.group.group_user_row.numberOfGroups":"{amount, number} {amount, plural, one {Group} other {Groups}}","team_import_tab.failure":" Import failure: ","team_import_tab.import":"Import","team_import_tab.importHelpCliDocsLink":"CLI tool for Slack import","team_import_tab.importHelpDocsLink":"documentation","team_import_tab.importHelpExporterLink":"Slack Advanced Exporter","team_import_tab.importHelpExportInstructions":"Slack > Administration > Workspace settings > Import/Export Data > Export > Start Export","team_import_tab.importHelpLine1":"Slack import to Mattermost supports importing of messages in your Slack team's public channels.","team_import_tab.importHelpLine2":"To import a team from Slack, go to {exportInstructions}. See {uploadDocsLink} to learn more.","team_import_tab.importHelpLine3":"To import posts with attached files, see {slackAdvancedExporterLink} for details.","team_import_tab.importHelpLine4":"For Slack teams with over 10,000 messages, we recommend using the {cliLink}.","team_import_tab.importing":"Importing...","team_import_tab.importSlack":"Import from Slack (Beta)","team_import_tab.successful":" Import successful: ","team_import_tab.summary":"View Summary","team_member_modal.members":"{team} Members","team_members_dropdown.confirmDemoteDescription":"If you demote yourself from the System Admin role and there is not another user with System Admin privileges, you'll need to re-assign a System Admin by accessing the Mattermost server through a terminal and running the following command.","team_members_dropdown.confirmDemoteRoleTitle":"Confirm demotion from System Admin role","team_members_dropdown.confirmDemotion":"Confirm Demotion","team_members_dropdown.confirmDemotionCmd":"platform roles system_admin {username}","team_members_dropdown.inactive":"Inactive","team_members_dropdown.leave_team":"Remove From Team","team_members_dropdown.makeAdmin":"Make Team Admin","team_members_dropdown.makeMember":"Make Member","team_members_dropdown.member":"Member","team_members_dropdown.menuAriaLabel":"Team member role change","team_members_dropdown.systemAdmin":"System Admin","team_members_dropdown.teamAdmin":"Team Admin","team_settings_modal.generalTab":"General","team_settings_modal.importTab":"Import","team_settings_modal.title":"Team Settings","team_settings.openInviteDescription.groupConstrained":"No, members of this team are added and removed by linked groups. [Learn More](!https://mattermost.com/pl/default-ldap-group-constrained-team-channel.html)","team_settings.openInviteSetting.groupConstrained":"No, members of this team are added and removed by linked groups.","team_sidebar.join":"Other teams you can join.","team.button.ariaLabel":"{teamName} team","team.button.mentions.ariaLabel":"{teamName} team, {mentionCount} mentions","team.button.name_undefined":"Name undefined","team.button.unread.ariaLabel":"{teamName} team unread","terms_of_service.agreeButton":"I Agree","terms_of_service.api_error":"Unable to complete the request. If this issue persists, contact your System Administrator.","terms_of_service.disagreeButton":"I Disagree",test:"Button Text","textbox.bold":"**bold**","textbox.edit":"Edit message","textbox.help":"Help","textbox.inlinecode":"`inline code`","textbox.italic":"_italic_","textbox.preformatted":"```preformatted```","textbox.preview":"Preview","textbox.quote":">quote","textbox.strike":"strike","tutorial_intro.allSet":"You're all set","tutorial_intro.end":'Click "Next" to enter {channel}. This is the first channel teammates see when they sign up. Use it for posting updates everyone needs to know.',"tutorial_intro.invite":"Invite teammates","tutorial_intro.mobileApps":"Install the apps for {link} for easy access and notifications on the go.","tutorial_intro.mobileAppsLinkText":"PC, Mac, iOS and Android","tutorial_intro.next":"Next","tutorial_intro.screenOne.body1":"Your team communication all in one place, instantly searchable and available anywhere.","tutorial_intro.screenOne.body2":"Keep your team connected to help them achieve what matters most.","tutorial_intro.screenOne.title1":"Welcome to:","tutorial_intro.screenOne.title2":"Mattermost","tutorial_intro.screenTwo.body1":"Communication happens in public discussion channels, private channels and direct messages.","tutorial_intro.screenTwo.body2":"Everything is archived and searchable from any web-enabled desktop, laptop or phone.","tutorial_intro.screenTwo.title":"How Mattermost works:","tutorial_intro.skip":"Skip tutorial","tutorial_intro.support":"Need anything, just email us at ","tutorial_intro.teamInvite":"Invite teammates","tutorial_intro.whenReady":" when you're ready.","tutorial_tip.next":"Next","tutorial_tip.ok":"Okay","tutorial_tip.out":"Opt out of these tips.","tutorial_tip.seen":"Seen this before? ","update_command.confirm":"Edit Slash Command","update_command.question":"Your changes may break the existing slash command. Are you sure you would like to update it?","update_command.update":"Update","update_incoming_webhook.update":"Update","update_incoming_webhook.updating":"Updating...","update_oauth_app.confirm":"Edit OAuth 2.0 application","update_oauth_app.question":"Your changes may break the existing OAuth 2.0 application. Are you sure you would like to update it?","update_outgoing_webhook.confirm":"Edit Outgoing Webhook","update_outgoing_webhook.question":"Your changes may break the existing outgoing webhook. Are you sure you would like to update it?","update_outgoing_webhook.update":"Update","upload_overlay.info":"Drop a file to upload it.","user_list.notFound":"No users found","user_profile.account.editSettings":"Edit Account Settings","user_profile.account.localTime":"Local Time: ","user_profile.add_user_to_channel":"Add to a Channel","user_profile.add_user_to_channel.icon":"Add User to Channel Icon","user_profile.send.dm":"Send Message","user_profile.send.dm.icon":"Send Message Icon","user.settings.advance.confirmDeactivateAccountTitle":"Confirm Deactivation","user.settings.advance.confirmDeactivateDesc":"Are you sure you want to deactivate your account? This can only be reversed by your System Administrator.","user.settings.advance.deactivate_member_modal.deactivateButton":"Yes, deactivate my account","user.settings.advance.deactivateAccountTitle":"Deactivate Account","user.settings.advance.deactivateDesc":"Deactivating your account removes your ability to log in to this server and disables all email and mobile notifications. To reactivate your account, contact your System Administrator.","user.settings.advance.deactivateDescShort":"Click 'Edit' to deactivate your account","user.settings.advance.enabledFeatures":"{count, number} {count, plural, one {Feature} other {Features}} Enabled","user.settings.advance.formattingDesc":"If enabled, posts will be formatted to create links, show emoji, style the text, and add line breaks. By default, this setting is enabled.","user.settings.advance.formattingTitle":"Enable Post Formatting","user.settings.advance.icon":"Advanced Settings Icon","user.settings.advance.joinLeaveDesc":'When "On", System Messages saying a user has joined or left a channel will be visible. When "Off", the System Messages about joining or leaving a channel will be hidden. A message will still show up when you are added to a channel, so you can receive a notification.',"user.settings.advance.joinLeaveTitle":"Enable Join/Leave Messages","user.settings.advance.markdown_preview":"Show markdown preview option in message input box","user.settings.advance.off":"Off","user.settings.advance.on":"On","user.settings.advance.onForAllMessages":"On for all messages","user.settings.advance.onForCode":"On only for code blocks starting with ```","user.settings.advance.preReleaseDesc":"Check any pre-released features you'd like to preview.  You may also need to refresh the page before the setting will take effect.","user.settings.advance.preReleaseTitle":"Preview pre-release features","user.settings.advance.sendDesc":"When enabled, CTRL + ENTER will send the message and ENTER inserts a new line.","user.settings.advance.sendTitle":"Send messages on CTRL+ENTER","user.settings.advance.title":"Advanced Settings","user.settings.custom_theme.awayIndicator":"Away Indicator","user.settings.custom_theme.buttonBg":"Button BG","user.settings.custom_theme.buttonColor":"Button Text","user.settings.custom_theme.centerChannelBg":"Center Channel BG","user.settings.custom_theme.centerChannelColor":"Center Channel Text","user.settings.custom_theme.centerChannelTitle":"Center Channel Styles","user.settings.custom_theme.codeTheme":"Code Theme","user.settings.custom_theme.copyPaste":"Copy and paste to share theme colors:","user.settings.custom_theme.dndIndicator":"Do Not Disturb Indicator","user.settings.custom_theme.errorTextColor":"Error Text Color","user.settings.custom_theme.linkButtonTitle":"Link and Button Styles","user.settings.custom_theme.linkColor":"Link Color","user.settings.custom_theme.mentionBg":"Mention Jewel BG","user.settings.custom_theme.mentionColor":"Mention Jewel Text","user.settings.custom_theme.mentionHighlightBg":"Mention Highlight BG","user.settings.custom_theme.mentionHighlightLink":"Mention Highlight Link","user.settings.custom_theme.newMessageSeparator":"New Message Separator","user.settings.custom_theme.onlineIndicator":"Online Indicator","user.settings.custom_theme.sidebarBg":"Sidebar BG","user.settings.custom_theme.sidebarHeaderBg":"Sidebar Header BG","user.settings.custom_theme.sidebarHeaderTextColor":"Sidebar Header Text","user.settings.custom_theme.sidebarText":"Sidebar Text","user.settings.custom_theme.sidebarTextActiveBorder":"Sidebar Text Active Border","user.settings.custom_theme.sidebarTextActiveColor":"Sidebar Text Active Color","user.settings.custom_theme.sidebarTextHoverBg":"Sidebar Text Hover BG","user.settings.custom_theme.sidebarTitle":"Sidebar Styles","user.settings.custom_theme.sidebarUnreadText":"Sidebar Unread Text","user.settings.display.channeldisplaymode":"Select the width of the center channel.","user.settings.display.channelDisplayTitle":"Channel Display","user.settings.display.clockDisplay":"Clock Display","user.settings.display.collapseDesc":"Set whether previews of image links and image attachment thumbnails show as expanded or collapsed by default. This setting can also be controlled using the slash commands /expand and /collapse.","user.settings.display.collapseDisplay":"Default appearance of image previews","user.settings.display.collapseOff":"Collapsed","user.settings.display.collapseOn":"Expanded","user.settings.display.fixedWidthCentered":"Fixed width, centered","user.settings.display.fullScreen":"Full width","user.settings.display.icon":"Display Settings Icon","user.settings.display.language":"Language","user.settings.display.linkPreviewDesc":"When available, the first web link in a message will show a preview of the website content below the message.","user.settings.display.linkPreviewDisplay":"Website Link Previews","user.settings.display.linkPreviewOff":"Off","user.settings.display.linkPreviewOn":"On","user.settings.display.messageDisplayClean":"Standard","user.settings.display.messageDisplayCleanDes":"Easy to scan and read.","user.settings.display.messageDisplayCompact":"Compact","user.settings.display.messageDisplayCompactDes":"Fit as many messages on the screen as we can.","user.settings.display.messageDisplayDescription":"Select how messages in a channel should be displayed.","user.settings.display.messageDisplayTitle":"Message Display","user.settings.display.militaryClock":"24-hour clock (example: 16:00)","user.settings.display.normalClock":"12-hour clock (example: 4:00 PM)","user.settings.display.preferTime":"Select how you prefer time displayed.","user.settings.display.teammateNameDisplayDescription":"Set how to display other user's names in posts and the Direct Messages list.","user.settings.display.teammateNameDisplayFullname":"Show first and last name","user.settings.display.teammateNameDisplayNicknameFullname":"Show nickname if one exists, otherwise show first and last name","user.settings.display.teammateNameDisplayTitle":"Teammate Name Display","user.settings.display.teammateNameDisplayUsername":"Show username","user.settings.display.theme.applyToAllTeams":"Apply new theme to all my teams","user.settings.display.theme.customTheme":"Custom Theme","user.settings.display.theme.describe":"Open to manage your theme","user.settings.display.theme.import":"Import theme colors from Slack","user.settings.display.theme.otherThemes":"See other themes","user.settings.display.theme.themeColors":"Theme Colors","user.settings.display.theme.title":"Theme","user.settings.display.timezone":"Timezone","user.settings.display.title":"Display Settings","user.settings.general.close":"Close","user.settings.general.confirmEmail":"Confirm Email","user.settings.general.currentEmail":"Current Email","user.settings.general.currentPassword":"Current Password","user.settings.general.email":"Email","user.settings.general.emailGitlabCantUpdate":"Login occurs through GitLab. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailGoogleCantUpdate":"Login occurs through Google. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailHelp1":"Email is used for sign-in, notifications, and password reset. Email requires verification if changed.","user.settings.general.emailHelp2":"Email has been disabled by your System Administrator. No notification emails will be sent until it is enabled.","user.settings.general.emailHelp3":"Email is used for sign-in, notifications, and password reset.","user.settings.general.emailLdapCantUpdate":"Login occurs through AD/LDAP. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailMatch":"The new emails you entered do not match.","user.settings.general.emailOffice365CantUpdate":"Login occurs through Office 365. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emailSamlCantUpdate":"Login occurs through SAML. Email cannot be updated. Email address used for notifications is {email}.","user.settings.general.emptyName":"Click 'Edit' to add your full name","user.settings.general.emptyNickname":"Click 'Edit' to add a nickname","user.settings.general.emptyPassword":"Please enter your current password.","user.settings.general.emptyPosition":"Click 'Edit' to add your job title / position","user.settings.general.field_handled_externally":"This field is handled through your login provider. If you want to change it, you need to do so through your login provider.","user.settings.general.firstName":"First Name","user.settings.general.fullName":"Full Name","user.settings.general.icon":"General Settings Icon","user.settings.general.imageTooLarge":"Unable to upload profile image. File is too large.","user.settings.general.imageUpdated":"Image last updated {date}","user.settings.general.incorrectPassword":"Your password is incorrect.","user.settings.general.lastName":"Last Name","user.settings.general.loginGitlab":"Login done through GitLab ({email})","user.settings.general.loginGoogle":"Login done through Google ({email})","user.settings.general.loginLdap":"Login done through AD/LDAP ({email})","user.settings.general.loginOffice365":"Login done through Office 365 ({email})","user.settings.general.loginSaml":"Login done through SAML ({email})","user.settings.general.mobile.emptyName":"Click to add your full name","user.settings.general.mobile.emptyNickname":"Click to add a nickname","user.settings.general.mobile.emptyPosition":"Click to add your job title / position","user.settings.general.mobile.uploadImage":"Click to upload an image","user.settings.general.newEmail":"New Email","user.settings.general.nickname":"Nickname","user.settings.general.nicknameExtra":"Use Nickname for a name you might be called that is different from your first name and username. This is most often used when two or more people have similar sounding names and usernames.","user.settings.general.notificationsExtra":"By default, you will receive mention notifications when someone types your first name. Go to {notify} settings to change this default.","user.settings.general.notificationsLink":"Notifications","user.settings.general.position":"Position","user.settings.general.positionExtra":"Use Position for your role or job title. This will be shown in your profile popover.","user.settings.general.profilePicture":"Profile Picture","user.settings.general.sendAgain":"Send again","user.settings.general.sending":"Sending","user.settings.general.title":"General Settings","user.settings.general.uploadImage":"Click 'Edit' to upload an image.","user.settings.general.username":"Username","user.settings.general.usernameInfo":"Pick something easy for teammates to recognize and recall.","user.settings.general.usernameReserved":"This username is reserved, please choose a new one.","user.settings.general.usernameRestrictions":"Username must begin with a letter, and contain between {min} to {max} lowercase characters made up of numbers, letters, and the symbols '.', '-', and '_'.","user.settings.general.validEmail":"Please enter a valid email address","user.settings.general.validImage":"Only BMP, JPG or PNG images may be used for profile pictures","user.settings.import_theme.cancel":"Cancel","user.settings.import_theme.importBody":'To import a theme, go to a Slack team and look for "Preferences -> Sidebar Theme". Open the custom theme option, copy the theme color values and paste them here:',"user.settings.import_theme.importHeader":"Import Slack Theme","user.settings.import_theme.submit":"Submit","user.settings.import_theme.submitError":"Invalid format, please try copying and pasting in again.","user.settings.languages.change":"Change interface language","user.settings.languages.promote":"Select which language Mattermost displays in the user interface.\n \nWould you like to help with translations? Join the [Mattermost Translation Server](!http://translate.mattermost.com/) to contribute.","user.settings.mfa.add":"Add MFA to your account","user.settings.mfa.addHelp":"Adding multi-factor authentication will make your account more secure by requiring a code from your mobile phone each time you sign in.","user.settings.mfa.remove":"Remove MFA from your account","user.settings.mfa.removeHelp":"Removing multi-factor authentication means you will no longer require a phone-based passcode to sign-in to your account.","user.settings.mfa.requiredHelp":"Multi-factor authentication is required on this server. Resetting is only recommended when you need to switch code generation to a new mobile device. You will be required to set it up again immediately.","user.settings.mfa.reset":"Reset MFA on your account","user.settings.mfa.title":"Multi-factor Authentication","user.settings.modal.advanced":"Advanced","user.settings.modal.confirmBtns":"Yes, Discard","user.settings.modal.confirmMsg":"You have unsaved changes, are you sure you want to discard them?","user.settings.modal.confirmTitle":"Discard Changes?","user.settings.modal.display":"Display","user.settings.modal.general":"General","user.settings.modal.notifications":"Notifications","user.settings.modal.security":"Security","user.settings.modal.sidebar":"Sidebar","user.settings.modal.title":"Account Settings","user.settings.notifications.allActivity":"For all activity","user.settings.notifications.autoResponder":"Automatic Direct Message Replies","user.settings.notifications.autoResponderDefault":"Hello, I am out of office and unable to respond to messages.","user.settings.notifications.autoResponderDisabled":"Disabled","user.settings.notifications.autoResponderEnabled":"Enabled","user.settings.notifications.autoResponderHint":"Set a custom message that will be automatically sent in response to Direct Messages. Mentions in Public and Private Channels will not trigger the automated reply. Enabling Automatic Replies sets your status to Out of Office and disables email and push notifications.","user.settings.notifications.autoResponderPlaceholder":"Message","user.settings.notifications.channelWide":'Channel-wide mentions "@channel", "@all", "@here"',"user.settings.notifications.comments":"Reply notifications","user.settings.notifications.commentsAny":"Trigger notifications on messages in reply threads that I start or participate in","user.settings.notifications.commentsInfo":"In addition to notifications for when you're mentioned, select if you would like to receive notifications on reply threads.","user.settings.notifications.commentsNever":"Do not trigger notifications on messages in reply threads unless I'm mentioned","user.settings.notifications.commentsRoot":"Trigger notifications on messages in threads that I start","user.settings.notifications.desktop":"Send desktop notifications","user.settings.notifications.desktop.allNoSound":"For all activity, without sound","user.settings.notifications.desktop.allSound":"For all activity, with sound","user.settings.notifications.desktop.allSoundHidden":"For all activity","user.settings.notifications.desktop.mentionsNoSound":"For mentions and direct messages, without sound","user.settings.notifications.desktop.mentionsSound":"For mentions and direct messages, with sound","user.settings.notifications.desktop.mentionsSoundHidden":"For mentions and direct messages","user.settings.notifications.desktop.sound":"Notification sound","user.settings.notifications.desktop.title":"Desktop notifications","user.settings.notifications.email.disabled":"Email notifications are not enabled","user.settings.notifications.email.disabled_long":"Email notifications have not been enabled by your System Administrator.","user.settings.notifications.email.everyHour":"Every hour","user.settings.notifications.email.everyXMinutes":"Every {count, plural, one {minute} other {{count, number} minutes}}","user.settings.notifications.email.immediately":"Immediately","user.settings.notifications.email.never":"Never","user.settings.notifications.email.send":"Send email notifications","user.settings.notifications.emailBatchingInfo":"Notifications received over the time period selected are combined and sent in a single email.","user.settings.notifications.emailInfo":"Email notifications are sent for mentions and direct messages when you are offline or away from {siteName} for more than 5 minutes.","user.settings.notifications.emailNotifications":"Email notifications","user.settings.notifications.header":"Notifications","user.settings.notifications.icon":"Notification Settings Icon","user.settings.notifications.info":"Desktop notifications are available on Edge, Firefox, Safari, Chrome and Mattermost Desktop Apps.","user.settings.notifications.mentionsInfo":'Mentions trigger when someone sends a message that includes your username ("@{username}") or any of the options selected above.',"user.settings.notifications.never":"Never","user.settings.notifications.noWords":"No words configured","user.settings.notifications.off":"Off","user.settings.notifications.on":"On","user.settings.notifications.onlyMentions":"Only for mentions and direct messages","user.settings.notifications.push":"Mobile push notifications","user.settings.notifications.push_notification.status":"Trigger push notifications when","user.settings.notifications.sensitiveName":'Your case sensitive first name "{first_name}"',"user.settings.notifications.sensitiveUsername":'Your non-case sensitive username "{username}"',"user.settings.notifications.sensitiveWords":"Other non-case sensitive words, separated by commas:","user.settings.notifications.soundConfig":"Please configure notification sounds in your browser settings","user.settings.notifications.sounds_info":"Notification sounds are available on IE11, Safari, Chrome and Mattermost Desktop Apps.","user.settings.notifications.title":"Notification Settings","user.settings.notifications.wordsTrigger":"Words that trigger mentions","user.settings.push_notification.allActivity":"For all activity","user.settings.push_notification.allActivityAway":"For all activity when away or offline","user.settings.push_notification.allActivityOffline":"For all activity when offline","user.settings.push_notification.allActivityOnline":"For all activity when online, away or offline","user.settings.push_notification.away":"Away or offline","user.settings.push_notification.disabled":"Push notifications are not enabled","user.settings.push_notification.disabled_long":"Push notifications have not been enabled by your System Administrator.","user.settings.push_notification.info":"Notification alerts are pushed to your mobile device when there is activity in Mattermost.","user.settings.push_notification.offline":"Offline","user.settings.push_notification.online":"Online, away or offline","user.settings.push_notification.onlyMentions":"For mentions and direct messages","user.settings.push_notification.onlyMentionsAway":"For mentions and direct messages when away or offline","user.settings.push_notification.onlyMentionsOffline":"For mentions and direct messages when offline","user.settings.push_notification.onlyMentionsOnline":"For mentions and direct messages when online, away or offline","user.settings.push_notification.send":"Send mobile push notifications","user.settings.push_notification.status_info":"Notification alerts are only pushed to your mobile device when your online status matches the selection above.","user.settings.security.active":"Active","user.settings.security.close":"Close","user.settings.security.currentPassword":"Current Password","user.settings.security.currentPasswordError":"Please enter your current password.","user.settings.security.deauthorize":"Deauthorize","user.settings.security.emailPwd":"Email and Password","user.settings.security.gitlab":"GitLab","user.settings.security.google":"Google","user.settings.security.icon":"Security Settings Icon","user.settings.security.inactive":"Inactive","user.settings.security.lastUpdated":"Last updated {date} at {time}","user.settings.security.ldap":"AD/LDAP","user.settings.security.loginGitlab":"Login done through GitLab","user.settings.security.loginGoogle":"Login done through Google Apps","user.settings.security.loginLdap":"Login done through AD/LDAP","user.settings.security.loginOffice365":"Login done through Office 365","user.settings.security.loginSaml":"Login done through SAML","user.settings.security.logoutActiveSessions":"View and Logout of Active Sessions","user.settings.security.logoutActiveSessions.icon":"Active Sessions Icon","user.settings.security.method":"Sign-in Method","user.settings.security.newPassword":"New Password","user.settings.security.noApps":"No OAuth 2.0 Applications are authorized.","user.settings.security.oauthApps":"OAuth 2.0 Applications","user.settings.security.oauthAppsDescription":"Click 'Edit' to manage your OAuth 2.0 Applications","user.settings.security.oauthAppsHelp":"Applications act on your behalf to access your data based on the permissions you grant them.","user.settings.security.office365":"Office 365","user.settings.security.oneSignin":"You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful.","user.settings.security.password":"Password","user.settings.security.passwordError":"Your password must contain between {min} and {max} characters.","user.settings.security.passwordErrorLowercase":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter.","user.settings.security.passwordErrorLowercaseNumber":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter and at least one number.","user.settings.security.passwordErrorLowercaseNumberSymbol":'Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one number, and at least one symbol (e.g. "~!@#$%^&*()").',"user.settings.security.passwordErrorLowercaseSymbol":'Your password must contain between {min} and {max} characters made up of at least one lowercase letter and at least one symbol (e.g. "~!@#$%^&*()").',"user.settings.security.passwordErrorLowercaseUppercase":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter and at least one uppercase letter.","user.settings.security.passwordErrorLowercaseUppercaseNumber":"Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one uppercase letter, and at least one number.","user.settings.security.passwordErrorLowercaseUppercaseNumberSymbol":'Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one uppercase letter, at least one number, and at least one symbol (e.g. "~!@#$%^&*()").',"user.settings.security.passwordErrorLowercaseUppercaseSymbol":'Your password must contain between {min} and {max} characters made up of at least one lowercase letter, at least one uppercase letter, and at least one symbol (e.g. "~!@#$%^&*()").',"user.settings.security.passwordErrorNumber":"Your password must contain between {min} and {max} characters made up of at least one number.","user.settings.security.passwordErrorNumberSymbol":'Your password must contain between {min} and {max} characters made up of at least one number and at least one symbol (e.g. "~!@#$%^&*()").',"user.settings.security.passwordErrorSymbol":'Your password must contain between {min} and {max} characters made up of at least one symbol (e.g. "~!@#$%^&*()").',"user.settings.security.passwordErrorUppercase":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter.","user.settings.security.passwordErrorUppercaseNumber":"Your password must contain between {min} and {max} characters made up of at least one uppercase letter and at least one number.","user.settings.security.passwordErrorUppercaseNumberSymbol":'Your password must contain between {min} and {max} characters made up of at least one uppercase letter, at least one number, and at least one symbol (e.g. "~!@#$%^&*()").',"user.settings.security.passwordErrorUppercaseSymbol":'Your password must contain between {min} and {max} characters made up of at least one uppercase letter and at least one symbol (e.g. "~!@#$%^&*()").',"user.settings.security.passwordGitlabCantUpdate":"Login occurs through GitLab. Password cannot be updated.","user.settings.security.passwordGoogleCantUpdate":"Login occurs through Google Apps. Password cannot be updated.","user.settings.security.passwordLdapCantUpdate":"Login occurs through AD/LDAP. Password cannot be updated.","user.settings.security.passwordMatchError":"The new passwords you entered do not match.","user.settings.security.passwordMinLength":"Invalid minimum length, cannot show preview.","user.settings.security.passwordOffice365CantUpdate":"Login occurs through Office 365. Password cannot be updated.","user.settings.security.passwordSamlCantUpdate":"This field is handled through your login provider. If you want to change it, you need to do so through your login provider.","user.settings.security.retypePassword":"Retype New Password","user.settings.security.saml":"SAML","user.settings.security.switchEmail":"Switch to using email and password","user.settings.security.switchGitlab":"Switch to using GitLab SSO","user.settings.security.switchGoogle":"Switch to using Google SSO","user.settings.security.switchLdap":"Switch to using AD/LDAP","user.settings.security.switchOffice365":"Switch to using Office 365 SSO","user.settings.security.switchSaml":"Switch to using SAML SSO","user.settings.security.title":"Security Settings","user.settings.security.viewHistory":"View Access History","user.settings.security.viewHistory.icon":"Access History Icon","user.settings.sidebar.after_seven_days":"After 7 days with no new messages","user.settings.sidebar.autoCloseDMDesc":"Direct Message conversations can be reopened with the + button in the sidebar or using the Channel Switcher (CTRL+K).","user.settings.sidebar.autoCloseDMTitle":"Automatically Close Direct Messages","user.settings.sidebar.channelSwitcherSectionDesc.mac":"The channel switcher is shown at the bottom of the sidebar and is used to jump between channels quickly. It can also be accessed using CMD + K.","user.settings.sidebar.channelSwitcherSectionDesc.windows":"The channel switcher is shown at the bottom of the sidebar and is used to jump between channels quickly. It can also be accessed using CTRL + K.","user.settings.sidebar.channelSwitcherSectionTitle":"Channel Switcher","user.settings.sidebar.favorites":"Favorites grouped separately","user.settings.sidebar.favoritesDesc":"Channels marked as favorites will be grouped separately.","user.settings.sidebar.favoritesShort":"Favorites grouped separately","user.settings.sidebar.groupAndSortChannelsTitle":"Channel grouping and sorting","user.settings.sidebar.groupByNone":"Combine all channel types","user.settings.sidebar.groupByNoneShort":"No grouping","user.settings.sidebar.groupByType":"Channels grouped by type","user.settings.sidebar.groupByTypeShort":"Group by channel type","user.settings.sidebar.groupChannelsTitle":"Channel grouping","user.settings.sidebar.groupDesc":"Group channels by type, or combine all types into a list.","user.settings.sidebar.icon":"Sidebar Settings Icon","user.settings.sidebar.never":"Never","user.settings.sidebar.off":"Off","user.settings.sidebar.on":"On","user.settings.sidebar.sortAlpha":"Alphabetically","user.settings.sidebar.sortAlphaShort":"sorted alphabetically","user.settings.sidebar.sortChannelsTitle":"Channel sorting","user.settings.sidebar.sortDesc":"Sort channels alphabetically, or by most recent post.","user.settings.sidebar.sortRecent":"Recency","user.settings.sidebar.sortRecentShort":"sorted by recency","user.settings.sidebar.title":"Sidebar Settings","user.settings.sidebar.unreads":"Unreads grouped separately","user.settings.sidebar.unreadsDesc":"Group unread channels separately until read.","user.settings.sidebar.unreadsFavoritesShort":"Unreads and favorites grouped separately","user.settings.sidebar.unreadsShort":"Unreads grouped separately","user.settings.timezones.automatic":"Set automatically","user.settings.timezones.change":"Change timezone","user.settings.timezones.promote":"Select the timezone used for timestamps in the user interface and email notifications.","user.settings.tokens.activate":"Enable","user.settings.tokens.cancel":"Cancel","user.settings.tokens.clickToEdit":"Click 'Edit' to manage your personal access tokens","user.settings.tokens.confirmCopyButton":"Yes, I have copied the token","user.settings.tokens.confirmCopyMessage":"Make sure you have copied and saved the access token below. You won't be able to see it again!","user.settings.tokens.confirmCopyTitle":"Have you copied your token?","user.settings.tokens.confirmCreateButton":"Yes, Create","user.settings.tokens.confirmCreateMessage":"You are generating a personal access token with System Admin permissions. Are you sure want to create this token?","user.settings.tokens.confirmCreateTitle":"Create System Admin Personal Access Token","user.settings.tokens.confirmDeleteButton":"Yes, Delete","user.settings.tokens.confirmDeleteMessage":"Any integrations using this token will no longer be able to access the Mattermost API. You cannot undo this action. \n \nAre you sure want to delete the **{description}** token?","user.settings.tokens.confirmDeleteTitle":"Delete Token?","user.settings.tokens.copy":"Please copy the access token below. You won't be able to see it again!","user.settings.tokens.create":"Create New Token","user.settings.tokens.deactivate":"Disable","user.settings.tokens.deactivatedWarning":"(Disabled)","user.settings.tokens.delete":"Delete","user.settings.tokens.description":"[Personal access tokens](!https://about.mattermost.com/default-user-access-tokens) function similarly to session tokens and can be used by integrations to [authenticate against the REST API](!https://about.mattermost.com/default-api-authentication).","user.settings.tokens.description_mobile":"[Personal access tokens](!https://about.mattermost.com/default-user-access-tokens) function similarly to session tokens and can be used by integrations to [authenticate against the REST API](!https://about.mattermost.com/default-api-authentication). Create new tokens on your desktop.","user.settings.tokens.id":"Token ID: ","user.settings.tokens.name":"Token Description: ","user.settings.tokens.nameHelp":"Enter a description for your token to remember what it does.","user.settings.tokens.nameRequired":"Please enter a description.","user.settings.tokens.save":"Save","user.settings.tokens.title":"Personal Access Tokens","user.settings.tokens.token":"Access Token: ","user.settings.tokens.tokenDesc":"Token Description: ","user.settings.tokens.tokenId":"Token ID: ","user.settings.tokens.tokenLoading":"Loading...","user.settings.tokens.userAccessTokensNone":"No personal access tokens.","version_bar.new":"A new version of Mattermost is available.","version_bar.refresh":"Refresh the app now","view_image_popover.download":"Download","view_image_popover.file":"File {count, number} of {total, number}","view_image_popover.open":"Open","view_image_popover.publicLink":"Get Public Link","view_image.loading":"Loading ","web.footer.about":"About","web.footer.help":"Help","web.footer.privacy":"Privacy","web.footer.terms":"Terms","web.header.back":"Back","web.header.logout":"Logout","web.root.signup_info":"All team communication in one place, searchable and accessible anywhere","widgets.channels_input.empty":"No channels found","widgets.channels_input.loading":"Loading","widgets.emails_input.invalid_email":"Type email address","widgets.emails_input.valid_email":"Add **{email}**","widgets.users_emails_input.empty":"Add users or email addresses","widgets.users_emails_input.loading":"Loading","widgets.users_emails_input.no_user_found_matching":"No one found matching **{text}**, type email address","widgets.users_emails_input.valid_email":"Add **{email}**",yourcomputer:"Your computer"}},1878:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return Ve});n(88),n(43),n(33),n(34),n(25),n(44),n(304),n(185),n(245);var r=n(183),a=n.n(r),o=n(30),i=n.n(o),s=n(7),l=n.n(s),c=n(1895),u=n.n(c),p=n(435),d=n(946),m=n(213),f=n(24),h=n(38),b=n(105),y=n(420),g=n(1493),v=n(1622),_=n(404),E=n(319),w=n(1873),O=(n(2379),n(0)),S=n(1987),C=n(2380),P=n(2353),T=n(428),j=n(2083),k=n.n(j),M=n(2084),N=n.n(M),R=n(2085),I=n.n(R),A=n(1776),x=n.n(A),L=n(2086),D=n.n(L),U=n(2087),q=n.n(U),H=n(2088),F=n.n(H),B=n(2089),G=n.n(B),V=n(2090),W=n.n(V),z=n(2091),K=n.n(z),Y=n(2092),Q=n.n(Y),J=n(2093),Z=n.n(J),X=n(2094),$=n.n(X),ee=n(2095),te=n.n(ee),ne=n(2096),re=n.n(ne),ae=n(2097),oe=n.n(ae),ie=n(2098),se=n.n(ie),le=n(2099),ce=n.n(le),ue=n(2100),pe=n.n(ue),de=n(13),me=n(307),fe=n(23),he=n(2101);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){we(e,t,n[t])})}return e}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n(1879)(a.a);var Se=Object(T.b)(ce.a),Ce=Object(T.b)(k.a),Pe=Object(T.b)(W.a),Te=Object(T.b)(N.a),je=Object(T.b)(I.a),ke=Object(T.b)(x.a),Me=Object(T.b)(D.a),Ne=Object(T.b)(q.a),Re=Object(T.b)(F.a),Ie=Object(T.b)(G.a),Ae=Object(T.b)(K.a),xe=Object(T.b)(Q.a),Le=Object(T.b)(Z.a),De=Object(T.b)($.a),Ue=Object(T.b)(te.a),qe=Object(T.b)(re.a),He=Object(T.b)(oe.a),Fe=Object(T.b)(se.a),Be=Object(T.b)(pe.a),Ge=function(e){var t=e.component,n=Oe(e,["component"]);return l.a.createElement(p.b,Object.assign({},n,{render:function(e){return l.a.createElement(ke,e,l.a.createElement(t,e))}}))},Ve=function(t){function n(t){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=this,i=ve(n).call(this,t),r=!i||"object"!==be(i)&&"function"!=typeof i?_e(o):i,we(_e(r),"onConfigLoaded",function(){Object(fe.N)()&&Object(fe.o)();var t=O.Q.DIAGNOSTICS_SEGMENT_KEY,n=r.props.diagnosticId;null!=t&&""!==t&&!t.startsWith("placeholder")&&r.props.diagnosticsEnabled&&function(){var r=e.window.analytics=e.window.analytics||[];if(!r.initialize)if(r.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{r.invoked=!0,r.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"],r.factory=function(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var o=Array.prototype.slice.call(n);return o.unshift(e),r.push(o),r}};for(var a=0;a<r.methods.length;a++){var o=r.methods[a];r[o]=r.factory(o)}r.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},r.SNIPPET_VERSION="3.0.1",r.load(t),r.identify(n,{},{context:{ip:"0.0.0.0"},page:{path:"",referrer:"",search:"",title:"",url:""},anonymousId:"00000000000000000000000000"}),r.page("ApplicationLoaded",{path:"",referrer:"",search:"",title:"",url:""},{context:{ip:"0.0.0.0"},anonymousId:"00000000000000000000000000"})}}();var a=function(){"/"===r.props.location.pathname&&r.props.noAccounts&&r.props.history.push("/signup_user_complete"),Object(w.a)().then(function(){r.setState({configLoaded:!0})})};e.Intl?a():E.f(a),Object(_.c)()(de.a.dispatch,de.a.getState);var o=Object(f.getConfig)(de.a.getState()).IosAppDownloadLink,i=Object(f.getConfig)(de.a.getState()).AndroidAppDownloadLink,s="/reset_password_complete"===r.props.location.pathname;o&&h.k()&&!v.a.hasSeenLandingPage()&&!s?(r.props.history.push("/get_ios_app?redirect_to="+encodeURIComponent(r.props.location.pathname)+encodeURIComponent(r.props.location.search)),v.a.setLandingPageSeen(!0)):i&&h.b()&&!v.a.hasSeenLandingPage()&&!s&&(r.props.history.push("/get_android_app?redirect_to="+encodeURIComponent(r.props.location.pathname)+encodeURIComponent(r.props.location.search)),v.a.setLandingPageSeen(!0))}),we(_e(r),"redirectIfNecessary",function(e){"/"===e.location.pathname&&(r.props.noAccounts?r.props.history.push("/signup_user_complete"):e.showTermsOfService&&r.props.history.push("/terms_of_service"))}),r.currentCategoryFocus=0,r.currentSidebarFocus=0,Object(d.setUrl)(Object(me.e)()),Object(m.setSystemEmojis)(b.a),a()(window).bind("storage",function(e){if(e.originalEvent.key===O.G.LOGOUT&&e.originalEvent.storageArea===localStorage&&e.originalEvent.newValue){if(v.a.isSignallingLogout(e.originalEvent.newValue))return;console.log("detected logout from a different tab"),g.e("/",!1,!1)}if(e.originalEvent.key===O.G.LOGIN&&e.originalEvent.storageArea===localStorage&&e.originalEvent.newValue){if(v.a.isSignallingLogin(e.originalEvent.newValue))return;console.log("detected login from a different tab"),location.reload()}}),document.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation()}),document.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()}),u.a.attach(document.body),r.state={configLoaded:!1},h.f()||(r.a11yController=new he.a),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(n,l.a.Component),r=n,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.redirectIfNecessary(e)}},{key:"componentDidMount",value:function(){var e=this;this.props.actions.loadMeAndConfig().then(function(t){"/"===e.props.location.pathname&&t[2]&&t[2].data&&g.f(),e.onConfigLoaded()}),Object(y.e)()}},{key:"componentWillUnmount",value:function(){a()(window).unbind("storage")}},{key:"render",value:function(){return this.state.configLoaded?l.a.createElement(C.a,null,l.a.createElement(p.d,null,l.a.createElement(p.b,{path:"/error",component:Ce}),l.a.createElement(S.a,{path:"/login",component:Te}),l.a.createElement(S.a,{path:"/reset_password",component:Me}),l.a.createElement(S.a,{path:"/reset_password_complete",component:Ne}),l.a.createElement(S.a,{path:"/signup_user_complete",component:Re}),l.a.createElement(S.a,{path:"/signup_email",component:Ie}),l.a.createElement(S.a,{path:"/should_verify_email",component:Ae}),l.a.createElement(S.a,{path:"/do_verify_email",component:xe}),l.a.createElement(S.a,{path:"/claim",component:Le}),l.a.createElement(S.a,{path:"/help",component:De}),l.a.createElement(Ge,{path:"/terms_of_service",component:Pe}),l.a.createElement(p.b,{path:"/get_ios_app",component:Ue}),l.a.createElement(p.b,{path:"/get_android_app",component:qe}),l.a.createElement(Ge,{path:"/admin_console",component:je}),l.a.createElement(S.b,{path:"/select_team",component:He}),l.a.createElement(S.b,{path:"/oauth/authorize",component:Fe}),l.a.createElement(S.b,{path:"/create_team",component:Se}),l.a.createElement(Ge,{path:"/mfa",component:Be}),l.a.createElement(Ge,{path:"/:team",component:P.a}),l.a.createElement(p.a,{to:ye({},this.props.location,{pathname:"/login"})}))):l.a.createElement("div",null)}}])&&ge(r.prototype,o),i&&ge(r,i),n}();we(Ve,"propTypes",{diagnosticsEnabled:i.a.bool,diagnosticId:i.a.string,noAccounts:i.a.bool,showTermsOfService:i.a.bool,actions:i.a.shape({loadMeAndConfig:i.a.func.isRequired}).isRequired})}).call(this,n(41))},1896:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});n(116),n(25),n(117);var r=n(0);function a(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,l,"next",e)}function l(e){a(i,r,o,s,l,"throw",e)}s(void 0)})}}function i(){return function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:r.e.INCREMENT_WS_ERROR_COUNT});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}function s(){return function(){var e=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:r.e.RESET_WS_ERROR_COUNT});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},1924:function(e,t,n){},1967:function(e,t,n){e.exports=function(e){Promise.all([n.e(1),n.e(22),n.e(16)]).then(function(t){e(n(2356))}.bind(null,n)).catch(n.oe)}},1973:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});n(88),n(43);var r=n(30),a=n.n(r),o=n(7),i=n.n(o),s=n(1769),l=n(419),c=n.n(l),u=n(0),p=n(1549);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={display:"flex",flexDirection:"column",alignItems:"center",zIndex:"10"},v=function(t){function n(t){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),a=this,o=f(n).call(this,t),r=!o||"object"!==d(o)&&"function"!=typeof o?h(a):o,y(h(r),"showTooltip",function(t){if(clearTimeout(r.hideTimeout),!r.show){var n=e(t.target),a=e(r.tooltipContainerRef.current);clearTimeout(r.showTimeout),r.showTimeout=setTimeout(function(){r.show=!0,a.show(),a.children().on("mouseover",function(){return clearTimeout(r.hideTimeout)}),a.children().on("mouseleave",function(e){null!==e.toElement&&r.hideTooltip()}),r.popper=new s.a(n,a,{placement:"bottom",modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1}}})},u.i.OVERLAY_TIME_DELAY)}}),y(h(r),"hideTooltip",function(){clearTimeout(r.hideTimeout),r.hideTimeout=setTimeout(function(){r.show=!1,clearTimeout(r.showTimeout),e(r.tooltipContainerRef.current).hide()},u.i.OVERLAY_TIME_DELAY_SMALL)}),r.tooltipContainerRef=i.a.createRef(),r.show=!1,r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(n,i.a.PureComponent),r=n,(a=[{key:"render",value:function(){var e=this.props,t=e.href,n=e.title;return i.a.createElement(i.a.Fragment,null,c.a.createPortal(i.a.createElement("div",{style:g,ref:this.tooltipContainerRef},i.a.createElement(p.a,{href:t,pluggableName:"LinkTooltip"})),document.getElementById("root")),i.a.createElement("span",{onMouseOver:this.showTooltip,onMouseLeave:this.hideTooltip},n))}}])&&m(r.prototype,a),o&&m(r,o),n}();y(v,"propTypes",{href:a.a.string.isRequired,title:a.a.string.isRequired})}).call(this,n(183))},1987:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return m});n(43),n(33),n(34),n(25),n(44),n(245);var r=n(7),a=n.n(r),o=n(435),i=n(1988),s=n.n(i),l=n(1776),c=n.n(l),u=n(428);function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=function(e){var t=e.component,n=p(e,["component"]);return a.a.createElement(o.b,Object.assign({},n,{render:function(e){return a.a.createElement(u.a,Object.assign({doLoad:s.a},e),a.a.createElement(t,e))}}))},m=function(e){var t=e.component,n=p(e,["component"]);return a.a.createElement(o.b,Object.assign({},n,{render:function(e){return a.a.createElement(u.a,Object.assign({doLoad:c.a},e),a.a.createElement(u.a,Object.assign({doLoad:s.a},e),a.a.createElement(t,e)))}}))}},1988:function(e,t,n){e.exports=function(e){n.e(28).then(function(t){e(n(2373))}.bind(null,n)).catch(n.oe)}},1990:function(e,t,n){e.exports=function(e){n.e(9).then(function(t){e(n(2355))}.bind(null,n)).catch(n.oe)}},1996:function(e,t,n){},1997:function(e,t,n){},1998:function(e,t,n){},2001:function(e,t,n){},2002:function(e,t,n){},2010:function(e,t,n){e.exports=n.p+"files/86911ca1b4bd5d37b1681ad52dfcf232.png"},2011:function(e,t,n){e.exports=n.p+"files/ea640a6646c0b59f88f3e0728be11ee1.png"},2032:function(e,t,n){(function(e){var t;(t=e).fn.dragster=function(e){var n=t.extend({enter:t.noop,leave:t.noop,over:t.noop,drop:t.noop},e);return this.each(function(){var e=!1,r=!1,a=t(this);a.on({dragenter:function(t){e?r=!0:(e=!0,a.trigger("dragster:enter",t),t.preventDefault())},dragleave:function(t){r?r=!1:e&&(e=!1),e||r||a.trigger("dragster:leave",t),t.preventDefault()},dragover:function(e){a.trigger("dragster:over",e),e.preventDefault()},drop:function(t){r?r=!1:e&&(e=!1),e||r||a.trigger("dragster:drop",t),t.preventDefault()},"dragster:enter":n.enter,"dragster:leave":n.leave,"dragster:over":n.over,"dragster:drop":n.drop})})}}).call(this,n(183))},2034:function(e,t,n){e.exports=function(e){n.e(31).then(function(t){e(n(2266))}.bind(null,n)).catch(n.oe)}},2035:function(e,t,n){},2045:function(e,t,n){e.exports=n.p+"files/bd956aafccffed574da236f21af209ef.gif"},2046:function(e,t,n){e.exports=n.p+"files/8b03642d36741ba3030a9004a1d56bb0.gif"},2055:function(e,t,n){e.exports=n.p+"files/08e71e3e79544893825f62b7398a18e3.png"},2056:function(e,t,n){e.exports=n.p+"files/f17f34e72125711d05850934588a743b.png"},2082:function(e,t,n){e.exports=n.p+"files/c86ea01a44f1291289b4af3eeb01f261.png"},2083:function(e,t,n){e.exports=function(e){Promise.all([n.e(2),n.e(19)]).then(function(t){e(n(2363))}.bind(null,n)).catch(n.oe)}},2084:function(e,t,n){e.exports=function(e){n.e(10).then(function(t){e(n(2377))}.bind(null,n)).catch(n.oe)}},2085:function(e,t,n){e.exports=function(e){Promise.all([n.e(2),n.e(1),n.e(8),n.e(0),n.e(7)]).then(function(t){e(n(2354))}.bind(null,n)).catch(n.oe)}},2086:function(e,t,n){e.exports=function(e){n.e(23).then(function(t){e(n(2367))}.bind(null,n)).catch(n.oe)}},2087:function(e,t,n){e.exports=function(e){n.e(30).then(function(t){e(n(2376))}.bind(null,n)).catch(n.oe)}},2088:function(e,t,n){e.exports=function(e){n.e(18).then(function(t){e(n(2372))}.bind(null,n)).catch(n.oe)}},2089:function(e,t,n){e.exports=function(e){n.e(11).then(function(t){e(n(2371))}.bind(null,n)).catch(n.oe)}},2090:function(e,t,n){e.exports=function(e){n.e(25).then(function(t){e(n(2370))}.bind(null,n)).catch(n.oe)}},2091:function(e,t,n){e.exports=function(e){n.e(24).then(function(t){e(n(2369))}.bind(null,n)).catch(n.oe)}},2092:function(e,t,n){e.exports=function(e){n.e(17).then(function(t){e(n(2368))}.bind(null,n)).catch(n.oe)}},2093:function(e,t,n){e.exports=function(e){Promise.all([n.e(0),n.e(15)]).then(function(t){e(n(2361))}.bind(null,n)).catch(n.oe)}},2094:function(e,t,n){e.exports=function(e){n.e(29).then(function(t){e(n(2360))}.bind(null,n)).catch(n.oe)}},2095:function(e,t,n){e.exports=function(e){n.e(21).then(function(t){e(n(2382))}.bind(null,n)).catch(n.oe)}},2096:function(e,t,n){e.exports=function(e){n.e(20).then(function(t){e(n(2381))}.bind(null,n)).catch(n.oe)}},2097:function(e,t,n){e.exports=function(e){n.e(14).then(function(t){e(n(2366))}.bind(null,n)).catch(n.oe)}},2098:function(e,t,n){e.exports=function(e){Promise.all([n.e(0),n.e(27)]).then(function(t){e(n(2378))}.bind(null,n)).catch(n.oe)}},2099:function(e,t,n){e.exports=function(e){n.e(13).then(function(t){e(n(2362))}.bind(null,n)).catch(n.oe)}},2100:function(e,t,n){e.exports=function(e){n.e(12).then(function(t){e(n(2365))}.bind(null,n)).catch(n.oe)}},2101:function(e,t,n){"use strict";n.d(t,"a",function(){return c});n(305),n(306),n(118),n(210),n(422);var r=n(0),a=n(23),o=n(38);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={capture:!0},c=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"handleKeyDown",function(e){var n=e.ctrlKey,i=e.altKey,s=e.shiftKey;switch(t.lastInputEventIsKeyboard=!0,!0){case Object(a.S)(e,r.Q.KeyCodes.TAB):if(!Object(a.T)()&&i||Object(a.e)(e))return;t.tabKeyIsPressed=!0;break;case Object(a.S)(e,r.Q.KeyCodes.TILDE):if(!t.regions||!t.regions.length)return;n&&!i&&(t.tildeKeyIsPressed=!0,e.preventDefault(),s?t.previousRegion():t.nextRegion());break;case Object(a.S)(e,r.Q.KeyCodes.F6):if(!Object(o.c)()&&!Object(a.e)(e))return;t.f6KeyIsPressed=!0,e.preventDefault(),s?t.previousRegion():t.nextRegion();break;case Object(a.S)(e,r.Q.KeyCodes.UP):if(!t.navigationInProgress||!t.sections||!t.sections.length)return;t.upArrowKeyIsPressed=!0,e.preventDefault(),t.shouldReverseSections?t.nextSection():t.previousSection();break;case Object(a.S)(e,r.Q.KeyCodes.DOWN):if(!t.navigationInProgress||!t.sections||!t.sections.length)return;t.downArrowKeyIsPressed=!0,e.preventDefault(),t.shouldReverseSections?t.previousSection():t.nextSection();break;case Object(a.S)(e,r.Q.KeyCodes.ESCAPE):if(!t.navigationInProgress)return;e.preventDefault(),t.cancelNavigation();break;case Object(a.S)(e,r.Q.KeyCodes.ENTER):t.enterKeyIsPressed=!0;break;case Object(a.S)(e,r.Q.KeyCodes.SPACE):"BUTTON"===e.target.nodeName&&(e.preventDefault(),e.stopPropagation(),e.target.click())}}),s(this,"handleKeyUp",function(){t.resetInterractionStates()}),s(this,"handleMouseClick",function(e){t.enterKeyIsPressed||(t.lastInputEventIsKeyboard=!1),e.target!==t.activeElement&&t.cancelNavigation()}),s(this,"handleMouseDown",function(){t.mouseIsPressed=!0}),s(this,"handleMouseUp",function(){t.mouseIsPressed=!1}),s(this,"handleFocus",function(e){!t.mouseIsPressed&&t.windowIsFocused&&t.nextElement(e.target,e.path||!0),t.windowIsFocused||(t.windowIsFocused=!0)}),s(this,"handleWindowBlur",function(e){e.target===window&&(t.windowIsFocused=!1)}),s(this,"handleActiveRegionUpdate",function(){t.navigationInProgress&&(t.updateActiveRegion(),t.focusedElement===t.activeRegion&&t.udpateCurrentFocus(!0))}),s(this,"handleActiveSectionUpdate",function(){t.navigationInProgress&&(t.updateActiveSection(),t.focusedElement===t.activeSection&&t.udpateCurrentFocus(!0))}),s(this,"handleActiveElementUpdate",function(){t.navigationInProgress&&(t.updateActiveElement(),t.focusedElement===t.activeElement&&t.udpateCurrentFocus(!0))}),this.regionHTMLCollection=this.getAllRegions(),this.sectionHTMLCollection=null,this.modalHTMLCollection=this.getAllModals(),this.popupHTMLCollection=this.getAllPopups(),this.activeRegion=null,this.activeSection=null,this.activeElement=null,this.mouseIsPressed=!1,this.lastInputEventIsKeyboard=!1,this.enterKeyIsPressed=!1,this.f6KeyIsPressed=!1,this.upArrowKeyIsPressed=!1,this.downArrowKeyIsPressed=!1,this.tabKeyIsPressed=!1,this.tildeKeyIsPressed=!1,this.windowIsFocused=!0,this.resetNavigation=!1,document.addEventListener(r.l.KEY_DOWN,this.handleKeyDown,l),document.addEventListener(r.l.KEY_UP,this.handleKeyUp,l),document.addEventListener(r.l.CLICK,this.handleMouseClick,l),document.addEventListener(r.l.MOUSE_DOWN,this.handleMouseDown,l),document.addEventListener(r.l.MOUSE_UP,this.handleMouseUp,l),document.addEventListener(r.l.FOCUS,this.handleFocus,l),window.addEventListener(r.l.BLUR,this.handleWindowBlur,l)}var t,n,c;return t=e,(n=[{key:"destroy",value:function(){this.clearActiveRegion(),this.clearCurrentFocus(),document.removeEventListener(r.l.KEY_DOWN,this.handleKeyDown,l),document.removeEventListener(r.l.KEY_UP,this.handleKeyUp,l),document.removeEventListener(r.l.CLICK,this.handleMouseClick,l),document.removeEventListener(r.l.MOUSE_DOWN,this.handleMouseDown,l),document.removeEventListener(r.l.MOUSE_UP,this.handleMouseUp,l),document.removeEventListener(r.l.FOCUS,this.handleFocus,l),window.removeEventListener(r.l.BLUR,this.handleWindowBlur,l)}},{key:"nextRegion",value:function(){var e,t=this.regions;t&&t.length&&!this.modalIsOpen&&!this.popupIsOpen&&(e=!this.activeRegion||this.activeRegionIndex===t.length-1||this.resetNavigation?t[0]:t[this.activeRegionIndex+1],this.setActiveRegion(e),this.setCurrentFocus(),this.resetNavigation=!1)}},{key:"previousRegion",value:function(){var e,t=this.regions;t&&t.length&&!this.modalIsOpen&&!this.popupIsOpen&&(e=!this.activeRegion||0!==this.activeRegionIndex&&this.resetNavigation?t[0]:0===this.activeRegionIndex?t[t.length-1]:t[this.activeRegionIndex-1],this.setActiveRegion(e),this.setCurrentFocus(),this.resetNavigation=!1)}},{key:"nextSection",value:function(){var e,t=this.sections,n=this.getLoopNavigationAttribute(this.activeRegion);this.modalIsOpen||this.popupIsOpen||!t||!t.length||!n&&this.activeSectionIndex===t.length-1||(e=this.activeSection&&this.activeSectionIndex<t.length-1?t[this.activeSectionIndex+1]:t[0],this.setActiveSection(e),this.setCurrentFocus(),this.resetNavigation=!0)}},{key:"previousSection",value:function(){var e,t=this.sections,n=this.getLoopNavigationAttribute(this.activeRegion);this.modalIsOpen||this.popupIsOpen||!t||!t.length||!n&&0===this.activeSectionIndex||(e=this.activeSection&&this.activeSectionIndex>0?t[this.activeSectionIndex-1]:this.activeSection&&0===this.activeSectionIndex?t[t.length-1]:t[0],this.setActiveSection(e),this.setCurrentFocus(),this.resetNavigation=!0)}},{key:"nextElement",value:function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a&&a.length?(a.indexOf(this.activeRegion)<0&&(t=a.find(function(e){return!!e.classList&&e.classList.contains(r.b.REGION)})),a.indexOf(this.activeSection)<0&&(n=a.find(function(e){return!!e.classList&&e.classList.contains(r.b.SECTION)}))):a&&"function"==typeof e.closest&&(t=e.closest(".".concat(r.b.REGION)),n=e.closest(".".concat(r.b.SECTION))),t&&this.activeRegion!==t&&this.setActiveRegion(t,!1),n&&this.activeSection!==n&&this.setActiveSection(n),this.setActiveElement(e),this.setCurrentFocus(),this.resetNavigation=!0}},{key:"cancelNavigation",value:function(){this.clearActiveRegion(),this.setCurrentFocus(),this.resetInterractionStates()}},{key:"setActiveRegion",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(this.isElementValid(e,[this.activeRegion])||this.resetNavigation)&&(this.clearActiveRegion(),this.activeRegion=e,this.activeRegion.addEventListener(r.c.UPDATE,this.handleActiveRegionUpdate),this.activeRegion.dispatchEvent(new Event(r.c.ACTIVATE)),this.updateActiveRegion(),this.sectionHTMLCollection=this.getAllSectionsForRegion(this.activeRegion),t&&this.getFocusChildAttribute(this.activeRegion)&&this.sections&&this.sections.length&&this.setActiveSection(this.sections[0]))}},{key:"setActiveSection",value:function(e){this.isElementValid(e,[this.activeSection])&&(this.clearActiveSection(),this.activeSection=e,this.activeSection.addEventListener(r.c.UPDATE,this.handleActiveSectionUpdate),this.activeSection.dispatchEvent(new Event(r.c.ACTIVATE)),this.updateActiveSection())}},{key:"setActiveElement",value:function(e){this.isElementValid(e,[this.activeElement])&&(this.clearActiveElement(),this.activeElement=e,this.activeElement.addEventListener(r.c.UPDATE,this.handleActiveElementUpdate),this.activeElement.dispatchEvent(new Event(r.c.ACTIVATE)),this.updateActiveElement())}},{key:"setCurrentFocus",value:function(){this.clearCurrentFocus(),this.focusedElement&&(document.activeElement!==this.focusedElement&&this.focusedElement.focus(),this.udpateCurrentFocus())}},{key:"updateActiveRegion",value:function(){this.activeRegion&&(this.activeRegion.classList.add(r.b.ACTIVE),this.activeRegion.getAttribute("tabindex")||this.activeRegion.setAttribute("tabindex",-1))}},{key:"updateActiveSection",value:function(){this.activeSection&&(this.activeSection.classList.add(r.b.ACTIVE),this.activeSection.getAttribute("tabindex")||this.activeSection.setAttribute("tabindex",-1))}},{key:"updateActiveElement",value:function(){this.activeElement&&this.activeElement.classList.add(r.b.ACTIVE)}},{key:"udpateCurrentFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.focusedElement&&this.a11yKeyIsPressed||e)&&this.focusedElement.classList.add(r.b.FOCUSED)}},{key:"clearActiveRegion",value:function(){this.activeRegion&&(this.activeRegion.classList.remove(r.b.ACTIVE),this.activeRegion.dispatchEvent(new Event(r.c.DEACTIVATE)),this.activeRegion.removeEventListener(r.c.UPDATE,this.handleActiveRegionUpdate),this.activeRegion=null),this.clearActiveSection()}},{key:"clearActiveSection",value:function(){this.activeSection&&(this.activeSection.classList.remove(r.b.ACTIVE),this.activeSection.dispatchEvent(new Event(r.c.DEACTIVATE)),this.activeSection.removeEventListener(r.c.UPDATE,this.handleActiveSectionUpdate),this.activeSection=null),this.clearActiveElement()}},{key:"clearActiveElement",value:function(){this.activeElement&&(this.activeElement!==this.activeRegion&&this.activeElement!==this.activeSection&&(this.activeElement.classList.remove(r.b.ACTIVE),this.activeElement.dispatchEvent(new Event(r.c.DEACTIVATE))),this.activeElement.removeEventListener(r.c.UPDATE,this.handleActiveElementUpdate),this.activeElement=null)}},{key:"clearCurrentFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Array.from(document.getElementsByClassName(r.b.FOCUSED)).forEach(function(e){e.classList.remove(r.b.FOCUSED)}),e&&document.activeElement.blur()}},{key:"resetInterractionStates",value:function(){this.mouseIsPressed=!1,this.f6KeyIsPressed=!1,this.upArrowKeyIsPressed=!1,this.downArrowKeyIsPressed=!1,this.tabKeyIsPressed=!1,this.tildeKeyIsPressed=!1,this.enterKeyIsPressed=!1}},{key:"getAllRegions",value:function(){return document.getElementsByClassName(r.b.REGION)}},{key:"getAllSectionsForRegion",value:function(e){return e?e.getElementsByClassName(r.b.SECTION):null}},{key:"sortElementsByAttributeOrder",value:function(e){return e&&e.length?Array.from(e).sort(function(e,t){return e.getAttribute(r.a.SORT_ORDER)-t.getAttribute(r.a.SORT_ORDER)}):[]}},{key:"elementIsVisible",value:function(e){return e&&e.offsetParent}},{key:"getAllModals",value:function(){return document.getElementsByClassName(r.b.MODAL)}},{key:"getAllPopups",value:function(){return document.getElementsByClassName(r.b.POPUP)}},{key:"getLoopNavigationAttribute",value:function(e){var t=e.getAttribute(r.a.LOOP_NAVIGATION);return!t||"false"!==t.toLowerCase()}},{key:"getOrderReverseAttribute",value:function(e){var t=e.getAttribute(r.a.ORDER_REVERSE);return!(!t||"true"!==t.toLowerCase())}},{key:"getFocusChildAttribute",value:function(e){var t=e.getAttribute(r.a.FOCUS_CHILD);return!(!t||"true"!==t.toLowerCase())}},{key:"isElementValid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!(!e||!e.classList||t.includes(e))}},{key:"navigationInProgress",get:function(){return!!(this.regions&&this.regions.length&&this.isElementValid(this.activeRegion))&&(!!this.lastInputEventIsKeyboard&&(!this.modalIsOpen&&!this.popupIsOpen&&!!this.isElementValid(this.activeElement)))}},{key:"regions",get:function(){var e=this,t=this.sortElementsByAttributeOrder(this.regionHTMLCollection);return t=t.filter(function(t){return e.elementIsVisible(t)})}},{key:"sections",get:function(){var e=this,t=this.sortElementsByAttributeOrder(this.sectionHTMLCollection);return t=t.filter(function(t){return e.elementIsVisible(t)}),this.shouldReverseSections&&t.reverse(),t}},{key:"activeRegionIndex",get:function(){return this.activeRegion?this.regions.indexOf(this.activeRegion):null}},{key:"activeSectionIndex",get:function(){return this.activeSection?this.sections.indexOf(this.activeSection):null}},{key:"shouldReverseSections",get:function(){return!!this.activeRegion&&this.getOrderReverseAttribute(this.activeRegion)}},{key:"focusedElement",get:function(){var e;return this.activeElement?e=this.activeElement:this.activeSection?e=this.activeSection:this.activeRegion&&(e=this.activeRegion),e}},{key:"a11yKeyIsPressed",get:function(){return this.f6KeyIsPressed||this.upArrowKeyIsPressed||this.downArrowKeyIsPressed||this.tabKeyIsPressed||this.tildeKeyIsPressed}},{key:"modalIsOpen",get:function(){return this.modalHTMLCollection.length>0}},{key:"popupIsOpen",get:function(){return this.popupHTMLCollection.length>0}}])&&i(t.prototype,n),c&&i(t,c),e}()},2353:function(e,t,n){"use strict";n(247);var r=n(418),a=n(20),o=n(435),i=n(40),s=n(75),l=n(308),c=n(35),u=n(24),p=n(12),d=n(31),m=n(16),f=n(215),h=n(689),b=n(1565),y=n(1777),g=(n(88),n(43),n(116),n(25),n(74),n(422),n(117),n(30)),v=n.n(g),_=n(7),E=n.n(_),w=n(1989),O=n.n(w),S=n(1591),C=n(1493),P=n(0),T=n(38),j=n(23),k=n(428),M=n(1990),N=n.n(M),R=n(1558),I=n(1549),A=n(1733),x=n(66),L=n(14),D=n(96),U=n(1503),q=n(423),H=n(106);function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function G(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){B(o,r,a,i,s,"next",e)}function s(e){B(o,r,a,i,s,"throw",e)}i(void 0)})}}function V(e){return function(){var t=G(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.editPost(e)(n,r);case 2:return(a=t.sent).error&&"api.post.update_post.permissions_time_limit.app_error"===a.error.server_error_id&&n(Object(H.logError)({type:P.h.ANNOUNCEMENT,message:a.error.message},!0)),t.abrupt("return",a);case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}function W(e,t,n,r,a,o){return function(){var r=G(regeneratorRuntime.mark(function r(i){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i({type:P.e.SELECT_ATTACHMENT_MENU_ACTION,postId:e,data:F({},t,{text:a,value:o})}),i(x.doPostActionWithCookie(e,t,n,o));case 2:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()}var z=n(427),K=n(1739),Y=n(56),Q=n(119);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function X(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Z(o,r,a,i,s,"next",e)}function s(e){Z(o,r,a,i,s,"throw",e)}i(void 0)})}}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ee(t).call(this,e),n=!a||"object"!==J(a)&&"function"!=typeof a?te(r):a,re(te(n),"handleDelete",X(regeneratorRuntime.mark(function e(){var t,r,a,o,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.actions,a=t.channelName,o=t.focusedPostId,i=t.post,s=t.teamName,e.next=3,r.deleteAndRemovePost(i);case 3:l=e.sent,i.id===o&&a&&Q.a.push("/"+s+"/channels/"+a),l.data&&n.onHide();case 6:case"end":return e.stop()}},e)}))),re(te(n),"handleEntered",function(){n.deletePostBtn&&n.deletePostBtn.focus()}),re(te(n),"onHide",function(){var e;(n.setState({show:!1}),T.m())||(e=n.props.isRHS?document.getElementById("reply_textbox"):document.getElementById("post_textbox"))&&e.focus()}),n.state={show:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this,t="";this.props.commentCount>0&&""===this.props.post.root_id&&(t=E.a.createElement(Y.c,{id:"delete_post.warning",defaultMessage:"This post has {count, number} {count, plural, one {comment} other {comments}} on it.",values:{count:this.props.commentCount}}));var n=this.props.post.root_id?E.a.createElement(Y.c,{id:"delete_post.comment",defaultMessage:"Comment"}):E.a.createElement(Y.c,{id:"delete_post.post",defaultMessage:"Post"});return E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.state.show,onEntered:this.handleEntered,onHide:this.onHide,onExited:this.props.onHide,enforceFocus:!1,id:"deletePostModal",role:"dialog","aria-labelledby":"deletePostModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"deletePostModalLabel"},E.a.createElement(Y.c,{id:"delete_post.confirm",defaultMessage:"Confirm {term} Delete",values:{term:n}}))),E.a.createElement(K.a.Body,null,E.a.createElement(Y.c,{id:"delete_post.question",defaultMessage:"Are you sure you want to delete this {term}?",values:{term:n}}),E.a.createElement("br",null),E.a.createElement("br",null),t),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},E.a.createElement(Y.c,{id:"delete_post.cancel",defaultMessage:"Cancel"})),E.a.createElement("button",{ref:function(t){e.deletePostBtn=t},type:"button",autoFocus:!0,className:"btn btn-danger",onClick:this.handleDelete,id:"deletePostModalButton"},E.a.createElement(Y.c,{id:"delete_post.del",defaultMessage:"Delete"}))))}}])&&$(n.prototype,r),a&&$(n,a),t}();re(ae,"propTypes",{channelName:v.a.string,focusedPostId:v.a.string,teamName:v.a.string,post:v.a.object.isRequired,commentCount:v.a.number.isRequired,isRHS:v.a.bool.isRequired,onHide:v.a.func.isRequired,actions:v.a.shape({deleteAndRemovePost:v.a.func.isRequired})});var oe=Object(r.connect)(function(e,t){var n=Object(m.getChannel)(e,t.post.channel_id),r="";return n&&(r=n.name),{channelName:r,focusedPostId:e.views.channel.focusedPostId,teamName:Object(d.getCurrentTeam)(e).name}},function(e){return{actions:Object(a.bindActionCreators)({deleteAndRemovePost:q.c},e)}})(ae),ie=n(1685),se=n(1768),le=(n(33),n(34),n(44),n(1775)),ce=n(1774),ue=n(1992),pe=n.n(ue),de=n(1555),me=n(1),fe={OPEN_EMBED_PAGE:1,SHARE:2},he={TRENDING:0,REACTIONS:1},be={mattermost:"mattermost"};n(211),n(304);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ve(this,_e(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement("svg",{width:"100%",height:"100%",viewBox:"-10 -10 40 40",version:"1.1"},E.a.createElement("g",{id:"ic_search",transform:"matrix(0.959095,-9.6091e-18,-1.00189e-17,0.959095,-0.0633002,-0.777826)"},E.a.createElement("path",{d:"M2.648,15.872C3.433,16.658 4.376,17.287 5.454,17.758C6.553,18.229 7.698,18.454 8.888,18.454C10.728,18.454 12.389,17.938 13.893,16.905L18.18,21.192C18.494,21.506 18.854,21.664 19.302,21.664C19.751,21.664 20.111,21.506 20.447,21.192C20.761,20.855 20.919,20.496 20.919,20.047C20.919,19.621 20.761,19.239 20.447,18.925L16.16,14.638C17.193,13.134 17.709,11.473 17.709,9.633C17.709,8.443 17.484,7.298 17.013,6.198C16.542,5.121 15.913,4.178 15.128,3.393C14.342,2.607 13.399,1.979 12.322,1.507C11.222,1.036 10.077,0.811 8.888,0.811C7.698,0.811 6.553,1.036 5.454,1.507C4.376,1.979 3.433,2.607 2.648,3.393C1.862,4.178 1.234,5.121 0.762,6.198C0.291,7.298 0.066,8.443 0.066,9.633C0.066,10.822 0.291,11.967 0.762,13.067C1.234,14.144 1.862,15.087 2.648,15.872ZM8.888,4.021C10.436,4.021 11.761,4.56 12.861,5.66C13.96,6.76 14.499,8.084 14.499,9.633C14.499,11.181 13.96,12.506 12.861,13.606C11.761,14.705 10.436,15.244 8.888,15.244C7.339,15.244 6.015,14.705 4.915,13.606C3.815,12.506 3.276,11.181 3.276,9.633C3.276,8.084 3.815,6.76 4.915,5.66C6.015,4.56 7.339,4.021 8.888,4.021Z",style:{fill:"inherit"}}))))}}])&&ge(n.prototype,r),a&&ge(n,a),t}();function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ce(this,Pe(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement("svg",{width:"100%",height:"100%",viewBox:"-10 -10 40 40",enableBackground:"new 0 0 20 20",version:"1.1"},E.a.createElement("g",{transform:"matrix(0.952381,0,0,1,0,0)"},E.a.createElement("path",{fill:"inherit",d:"M10.5 11.7L2.2 19.8C2 19.9 1.9 20 1.7 20 1.6 20 1.4 19.9 1.3 19.8L0.2 18.8C0.1 18.7 0 18.5 0 18.3 0 18.2 0.1 18 0.2 17.9L8.3 10 0.2 2.1C0.1 2 0 1.8 0 1.7 0 1.5 0.1 1.3 0.2 1.2L1.3 0.2C1.4 0.1 1.6 0 1.7 0 1.9 0 2 0.1 2.2 0.2L10.5 8.3 18.8 0.2C19 0.1 19.1 0 19.3 0 19.4 0 19.6 0.1 19.7 0.2L20.8 1.2C20.9 1.3 21 1.5 21 1.7 21 1.8 20.9 2 20.8 2.1L12.7 10 20.8 17.9C20.9 18 21 18.2 21 18.3 21 18.5 20.9 18.7 20.8 18.8L19.7 19.8C19.6 19.9 19.4 20 19.3 20 19.1 20 19 19.9 18.8 19.8L10.5 11.7Z"}))))}}])&&Se(n.prototype,r),a&&Se(n,a),t}(),ke=n(1499),Me=n(57);n(1996);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De={saveSearchBarText:de.saveSearchBarText,saveSearchScrollPosition:de.saveSearchScrollPosition,searchTextUpdate:de.searchTextUpdate},Ue=Object(me.makeStyleFromTheme)(function(e){return{background:{backgroundColor:e.centerChannelBg},icon:{fill:Object(me.changeOpacity)(e.centerChannelColor,.4)},inputBackground:{backgroundColor:e.centerChannelBg},input:{borderColor:Object(me.changeOpacity)(e.centerChannelColor,.12)}}}),qe=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ie(t).call(this,e),n=!a||"object"!==Ne(a)&&"function"!=typeof a?Ae(r):a,Le(Ae(n),"parseSearchText",function(e){return e.trim().split(/ +/).join("-")}),Le(Ae(n),"removeExtraSpaces",function(e){return e.trim().split(/ +/).join(" ")}),Le(Ae(n),"updateSearchInputValue",function(e){n.searchInput.value=e,n.props.saveSearchBarText(e)}),Le(Ae(n),"handleSubmit",function(e){e.preventDefault(),n.triggerSearch(n.searchInput.value),n.searchInput.blur()}),Le(Ae(n),"triggerSearch",function(e){var t=n.props.onSearch;n.props.searchTextUpdate(n.parseSearchText(e)),t(),n.props.saveSearchScrollPosition(0)}),Le(Ae(n),"handleChange",function(e){clearTimeout(n.searchTimeout);var t=e.target.value,r=n.props,a=r.onCategories,o=r.action;n.props.saveSearchBarText(t),""===t?a():"reactions"===o&&n.isFilteredTags(t)||(n.searchTimeout=setTimeout(function(){n.triggerSearch(t)},500))}),Le(Ae(n),"focusInput",function(){n.setState({inputFocused:!0})}),Le(Ae(n),"blurInput",function(){n.setState({inputFocused:!1})}),Le(Ae(n),"isFilteredTags",function(e){var t=n.removeExtraSpaces(e),r=n.props.tagsList,a=t.toLowerCase(),o=r&&r.length?r.filter(function(e){return t&&-1===e.tagName.indexOf(a)?"":e}):[];return Boolean(o.length)}),Le(Ae(n),"clearSearchHandle",function(){var e=n.props,t=e.action,r=e.onTrending,a=e.onCategories;n.updateSearchInputValue(""),"reactions"===t?a():r()}),n.state={inputFocused:!1},n.searchTimeout=null,n.props.saveSearchBarText(""),n.props.searchTextUpdate(""),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,_["Component"]),n=t,(r=[{key:"componentDidUpdate",value:function(e){var t=this.props.searchBarText;t!==e.searchBarText&&("trending"===t?this.updateSearchInputValue(""):this.updateSearchInputValue(t))}},{key:"shouldComponentUpdate",value:function(e,t){return!e.searchBarText&&this.props.searchBarText||e.searchBarText&&!this.props.searchBarText||t.inputFocused!==this.state.inputFocused}},{key:"render",value:function(){var e=this,t=Ue(this.props.theme),n=this.props.searchBarText?E.a.createElement(je,{className:"ic-clear-search",style:t.icon,onClick:this.clearSearchHandle}):null;return E.a.createElement("form",{className:"gfycat-search",method:"get",target:"_top",noValidate:"",onSubmit:this.handleSubmit},E.a.createElement("div",{className:"search-bar",style:t.background},E.a.createElement("div",{className:"search-input-bg",style:t.inputBackground}),E.a.createElement(ke.a,{className:"search-input",name:"searchText",autoFocus:!0,placeholder:{id:Object(Me.b)("gif_picker.gfycat"),defaultMessage:"Search Gfycat"},onChange:this.handleChange,autoComplete:"off",autoCapitalize:"off",onFocus:this.focusInput,onBlur:this.blurInput,ref:function(t){return e.searchInput=t,t},style:t.input}),E.a.createElement(we,{className:"ic ic-search",style:t.icon}),n),E.a.createElement("button",{type:"submit",className:"submit-button"}))}}])&&Re(n.prototype,r),a&&Re(n,a),t}();Le(qe,"propTypes",{searchBarText:v.a.string,tagsList:v.a.array,theme:v.a.object.isRequired,onTrending:v.a.func,onSearch:v.a.func,onCategories:v.a.func,action:v.a.string,saveSearchScrollPosition:v.a.func,saveSearchBarText:v.a.func,searchTextUpdate:v.a.func});var He=Object(r.connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Le(e,t,n[t])})}return e}({},e.entities.gifs.categories,e.entities.gifs.search,{theme:Object(c.getTheme)(e),appProps:e.entities.gifs.app})},De)(qe);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(this,Ve(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement("svg",{className:"ic-svg ic-trending-svg",width:"11px",height:"15px",viewBox:"0 0 11 15",version:"1.1"},E.a.createElement("g",{id:"Finalized-Design",stroke:"none",fill:"inherit"},E.a.createElement("g",{id:"GfyCat---Gycat-Tab",transform:"translate(-1212.000000, -619.000000)",fill:"inherit"},E.a.createElement("g",{id:"modal---emojis",transform:"translate(1147.000000, 542.000000)"},E.a.createElement("g",{id:"tabs---gfycat",transform:"translate(1.000000, 68.000000)"},E.a.createElement("g",{id:"tab---trending---selected"},E.a.createElement("path",{d:"M69.90625,10.4062776 C69.90625,10.9531513 70.0976562,11.4909106 70.4804688,12.019555 C70.6992188,12.32945 71.1276043,12.7760638 71.765625,13.3593956 C72.3489582,13.9062693 72.7773438,14.3346538 73.0507812,14.6445488 C73.5065106,15.1731932 73.8528644,15.7109525 74.0898438,16.2578262 C74.3632812,16.9505327 74.5,17.6979271 74.5,18.5000083 C74.5,19.4479229 74.2630207,20.3229208 73.7890625,21.1250021 C73.3151043,21.9270834 72.6770832,22.565103 71.875,23.03906 C71.0729168,23.5130171 70.1979168,23.7499958 69.25,23.7499958 C68.3020832,23.7499958 67.4270832,23.5130171 66.625,23.03906 C65.8229168,22.565103 65.1848957,21.9270834 64.7109375,21.1250021 C64.2369793,20.3229208 64,19.4479229 64,18.5000083 C64,17.6432397 64.2005207,16.8320436 64.6015625,16.0664204 C65.0026043,15.3007972 65.5494793,14.6718925 66.2421875,14.1797061 C66.4609375,14.0338733 66.6888019,14.0247585 66.9257812,14.1523625 C67.1627606,14.2799665 67.28125,14.4713723 67.28125,14.7265798 L67.28125,17.6250104 C67.28125,17.9349054 67.3860676,18.1946704 67.5957031,18.4043054 C67.8053387,18.6139405 68.0651043,18.7187578 68.375,18.7187578 C68.6848957,18.7187578 68.9446613,18.6139405 69.1542969,18.4043054 C69.3639324,18.1946704 69.46875,17.9349054 69.46875,17.6250104 C69.46875,17.4427191 69.4049481,17.2330844 69.2773438,16.9961057 C69.2044269,16.8320436 69.0677082,16.576836 68.8671875,16.2304825 C68.4661457,15.5742341 68.1835938,15.0547041 68.0195312,14.6718925 C67.7643231,13.9791859 67.6640625,13.2955938 67.71875,12.6211161 C67.8098957,11.7825763 68.1380207,10.9258077 68.703125,10.0508097 C68.8125,9.86851837 68.9628906,9.76825847 69.1542969,9.75002921 C69.3457031,9.73179994 69.5188801,9.78648731 69.6738281,9.91409132 C69.8287762,10.0416953 69.90625,10.2057574 69.90625,10.4062776 Z M69.2499875,22.437499 C69.9609233,22.437499 70.6171717,22.259765 71.2187328,21.9042971 C71.8202939,21.5488292 72.2988083,21.0703147 72.6542762,20.4687537 C73.0097441,19.8671926 73.1874781,19.2109441 73.1874781,18.5000083 C73.1874781,17.880218 73.0781034,17.3060006 72.8593539,16.7773562 C72.6588337,16.3398572 72.376282,15.9023583 72.0116996,15.4648593 C71.7929502,15.1914225 71.4329248,14.8131683 70.9316241,14.3300964 C70.4303233,13.8470245 70.070298,13.4687703 69.8515485,13.1953335 C69.4869662,12.7760638 69.2135294,12.3567937 69.031238,11.937524 C68.8671759,12.5573143 68.8945196,13.1953335 69.1132691,13.8515819 C69.2408731,14.2343935 69.5143099,14.7812672 69.9335796,15.492203 C70.2252457,15.9661601 70.4166515,16.321628 70.507797,16.5586067 C70.6900884,16.9414183 70.7812338,17.2968862 70.7812338,17.6250104 C70.7812338,18.2812589 70.5442551,18.8463618 70.070298,19.3203189 C69.596341,19.794276 69.031238,20.0312547 68.3749896,20.0312547 C67.7187411,20.0312547 67.1536382,19.794276 66.6796811,19.3203189 C66.205724,18.8463618 65.9687453,18.2812589 65.9687453,17.6250104 L65.9687453,16.0937641 C65.7682251,16.403659 65.60872,16.7819136 65.4902308,17.228527 C65.3717417,17.6751404 65.3124969,18.0989675 65.3124969,18.5000083 C65.3124969,19.2109441 65.4902308,19.8671926 65.8456987,20.4687537 C66.2011666,21.0703147 66.6796811,21.5488292 67.2812422,21.9042971 C67.8828032,22.259765 68.5390517,22.437499 69.2499875,22.437499 Z",id:"icon---trending"}))))))))}}])&&Be(n.prototype,r),a&&Be(n,a),t}();function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qe(this,Je(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement("svg",{className:"ic-svg ic-reactions-svg",width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1"},E.a.createElement("g",{id:"Finalized-Design",stroke:"none",fill:"inherit"},E.a.createElement("g",{id:"GfyCat---Gycat-Tab",transform:"translate(-1348.000000, -620.000000)",fill:"inherit"},E.a.createElement("g",{id:"modal---emojis",transform:"translate(1147.000000, 542.000000)"},E.a.createElement("g",{id:"tabs---gfycat",transform:"translate(1.000000, 68.000000)"},E.a.createElement("g",{id:"tab---category---deselected",transform:"translate(138.000000, 0.000000)"},E.a.createElement("path",{d:"M62,16 L62,10 L68,10 L68,16 L62,16 Z M64,12 L64,14 L66,14 L66,12 L64,12 Z M70,24 L70,18 L76,18 L76,24 L70,24 Z M72,20 L72,22 L74,22 L74,20 L72,20 Z M70,10 L76,10 L76,16 L70,16 L70,10 Z M74,14 L74,12 L72,12 L72,14 L74,14 Z M62,24 L62,18 L68,18 L68,24 L62,24 Z M64,20 L64,22 L66,22 L66,20 L64,20 Z",id:"icon---categories"}))))))))}}])&&Ye(n.prototype,r),a&&Ye(n,a),t}();n(1997);function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var at,ot,it,st={saveSearchBarText:de.saveSearchBarText,searchTextUpdate:de.searchTextUpdate},lt=Object(me.makeStyleFromTheme)(function(e){return{background:{backgroundColor:e.centerChannelBg},header:{borderBottomColor:Object(me.changeOpacity)(e.centerChannelColor,.2)},icon:{fill:Object(me.changeOpacity)(e.centerChannelColor,.3)},iconActive:{fill:e.centerChannelColor},iconHover:{fill:Object(me.changeOpacity)(e.centerChannelColor,.8)}}}),ct=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tt(this,nt(t).call(this,e))).state={hovering:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=lt(this.props.theme);return E.a.createElement("header",{className:"header-container",style:e.background},E.a.createElement(He,this.props),E.a.createElement("nav",{className:"nav-bar",style:e.header},this.renderTabs(this.props,e)))}},{key:"renderTabs",value:function(e,t){var n=this,r=e.appProps,a=e.onTrending,o=e.onCategories;return r.header.tabs.map(function(e,r){var i;return e===he.TRENDING?i=n.renderTab("trending",a,ze,r,t):e===he.REACTIONS&&(i=n.renderTab("reactions",o,Xe,r,t)),i})}},{key:"renderTab",value:function(e,t,n,r,a){var o=this,i=this.props,s=i.action;return E.a.createElement("a",{onClick:function(){i.searchTextUpdate(""),i.saveSearchBarText(""),t()},onMouseOver:function(){o.setState({hovering:e})},onMouseOut:function(){o.setState({hovering:""})},style:{cursor:"pointer"},key:r},E.a.createElement("div",{style:{paddingTop:"2px"}},E.a.createElement(n,{style:o.state.hovering===e?a.iconHover:s===e?a.iconActive:a.icon})))}}])&&et(n.prototype,r),a&&et(n,a),t}();at=ct,ot="propTypes",it={action:v.a.string,appProps:v.a.object,saveSearchBarText:v.a.func,searchTextUpdate:v.a.func,theme:v.a.object.isRequired},ot in at?Object.defineProperty(at,ot,{value:it,enumerable:!0,configurable:!0,writable:!0}):at[ot]=it;var ut=Object(r.connect)(function(e){return{theme:Object(c.getTheme)(e)}},st)(ct);function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt={saveAppProps:de.saveAppProps},yt=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(n=mt(this,ft(t).call(this,e))).props.appProps;return n.props.saveAppProps(r),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.appProps,n=e.action,r=e.onCategories,a=e.onSearch,o=e.onTrending,i=e.children,s="main-container "+(t.appClassName||"");return E.a.createElement("div",{className:s},E.a.createElement(ut,{appProps:t,action:n,onCategories:r,onSearch:a,onTrending:o}),E.a.createElement("div",{className:"component-container"},i))}}])&&dt(n.prototype,r),a&&dt(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yt,"propTypes",{appProps:v.a.object,action:v.a.string,onCategories:v.a.func,onSearch:v.a.func,onTrending:v.a.func,children:v.a.object,saveAppProps:v.a.func,authenticateSdk:v.a.func});var gt=Object(r.connect)(null,bt)(yt),vt=(n(120),n(420)),_t=n(421);n(429);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jt=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=St(t).call(this,e))||"object"!==Et(a)&&"function"!=typeof a?Ct(r):a).scrollListener=n.scrollListener.bind(Ct(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.attachScrollListener(),this.setScrollPosition()}},{key:"componentDidUpdate",value:function(){this.attachScrollListener()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.element,a=t.hasMore,o=(t.initialLoad,t.loader),i=(t.loadMore,t.pageStart,t.threshold,t.useWindow,t.isReverse,t.scrollPosition,t.containerHeight),s=wt(t,["children","element","hasMore","initialLoad","loader","loadMore","pageStart","threshold","useWindow","isReverse","scrollPosition","containerHeight"]);s.ref=function(t){e.scrollComponent=t};var l=i?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Tt(e,t,n[t])})}return e}({},s,{style:{height:i}}):s;return E.a.createElement(r,l,n,a&&(o||this.defaultLoader))}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"setScrollPosition",value:function(){var e=this.props.scrollPosition;null!==e&&window.scrollTo(0,e)}},{key:"scrollListener",value:function(){var e,t=this.scrollComponent,n=window;if(this.props.useWindow){var r="pageYOffset"in n?n.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;e=this.props.isReverse?r:this.calculateTopPosition(t)+(t.offsetHeight-r-window.innerHeight)}else e=this.props.isReverse?t.parentNode.scrollTop:t.scrollHeight-t.parentNode.scrollTop-t.parentNode.clientHeight;e<Number(this.props.threshold)&&(this.detachScrollListener(),"function"==typeof this.props.loadMore&&this.props.loadMore(this.pageLoaded+=1))}},{key:"attachScrollListener",value:function(){if(this.props.hasMore){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.addEventListener("scroll",this.scrollListener),e.addEventListener("resize",this.scrollListener),this.props.initialLoad&&this.scrollListener()}}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("scroll",this.scrollListener),e.removeEventListener("resize",this.scrollListener)}},{key:"componentWillUnmount",value:function(){this.detachScrollListener()}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}}])&&Ot(n.prototype,r),a&&Ot(n,a),t}();Tt(jt,"propTypes",{children:v.a.array,element:v.a.string,hasMore:v.a.bool,initialLoad:v.a.bool,loader:v.a.object,loadMore:v.a.func.isRequired,pageStart:v.a.number,threshold:v.a.number,useWindow:v.a.bool,isReverse:v.a.bool,containerHeight:v.a.number,scrollPosition:v.a.number}),Tt(jt,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,threshold:250,useWindow:!0,isReverse:!1,containerHeight:null,scrollPosition:null});n(1998);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){xt(e,t,n[t])})}return e}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lt={saveSearchBarText:de.saveSearchBarText,saveSearchScrollPosition:de.saveSearchScrollPosition,searchTextUpdate:de.searchTextUpdate,requestCategoriesList:de.requestCategoriesList,requestCategoriesListIfNeeded:de.requestCategoriesListIfNeeded},Dt=Object(me.makeStyleFromTheme)(function(e){return{background:{backgroundColor:Object(me.changeOpacity)(e.centerChannelColor,.05)}}}),Ut=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Nt(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==kt(a)&&"function"!=typeof a?Rt(r):a,xt(Rt(n),"sendImpressions",function(){var e=n.props.tagsList.map(function(e){return{gfyId:e.gfyId}});e.length&&Object(vt.d)("gfycat","views",{context:"category_list",count:e.length})}),xt(Rt(n),"filterTagsList",function(){var e=n.props,t=e.searchBarText,r=e.tagsList,a=t.toLowerCase().trim().split(/ +/).join(" ");return r&&r.length?r.filter(function(e){return t&&-1===e.tagName.indexOf(a)?"":e}):[]}),xt(Rt(n),"loadMore",function(){n.props.requestCategoriesList()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.requestCategoriesListIfNeeded(),this.sendImpressions()}},{key:"componentWillUnmount",value:function(){this.props.saveSearchScrollPosition(0)}},{key:"render",value:function(){var e=this,t=Dt(this.props.theme),n=this.props,r=n.hasMore,a=n.tagsList,o=n.gifs,i=n.onSearch,s=n.onTrending,l=n.hasImageProxy,c=a&&a.length?this.filterTagsList(a).map(function(t,n){var r=t.tagName,a=t.gfyId;if(!o[a])return null;var c=o[a],u=c.max1mbGif,p=c.avgColor,d=_t.f(u,"true"===l),m=r.replace(/\s/g,"-"),f={backgroundImage:"url(".concat(d)},h={backgroundColor:p},b=e.props;return E.a.createElement("a",{onClick:function(){b.searchTextUpdate(r),b.saveSearchBarText(r),"trending"===m?s():i()},key:n},E.a.createElement("div",{className:"category-container"},E.a.createElement("div",{className:"category",style:At({},f,h)},E.a.createElement("div",{className:"category-name"},r))))}):[];return c&&c.length?E.a.createElement("div",{className:"categories-container",style:t.background},E.a.createElement(jt,{hasMore:r,loadMore:this.loadMore,threshold:1},c)):E.a.createElement("div",{className:"categories-container",style:t.background})}}])&&Mt(n.prototype,r),a&&Mt(n,a),t}();xt(Ut,"propTypes",{appProps:v.a.object,gifs:v.a.object,hasMore:v.a.bool,onSearch:v.a.func,onTrending:v.a.func,requestCategoriesList:v.a.func,requestCategoriesListIfNeeded:v.a.func,saveSearchBarText:v.a.func,saveSearchScrollPosition:v.a.func,searchTextUpdate:v.a.func,searchBarText:v.a.string,tagsList:v.a.array,hasImageProxy:v.a.string,theme:v.a.object.isRequired});var qt=Object(r.connect)(function(e){return At({},e.entities.gifs.categories,e.entities.gifs.cache,{theme:Object(c.getTheme)(e),appProps:e.entities.gifs.app,searchText:e.entities.gifs.search.searchText,searchBarText:e.entities.gifs.search.searchBarText,hasImageProxy:e.entities.general.config.HasImageProxy})},Lt)(Ut);n(118),n(210),n(156),n(1999),n(2001);function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){zt(e,t,n[t])})}return e}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gt(this,Vt(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.gfyItem,n=e.top,r=e.left,a=e.itemWidth,o=e.itemClickHandler,i=t.width,s=t.height,l=t.max1mbGif,c=t.avgColor,u=this.props.hasImageProxy,p=_t.f(l,"true"===u),d={backgroundImage:"url(".concat(p,")")},m={backgroundColor:c},f={paddingBottom:a/i*s+"px"};return E.a.createElement("div",{className:"search-item-wrapper",style:{top:n,left:r,width:a?"".concat(a,"px"):""}},E.a.createElement("div",{className:"search-item",style:Ft({},d,m,f),onClick:function(){return o(t)}}))}}])&&Bt(n.prototype,r),a&&Bt(n,a),t}();zt(Kt,"propTypes",{gfyItem:v.a.object,top:v.a.string,left:v.a.string,itemWidth:v.a.number,itemClickHandler:v.a.func,hasImageProxy:v.a.string});var Yt=Object(r.connect)(function(e){return{hasImageProxy:e.entities.general.config.HasImageProxy}})(Kt);n(2002);function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){nn(e,t,n[t])})}return e}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rn=8,an=2,on=2,sn=8;var ln={saveSearchScrollPosition:de.saveSearchScrollPosition},cn=Object(me.makeStyleFromTheme)(function(e){return{background:{backgroundColor:Object(me.changeOpacity)(e.centerChannelColor,.05)}}}),un=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Xt(t).call(this,e),n=!a||"object"!==Qt(a)&&"function"!=typeof a?$t(r):a,nn($t(n),"setNumberOfColumns",function(){window.matchMedia("(orientation: portrait)").matches?n.numberOfColumns=an:n.numberOfColumns=on}),nn($t(n),"itemClickHandler",function(e){var t=n.props,r=t.keyword,a=t.handleItemClick;n.props.saveSearchScrollPosition(n.scrollPosition),Object(vt.d)("gfycat","shares",{gfyid:e.gfyId,keyword:r}),a(e)}),nn($t(n),"minHeightColumnIndex",function(){return n.columnsHeights.indexOf(Math.min.apply(Math,Jt(n.columnsHeights)))}),nn($t(n),"maxHeightColumnIndex",function(){return n.columnsHeights.indexOf(Math.max.apply(Math,Jt(n.columnsHeights)))}),nn($t(n),"maxColumnHeight",function(){return Math.max.apply(Math,Jt(n.columnsHeights))}),nn($t(n),"resizeHandler",function(){n.state.containerWidth!==n.container.offsetWidth-sn&&(n.setNumberOfColumns(),n.setState(tn({},n.state,{containerWidth:n.container.offsetWidth-sn})),n.columnsHeights=Array(n.numberOfColumns).fill(0))}),nn($t(n),"scrollHandler",function(){n.scrollPosition=window.scrollY}),n.state={containerWidth:null},n.scrollPosition=n.props.scrollPosition,n.setNumberOfColumns(),n.columnsHeights=Array(n.numberOfColumns).fill(0),n.padding=rn,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"componentDidMount",value:function(){this.container=document.getElementById("search-grid-container"),this.setState(tn({},this.state,{containerWidth:this.container.offsetWidth-sn})),window.addEventListener("resize",this.resizeHandler),window.addEventListener("scroll",this.scrollHandler)}},{key:"componentDidUpdate",value:function(e){e.keyword!==this.props.keyword&&window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){"trending"!==this.props.keyword&&this.props.saveSearchScrollPosition(this.scrollPosition),window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("scroll",this.scrollHandler)}},{key:"render",value:function(){var e=this,t=cn(this.props.theme),n=this.props,r=n.containerClassName,a=n.gifs,o=n.keyword,i=n.resultsByTerm,s=n.scrollPosition,l=n.loadMore,c=n.onCategories,u=this.state.containerWidth,p=i[o]?i[o]:{},d=p.moreRemaining,m=p.items,f=void 0===m?[]:m,h=p.isEmpty,b=parseInt(u/this.numberOfColumns,10),y=Array(this.numberOfColumns).fill(0).map(function(t,n){return e.padding+(n*b-n*(e.padding/2))});this.columnsHeights=Array(this.numberOfColumns).fill(this.padding);var g=u&&f.length?f.map(function(t,n){var r=a[t],o=r.gfyId,i=e.minHeightColumnIndex(),s=e.columnsHeights[i]+"px",l=y[i]+"px",c=140/r.width*r.height+e.padding;return e.columnsHeights[i]+=c,E.a.createElement(Yt,{gfyItem:r,top:s,left:l,itemWidth:140,itemClickHandler:e.itemClickHandler,key:"".concat(n,"-").concat(o)})}):null;this.containerHeight=this.maxColumnHeight();var v=g?E.a.createElement(jt,{className:"search-grid-infinite-scroll",pageStart:0,loadMore:l,initialLoad:!1,hasMore:d,threshold:1,containerHeight:this.containerHeight,scrollPosition:s,useWindow:!1},g):null,_=h?E.a.createElement("div",{className:"empty-search"},E.a.createElement("div",{className:"empty-search-image"}),E.a.createElement("p",null,"0 Gifs found for ",E.a.createElement("strong",null,o)),E.a.createElement("a",{onClick:c},E.a.createElement("div",{className:"empty-search-button"},"Go to Reactions"))):null;return E.a.createElement("div",{id:"search-grid-container",className:"search-grid-container ".concat(r),style:t.background},v,_)}}])&&Zt(n.prototype,r),a&&Zt(n,a),t}();nn(un,"propTypes",{appProps:v.a.object,gifs:v.a.object,resultsByTerm:v.a.object,containerClassName:v.a.string,keyword:v.a.string,handleItemClick:v.a.func,onCategories:v.a.func,loadMore:v.a.func,numberOfColumns:v.a.number,scrollPosition:v.a.number,saveSearchScrollPosition:v.a.func,theme:v.a.object.isRequired});var pn=Object(r.connect)(function(e){return tn({},e.entities.gifs.cache,e.entities.gifs.search,{theme:Object(c.getTheme)(e),appProps:e.entities.gifs.app})},ln)(un);function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mn=Object(r.connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){dn(e,t,n[t])})}return e}({},e.entities.gifs.cache,e.entities.gifs.search,{appProps:e.entities.gifs.app})},function(){return{saveSearchScrollPosition:de.saveSearchScrollPosition}})(pn);function fn(e){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _n={searchGfycat:de.searchGfycat,searchIfNeededInitial:de.searchIfNeededInitial},En=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=bn(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==fn(a)&&"function"!=typeof a?yn(r):a,vn(yn(n),"loadMore",function(){var e=n.props.searchText;n.props.searchGfycat({searchText:e})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.searchText;this.props.searchIfNeededInitial(e.split("-").join(" "))}},{key:"componentDidUpdate",value:function(e){var t=this.props.searchText;e.searchText!==t&&this.props.searchIfNeededInitial(t.split("-").join(" "))}},{key:"render",value:function(){var e=this.props,t=e.handleItemClick,n=e.searchText,r=e.onCategories;return E.a.createElement(mn,{keyword:n,handleItemClick:t,onCategories:r,loadMore:this.loadMore})}}])&&hn(n.prototype,r),a&&hn(n,a),t}();vn(En,"propTypes",{handleItemClick:v.a.func,onCategories:v.a.func,searchText:v.a.string,searchIfNeededInitial:v.a.func,searchGfycat:v.a.func});var wn=Object(r.connect)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){vn(e,t,n[t])})}return e}({},e.entities.gifs.search)},_n)(En);function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(e,t){return(Tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kn={searchCategory:de.searchCategory,searchIfNeededInitial:de.searchIfNeededInitial,saveSearchScrollPosition:de.saveSearchScrollPosition},Mn=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Cn(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==On(a)&&"function"!=typeof a?Pn(r):a,jn(Pn(n),"loadMore",function(){n.props.searchCategory({tagName:"trending"})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tn(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"componentDidMount",value:function(){this.props.searchIfNeededInitial("trending")}},{key:"componentWillUnmount",value:function(){this.props.saveSearchScrollPosition(0)}},{key:"render",value:function(){var e=this.props,t=e.handleItemClick,n=e.onCategories;return E.a.createElement(mn,{keyword:"trending",handleItemClick:t,onCategories:n,loadMore:this.loadMore})}}])&&Sn(n.prototype,r),a&&Sn(n,a),t}();jn(Mn,"propTypes",{handleItemClick:v.a.func,onCategories:v.a.func,searchCategory:v.a.func,searchIfNeededInitial:v.a.func,saveSearchScrollPosition:v.a.func});var Nn=Object(r.connect)(null,kn)(Mn);function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ln(e,t){return(Ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dn={appName:be.mattermost,basePath:"/mattermost",itemTapType:fe.SHARE,appClassName:"gfycat",shareEvent:"shareMattermost",appId:"mattermostwebviews",enableHistory:!0,header:{tabs:[he.TRENDING,he.REACTIONS],displayText:!1}},Un=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=An(t).call(this,e))||"object"!==Rn(a)&&"function"!=typeof a?xn(r):a).shouldComponentUpdate=pe.a.shouldComponentUpdate.bind(xn(n)),n.handleTrending=n.handleTrending.bind(xn(n)),n.handleCategories=n.handleCategories.bind(xn(n)),n.handleSearch=n.handleSearch.bind(xn(n)),n.handleItemClick=n.handleItemClick.bind(xn(n)),n.state={action:"trending"},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ln(e,t)}(t,E.a.Component),n=t,(r=[{key:"handleTrending",value:function(){this.setState({action:"trending"})}},{key:"handleCategories",value:function(){this.setState({action:"reactions"})}},{key:"handleSearch",value:function(){this.setState({action:"search"})}},{key:"handleItemClick",value:function(e){this.props.onGifClick(e.max5mbGif)}},{key:"render",value:function(){var e,t=this.state.action;switch(t){case"reactions":e=E.a.createElement(qt,{appProps:Dn,onTrending:this.handleTrending,onSearch:this.handleSearch});break;case"search":e=E.a.createElement(wn,{appProps:Dn,onCategories:this.handleCategories,handleItemClick:this.handleItemClick});break;case"trending":e=E.a.createElement(Nn,{appProps:Dn,onCategories:this.handleCategories,handleItemClick:this.handleItemClick})}return E.a.createElement("div",null,E.a.createElement(gt,{appProps:Dn,action:t,onTrending:this.handleTrending,onCategories:this.handleCategories,onSearch:this.handleSearch},e))}}])&&In(n.prototype,r),a&&In(n,a),t}();function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fn(e,t){return!t||"object"!==qn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gn(e,t){return(Gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Un,"propTypes",{onGifClick:v.a.func.isRequired});var Vn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fn(this,Bn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gn(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 15 15",role:"icon","aria-label":"Emoji icon"},E.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-1071.000000, -954.000000)",fill:"inherit"},E.a.createElement("g",{transform:"translate(25.000000, 937.000000)"},E.a.createElement("g",{transform:"translate(1046.000000, 17.000000)"},E.a.createElement("path",{d:"M7.5,0.0852272727 C3.405,0.0852272727 0.0852272727,3.405 0.0852272727,7.5 C0.0852272727,11.595 3.405,14.9147727 7.5,14.9147727 C11.595,14.9147727 14.9147727,11.595 14.9147727,7.5 C14.9147727,3.405 11.595,0.0852272727 7.5,0.0852272727 Z M7.5,14.0663436 C3.87926951,14.0663436 0.933656417,11.1207305 0.933656417,7.5 C0.933656417,3.87926951 3.87926951,0.933656417 7.5,0.933656417 C11.1207305,0.933656417 14.0663436,3.87926951 14.0663436,7.5 C14.0663436,11.1207305 11.1207305,14.0663436 7.5,14.0663436 Z"}),E.a.createElement("path",{d:"M11.7732955,8.95397727 C12.0119318,8.90488636 12.2159659,9.11778409 12.1684091,9.35676136 C11.8063636,11.1790909 9.85346591,12.5710227 7.49846591,12.5710227 C5.15096591,12.5710227 3.20284091,11.1877841 2.83193182,9.37397727 C2.78181818,9.129375 2.99267045,8.911875 3.23744318,8.96198864 C4.85369318,9.29232955 10.1786932,9.28142045 11.7732955,8.95397727 Z"}),E.a.createElement("ellipse",{cx:"4.94318182",cy:"5.50431818",rx:"1",ry:"1.06534091"}),E.a.createElement("ellipse",{cx:"10.0568182",cy:"5.50431818",rx:"1",ry:"1.06534091"})))))))}}])&&Hn(n.prototype,r),a&&Hn(n,a),t}();function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kn(e,t){return!t||"object"!==Wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qn(e,t){return(Qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Kn(this,Yn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qn(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement("svg",{width:"22px",height:"14px",viewBox:"0 0 22 14"},E.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-1344.000000, -552.000000)",fill:"inherit"},E.a.createElement("g",{transform:"translate(1147.000000, 542.000000)"},E.a.createElement("g",{transform:"translate(1.000000, 1.000000)"},E.a.createElement("g",{transform:"translate(138.000000, 0.000000)"},E.a.createElement("path",{d:"M63.6748519,23 L62.2292481,23 C61.8176589,23 61.4619872,22.8510143 61.1631497,22.5539741 C60.8633954,22.2569338 60.71306,21.8993681 60.71306,21.4831393 C60.71306,21.0678417 60.8597287,20.710276 61.1539829,20.4132358 C61.4473204,20.1161955 61.800242,19.9672098 62.2118312,19.9672098 L63.6565183,19.9672098 C64.0681075,19.9672098 64.4182791,19.8219488 64.7061166,19.5304955 C64.993954,19.2390422 65.1378727,18.8917193 65.1378727,18.4866644 L65.1378727,15.4371134 C65.1378727,15.0208846 64.993954,14.6670436 64.7061166,14.3755903 C64.4182791,14.084137 64.0745243,13.938876 63.6748519,13.938876 C63.2632628,13.938876 62.9103411,14.0869305 62.6170036,14.3849019 C62.3227494,14.6819421 62.1760807,15.0329897 62.1760807,15.4371134 C62.1760807,15.7294978 62.3016658,16.0563352 62.5519193,16.4185567 L62.575753,16.4530096 C62.8269232,16.8143 62.9515917,17.1420685 62.9515917,17.4344529 C62.9515917,17.8506817 62.8049229,18.2073163 62.5115854,18.5043565 C62.2173313,18.8023279 61.8653263,18.9503824 61.4537371,18.9503824 C60.7836443,18.9503824 60.2198863,18.5164616 59.7615465,17.6486199 C59.373791,16.9232458 59.1794549,16.1857665 59.1794549,15.4371134 C59.1794549,14.188427 59.6176278,13.1213169 60.4930568,12.234852 C61.3684859,11.3493183 62.4226675,10.9060858 63.6565183,10.9060858 C64.8912858,10.9060858 65.9482175,11.3493183 66.8300633,12.234852 C67.7109925,13.1213169 68.1519154,14.188427 68.1519154,15.4371134 L68.1519154,18.4866644 C68.1519154,19.7353508 67.7137425,20.7996674 66.8383134,21.6796142 C65.9628844,22.559561 64.9087028,23 63.6748519,23 Z M80,15.9269039 C80,16.3068174 79.8689148,16.6317925 79.6076611,16.9027602 C79.3454907,17.173728 79.0319863,17.3096774 78.6653144,17.3096774 L76.8438719,17.3096774 L76.8438719,18.6589292 C76.8438719,19.0388427 76.7127867,19.3638178 76.4506164,19.6347855 C76.1893627,19.9057532 75.8749415,20.0417027 75.5082697,20.0417027 C75.1315143,20.0417027 74.8125098,19.9057532 74.5503394,19.6347855 C74.2890857,19.3638178 74.1580005,19.0388427 74.1580005,18.6589292 L74.1580005,13.1464583 C74.1580005,12.00858 74.5485061,11.0355171 75.3276838,10.2272697 C76.1077782,9.41995344 77.0473748,9.01582973 78.1473904,9.01582973 L78.6653144,9.01582973 C79.0319863,9.01582973 79.3454907,9.15177918 79.6076611,9.42274692 C79.8689148,9.69371467 80,10.0186897 80,10.3986033 C80,10.7775856 79.8689148,11.1034919 79.6076611,11.3744596 C79.3454907,11.6454273 79.0319863,11.7804456 78.6653144,11.7804456 L78.162974,11.7804456 C77.7963021,11.7804456 77.481881,11.9163951 77.2206273,12.1873628 C76.9584569,12.4583306 76.8282884,12.7777187 76.8282884,13.1464583 L76.8282884,14.5450615 L78.6653144,14.5450615 C79.0319863,14.5450615 79.3454907,14.681011 79.6076611,14.9519787 C79.8689148,15.2229465 80,15.5479215 80,15.9269039 Z M72.6344789,18.6589292 C72.6344789,19.0388427 72.5043104,19.3638178 72.24214,19.6347855 C71.9808863,19.9057532 71.6664652,20.0417027 71.2997933,20.0417027 C70.9340382,20.0417027 70.616867,19.9057532 70.3501132,19.6347855 C70.0833594,19.3638178 69.9495242,19.0388427 69.9495242,18.6589292 L69.9495242,14.170735 C69.9495242,13.7917526 70.0806094,13.4667775 70.3418631,13.1958098 C70.6040335,12.9239109 70.9175379,12.7888926 71.2842098,12.7888926 C71.6508817,12.7888926 71.9671361,12.9239109 72.2348066,13.1958098 C72.5015604,13.4667775 72.6344789,13.7917526 72.6344789,14.170735 L72.6344789,18.6589292 Z M58.3370263,12.5356169 C58.1023563,11.7441304 58.0042716,10.9163286 58.0042716,10.9163286 C57.9721878,10.6937812 58.1243566,10.547589 58.3425264,10.5904223 C58.3425264,10.5904223 58.5350291,10.6267376 58.8017829,10.6807449 C59.0767868,10.7375457 59.4324585,10.8139009 59.7404628,10.8921184 C60.3473048,11.0448287 60.95323,11.2720319 60.95323,11.2720319 C60.95323,11.2720319 60.2904706,11.6621882 59.7239626,12.3018956 C59.1565379,12.9406718 58.8650338,13.8420353 58.8650338,13.8420353 C58.8650338,13.8420353 58.5716963,13.3280346 58.3370263,12.5356169 Z M69.088762,12.5356169 C69.323432,11.7441304 69.4224334,10.9163286 69.4224334,10.9163286 C69.4536005,10.6937812 69.3014317,10.547589 69.0832619,10.5904223 C69.0832619,10.5904223 68.2921674,10.7384769 67.6853254,10.8921184 C67.0794002,11.0448287 66.4725583,11.2720319 66.4725583,11.2720319 C66.4725583,11.2720319 67.1353177,11.6621882 67.7027424,12.3018956 C68.2692504,12.9406718 68.5616712,13.8420353 68.5616712,13.8420353 C68.5616712,13.8420353 68.8550087,13.3280346 69.088762,12.5356169 Z M72.6344789,10.3818424 C72.6344789,10.7617559 72.5043104,11.086731 72.24214,11.3576987 C71.9808863,11.6286664 71.6664652,11.7646159 71.2997933,11.7646159 C70.9340382,11.7646159 70.616867,11.6286664 70.3501132,11.3576987 C70.0833594,11.086731 69.9495242,10.7617559 69.9495242,10.3818424 C69.9495242,10.00286 70.0806094,9.67788494 70.3418631,9.40691719 C70.6040335,9.13594945 70.9175379,9 71.2842098,9 C71.6508817,9 71.9671361,9.13594945 72.2348066,9.40691719 C72.5015604,9.67788494 72.6344789,10.00286 72.6344789,10.3818424 Z"}))))))))}}])&&zn(n.prototype,r),a&&zn(n,a),t}();function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $n(e,t){return!t||"object"!==Zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function er(e){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tr(e,t){return(tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$n(this,er(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tr(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("div",{className:"emoji-picker__header modal-header"},E.a.createElement("button",{type:"button",className:"close emoji-picker__header-close-button",onClick:this.props.handleEmojiPickerClose},E.a.createElement("span",{"aria-hidden":"true"},""),E.a.createElement("span",{className:"sr-only"},E.a.createElement(Y.c,{id:"emoji_picker.close",defaultMessage:"Close"}))),E.a.createElement("h4",{className:"modal-title emoji-picker__header-title"},E.a.createElement(Y.c,{id:"emoji_picker.header",defaultMessage:"Emoji Picker"})))}}])&&Xn(n.prototype,r),a&&Xn(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(nr,"propTypes",{handleEmojiPickerClose:v.a.func.isRequired});var rr=n(213),ar=n(404),or=n(129),ir=(n(305),n(306),n(945),n(1779)),sr=n.n(ir),lr=n(105);n(185);function cr(e,t,n){var r=e.name||e.aliases[0],a=t.name||t.aliases[0],o=r.startsWith(n);return o===a.startsWith(n)?r.localeCompare(a):o?-1:1}var ur=n(1694),pr=n.n(ur);function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e,t){return(br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=fr(t).call(this,e))||"object"!==dr(a)&&"function"!=typeof a?hr(r):a).handleClick=n.handleClick.bind(hr(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&br(e,t)}(t,E.a.Component),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return e.selected!==this.props.selected||e.enable!==this.props.enable}},{key:"handleClick",value:function(e){e.preventDefault(),this.props.onCategoryClick(this.props.category)}},{key:"render",value:function(){var e="emoji-picker__category";return this.props.selected&&(e+=" emoji-picker__category--selected"),this.props.enable||(e+=" disable"),E.a.createElement("a",{className:e,href:"#",onClick:this.handleClick,"aria-label":this.props.category},this.props.icon)}}])&&mr(n.prototype,r),a&&mr(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yr,"propTypes",{category:v.a.string.isRequired,icon:v.a.node.isRequired,onCategoryClick:v.a.func.isRequired,selected:v.a.bool.isRequired,enable:v.a.bool.isRequired});var gr=n(1631),vr=n.n(gr),_r=n(249);function Er(e){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tr=150,jr=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Or(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Er(a)&&"function"!=typeof a?Sr(r):a,Pr(Sr(n),"emojiItemRef",function(e){n.emojiItem=e}),Pr(Sr(n),"emojiName",function(){return(0,n.context.intl.formatMessage)({id:"emoji_picker_item.emoji_aria_label",defaultMessage:"{emojiName} emoji"},{emojiName:n.props.emoji.aliases[0].replace(/_/g," ")})}),Pr(Sr(n),"handleMouseOver",function(){n.props.isSelected||n.props.onItemOver(n.props.categoryIndex,n.props.emojiIndex)}),Pr(Sr(n),"handleMouseOverThrottle",vr()(n.handleMouseOver,Tr,{leading:!0,trailing:!0})),Pr(Sr(n),"handleClick",function(){n.props.onItemClick(n.props.emoji)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(t,E.a.Component),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return e.isSelected!==this.props.isSelected}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(!this.props.isSelected&&e.isSelected){var t=this.emojiItem.offsetTop,n=t+this.emojiItem.offsetHeight,r=e.containerRef,a=e.containerTop,o=e.containerBottom;t<a?r.scrollTop=t-10:n>o&&(r.scrollTop=n-r.offsetHeight+10)}}},{key:"render",value:function(){var e=this.props.emoji,t="emoji-picker__item";this.props.isSelected&&(t+=" selected");var n,r="emojisprite";return r+=" emoji-category-"+e.category+"-"+e.batch,r+=" emoji-"+e.filename,n=e.category&&e.batch?E.a.createElement("img",{alt:"emoji image",onMouseOver:this.handleMouseOverThrottle,src:pr.a,className:r,onClick:this.handleClick,id:"emoji-"+e.filename,"aria-label":this.emojiName(),role:"button"}):E.a.createElement("img",{alt:"custom emoji image",onMouseOver:this.handleMouseOver,src:Object(_r.getEmojiImageUrl)(e),className:"emoji-category--custom",onClick:this.handleClick}),E.a.createElement("div",{className:t,ref:this.emojiItemRef},E.a.createElement("div",null,n))}}])&&wr(n.prototype,r),a&&wr(n,a),t}();function kr(e){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Pr(jr,"propTypes",{emoji:v.a.object.isRequired,onItemOver:v.a.func.isRequired,onItemClick:v.a.func.isRequired,category:v.a.string.isRequired,isSelected:v.a.bool,categoryIndex:v.a.number.isRequired,emojiIndex:v.a.number.isRequired,containerRef:v.a.any,containerTop:v.a.number.isRequired,containerBottom:v.a.number.isRequired}),Pr(jr,"contextTypes",{intl:Y.i.isRequired});var xr=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Nr(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==kr(a)&&"function"!=typeof a?Rr(r):a,Ar(Rr(n),"divRef",function(e){n.div=e}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.props.updateCategoryOffset(this.props.categoryName,this.div.offsetTop)}},{key:"render",value:function(){return E.a.createElement("div",{ref:this.divRef},E.a.createElement("div",{className:"emoji-picker-items__container"},E.a.createElement("div",{className:"emoji-picker__category-header",id:"emojipickercat-".concat(this.props.categoryName)},E.a.createElement(Y.c,{id:"emoji_picker."+this.props.categoryName}))),E.a.createElement("div",{className:"emoji-picker-items__container"},this.props.children))}}])&&Mr(n.prototype,r),a&&Mr(n,a),t}();function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ur(e,t){return!t||"object"!==Lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qr(e){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(e,t){return(Hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Ar(xr,"propTypes",{categoryName:v.a.string.isRequired,children:v.a.any,updateCategoryOffset:v.a.func.isRequired});var Fr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ur(this,qr(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hr(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){var e,t,n,r=this.props.emoji;return r?(r.aliases&&r.category&&r.batch?(e=r.aliases[0],t=r.aliases,n=E.a.createElement("span",{className:"sprite-preview"},E.a.createElement("img",{alt:"emoji category image",src:pr.a,className:"emojisprite-preview emoji-category-"+r.category+"-"+r.batch+" emoji-"+r.filename}))):(e=r.name,t=[r.name],n=E.a.createElement("img",{alt:"emoji preview image",className:"emoji-picker__preview-image",src:Object(_r.getEmojiImageUrl)(r)})),E.a.createElement("div",{className:"emoji-picker__preview"},E.a.createElement("div",{className:"emoji-picker__preview-image-box"},n),E.a.createElement("div",{className:"emoji-picker__preview-image-label-box"},E.a.createElement("span",{className:"emoji-picker__preview-name"},e),E.a.createElement("span",{className:"emoji-picker__preview-aliases"},":"+t[0]+":")))):E.a.createElement("div",{className:"emoji-picker__preview emoji-picker__preview-placeholder"},E.a.createElement(Y.c,{id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}))}}])&&Dr(n.prototype,r),a&&Dr(n,a),t}();function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Zr(e,t,n[t])})}return e}function Vr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wr(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function zr(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Wr(o,r,a,i,s,"next",e)}function s(e){Wr(o,r,a,i,s,"throw",e)}i(void 0)})}}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yr(e){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jr(e,t){return(Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fr,"propTypes",{emoji:v.a.object});Object(Me.b)("emoji_picker.searchResults");var Xr={height:290},$r=1476,ea=100,ta={recent:{name:"recent",className:"fa fa-clock-o",id:Object(Me.b)("emoji_picker.recent"),message:"Recently Used",offset:0},people:{name:"people",className:"fa fa-smile-o",id:Object(Me.b)("emoji_picker.people"),message:"People",offset:0},nature:{name:"nature",className:"fa fa-leaf",id:Object(Me.b)("emoji_picker.nature"),message:"Nature",offset:0},foods:{name:"foods",className:"fa fa-cutlery",id:Object(Me.b)("emoji_picker.foods"),message:"Foods",offset:0},activity:{name:"activity",className:"fa fa-futbol-o",id:Object(Me.b)("emoji_picker.activity"),message:"Activity",offset:0},places:{name:"places",className:"fa fa-plane",id:Object(Me.b)("emoji_picker.places"),message:"Places",offset:0},objects:{name:"objects",className:"fa fa-lightbulb-o",id:Object(Me.b)("emoji_picker.objects"),message:"Objects",offset:0},symbols:{name:"symbols",className:"fa fa-heart-o",id:Object(Me.b)("emoji_picker.symbols"),message:"Symbols",offset:0},flags:{name:"flags",className:"fa fa-flag-o",id:Object(Me.b)("emoji_picker.flags"),message:"Flags",offset:0},custom:{name:"custom",className:"fa fa-at",id:Object(Me.b)("emoji_picker.custom"),message:"Custom",offset:0}};function na(e){return e.filename||e.id}var ra=200,aa=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Yr(t).call(this,e),n=!a||"object"!==Br(a)&&"function"!=typeof a?Qr(r):a,Zr(Qr(n),"loadMoreCustomEmojis",zr(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.customEmojisEnabled&&!n.loadingMoreEmojis){e.next=2;break}return e.abrupt("return");case 2:return n.loadingMoreEmojis=!0,e.next=5,n.props.actions.getCustomEmojis(n.props.customEmojiPage,ra);case 5:if(t=e.sent,r=t.data){e.next=10;break}return n.loadingMoreEmojis=!1,e.abrupt("return");case 10:if(!(r.length<ra)){e.next=14;break}return n.missingPages=!1,n.loadingMoreEmojis=!1,e.abrupt("return");case 14:return e.next=16,n.props.actions.incrementEmojiPickerPage();case 16:n.loadingMoreEmojis=!1;case 17:case"end":return e.stop()}},e)}))),Zr(Qr(n),"lastVisibleEmojiRef",function(e){n.lastVisibleEmoji=e}),Zr(Qr(n),"emojiPickerContainerRef",function(e){n.emojiPickerContainer=e}),Zr(Qr(n),"emojiSearchInput",function(e){n.searchInput=e}),Zr(Qr(n),"emojiCurrentResultsItems",function(e,t,r){var a=n.state,o=a.cursor,i=a.emojisToShow,s=r;return t.map(function(t,r){var a;return++s===i&&(a=n.lastVisibleEmojiRef),s>=i?E.a.createElement("div",{key:s,className:"emoji-picker__item",ref:a},E.a.createElement("img",{alt:"emoji image",src:pr.a,className:"emojisprite"})):E.a.createElement(jr,{key:t.filename+":"+r,emoji:t,onItemOver:n.handleItemOver,onItemClick:n.handleItemClick,onItemUnmount:t,category:t.category,isSelected:o[0]===e&&o[1]===r,categoryIndex:e,emojiIndex:r,containerRef:n.emojiPickerContainer,containerTop:n.state.divTopOffset,containerBottom:n.state.divTopOffset+n.divHeight})})}),n.handleCategoryClick=n.handleCategoryClick.bind(Qr(n)),n.handleFilterChange=n.handleFilterChange.bind(Qr(n)),n.handleItemOver=n.handleItemOver.bind(Qr(n)),n.handleItemClick=n.handleItemClick.bind(Qr(n)),n.handleKeyDown=n.handleKeyDown.bind(Qr(n)),n.handleCategoryKeyDown=n.handleCategoryKeyDown.bind(Qr(n)),n.handleScroll=n.handleScroll.bind(Qr(n)),n.handleScrollThrottle=sr()(n.handleScroll,ea,{leading:!1,trailing:!0}),n.updateCategoryOffset=n.updateCategoryOffset.bind(Qr(n)),n.divHeight=0,n.missingPages=!0,n.loadingMoreEmojis=!1,n.state={allEmojis:{},categories:ta,filter:"",cursor:[0,0],divTopOffset:0,emojisToShow:$r},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jr(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){0===this.props.customEmojiPage&&this.loadMoreCustomEmojis(),this.getEmojis()}},{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame(function(){e.searchInput&&e.searchInput.focus()}),this.divHeight=this.emojiPickerContainer.offsetHeight}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){if(this.state.divTopOffset!==t.divTopOffset){if(this.lastVisibleEmoji){var n=this.lastVisibleEmoji.offsetTop-(t.divTopOffset+290+75);if(n<=0){var r=135+Math.ceil(n/27*9*-1);this.setState(function(e){return{emojisToShow:e.emojisToShow+r}})}}if(this.missingPages&&this.emojiPickerContainer)this.emojiPickerContainer.scrollHeight-t.divTopOffset-this.emojiPickerContainer.clientHeight<=500&&this.loadMoreCustomEmojis()}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.emojiMap!==e.emojiMap&&this.getEmojis(e)}},{key:"componentDidUpdate",value:function(e){this.props.visible&&!e.visible&&this.searchInput.focus()}},{key:"handleCategoryClick",value:function(e){this.setState({cursor:[Object.keys(this.state.categories).indexOf(e),0],divTopOffset:this.state.categories[e].offset}),this.emojiPickerContainer.scrollTop=this.state.categories[e].offset,this.searchInput.focus()}},{key:"handleFilterChange",value:function(e){e.preventDefault();var t=e.target.value.toLowerCase().replace(/^:|:$/g,"");this.props.customEmojisEnabled&&t&&""!==t.trim()&&this.props.actions.searchCustomEmojis(t),this.setState(function(){return{filter:t,cursor:[0,0]}})}},{key:"handleItemOver",value:function(e,t){this.setState({cursor:[e,t]})}},{key:"handleItemClick",value:function(e){this.props.onEmojiClick(e)}},{key:"handleCategoryKeyDown",value:function(e){switch(e.key){case"ArrowRight":e.preventDefault(),this.selectNextEmoji(),this.searchInput.focus();break;case"ArrowLeft":e.preventDefault(),this.selectPrevEmoji(),this.searchInput.focus();break;case"ArrowUp":e.preventDefault(),this.selectPrevEmoji(9),this.searchInput.focus();break;case"ArrowDown":e.preventDefault(),this.selectNextEmoji(9),this.searchInput.focus()}}},{key:"handleKeyDown",value:function(e){switch(e.key){case"ArrowRight":e.preventDefault(),this.selectNextEmoji();break;case"ArrowLeft":e.preventDefault(),this.selectPrevEmoji();break;case"ArrowUp":e.preventDefault(),this.selectPrevEmoji(9);break;case"ArrowDown":e.preventDefault(),this.selectNextEmoji(9);break;case"Enter":e.preventDefault(),this.getCurrentEmojiByCursor(this.state.cursor)&&this.props.onEmojiClick(this.getCurrentEmojiByCursor(this.state.cursor))}}},{key:"handleScroll",value:function(){this.emojiPickerContainer&&this.setState({divTopOffset:this.emojiPickerContainer.scrollTop})}},{key:"selectNextEmoji",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.state.cursor,n=[t[0],t[1]+e];this.getCurrentEmojiByCursor(n)?this.setState({cursor:n}):(n=[t[0]+1,0],this.getCurrentEmojiByCursor(n)&&this.setState({cursor:n}))}},{key:"selectPrevEmoji",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.state.cursor,n=[t[0],t[1]-e];if(this.getCurrentEmojiByCursor(n))this.setState({cursor:n});else if(0!==t[0]){var r=this.getCategoryByIndex(t[0]-1),a=this.state.categories[r.name].emojiIds.length-1;n=[t[0]-1,a],this.getCurrentEmojiByCursor(n)&&this.setState({cursor:n})}}},{key:"getCategoryByIndex",value:function(e){return this.state.filter&&0!==e?null:this.getCategoriesByKey(Object.keys(this.state.categories)[e])}},{key:"getCurrentEmojiByCursor",value:function(e){var t=this.getCategoryByIndex(e[0]);return t?this.getEmojisByCategory(t)[e[1]]:null}},{key:"getCategoriesByKey",value:function(e){return this.state.filter?{id:"searchResults",name:"searchResults"}:this.state.categories[e]}},{key:"sortEmojis",value:function(e){var t=this,n=this.props.recentEmojis,r=[],a=[];Object.values(e).forEach(function(e){for(var t=a,o=0;o<e.aliases.length;o++)n.includes(e.aliases[o].toLowerCase())&&(t=r);t.push(e)});var o=function(e,n){return cr(e,n,t.state.filter)};return r.sort(o),a.sort(o),[].concat(r,a)}},{key:"getEmojisByCategory",value:function(e){var t=this;if(this.state.filter){var n=Object.values(this.state.allEmojis).filter(function(e){for(var n=0;n<e.aliases.length;n++)if(e.aliases[n].toLowerCase().includes(t.state.filter))return!0;return!1});return this.sortEmojis(n)}return this.state.categories[e.name].emojiIds.map(function(e){return t.state.allEmojis[e]})}},{key:"getCurrentEmojiName",value:function(){var e=this.getCurrentEmojiByCursor(this.state.cursor);return e?e.aliases[0].replace(/_/g," "):""}},{key:"getEmojis",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.state,n=t.categories,r=t.allEmojis,a=e.emojiMap,o=a.customEmojis,i=0,s=Object.keys(n);i<s.length;i++){var l=s[i],c=[];if("recent"===l)c=Vr(this.props.recentEmojis).reverse().filter(function(e){return a.has(e)}).map(function(e){return a.get(e)});else c=(lr.b.get(l)||[]).map(function(e){return lr.d[e]}),"custom"===l&&(c=c.concat(Vr(o.values())));n[l].emojiIds=c.map(function(e){return na(e)});for(var u=0;u<c.length;u++){var p=c[u],d=na(p);r[d]=Gr({},p,{visible:!1,offset:null}),p.filename||(r[d]=Gr({},r[d],{aliases:[p.name],category:"custom",filename:d}))}}this.setState({categories:n,allEmojis:r})}},{key:"getCurrentEmojiCategoryName",value:function(){for(var e=Object.keys(this.state.categories),t="",n=e.length-1;n>=0;n--){var r=this.state.categories[e[n]];if(this.state.divTopOffset>r.offset-20){t=e[n];break}}return t}},{key:"emojiCategories",value:function(){var e=this,t=this.state.categories,n=Object.keys(t),r=this.state.filter?n[0]:this.getCurrentEmojiCategoryName(),a=n.map(function(n){var a=t[n];return E.a.createElement(yr,{key:"header-"+a.name,category:a.name,icon:E.a.createElement(Y.c,{id:a.id,defaultMessage:a.message},function(e){return E.a.createElement("i",{className:a.className,title:e})}),onCategoryClick:e.handleCategoryClick,selected:r===a.name,enable:!e.state.filter})});return E.a.createElement("div",{className:"emoji-picker__categories",onKeyDown:this.handleCategoryKeyDown},a)}},{key:"emojiSearch",value:function(){var e=this;return E.a.createElement("div",{className:"emoji-picker__search-container"},E.a.createElement("span",{className:"fa fa-search emoji-picker__search-icon"}),E.a.createElement(Y.c,{id:"emoji_picker.search_emoji",defaultMessage:"Search for an emoji"},function(t){return E.a.createElement(ke.a,{"aria-label":t,ref:e.emojiSearchInput,className:"emoji-picker__search",type:"text",onChange:e.handleFilterChange,onKeyDown:e.handleKeyDown,placeholder:{id:Object(Me.b)("emoji_picker.search"),defaultMessage:"Search Emoji"}})}))}},{key:"emojiCurrentResults",value:function(){for(var e=this.state.filter?["searchResults"]:Object.keys(this.state.categories),t=0,n=[],r=0;r<e.length;r++){var a=this.getCategoriesByKey(e[r]),o=this.getEmojisByCategory(a),i=this.emojiCurrentResultsItems(r,o,t);t+=i.length,n=[].concat(Vr(n),[E.a.createElement(xr,{key:a.id,categoryName:a.name,updateCategoryOffset:this.updateCategoryOffset,role:"application"},i)])}return E.a.createElement("div",{ref:this.emojiPickerContainerRef,onScroll:this.handleScrollThrottle,className:"emoji-picker__items",style:Xr},E.a.createElement("div",{className:"emoji-picker__container"},n))}},{key:"updateCategoryOffset",value:function(e,t){"searchResults"!==e&&this.setState(function(n){return{categories:Gr({},n.categories,Zr({},e,Gr({},n.categories[e],{offset:t})))}})}},{key:"render",value:function(){return E.a.createElement("div",{className:"emoji-picker__inner",role:"application"},E.a.createElement("div",{"aria-live":"assertive",className:"sr-only"},E.a.createElement(Y.c,{id:"emoji_picker_item.emoji_aria_label",defaultMessage:"{emojiName} emoji",values:{emojiName:this.getCurrentEmojiName()}})),this.emojiSearch(),this.emojiCategories(),this.emojiCurrentResults(),E.a.createElement(Fr,{emoji:this.getCurrentEmojiByCursor(this.state.cursor)}))}}])&&Kr(n.prototype,r),a&&Kr(n,a),t}();Zr(aa,"propTypes",{listHeight:v.a.number,onEmojiClose:v.a.func.isRequired,onEmojiClick:v.a.func.isRequired,customEmojisEnabled:v.a.bool,emojiMap:v.a.object.isRequired,recentEmojis:v.a.array.isRequired,customEmojiPage:v.a.number.isRequired,visible:v.a.bool,actions:v.a.shape({getCustomEmojis:v.a.func.isRequired,searchCustomEmojis:v.a.func.isRequired,incrementEmojiPickerPage:v.a.func.isRequired}).isRequired}),Zr(aa,"defaultProps",{listHeight:245,customEmojiPage:0,customEmojisEnabled:!1});var oa=Object(r.connect)(function(e){return{customEmojisEnabled:"true"===e.entities.general.config.EnableCustomEmoji,customEmojiPage:e.views.emoji.emojiPickerCustomPage,emojiMap:Object(or.a)(e),recentEmojis:Object(or.b)(e)}},function(e){return{actions:Object(a.bindActionCreators)({getCustomEmojis:rr.getCustomEmojis,searchCustomEmojis:rr.searchCustomEmojis,incrementEmojiPickerPage:ar.b},e)}})(aa);function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ca(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var da=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=la(t).call(this,e),n=!a||"object"!==ia(a)&&"function"!=typeof a?ca(r):a,pa(ca(n),"handleEnterEmojiTab",function(){n.setState({emojiTabVisible:!0})}),pa(ca(n),"handleExitEmojiTab",function(){n.setState({emojiTabVisible:!1})}),pa(ca(n),"handleEmojiPickerClose",function(){n.props.onEmojiClose()}),n.state={emojiTabVisible:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e;!this.props.style||0===this.props.style.left&&0===this.props.style.top||(e="top"===this.props.placement||"bottom"===this.props.placement?{top:this.props.style.top,bottom:this.props.style.bottom,right:this.props.rightOffset}:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){pa(e,t,n[t])})}return e}({},this.props.style)).top&&(e.top+=this.props.topOffset);var t="emoji-picker";return"bottom"===this.props.placement&&(t+=" bottom"),this.props.enableGifPicker&&void 0!==this.props.onGifClick?E.a.createElement(le.a,{defaultActiveKey:1,id:"emoji-picker-tabs",style:e,className:t,justified:!0},E.a.createElement(nr,{handleEmojiPickerClose:this.handleEmojiPickerClose}),E.a.createElement(ce.a,{eventKey:1,onEnter:this.handleEnterEmojiTab,onExit:this.handleExitEmojiTab,title:E.a.createElement(Vn,null)},E.a.createElement(oa,{style:this.props.style,onEmojiClose:this.props.onEmojiClose,onEmojiClick:this.props.onEmojiClick,customEmojis:this.props.customEmojis,visible:this.state.emojiTabVisible})),E.a.createElement(ce.a,{eventKey:2,title:E.a.createElement(Jn,null),mountOnEnter:!0,unmountOnExit:!0},E.a.createElement(Un,{onGifClick:this.props.onGifClick}))):E.a.createElement("div",{id:"emojiPicker",style:e,className:"a11y__popup ".concat(t," emoji-picker--single")},E.a.createElement(nr,{handleEmojiPickerClose:this.handleEmojiPickerClose}),E.a.createElement(oa,{style:this.props.style,onEmojiClose:this.props.onEmojiClose,onEmojiClick:this.props.onEmojiClick,customEmojis:this.props.customEmojis}))}}])&&sa(n.prototype,r),a&&sa(n,a),t}();function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ha(e,t){return!t||"object"!==ma(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ba(e){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ya(e,t){return(ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}pa(da,"propTypes",{style:v.a.object,rightOffset:v.a.number,topOffset:v.a.number,placement:v.a.oneOf(["top","bottom","left"]),customEmojis:v.a.object,onEmojiClose:v.a.func.isRequired,onEmojiClick:v.a.func.isRequired,onGifClick:v.a.func,enableGifPicker:v.a.bool}),pa(da,"defaultProps",{rightOffset:0,topOffset:0});var va=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ha(this,ba(t).call(this,e))).state={placement:"top",rightOffset:P.i.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ya(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillUpdate",value:function(e){if(e.show&&!this.props.show){var t=e.target().getBoundingClientRect(),n=Object(se.a)(t,window.innerHeight,{above:e.spaceRequiredAbove,below:e.spaceRequiredBelow});this.setState({placement:n,rightOffset:this.emojiPickerPosition()})}}},{key:"emojiPickerPosition",value:function(){var e=this.props.target(),t=P.i.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET;return e&&(t=window.innerWidth-e.getBoundingClientRect().left-P.i.DEFAULT_EMOJI_PICKER_LEFT_OFFSET)<P.i.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET&&(t=P.i.DEFAULT_EMOJI_PICKER_RIGHT_OFFSET),t}},{key:"render",value:function(){return E.a.createElement(ie.a,{show:this.props.show,placement:this.state.placement,rootClose:!0,container:this.props.container,onHide:this.props.onHide,target:this.props.target,animation:!1},E.a.createElement(da,{enableGifPicker:this.props.enableGifPicker,onEmojiClose:this.props.onHide,onEmojiClick:this.props.onEmojiClick,onGifClick:this.props.onGifClick,rightOffset:this.state.rightOffset,topOffset:this.props.topOffset}))}}])&&fa(n.prototype,r),a&&fa(n,a),t}();ga(va,"CENTER_SPACE_REQUIRED_ABOVE",476),ga(va,"CENTER_SPACE_REQUIRED_BELOW",497),ga(va,"RHS_SPACE_REQUIRED_ABOVE",420),ga(va,"RHS_SPACE_REQUIRED_BELOW",420),ga(va,"propTypes",{show:v.a.bool.isRequired,container:v.a.func,target:v.a.func.isRequired,onEmojiClick:v.a.func.isRequired,onGifClick:v.a.func,onHide:v.a.func.isRequired,topOffset:v.a.number,spaceRequiredAbove:v.a.number,spaceRequiredBelow:v.a.number,enableGifPicker:v.a.bool}),ga(va,"defaultProps",{spaceRequiredAbove:va.CENTER_SPACE_REQUIRED_ABOVE,spaceRequiredBelow:va.CENTER_SPACE_REQUIRED_BELOW,enableGifPicker:!1});var _a,Ea=n(1511),wa=n(1781),Oa=n(1532),Sa=n(318);function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ka(e,t){return(ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Na,Ra=(Ma(_a={},L.Posts.POST_TYPES.ADD_TO_CHANNEL,{id:Object(Me.b)("last_users_message.added_to_channel.type"),defaultMessage:"were **added to the channel** by {actor}."}),Ma(_a,L.Posts.POST_TYPES.JOIN_CHANNEL,{id:Object(Me.b)("last_users_message.joined_channel.type"),defaultMessage:"**joined the channel**."}),Ma(_a,L.Posts.POST_TYPES.LEAVE_CHANNEL,{id:Object(Me.b)("last_users_message.left_channel.type"),defaultMessage:"**left the channel**."}),Ma(_a,L.Posts.POST_TYPES.REMOVE_FROM_CHANNEL,{id:Object(Me.b)("last_users_message.removed_from_channel.type"),defaultMessage:"were **removed from the channel**."}),Ma(_a,L.Posts.POST_TYPES.ADD_TO_TEAM,{id:Object(Me.b)("last_users_message.added_to_team.type"),defaultMessage:"were **added to the team** by {actor}."}),Ma(_a,L.Posts.POST_TYPES.JOIN_TEAM,{id:Object(Me.b)("last_users_message.joined_team.type"),defaultMessage:"**joined the team**."}),Ma(_a,L.Posts.POST_TYPES.LEAVE_TEAM,{id:Object(Me.b)("last_users_message.left_team.type"),defaultMessage:"**left the team**."}),Ma(_a,L.Posts.POST_TYPES.REMOVE_FROM_TEAM,{id:Object(Me.b)("last_users_message.removed_from_team.type"),defaultMessage:"were **removed from the team**."}),_a),Ia=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ta(t).call(this,e),n=!a||"object"!==Ca(a)&&"function"!=typeof a?ja(r):a,Ma(ja(n),"handleOnClick",function(e){e.preventDefault(),n.setState({expand:!0})}),Ma(ja(n),"renderMessage",function(e){return E.a.createElement(Oa.a,{message:e,options:n.props.formatOptions})}),n.state={expand:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ka(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.context.intl.formatMessage,t=this.state.expand,n=this.props,r=n.actor,a=n.expandedLocale,o=n.postType,i=n.usernames,s=i[0],l=i.length-1,c=i[l];if(t){var u=e(a,{users:i.slice(0,l).join(", "),lastUser:c,actor:r});return this.renderMessage(u)}var p=e({id:"last_users_message.first",defaultMessage:"{firstUser} and "},{firstUser:s}),d=e({id:"last_users_message.others",defaultMessage:"{numOthers} others "},{numOthers:l}),m=e({id:Ra[o].id,defaultMessage:Ra[o].defaultMessage},{actor:r});return E.a.createElement("span",null,this.renderMessage(p),E.a.createElement("a",{onClick:this.handleOnClick},d),this.renderMessage(m))}}])&&Pa(n.prototype,r),a&&Pa(n,a),t}();function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xa(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function La(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Da(e){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ua(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qa(e,t){return(qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ma(Ia,"propTypes",{actor:v.a.string,expandedLocale:v.a.object.isRequired,formatOptions:v.a.object.isRequired,postType:v.a.string.isRequired,usernames:v.a.array.isRequired}),Ma(Ia,"contextTypes",{intl:Y.i});var Fa=L.Posts.POST_TYPES,Ba=Fa.JOIN_CHANNEL,Ga=Fa.ADD_TO_CHANNEL,Va=Fa.REMOVE_FROM_CHANNEL,Wa=Fa.LEAVE_CHANNEL,za=Fa.JOIN_TEAM,Ka=Fa.ADD_TO_TEAM,Ya=Fa.REMOVE_FROM_TEAM,Qa=Fa.LEAVE_TEAM,Ja=(Ha(Na={},Ba,{one:{id:Object(Me.b)("combined_system_message.joined_channel.one"),defaultMessage:"{firstUser} **joined the channel**."},one_you:{id:Object(Me.b)("combined_system_message.joined_channel.one_you"),defaultMessage:"You **joined the channel**."},two:{id:Object(Me.b)("combined_system_message.joined_channel.two"),defaultMessage:"{firstUser} and {secondUser} **joined the channel**."},many_expanded:{id:Object(Me.b)("combined_system_message.joined_channel.many_expanded"),defaultMessage:"{users} and {lastUser} **joined the channel**."}}),Ha(Na,Ga,{one:{id:Object(Me.b)("combined_system_message.added_to_channel.one"),defaultMessage:"{firstUser} **added to the channel** by {actor}."},one_you:{id:Object(Me.b)("combined_system_message.added_to_channel.one_you"),defaultMessage:"You were **added to the channel** by {actor}."},two:{id:Object(Me.b)("combined_system_message.added_to_channel.two"),defaultMessage:"{firstUser} and {secondUser} **added to the channel** by {actor}."},many_expanded:{id:Object(Me.b)("combined_system_message.added_to_channel.many_expanded"),defaultMessage:"{users} and {lastUser} were **added to the channel** by {actor}."}}),Ha(Na,Va,{one:{id:Object(Me.b)("combined_system_message.removed_from_channel.one"),defaultMessage:"{firstUser} was **removed from the channel**."},one_you:{id:Object(Me.b)("combined_system_message.removed_from_channel.one_you"),defaultMessage:"You were **removed from the channel**."},two:{id:Object(Me.b)("combined_system_message.removed_from_channel.two"),defaultMessage:"{firstUser} and {secondUser} were **removed from the channel**."},many_expanded:{id:Object(Me.b)("combined_system_message.removed_from_channel.many_expanded"),defaultMessage:"{users} and {lastUser} were **removed from the channel**."}}),Ha(Na,Wa,{one:{id:Object(Me.b)("combined_system_message.left_channel.one"),defaultMessage:"{firstUser} **left the channel**."},one_you:{id:Object(Me.b)("combined_system_message.left_channel.one_you"),defaultMessage:"You **left the channel**."},two:{id:Object(Me.b)("combined_system_message.left_channel.two"),defaultMessage:"{firstUser} and {secondUser} **left the channel**."},many_expanded:{id:Object(Me.b)("combined_system_message.left_channel.many_expanded"),defaultMessage:"{users} and {lastUser} **left the channel**."}}),Ha(Na,za,{one:{id:Object(Me.b)("combined_system_message.joined_team.one"),defaultMessage:"{firstUser} **joined the team**."},one_you:{id:Object(Me.b)("combined_system_message.joined_team.one_you"),defaultMessage:"You **joined the team**."},two:{id:Object(Me.b)("combined_system_message.joined_team.two"),defaultMessage:"{firstUser} and {secondUser} **joined the team**."},many_expanded:{id:Object(Me.b)("combined_system_message.joined_team.many_expanded"),defaultMessage:"{users} and {lastUser} **joined the team**."}}),Ha(Na,Ka,{one:{id:Object(Me.b)("combined_system_message.added_to_team.one"),defaultMessage:"{firstUser} **added to the team** by {actor}."},one_you:{id:Object(Me.b)("combined_system_message.added_to_team.one_you"),defaultMessage:"You were **added to the team** by {actor}."},two:{id:Object(Me.b)("combined_system_message.added_to_team.two"),defaultMessage:"{firstUser} and {secondUser} **added to the team** by {actor}."},many_expanded:{id:Object(Me.b)("combined_system_message.added_to_team.many_expanded"),defaultMessage:"{users} and {lastUser} were **added to the team** by {actor}."}}),Ha(Na,Ya,{one:{id:Object(Me.b)("combined_system_message.removed_from_team.one"),defaultMessage:"{firstUser} was **removed from the team**."},one_you:{id:Object(Me.b)("combined_system_message.removed_from_team.one_you"),defaultMessage:"You were **removed from the team**."},two:{id:Object(Me.b)("combined_system_message.removed_from_team.two"),defaultMessage:"{firstUser} and {secondUser} were **removed from the team**."},many_expanded:{id:Object(Me.b)("combined_system_message.removed_from_team.many_expanded"),defaultMessage:"{users} and {lastUser} were **removed from the team**."}}),Ha(Na,Qa,{one:{id:Object(Me.b)("combined_system_message.left_team.one"),defaultMessage:"{firstUser} **left the team**."},one_you:{id:Object(Me.b)("combined_system_message.left_team.one_you"),defaultMessage:"You **left the team**."},two:{id:Object(Me.b)("combined_system_message.left_team.two"),defaultMessage:"{firstUser} and {secondUser} **left the team**."},many_expanded:{id:Object(Me.b)("combined_system_message.left_team.many_expanded"),defaultMessage:"{users} and {lastUser} **left the team**."}}),Na),Za=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Da(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Aa(a)&&"function"!=typeof a?Ua(r):a,Ha(Ua(n),"loadUserProfiles",function(e,t){e.length>0&&n.props.actions.getMissingProfilesByIds(e),t.length>0&&n.props.actions.getMissingProfilesByUsernames(t)}),Ha(Ua(n),"getAllUsernames",function(){var e=n.props,t=e.allUserIds,r=e.allUsernames,a=e.currentUserId,o=e.currentUsername,i=e.userProfiles,s=n.context.intl.formatMessage,l=i.reduce(function(e,t){return e[t.id]=t.username,e[t.username]=t.username,e},{}),c=s({id:Object(Me.b)("combined_system_message.you"),defaultMessage:"You"});return t.includes(a)?l[a]=c:r.includes(o)&&(l[o]=c),l}),Ha(Ua(n),"getUsernamesByIds",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.props,r=t.currentUserId,a=t.currentUsername,o=n.getAllUsernames(),i=(0,n.context.intl.formatMessage)({id:Object(Me.b)("channel_loader.someone"),defaultMessage:"Someone"}),s=e.filter(function(e){return e!==r&&e!==a}).map(function(e){return o[e]?"@".concat(o[e]):i}).filter(function(e){return e&&""!==e});return e.includes(r)?s.unshift(o[r]):e.includes(a)&&s.unshift(o[a]),s}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qa(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.loadUserProfiles(this.props.allUserIds,this.props.allUsernames)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.allUserIds,r=t.allUsernames;n===e.allUserIds&&r===e.allUsernames||this.loadUserProfiles(n,r)}},{key:"renderFormattedMessage",value:function(e,t,n){var r=this.context.intl.formatMessage,a=this.props,o=a.currentUserId,i=a.currentUsername,s=this.getUsernamesByIds(t),l=n?this.getUsernamesByIds([n])[0]:"";!l||n!==o&&n!==i||(l=l.toLowerCase());var c,u=s[0],p=s[1],d=s.length-1,m={atMentions:!0,mentionKeys:[{key:u},{key:p},{key:l}],mentionHighlight:!1,singleline:!0};if(d>1)return E.a.createElement(Ia,{actor:l,expandedLocale:Ja[e].many_expanded,formatOptions:m,postType:e,usernames:s});0===d?(c=Ja[e].one,t[0]!==this.props.currentUserId&&t[0]!==this.props.currentUsername||!Ja[e].one_you||(c=Ja[e].one_you)):1===d&&(c=Ja[e].two);var f=r(c,{firstUser:u,secondUser:p,actor:l});return E.a.createElement(Oa.a,{message:f,options:m})}},{key:"renderMessage",value:function(e,t,n){return E.a.createElement(E.a.Fragment,{key:e+n},this.renderFormattedMessage(e,t,n),E.a.createElement("br",null))}},{key:"render",value:function(){var e=this.props,t=e.currentUserId,n=e.messageData,r=[],a=[],o=!0,i=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,p=u.postType,d=u.actorId,m=u.userIds;if(!this.props.showJoinLeave&&d!==t){if(!(-1!==m.indexOf(t)))continue;m=[t]}p!==Va?r.push(this.renderMessage(p,m,d)):a.push.apply(a,xa(m))}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}if(a.length>0){var f=a.filter(function(e,t,n){return n.indexOf(e)===t});r.push(this.renderMessage(Va,f,t))}return E.a.createElement(E.a.Fragment,null,r)}}])&&La(n.prototype,r),a&&La(n,a),t}();Ha(Za,"propTypes",{allUserIds:v.a.array.isRequired,allUsernames:v.a.array.isRequired,currentUserId:v.a.string.isRequired,currentUsername:v.a.string.isRequired,messageData:v.a.array.isRequired,showJoinLeave:v.a.bool.isRequired,userProfiles:v.a.array.isRequired,actions:v.a.shape({getMissingProfilesByIds:v.a.func.isRequired,getMissingProfilesByUsernames:v.a.func.isRequired}).isRequired}),Ha(Za,"defaultProps",{allUserIds:[],allUsernames:[]}),Ha(Za,"contextTypes",{intl:Y.i});var Xa=Object(r.connect)(function(){var e=Object(p.makeGetProfilesByIdsAndUsernames)();return function(t,n){var r=Object(p.getCurrentUser)(t),a=n.allUserIds,o=n.allUsernames;return{currentUserId:r.id,currentUsername:r.username,showJoinLeave:Object(c.getBool)(t,L.Preferences.CATEGORY_ADVANCED_SETTINGS,L.Preferences.ADVANCED_FILTER_JOIN_LEAVE,!0),userProfiles:e(t,{allUserIds:a,allUsernames:o})}}},function(e){return{actions:Object(a.bindActionCreators)({getMissingProfilesByIds:i.getMissingProfilesByIds,getMissingProfilesByUsernames:i.getMissingProfilesByUsernames},e)}})(Za),$a=n(62),eo=n(1868);function to(e){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function no(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function io(e,t){return(io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lo=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=ao(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==to(a)&&"function"!=typeof a?oo(r):a,so(oo(n),"handleAddChannelMember",function(){var e=n.props,t=e.currentUser,r=e.post,a=e.userIds,o=e.usernames;if(r&&r.channel_id){var i=r.create_at;a.forEach(function(e,a){i++,n.props.actions.addChannelMember(r.channel_id,e),Object(C.g)(t,o[a],e,r.channel_id,r.root_id,i)}),n.props.actions.removePost(r)}}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&io(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"generateAtMentions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(1===e.length)return E.a.createElement(eo.a,{mentionName:e[0]});if(e.length>1){function t(e){return E.a.createElement(Y.c,{key:e,id:"post_body.check_for_out_of_channel_mentions.link.and",defaultMessage:" and "})}function n(e){return E.a.createElement("span",{key:e},", ")}return E.a.createElement("span",null,e.map(function(e){return E.a.createElement(eo.a,{key:e,mentionName:e})}).reduce(function(e,r,a,o){return 0===a?[r]:a===o.length-1?[].concat(no(e),[t(a),r]):[].concat(no(e),[n(a),r])},[]))}return""}},{key:"render",value:function(){var e,t,n,r,a=this.props,o=a.channelType,i=a.postId,s=a.usernames,l=a.noGroupsUsernames;if(!i||!o)return null;o===P.i.PRIVATE_CHANNEL?(e=Object(Me.b)("post_body.check_for_out_of_channel_mentions.link.private"),t="add them to this private channel"):o===P.i.OPEN_CHANNEL&&(e=Object(Me.b)("post_body.check_for_out_of_channel_mentions.link.public"),t="add them to the channel");var c,u,p=this.generateAtMentions(s);1===s.length?(n=Object(Me.b)("post_body.check_for_out_of_channel_mentions.message.one"),r="did not get notified by this mention because they are not in the channel. Would you like to "):s.length>1&&(n=Object(Me.b)("post_body.check_for_out_of_channel_mentions.message.multiple"),r="did not get notified by this mention because they are not in the channel. Would you like to ");var d=this.generateAtMentions(l);l.length&&(c=Object(Me.b)("post_body.check_for_out_of_channel_groups_mentions.message"),u="did not get notified by this mention because they are not in the channel. They cannot be added to the channel because they are not a member of the linked groups. To add them to this channel, they must be added to the linked groups.");var m=null,f=null;return s.length&&(m=E.a.createElement("p",null,p," ",E.a.createElement(Y.c,{id:n,defaultMessage:r}),E.a.createElement("a",{id:"add_channel_member_link",onClick:this.handleAddChannelMember},E.a.createElement(Y.c,{id:e,defaultMessage:t})),E.a.createElement(Y.c,{id:"post_body.check_for_out_of_channel_mentions.message_last",defaultMessage:"? They will have access to all message history."}))),l.length&&(f=E.a.createElement("p",null,d," ",E.a.createElement(Y.c,{id:c,defaultMessage:u}))),E.a.createElement(E.a.Fragment,null,m,f)}}])&&ro(n.prototype,r),a&&ro(n,a),t}();so(lo,"propTypes",{currentUser:v.a.object.isRequired,channelType:v.a.string.isRequired,postId:v.a.string.isRequired,post:v.a.object.isRequired,userIds:v.a.array.isRequired,usernames:v.a.array.isRequired,noGroupsUsernames:v.a.array.isRequired,actions:v.a.shape({addChannelMember:v.a.func.isRequired,removePost:v.a.func.isRequired}).isRequired});var co,uo=Object(r.connect)(function(e,t){var n=Object($a.getPost)(e,t.postId)||{},r="";if(n&&n.channel_id){var a=Object(m.getChannel)(e,n.channel_id);a&&a.type&&(r=a.type)}return{channelType:r,currentUser:Object(p.getCurrentUser)(e),post:n}},function(e){return{actions:Object(a.bindActionCreators)({addChannelMember:s.addChannelMember,removePost:x.removePost},e)}})(lo);function po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mo(e){return fo("@"===e[0]?e:"@".concat(e),{markdown:!1})}function fo(e,t){return E.a.createElement(Oa.a,{message:e,options:t})}function ho(e){var t=mo(e.props.username),n=mo(e.props.addedUsername);return E.a.createElement(Y.c,{id:"api.channel.add_member.added",defaultMessage:"{addedUsername} added to the channel by {username}.",values:{username:t,addedUsername:n}})}var bo=(po(co={},L.Posts.POST_TYPES.JOIN_CHANNEL,function(e){var t=mo(e.props.username);return E.a.createElement(Y.c,{id:"api.channel.join_channel.post_and_forget",defaultMessage:"{username} joined the channel.",values:{username:t}})}),po(co,L.Posts.POST_TYPES.LEAVE_CHANNEL,function(e){var t=mo(e.props.username);return E.a.createElement(Y.c,{id:"api.channel.leave.left",defaultMessage:"{username} has left the channel.",values:{username:t}})}),po(co,L.Posts.POST_TYPES.ADD_TO_CHANNEL,ho),po(co,L.Posts.POST_TYPES.REMOVE_FROM_CHANNEL,function(e){var t=mo(e.props.removedUsername);return E.a.createElement(Y.c,{id:"api.channel.remove_member.removed",defaultMessage:"{removedUsername} was removed from the channel",values:{removedUsername:t}})}),po(co,L.Posts.POST_TYPES.JOIN_TEAM,function(e){var t=mo(e.props.username);return E.a.createElement(Y.c,{id:"api.team.join_team.post_and_forget",defaultMessage:"{username} joined the team.",values:{username:t}})}),po(co,L.Posts.POST_TYPES.LEAVE_TEAM,function(e){var t=mo(e.props.username);return E.a.createElement(Y.c,{id:"api.team.leave.left",defaultMessage:"{username} left the team.",values:{username:t}})}),po(co,L.Posts.POST_TYPES.ADD_TO_TEAM,function(e){var t=mo(e.props.username),n=mo(e.props.addedUsername);return E.a.createElement(Y.c,{id:"api.team.add_member.added",defaultMessage:"{addedUsername} added to the team by {username}.",values:{username:t,addedUsername:n}})}),po(co,L.Posts.POST_TYPES.REMOVE_FROM_TEAM,function(e){var t=mo(e.props.username);return E.a.createElement(Y.c,{id:"api.team.remove_user_from_team.removed",defaultMessage:"{removedUsername} was removed from the team.",values:{removedUsername:t}})}),po(co,L.Posts.POST_TYPES.HEADER_CHANGE,function(e){if(!e.props.username)return null;var t={singleline:!0,channelNamesMap:e.props&&e.props.channel_mentions},n=mo(e.props.username),r=e.props.old_header?fo(e.props.old_header,t):null,a=e.props.new_header?fo(e.props.new_header,t):null;return e.props.new_header?e.props.old_header?E.a.createElement(Y.c,{id:"api.channel.post_update_channel_header_message_and_forget.updated_from",defaultMessage:"{username} updated the channel header from: {old} to: {new}",values:{username:n,old:r,new:a}}):E.a.createElement(Y.c,{id:"api.channel.post_update_channel_header_message_and_forget.updated_to",defaultMessage:"{username} updated the channel header to: {new}",values:{username:n,new:a}}):e.props.old_header?E.a.createElement(Y.c,{id:"api.channel.post_update_channel_header_message_and_forget.removed",defaultMessage:"{username} removed the channel header (was: {old})",values:{username:n,old:r}}):null}),po(co,L.Posts.POST_TYPES.DISPLAYNAME_CHANGE,function(e){if(!(e.props.username&&e.props.old_displayname&&e.props.new_displayname))return null;var t=mo(e.props.username),n=e.props.old_displayname,r=e.props.new_displayname;return E.a.createElement(Y.c,{id:"api.channel.post_update_channel_displayname_message_and_forget.updated_from",defaultMessage:"{username} updated the channel display name from: {old} to: {new}",values:{username:t,old:n,new:r}})}),po(co,L.Posts.POST_TYPES.CONVERT_CHANNEL,function(e){if(!e.props.username)return null;var t=mo(e.props.username);return E.a.createElement(Y.c,{id:"api.channel.post_convert_channel_to_private.updated_from",defaultMessage:"{username} converted the channel from public to private",values:{username:t}})}),po(co,L.Posts.POST_TYPES.PURPOSE_CHANGE,function(e){if(!e.props.username)return null;var t=mo(e.props.username),n=e.props.old_purpose,r=e.props.new_purpose;return e.props.new_purpose?e.props.old_purpose?E.a.createElement(Y.c,{id:"app.channel.post_update_channel_purpose_message.updated_from",defaultMessage:"{username} updated the channel purpose from: {old} to: {new}",values:{username:t,old:n,new:r}}):E.a.createElement(Y.c,{id:"app.channel.post_update_channel_purpose_message.updated_to",defaultMessage:"{username} updated the channel purpose to: {new}",values:{username:t,new:r}}):e.props.old_purpose?E.a.createElement(Y.c,{id:"app.channel.post_update_channel_purpose_message.removed",defaultMessage:"{username} removed the channel purpose (was: {old})",values:{username:t,old:n}}):null}),po(co,L.Posts.POST_TYPES.CHANNEL_DELETED,function(e){if(!e.props.username)return null;var t=mo(e.props.username);return E.a.createElement(Y.c,{id:"api.channel.delete_channel.archived",defaultMessage:"{username} has archived the channel.",values:{username:t}})}),po(co,L.Posts.POST_TYPES.ME,function(e){return fo(e.props&&e.props.message?e.props.message:e.message)}),co);function yo(e){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vo(e,t){return!t||"object"!==yo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _o(e){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eo(e,t){return(Eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vo(this,_o(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eo(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){if(this.props.post){var e=function(e,t){if(e.props&&e.props.add_channel_member){var n=Object(Sa.a)(t),r=j.V(e);if((t.type===L.General.PRIVATE_CHANNEL||t.type===L.General.OPEN_CHANNEL)&&n&&r){var a=e.props.add_channel_member;return E.a.createElement(uo,{postId:a.post_id,userIds:a.not_in_channel_user_ids,noGroupsUsernames:a.not_in_groups_usernames,usernames:a.not_in_channel_usernames})}return null}if(bo[e.type])return bo[e.type](e);if(e.type===L.Posts.POST_TYPES.EPHEMERAL_ADD_TO_CHANNEL)return ho(e);if(e.type===L.Posts.POST_TYPES.COMBINED_USER_ACTIVITY){var o=e.props.user_activity,i=o.allUserIds,s=o.allUsernames,l=o.messageData;return E.a.createElement(Xa,{allUserIds:i,allUsernames:s,messageData:l})}return null}(this.props.post,this.props.channel);if(e)return E.a.createElement("div",null,e)}var t=!this.props.post||!this.props.post.message_source||this.props.post.message===this.props.post.message_source,n=this.props.post&&this.props.post.props&&this.props.post.props.channel_mentions,r=this.props.message,a=this.props.post;return this.props.pluginHooks.forEach(function(e){e&&e.hook&&a&&(r=e.hook(a,r))}),E.a.createElement(Oa.a,{imageProps:this.props.imageProps,isRHS:this.props.isRHS,message:r,proxyImages:t,options:this.props.options,channelNamesMap:n,hasPluginTooltips:this.props.hasPluginTooltips,imagesMetadata:this.props.post&&this.props.post.metadata&&this.props.post.metadata.images})}}])&&go(n.prototype,r),a&&go(n,a),t}();wo(Oo,"propTypes",{imageProps:v.a.object,isRHS:v.a.bool,message:v.a.string.isRequired,post:v.a.object,channel:v.a.object,options:v.a.object,pluginHooks:v.a.arrayOf(v.a.object),hasPluginTooltips:v.a.bool}),wo(Oo,"defaultProps",{isRHS:!1,pluginHooks:[]});var So=Object(r.connect)(function(e,t){return{channel:Object(m.getChannel)(e,t.channelId),pluginHooks:e.plugins.components.MessageWillFormat,hasPluginTooltips:Boolean(e.plugins.components.LinkTooltip)}})(Oo),Co=n(151),Po=n.n(Co),To=n(107),jo=n(1515),ko=(n(245),n(1506)),Mo=n(1516);function No(e){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Io(e,t){return!t||"object"!==No(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ao(e){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xo(e,t){return(xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Io(this,Ao(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xo(e,t)}(t,Mo["a"]),n=t,(r=[{key:"render",value:function(){var e,t,n,r=this.props.isSelection,a=this.props.item;"all"===a.username?(e="all",t=E.a.createElement(Y.c,{id:"suggestion.mention.all",defaultMessage:"Notifies everyone in this channel"}),n=E.a.createElement(Y.c,{id:"generic_icons.member",defaultMessage:"Member Icon"},function(e){return E.a.createElement("i",{className:"mention__image fa fa-users fa-2x",title:e})})):"channel"===a.username?(e="channel",t=E.a.createElement(Y.c,{id:"suggestion.mention.channel",defaultMessage:"Notifies everyone in this channel"}),n=E.a.createElement(Y.c,{id:"generic_icons.member",defaultMessage:"Member Icon"},function(e){return E.a.createElement("i",{className:"mention__image fa fa-users fa-2x",title:e})})):"here"===a.username?(e="here",t=E.a.createElement(Y.c,{id:"suggestion.mention.here",defaultMessage:"Notifies everyone online in this channel"}),n=E.a.createElement(Y.c,{id:"generic_icons.member",defaultMessage:"Member Icon"},function(e){return E.a.createElement("i",{className:"mention__image fa fa-users fa-2x",title:e})})):(e=a.username,(a.first_name||a.last_name)&&a.nickname?t="- ".concat(j.z(a)," (").concat(a.nickname,")"):a.nickname?t="- (".concat(a.nickname,")"):(a.first_name||a.last_name)&&(t="- ".concat(j.z(a))),n=E.a.createElement("img",{alt:"mention image",className:"mention__image",src:j.J(a)}));var o="mentions__name";return r&&(o+=" suggestion--selected"),E.a.createElement("div",Object.assign({className:o,onClick:this.handleClick},Mo.a.baseProps),n,E.a.createElement("span",{className:"mention--align"},"@"+e),E.a.createElement(ko.a,{show:Boolean(a.is_bot),className:"badge-autocomplete"}),E.a.createElement("span",{className:"mention__fullname"}," ",t))}}])&&Ro(n.prototype,r),a&&Ro(n,a),t}();function Do(e){return(Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){qo(e,t,n[t])})}return e}function qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ho(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bo(e,t){return!t||"object"!==Do(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Go(e){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vo(e,t){return(Vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bo(this,Go(t).call(this))).setProps(e),n.data=null,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vo(e,t)}(t,jo["a"]),n=t,(r=[{key:"setProps",value:function(e){var t=e.currentUserId,n=e.profilesInChannel,r=e.profilesNotInChannel,a=e.autocompleteUsersInChannel;this.currentUserId=t,this.profilesInChannel=n,this.profilesNotInChannel=r,this.autocompleteUsersInChannel=a}},{key:"specialMentions",value:function(){var e=this;return this.latestPrefix.startsWith("/msg")?[]:["here","channel","all"].filter(function(t){return t.startsWith(e.latestPrefix)}).map(function(e){return{username:e,type:P.i.MENTION_SPECIAL}})}},{key:"getProfileSuggestions",value:function(e){var t=[];if(!e)return t;if(e.username){var n=Object(To.getSuggestionsSplitByMultiple)(e.username.toLowerCase(),P.i.AUTOCOMPLETE_SPLIT_CHARACTERS);t.push.apply(t,Ho(n))}return[e.first_name,e.last_name,e.nickname].forEach(function(e){var n=Object(To.getSuggestionsSplitBy)(e.toLowerCase()," ");t.push.apply(t,Ho(n))}),t}},{key:"filterProfile",value:function(e){if(!e)return!1;if(e.id===this.currentUserId)return!1;var t=this.latestPrefix.toLowerCase();return this.getProfileSuggestions(e).some(function(e){return e.startsWith(t)})}},{key:"localMembers",value:function(){var e=this,t=this.profilesInChannel.filter(function(t){return e.filterProfile(t)}).map(function(e){return Uo({type:P.i.MENTION_MEMBERS},e)}).sort(function(e,t){return e.username.localeCompare(t.username)}).splice(0,25);return t}},{key:"remoteMembers",value:function(){var e=this;return this.data?(this.data.users||[]).filter(function(t){return e.filterProfile(t)}).map(function(e){return Uo({type:P.i.MENTION_MEMBERS},e)}):[]}},{key:"remoteNonMembers",value:function(){var e=this;return this.data?(this.data.out_of_channel||[]).filter(function(t){return e.filterProfile(t)}).map(function(e){return Uo({type:P.i.MENTION_NONMEMBERS},e)}):[]}},{key:"users",value:function(){var e=this.specialMentions(),t=this.localMembers(),n={};t.forEach(function(e){n[e.id]=!0});var r=this.remoteMembers().filter(function(e){return!n[e.id]}),a=t.concat(r).sort(function(e,t){return e.username.localeCompare(t.username)}),o=this.remoteNonMembers().filter(function(e){return!n[e.id]});return a.concat(e).concat(o)}},{key:"updateMatches",value:function(e,t){var n=t.map(function(e){return e.username?"@"+e.username:""});e({matchedPretext:"@".concat(this.latestPrefix),terms:n,items:t,component:Lo})}},{key:"handlePretextChanged",value:function(e,t){var n=this,r=Po.a.cache("(?:^|\\W)@([\\pL\\d\\-_.]*)$","i").exec(e.toLowerCase());if(!r)return!1;var a=r[1];this.startNewRequest(a),this.updateMatches(t,this.users());var o=setTimeout(function(){n.shouldCancelDispatch(a)||(n.updateMatches(t,n.users().concat([{type:P.i.MENTION_MORE_MEMBERS,loading:!0}])),o=null)},500);return this.autocompleteUsersInChannel(a).then(function(e){var r=e.data;o&&clearTimeout(o),n.shouldCancelDispatch(a)||(n.data=r,n.updateMatches(t,n.users()))}),!0}}])&&Fo(n.prototype,r),a&&Fo(n,a),t}(),zo=n(186),Ko=n(6),Yo=n(1524),Qo=n(13);function Jo(e){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $o(e,t,n){return t&&Xo(e.prototype,t),n&&Xo(e,n),e}function ei(e,t){return!t||"object"!==Jo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ni(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ri(e,t)}function ri(e,t){return(ri=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ai=function(e){function t(){return Zo(this,t),ei(this,ti(t).apply(this,arguments))}return ni(t,Mo["a"]),$o(t,[{key:"render",value:function(){var e=this.props.isSelection,t=this.props.item,n=t.channel.display_name,r=t.channel.purpose,a="mentions__name no-flex";e&&(a+=" suggestion--selected");var o="(~"+t.channel.name+")";return E.a.createElement("div",Object.assign({className:a,onClick:this.handleClick},Mo.a.baseProps),E.a.createElement("div",{className:"mention__align"},E.a.createElement("span",null,n),E.a.createElement("span",{className:"mention__channelname"}," ",o)),E.a.createElement("div",{className:"mention__purpose"},r))}}]),t}(),oi=function(e){function t(){var e;return Zo(this,t),(e=ei(this,ti(t).call(this))).lastPrefixTrimmed="",e.lastPrefixWithNoResults="",e.lastCompletedWord="",e}return ni(t,jo["a"]),$o(t,[{key:"handlePretextChanged",value:function(e,t){var n=this;this.resetRequest();var r=/\B(~([^~\r\n]*))$/i.exec(e.toLowerCase());if(!r)return!1;if(r.index>0&&"~"===e[r.index-1])return!1;var a=r[2];if(this.lastPrefixTrimmed&&a.trim()===this.lastPrefixTrimmed)return!0;if(this.lastPrefixTrimmed=a.trim(),this.lastPrefixWithNoResults&&a.startsWith(this.lastPrefixWithNoResults))return!1;if(this.lastCompletedWord&&r[0].startsWith(this.lastCompletedWord))return!1;this.lastCompletedWord="",this.startNewRequest(a);var o=a.toLowerCase().split(/\s+/),i={},s=[];Object(m.getMyChannels)(Qo.a.getState()).forEach(function(e){if(!("O"!==e.type||e.delete_at>0)){for(var t=e.name.toLowerCase().split(/\s+/).concat(e.display_name.toLowerCase().split(/\s+/)),n=!0,r=0;n&&r<o.length;r++)if(o[r]){for(var a=!1,l=0;l<t.length;l++)if(t[l].startsWith(o[r])){a=!0;break}if(!a){n=!1;break}}n&&(i[e.id]=!0,s.push({type:P.i.MENTION_CHANNELS,channel:e}))}});var l=(s=s.sort(function(e,t){return Object(zo.sortChannelsByTypeAndDisplayName)("en",e.channel,t.channel)})).map(function(e){return"~"+e.channel.name});return t({terms:l.concat([" "]),items:s.concat([{type:P.i.MENTION_MORE_CHANNELS,loading:!0}]),component:ai,matchedPretext:r[1]}),Object(Yo.b)(a,function(e){var o=Object(m.getMyChannelMemberships)(Qo.a.getState());if(!n.shouldCancelDispatch(a)){0===e.length&&(n.lastPrefixWithNoResults=a);var l=[],c=[];e.forEach(function(e){e.delete_at>0&&!o[e.id]||(Object(m.getChannel)(Qo.a.getState(),e.id)?i[e.id]||(i[e.id]=!0,s.push({type:P.i.MENTION_CHANNELS,channel:e})):(l.push({type:P.i.MENTION_MORE_CHANNELS,channel:e}),c.push(e)))});var u=(s=s.sort(function(e,t){return Object(zo.sortChannelsByTypeAndDisplayName)("en",e.channel,t.channel)})).concat(l),p=u.map(function(e){return"~"+e.channel.name});Qo.a.dispatch({type:Ko.ChannelTypes.RECEIVED_CHANNELS,data:c}),t({matchedPretext:r[1],terms:p,items:u,component:ai})}}),!0}},{key:"handleCompleteWord",value:function(e){this.lastCompletedWord=e,this.lastPrefixWithNoResults=""}}]),t}(),ii=n(36);function si(e){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ui(e,t,n){return t&&ci(e.prototype,t),n&&ci(e,n),e}function pi(e,t){return!t||"object"!==si(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function di(e){return(di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fi(e,t)}function fi(e,t){return(fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hi=function(e){function t(){return li(this,t),pi(this,di(t).apply(this,arguments))}return mi(t,Mo["a"]),ui(t,[{key:"render",value:function(){var e=this.props,t=e.item,n="command";return e.isSelection&&(n+=" suggestion--selected"),E.a.createElement("div",Object.assign({className:n,onClick:this.handleClick},Mo.a.baseProps),E.a.createElement("div",{className:"command__title"},t.suggestion+" "+t.hint),E.a.createElement("div",{className:"command__desc"},t.description))}}]),t}(),bi=function(e){function t(){return li(this,t),pi(this,di(t).apply(this,arguments))}return mi(t,jo["a"]),ui(t,[{key:"handlePretextChanged",value:function(e,t){if(e.startsWith("/")){var n=e.toLowerCase();return ii.Client4.getCommandsList(Object(d.getCurrentTeamId)(Qo.a.getState())).then(function(e){var r=[];e.forEach(function(e){if(e.auto_complete&&("shortcuts"!==e.trigger||!T.m())&&0===("/"+e.trigger).indexOf(n)){var t="/"+e.trigger,a="";e.auto_complete_hint&&0!==e.auto_complete_hint.length&&(a=e.auto_complete_hint),r.push({suggestion:t,hint:a,description:e.auto_complete_desc})}});var a=(r=r.sort(function(e,t){return e.suggestion.localeCompare(t.suggestion)})).map(function(e){return e.suggestion});t({matchedPretext:n,terms:a,items:r,component:hi})}).catch(function(){}),!0}return!1}}]),t}(),yi=n(150);function gi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function vi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oi(e,t,n){return t&&wi(e.prototype,t),n&&wi(e,n),e}function Si(e,t){return!t||"object"!==_i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ci(e){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ti(e,t)}function Ti(e,t){return(Ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ji=["skintone"],ki=function(e){function t(){return Ei(this,t),Si(this,Ci(t).apply(this,arguments))}return Pi(t,Mo["a"]),Oi(t,[{key:"render",value:function(){var e=this.props.term,t=this.props.item.emoji,n="emoticon-suggestion";return this.props.isSelection&&(n+=" suggestion--selected"),E.a.createElement("div",Object.assign({className:n,onClick:this.handleClick},Mo.a.baseProps),E.a.createElement("div",{className:"pull-left"},E.a.createElement("img",{alt:e,className:"emoticon-suggestion__image",src:Object(_r.getEmojiImageUrl)(t),title:e})),E.a.createElement("div",{className:"pull-left"},e))}}]),t}(),Mi=function(e){function t(){return Ei(this,t),Si(this,Ci(t).apply(this,arguments))}return Pi(t,jo["a"]),Oi(t,[{key:"handlePretextChanged",value:function(e,t){var n=this,r=/(^|\s|^\+|^-)(:([^:\s]*))$/g.exec(e);if(!r)return!1;var a=r[1],o=r[2],i=r[3];if(i.length<2)return!1;if("-"!==a&&"+"!==a)for(var s=0,l=Object.keys(yi.b);s<l.length;s++){var c=l[s];if(yi.b[c].test(o))return!1}return"true"===Qo.a.getState().entities.general.config.EnableCustomEmoji?Qo.a.dispatch(Object(rr.autocompleteCustomEmojis)(i)).then(function(){return n.findAndSuggestEmojis(o,i,t)}):this.findAndSuggestEmojis(o,i,t),!0}},{key:"formatEmojis",value:function(e){return e.map(function(e){return":"+e.name+":"})}},{key:"findAndSuggestEmojis",value:function(e,t,n){var r=[],a=[],o=Object(or.a)(Qo.a.getState()),i=Object(or.b)(Qo.a.getState()),s=!0,l=!1,c=void 0;try{for(var u,p=o[Symbol.iterator]();!(s=(u=p.next()).done);s=!0){var d=gi(u.value,2),m=d[0],f=d[1];if(!ji.includes(f.category))if(f.aliases){var h=!0,b=!1,y=void 0;try{for(var g,v=f.aliases[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var _=g.value;if(-1!==_.indexOf(t)){(i.includes(_)||i.includes(m)?r:a).push({name:_,emoji:f});break}}}catch(e){b=!0,y=e}finally{try{h||null==v.return||v.return()}finally{if(b)throw y}}}else if(-1!==m.indexOf(t)){if(o.hasSystemEmoji(m))continue;(i.includes(m)?r:a).push({name:m,emoji:f})}}}catch(e){l=!0,c=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw c}}var E=function(e,n){return cr(e,n,t)};r.sort(E),a.sort(E),n({matchedPretext:e,terms:[].concat(vi(this.formatEmojis(r)),vi(this.formatEmojis(a))),items:[].concat(r,a),component:ki})}}]),t}(),Ni=n(1561),Ri=n(1562);function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xi(e){return(xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Li(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Di(e,t){return(Di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qi=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=xi(t).call(this,e),n=!a||"object"!==Ii(a)&&"function"!=typeof a?Li(r):a,Ui(Li(n),"handleChange",function(e){n.props.onChange(e)}),Ui(Li(n),"checkMessageLength",function(e){if(n.props.handlePostError)if(e.length>n.props.characterLimit){var t=E.a.createElement(Y.c,{id:"create_post.error_message",defaultMessage:"Your message is too long. Character count: {length}/{limit}",values:{length:e.length,limit:n.props.characterLimit}});n.props.handlePostError(t)}else n.props.handlePostError(null)}),Ui(Li(n),"handleKeyDown",function(e){n.props.onKeyDown&&n.props.onKeyDown(e)}),Ui(Li(n),"handleBlur",function(e){n.props.onBlur&&n.props.onBlur(e)}),Ui(Li(n),"handleHeightChange",function(e,t){n.props.onHeightChange&&n.props.onHeightChange(e,t),j.k()&&n.props.actions.scrollPostList()}),Ui(Li(n),"focus",function(){var e=n.refs.message.getTextbox();e.focus(),j.eb(e),n.checkMessageLength(e.value)}),Ui(Li(n),"blur",function(){n.refs.message.getTextbox().blur()}),Ui(Li(n),"recalculateSize",function(){n.refs.message.recalculateSize()}),n.suggestionProviders=[new Wo({currentUserId:n.props.currentUserId,profilesInChannel:n.props.profilesInChannel,profilesNotInChannel:n.props.profilesNotInChannel,autocompleteUsersInChannel:function(t){return n.props.actions.autocompleteUsersInChannel(t,e.channelId)}}),new oi,new Mi],e.supportsCommands&&n.suggestionProviders.push(new bi),n.checkMessageLength(e.value),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Di(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidUpdate",value:function(e){!e.preview&&this.props.preview&&this.refs.preview.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.channelId!==this.props.channelId||e.currentUserId!==this.props.currentUserId||e.profilesInChannel!==this.props.profilesInChannel||e.profilesNotInChannel!==this.props.profilesNotInChannel)for(var t=this.suggestionProviders,n=0;n<t.length;n++)t[n]instanceof Wo&&t[n].setProps({currentUserId:e.currentUserId,profilesInChannel:e.profilesInChannel,profilesNotInChannel:e.profilesNotInChannel,autocompleteUsersInChannel:function(t){return e.actions.autocompleteUsersInChannel(t,e.channelId)}});this.props.value!==e.value&&this.checkMessageLength(e.value)}},{key:"render",value:function(){var e=null,t="form-control custom-textarea",n="textarea-wrapper";return this.props.emojiEnabled&&(t+=" custom-textarea--emoji-picker"),this.props.badConnection&&(t+=" bad-connection"),this.props.preview&&(t+=" custom-textarea--preview",n+=" textarea-wrapper--preview",e=E.a.createElement("div",{tabIndex:"0",ref:"preview",className:"form-control custom-textarea textbox-preview-area",onKeyPress:this.props.onKeyPress,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur},E.a.createElement(So,{isRHS:this.props.isRHS,message:this.props.value}))),E.a.createElement("div",{ref:"wrapper",className:n},E.a.createElement(Ni.a,{id:this.props.id,ref:"message",className:t,spellCheck:"true",placeholder:this.props.createMessage,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,onKeyDown:this.handleKeyDown,onComposition:this.props.onComposition,onBlur:this.handleBlur,onHeightChange:this.handleHeightChange,style:{visibility:this.props.preview?"hidden":"visible"},inputComponent:wa.a,listComponent:Ri.a,listStyle:this.props.suggestionListStyle,providers:this.suggestionProviders,channelId:this.props.channelId,value:this.props.value,renderDividers:!0,isRHS:this.props.isRHS,disabled:this.props.disabled,contextId:this.props.channelId,listenForMentionKeyClick:this.props.listenForMentionKeyClick}),e)}}])&&Ai(n.prototype,r),a&&Ai(n,a),t}();Ui(qi,"propTypes",{id:v.a.string.isRequired,channelId:v.a.string,value:v.a.string.isRequired,onChange:v.a.func.isRequired,onKeyPress:v.a.func.isRequired,onComposition:v.a.func,onHeightChange:v.a.func,createMessage:v.a.string.isRequired,onKeyDown:v.a.func,onBlur:v.a.func,supportsCommands:v.a.bool.isRequired,handlePostError:v.a.func,suggestionListStyle:v.a.string,emojiEnabled:v.a.bool,isRHS:v.a.bool,characterLimit:v.a.number.isRequired,disabled:v.a.bool,badConnection:v.a.bool,listenForMentionKeyClick:v.a.bool,currentUserId:v.a.string.isRequired,preview:v.a.bool,profilesInChannel:v.a.arrayOf(v.a.object).isRequired,profilesNotInChannel:v.a.arrayOf(v.a.object).isRequired,actions:v.a.shape({autocompleteUsersInChannel:v.a.func.isRequired,scrollPostList:v.a.func.isRequired})}),Ui(qi,"defaultProps",{supportsCommands:!0,isRHS:!1,listenForMentionKeyClick:!1});var Hi=Object(r.connect)(function(){var e=Object(p.makeGetProfilesInChannel)(),t=Object(p.makeGetProfilesNotInChannel)();return function(n,r){return{currentUserId:Object(p.getCurrentUserId)(n),profilesInChannel:e(n,r.channelId,!0),profilesNotInChannel:t(n,r.channelId,!0)}}},function(e){return{actions:Object(a.bindActionCreators)({autocompleteUsersInChannel:Ea.a,scrollPostList:Ea.j},e)}},null,{withRef:!0})(qi),Fi=n(1482);function Bi(e){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vi(e){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zi(e,t){return(zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ki(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yi=P.Q.PRE_RELEASE_FEATURES,Qi=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Vi(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Bi(a)&&"function"!=typeof a?Wi(r):a,Ki(Wi(n),"togglePreview",function(e){e.preventDefault(),n.props.updatePreview(!n.props.showPreview)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zi(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){var e,t=this.props.message&&this.props.message.length>0,n="";this.props.message&&this.props.message.length>this.props.characterLimit&&(n="hidden"),e=this.props.previewMessageLink?E.a.createElement("span",null,this.props.previewMessageLink):E.a.createElement(Y.c,{id:"textbox.edit",defaultMessage:"Edit message"});var r=null;j.P(Yi.MARKDOWN_PREVIEW)&&(r=E.a.createElement("button",{id:"previewLink",onClick:this.togglePreview,className:"style--none textbox-preview-link color--link"},this.props.showPreview?e:E.a.createElement(Y.c,{id:"textbox.preview",defaultMessage:"Preview"})));var a=E.a.createElement("div",{id:"helpText",style:{visibility:t?"visible":"hidden",opacity:t?"0.45":"0"},className:"help__format-text"},E.a.createElement("b",null,E.a.createElement(Y.c,{id:"textbox.bold",defaultMessage:"**bold**"})),E.a.createElement("i",null,E.a.createElement(Y.c,{id:"textbox.italic",defaultMessage:"_italic_"})),E.a.createElement("span",null,"~~",E.a.createElement("strike",null,E.a.createElement(Y.c,{id:"textbox.strike",defaultMessage:"strike"})),"~~ "),E.a.createElement("span",null,E.a.createElement(Y.c,{id:"textbox.inlinecode",defaultMessage:"`inline code`"})),E.a.createElement("span",null,E.a.createElement(Y.c,{id:"textbox.preformatted",defaultMessage:"```preformatted```"})),E.a.createElement("span",null,E.a.createElement(Y.c,{id:"textbox.quote",defaultMessage:">quote"})));return E.a.createElement("div",{className:"help__text "+n},a,r,E.a.createElement(Fi.a,{id:"helpTextLink",target:"_blank",rel:"noopener noreferrer",to:"/help/messaging",className:"textbox-help-link"},E.a.createElement(Y.c,{id:"textbox.help",defaultMessage:"Help"})))}}])&&Gi(n.prototype,r),a&&Gi(n,a),t}();function Ji(e){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zi(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Xi(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Zi(o,r,a,i,s,"next",e)}function s(e){Zi(o,r,a,i,s,"throw",e)}i(void 0)})}}function $i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function es(e){return(es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ts(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ns(e,t){return(ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ki(Qi,"propTypes",{showPreview:v.a.bool,characterLimit:v.a.number.isRequired,previewMessageLink:v.a.string,updatePreview:v.a.func,message:v.a.string.isRequired}),Ki(Qi,"defaultProps",{message:""});var as=P.i.KeyCodes,os=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=es(t).call(this,e),n=!a||"object"!==Ji(a)&&"function"!=typeof a?ts(r):a,rs(ts(n),"updatePreview",function(e){n.setState({preview:e})}),rs(ts(n),"getContainer",function(){return n.refs.editModalBody}),rs(ts(n),"toggleEmojiPicker",function(){n.setState({showEmojiPicker:!n.state.showEmojiPicker}),!n.state.showEmojiPicker&&n.editbox&&n.editbox.focus()}),rs(ts(n),"hideEmojiPicker",function(){n.setState({showEmojiPicker:!1}),n.editbox&&n.editbox.focus()}),rs(ts(n),"handleEmojiClick",function(e){var t=e&&(e.name||e.aliases&&e.aliases[0]);if(t){if(""===n.state.editText)n.setState({editText:":"+t+": "});else{var r=/\s+$/.test(n.state.editText)?n.state.editText+":"+t+": ":n.state.editText+" :"+t+": ";n.setState({editText:r})}n.setState({showEmojiPicker:!1}),n.editbox&&n.editbox.focus()}}),rs(ts(n),"handleGifClick",function(e){if(""===n.state.editText)n.setState({editText:e});else{var t=/\s+$/.test(n.state.editText)?n.state.editText+e:n.state.editText+" "+e;n.setState({editText:t})}n.setState({showEmojiPicker:!1}),n.editbox.focus()}),rs(ts(n),"getEditPostControls",function(){return n.refs.editPostEmoji}),rs(ts(n),"handlePostError",function(e){n.state.postError!==e&&n.setState({postError:e})}),rs(ts(n),"handleEdit",Xi(regeneratorRuntime.mark(function e(){var t,r,a,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isSaveDisabled()){e.next=2;break}return e.abrupt("return");case 2:if(t=n.props,r=t.actions,a=t.editingPost,o={message:n.state.editText,id:a.postId,channel_id:a.post.channel_id},!n.state.postError){e.next=8;break}return n.setState({errorClass:"animation--highlight"}),setTimeout(function(){n.setState({errorClass:null})},P.i.ANIMATION_TIMEOUT),e.abrupt("return");case 8:if(o.message!==(a.post.message_source||a.post.message)){e.next=11;break}return n.handleHide(),e.abrupt("return");case 11:if(i=a.post.file_ids&&a.post.file_ids.length>0,0!==o.message.trim().length||i){e.next=17;break}return n.handleHide(!1),s={ModalId:P.r.DELETE_POST,dialogType:oe,dialogProps:{post:a.post,commentCount:a.commentCount,isRHS:a.isRHS}},n.props.actions.openModal(s),e.abrupt("return");case 17:return r.addMessageIntoHistory(o.message),e.next=20,r.editPost(o);case 20:e.sent&&window.scrollTo(0,0),n.handleHide();case 23:case"end":return e.stop()}},e)}))),rs(ts(n),"handleChange",function(e){var t=e.target.value;n.setState({editText:t})}),rs(ts(n),"handleEditKeyPress",function(e){T.m()||n.props.ctrlSend||!j.S(e,as.ENTER)||e.shiftKey||e.altKey?n.props.ctrlSend&&e.ctrlKey&&j.S(e,as.ENTER)&&(e.preventDefault(),n.editbox.blur(),n.handleEdit()):(e.preventDefault(),n.editbox.blur(),n.handleEdit())}),rs(ts(n),"handleKeyDown",function(e){n.props.ctrlSend&&j.S(e,as.ENTER)&&!0===e.ctrlKey?n.handleEdit():j.S(e,as.ESCAPE)&&!n.state.showEmojiPicker&&n.handleHide()}),rs(ts(n),"handleHide",function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.refocusId=e?n.props.editingPost.refocusId:null,n.props.actions.hideEditPostModal()}),rs(ts(n),"handleEntered",function(){n.editbox&&(n.editbox.focus(),n.editbox.recalculateSize())}),rs(ts(n),"handleExit",function(){n.setState({preview:!1})}),rs(ts(n),"handleExited",function(){var e=n.refocusId;e&&setTimeout(function(){var t=document.getElementById(e);t&&t.focus()}),n.refocusId=null,n.setState({editText:"",postError:"",errorClass:null,preview:!1,showEmojiPicker:!1})}),rs(ts(n),"setEditboxRef",function(e){e&&e.getWrappedInstance&&(n.editbox=e.getWrappedInstance()),n.editbox&&n.editbox.focus()}),rs(ts(n),"isSaveDisabled",function(){var e=n.props.editingPost.post;return e&&e.file_ids&&e.file_ids.length>0?!n.props.canEditPost:""!==n.state.editText?!n.props.canEditPost:!n.props.canDeletePost}),n.state={preview:!1,editText:"",postError:"",errorClass:null,showEmojiPicker:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ns(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillUpdate",value:function(e){!this.props.editingPost.show&&e.editingPost.show&&this.setState({editText:e.editingPost.post.message_source||e.editingPost.post.message})}},{key:"render",value:function(){var e=this.context.intl.formatMessage,t="edit-post-footer"+(this.state.postError?" has-error":""),n=null;if(this.state.postError){var r="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");n=E.a.createElement("label",{className:r},this.state.postError)}var a=null,o=e({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();return"true"!==this.props.config.EnableEmojiPicker||this.state.preview||(a=E.a.createElement("div",null,E.a.createElement(va,{show:this.state.showEmojiPicker,container:this.getContainer,target:this.getEditPostControls,onHide:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:"true"===this.props.config.EnableGifPicker,topOffset:-20}),E.a.createElement("button",{"aria-label":o,id:"editPostEmoji",ref:"editPostEmoji",className:"style--none post-action",onClick:this.toggleEmojiPicker},E.a.createElement(Vn,{className:"icon icon--emoji"})))),E.a.createElement(K.a,{id:"editPostModal",dialogClassName:"a11y__modal edit-modal",show:this.props.editingPost.show,onKeyDown:this.handleKeyDown,onHide:this.handleHide,onEntered:this.handleEntered,onExit:this.handleExit,onExited:this.handleExited,keyboard:!1,role:"dialog","aria-labelledby":"editPostModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"editPostModalLabel"},E.a.createElement(Y.c,{id:"edit_post.edit",defaultMessage:"Edit {title}",values:{title:this.props.editingPost.title}}))),E.a.createElement(K.a.Body,{bsClass:"modal-body edit-modal-body".concat(this.state.showEmojiPicker?" edit-modal-body--add-reaction":""),ref:"editModalBody"},E.a.createElement("div",{className:"post-create__container"},E.a.createElement("div",{className:"textarea-wrapper"},E.a.createElement(Hi,{tabIndex:"0",onChange:this.handleChange,onKeyPress:this.handleEditKeyPress,onKeyDown:this.handleKeyDown,handlePostError:this.handlePostError,value:this.state.editText,channelId:this.props.editingPost.post&&this.props.editingPost.post.channel_id,emojiEnabled:"true"===this.props.config.EnableEmojiPicker,createMessage:j.ab("edit_post.editPost","Edit the post..."),supportsCommands:!1,suggestionListStyle:"bottom",id:"edit_textbox",ref:this.setEditboxRef,characterLimit:this.props.maxPostSize,preview:this.state.preview}),E.a.createElement("div",{className:"post-body__actions"},a)),E.a.createElement("div",{className:"post-create-footer"},E.a.createElement(Qi,{characterLimit:this.props.maxPostSize,showPreview:this.state.preview,ref:this.setTextboxLinksRef,updatePreview:this.updatePreview,message:this.state.editText}),E.a.createElement("div",{className:t},n)))),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.handleHide},E.a.createElement(Y.c,{id:"edit_post.cancel",defaultMessage:"Cancel"})),E.a.createElement("button",{id:"editButton",type:"button",className:"btn btn-primary",disabled:this.isSaveDisabled(),onClick:this.handleEdit},E.a.createElement(Y.c,{id:"edit_post.save",defaultMessage:"Save"}))))}}])&&$i(n.prototype,r),a&&$i(n,a),t}();rs(os,"propTypes",{canEditPost:v.a.bool,canDeletePost:v.a.bool,ctrlSend:v.a.bool,config:v.a.object.isRequired,maxPostSize:v.a.number.isRequired,editingPost:v.a.shape({post:v.a.object,postId:v.a.string,refocusId:v.a.string,show:v.a.bool.isRequired,title:v.a.string,isRHS:v.a.bool}).isRequired,actions:v.a.shape({addMessageIntoHistory:v.a.func.isRequired,editPost:v.a.func.isRequired,hideEditPostModal:v.a.func.isRequired,openModal:v.a.func.isRequired}).isRequired}),rs(os,"contextTypes",{intl:Y.i.isRequired});var is=Object(r.connect)(function(e){var t=Object(u.getConfig)(e),n=Object(z.a)(e),r=Object(p.getCurrentUserId)(e),a=!1,o=!1;return n&&n.post&&n.post.user_id===r?(a=Object(D.haveIChannelPermission)(e,{channel:Object(m.getCurrentChannelId)(e),team:Object(d.getCurrentTeamId)(e),permission:L.Permissions.DELETE_POST}),o=Object(D.haveIChannelPermission)(e,{channel:Object(m.getCurrentChannelId)(e),team:Object(d.getCurrentTeamId)(e),permission:L.Permissions.EDIT_POST})):(a=Object(D.haveIChannelPermission)(e,{channel:Object(m.getCurrentChannelId)(e),team:Object(d.getCurrentTeamId)(e),permission:L.Permissions.DELETE_OTHERS_POSTS}),o=Object(D.haveIChannelPermission)(e,{channel:Object(m.getCurrentChannelId)(e),team:Object(d.getCurrentTeamId)(e),permission:L.Permissions.EDIT_OTHERS_POSTS})),{canEditPost:o,canDeletePost:a,ctrlSend:Object(c.getBool)(e,L.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),config:t,editingPost:n,maxPostSize:parseInt(t.MaxPostSize,10)||P.Q.DEFAULT_CHARACTER_LIMIT}},function(e){return{actions:Object(a.bindActionCreators)({addMessageIntoHistory:x.addMessageIntoHistory,editPost:V,hideEditPostModal:q.f,openModal:U.b},e)}})(os),ss=n(307),ls=n(320),cs=n.n(ls),us=n(1679);function ps(e){return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ds(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ms(e){return(ms=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hs(e,t){return(hs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ys=P.Q.ActionTypes,gs=new(function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=ms(t).call(this),e=!r||"object"!==ps(r)&&"function"!=typeof r?fs(n):r,bs(fs(e),"addModalListener",function(t,n){e.on(t,n)}),bs(fs(e),"removeModalListener",function(t,n){e.removeListener(t,n)}),bs(fs(e),"handleEventPayload",function(t){var n=t.action,r=n.type,a=n.value,o=ds(n,["type","value"]);switch(r){case ys.TOGGLE_SHORTCUTS_MODAL:case ys.TOGGLE_IMPORT_THEME_MODAL:case ys.TOGGLE_DELETE_POST_MODAL:case ys.TOGGLE_GET_POST_LINK_MODAL:case ys.TOGGLE_GET_TEAM_INVITE_LINK_MODAL:case ys.TOGGLE_GET_PUBLIC_LINK_MODAL:case ys.TOGGLE_QUICK_SWITCH_MODAL:case ys.TOGGLE_CHANNEL_PURPOSE_UPDATE_MODAL:case ys.TOGGLE_CHANNEL_NAME_UPDATE_MODAL:case ys.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL:e.emit(r,a,o)}}),e.dispatchToken=us.a.register(e.handleEventPayload),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hs(e,t)}(t,cs.a),t}()),vs=(n(1507),n(1579));function _s(e){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Es(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ws(e){return(ws=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Os(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ss(e,t){return(Ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ps=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ws(t).call(this,e),n=!a||"object"!==_s(a)&&"function"!=typeof a?Os(r):a,Cs(Os(n),"onHide",function(){n.setState({copiedLink:!1}),n.props.onHide()}),Cs(Os(n),"copyLink",function(){var e=n.refs.textarea;e.focus(),e.setSelectionRange(0,n.props.link.length);try{document.execCommand("copy")?n.setState({copiedLink:!0}):n.setState({copiedLink:!1})}catch(e){n.setState({copiedLink:!1})}}),n.state={copiedLink:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ss(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=null;this.props.helpText&&(e=E.a.createElement("p",null,this.props.helpText,E.a.createElement("br",null),E.a.createElement("br",null)));var t=null;document.queryCommandSupported("copy")&&(t=E.a.createElement("button",{id:"linkModalCopyLink","data-copy-btn":"true",type:"button",className:"btn btn-primary pull-left",onClick:this.copyLink},E.a.createElement(Y.c,{id:"get_link.copy",defaultMessage:"Copy Link"})));var n=E.a.createElement("textarea",{id:"linkModalTextArea",className:"form-control no-resize min-height",ref:"textarea",value:this.props.link,onClick:this.copyLink,readOnly:!0}),r=null;return this.state.copiedLink&&(r=E.a.createElement("p",{className:"alert alert-success alert--confirm"},E.a.createElement(vs.a,null),E.a.createElement(Y.c,{id:"get_link.clipboard",defaultMessage:" Link copied"}))),E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.onHide,role:"dialog","aria-labelledby":"getLinkModalLabel"},E.a.createElement(K.a.Header,{id:"getLinkModalLabel",closeButton:!0},E.a.createElement("h4",{className:"modal-title"},this.props.title)),E.a.createElement(K.a.Body,null,e,n),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{id:"linkModalCloseButton",type:"button",className:"btn btn-link",onClick:this.onHide},E.a.createElement(Y.c,{id:"get_link.close",defaultMessage:"Close"})),t,r))}}])&&Es(n.prototype,r),a&&Es(n,a),t}();function Ts(e){return(Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function js(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ks(e){return(ks=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ms(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ns(e,t){return(Ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Cs(Ps,"propTypes",{show:v.a.bool.isRequired,onHide:v.a.func.isRequired,title:v.a.string.isRequired,helpText:v.a.string,link:v.a.string.isRequired}),Cs(Ps,"defaultProps",{helpText:null});var Rs=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=ks(t).call(this,e))||"object"!==Ts(a)&&"function"!=typeof a?Ms(r):a).handleToggle=n.handleToggle.bind(Ms(n)),n.hide=n.hide.bind(Ms(n)),n.state={show:!1,post:{}},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ns(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){gs.addModalListener(P.Q.ActionTypes.TOGGLE_GET_POST_LINK_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){gs.removeModalListener(P.Q.ActionTypes.TOGGLE_GET_POST_LINK_MODAL,this.handleToggle)}},{key:"handleToggle",value:function(e,t){this.setState({show:e,post:t.post})}},{key:"hide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this.props.currentTeamUrl+"/pl/"+this.state.post.id;return E.a.createElement(Ps,{show:this.state.show,onHide:this.hide,title:j.ab("get_post_link_modal.title","Copy Permalink"),helpText:j.ab("get_post_link_modal.help","The link below allows authorized users to see your post."),link:e})}}])&&js(n.prototype,r),a&&js(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Rs,"propTypes",{currentTeamUrl:v.a.string.isRequired});var Is=Object(r.connect)(function(e){var t=Object(d.getCurrentTeam)(e)||{};return{currentTeamUrl:"".concat(Object(ss.e)(),"/").concat(t.name)}})(Rs);function As(e){return(As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ls(e){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ds(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Us(e,t){return(Us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hs=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ls(t).call(this,e),n=!a||"object"!==As(a)&&"function"!=typeof a?Ds(r):a,qs(Ds(n),"handleToggle",function(e){n.setState({show:e})}),qs(Ds(n),"onHide",function(){n.handleToggle(!1)}),n.state={show:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Us(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){gs.addModalListener(P.Q.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){gs.removeModalListener(P.Q.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL,this.handleToggle)}},{key:"render",value:function(){var e,t=Object(ss.e)()+"/signup_user_complete/?id="+this.props.currentTeam.invite_id;return e="true"===this.props.config.EnableUserCreation?j.ab("get_team_invite_link_modal.help","Send teammates the link below for them to sign-up to this team site. The Team Invite Link can be shared with multiple teammates as it does not change unless it's regenerated in Team Settings by a Team Admin."):j.ab("get_team_invite_link_modal.helpDisabled","User creation has been disabled for your team. Please ask your team administrator for details."),E.a.createElement(Ps,{show:this.state.show,onHide:this.onHide,title:j.ab("get_team_invite_link_modal.title","Team Invite Link"),helpText:e,link:t})}}])&&xs(n.prototype,r),a&&xs(n,a),t}();qs(Hs,"propTypes",{currentTeam:v.a.object.isRequired,config:v.a.object.isRequired}),qs(Hs,"defaultProps",{currentTeam:{}});var Fs=Object(r.connect)(function(e){return{currentTeam:Object(d.getCurrentTeam)(e),config:Object(u.getConfig)(e)}})(Hs),Bs=n(2007),Gs=n(1695);function Vs(e){return(Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zs(e){return(zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ks(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ys(e,t){return(Ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Js=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=zs(t).call(this,e),n=!a||"object"!==Vs(a)&&"function"!=typeof a?Ks(r):a,Qs(Ks(n),"handleToggle",function(e,t){n.setState({show:e,fileId:t.fileId})}),Qs(Ks(n),"onHide",function(){n.setState({show:!1})}),n.state={show:!1,fileId:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ys(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentWillUnmount",value:function(){gs.removeModalListener(P.Q.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL,this.handleToggle)}},{key:"componentDidMount",value:function(){gs.addModalListener(P.Q.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL,this.handleToggle)}},{key:"componentDidUpdate",value:function(e,t){this.state.show&&!t.show&&this.props.actions.getFilePublicLink(this.state.fileId)}},{key:"render",value:function(){return E.a.createElement(Ps,{show:this.state.show,onHide:this.onHide,title:j.ab("get_public_link_modal.title","Copy Public Link"),helpText:j.ab("get_public_link_modal.help","The link below allows anyone to see this file without being registered on this server."),link:this.props.link})}}])&&Ws(n.prototype,r),a&&Ws(n,a),t}();Qs(Js,"propTypes",{link:v.a.string,actions:v.a.shape({getFilePublicLink:v.a.func.isRequired}).isRequired}),Qs(Js,"defaultProps",{link:""});var Zs=Object(r.connect)(function(e){return{link:Gs.getFilePublicLink(e).link}},function(e){return{actions:Object(a.bindActionCreators)({getFilePublicLink:Bs.getFilePublicLink},e)}})(Js),Xs=n(1498);function $s(e){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function el(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tl(e){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rl(e,t){return(rl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function al(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ol=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=tl(t).call(this,e),n=!a||"object"!==$s(a)&&"function"!=typeof a?nl(r):a,al(nl(n),"handleKeyPress",function(e){"Enter"===e.key&&n.state.show&&n.handleSubmit()}),al(nl(n),"handleSubmit",function(){var e=n.props.actions,t=n.state.channel;if(t){var r=t.id;e.leaveChannel(r).then(function(e){e.data&&n.handleHide()})}}),al(nl(n),"handleToggle",function(e){n.setState({channel:e,show:null!==e})}),al(nl(n),"handleHide",function(){n.setState({show:!1,channel:null})}),n.state={show:!1,channel:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rl(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){gs.addModalListener(P.Q.ActionTypes.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){gs.removeModalListener(P.Q.ActionTypes.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL,this.handleToggle)}},{key:"render",value:function(){var e="",t="";this.state.channel&&(e=E.a.createElement(Y.c,{id:"leave_private_channel_modal.title",defaultMessage:"Leave Private Channel {channel}",values:{channel:E.a.createElement("b",null,this.state.channel.display_name)}}),t=E.a.createElement(Y.c,{id:"leave_private_channel_modal.message",defaultMessage:"Are you sure you wish to leave the private channel {channel}? You must be re-invited in order to re-join this channel in the future.",values:{channel:E.a.createElement("b",null,this.state.channel.display_name)}}));var n=E.a.createElement(Y.c,{id:"leave_private_channel_modal.leave",defaultMessage:"Yes, leave channel"});return E.a.createElement(Xs.a,{show:this.state.show,title:e,message:t,confirmButtonClass:"btn btn-danger",confirmButtonText:n,onConfirm:this.handleSubmit,onCancel:this.handleHide})}}])&&el(n.prototype,r),a&&el(n,a),t}();al(ol,"propTypes",{actions:v.a.shape({leaveChannel:v.a.func.isRequired}).isRequired,intl:Y.i.isRequired});var il=Object(Y.h)(ol);var sl=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({leaveChannel:Ea.e},e)}})(il),ll=n(133),cl=n(311);function ul(e){return(ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){bl(e,t,n[t])})}return e}function dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ml(e){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hl(e,t){return(hl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yl=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ml(t).call(this,e),n=!a||"object"!==ul(a)&&"function"!=typeof a?fl(r):a,bl(fl(n),"hideModal",function(){n.setState({show:!1})}),bl(fl(n),"onConfirm",function(e){n.hideModal();var t=pl({},n.state.currentUserStatus);if(t.status=n.state.newStatus,n.props.actions.setStatus(t),e){var r={category:L.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,user_id:t.user_id,name:t.user_id,value:"true"};n.props.actions.savePreferences(r.user_id,[r])}}),bl(fl(n),"onCancel",function(e){if(n.hideModal(),e){var t=pl({},n.state.currentUserStatus),r={category:L.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,user_id:t.user_id,name:t.user_id,value:"false"};n.props.actions.savePreferences(r.user_id,[r])}}),bl(fl(n),"renderModalMessage",function(){return n.props.currentUserStatus===P.O.OUT_OF_OFFICE?E.a.createElement(Y.c,{id:"modal.manual_status.auto_responder.message_".concat(n.state.newStatus),defaultMessage:'Would you like to switch your status to "{status}" and disable Automatic Replies?',values:{status:Object(j.kb)(n.state.newStatus)}}):E.a.createElement(Y.c,{id:"modal.manual_status.message_".concat(n.state.newStatus),defaultMessage:'Would you like to switch your status to "{status}"?',values:{status:Object(j.kb)(n.state.newStatus)}})}),n.state={show:!1,currentUserStatus:{},newStatus:e.newStatus||"online"},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hl(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.props.actions.autoResetStatus().then(function(t){var n=t.manual,r=""===e.props.autoResetPref;e.setState({currentUserStatus:t,show:Boolean(t.status===P.O.OUT_OF_OFFICE||n&&r)})})}},{key:"render",value:function(){var e=this.state.currentUserStatus.status||"",t="modal.manual_status.title_"+e,n=E.a.createElement(Y.c,{id:t,defaultMessage:'Your status is set to "{status}"',values:{status:Object(j.kb)(e)}}),r=this.renderModalMessage(),a=E.a.createElement(Y.c,{id:"modal.manual_status.button_".concat(this.state.newStatus),defaultMessage:'Yes, set my status to "{status}"',values:{status:Object(j.kb)(this.state.newStatus)}}),o="modal.manual_status.cancel_"+e,i=E.a.createElement(Y.c,{id:o,defaultMessage:'No, keep it as "{status}"',values:{status:Object(j.kb)(e)}}),s=E.a.createElement(Y.c,{id:"modal.manual_status.ask",defaultMessage:"Do not ask me again"}),l=this.props.currentUserStatus!==P.O.OUT_OF_OFFICE;return E.a.createElement(Xs.a,{show:this.state.show,title:n,message:r,confirmButtonText:a,onConfirm:this.onConfirm,cancelButtonText:i,onCancel:this.onCancel,onExited:this.props.onHide,showCheckbox:l,checkboxText:s})}}])&&dl(n.prototype,r),a&&dl(n,a),t}();bl(yl,"propTypes",{autoResetPref:v.a.string,currentUserStatus:v.a.string,newStatus:v.a.string,onHide:v.a.func,actions:v.a.shape({autoResetStatus:v.a.func.isRequired,setStatus:v.a.func.isRequired,savePreferences:v.a.func.isRequired}).isRequired}),Object(Me.b)("modal.manual_status.auto_responder.message_"),Object(Me.b)("modal.manual_status.auto_responder.message_away"),Object(Me.b)("modal.manual_status.auto_responder.message_dnd"),Object(Me.b)("modal.manual_status.auto_responder.message_offline"),Object(Me.b)("modal.manual_status.auto_responder.message_online"),Object(Me.b)("modal.manual_status.button_"),Object(Me.b)("modal.manual_status.button_away"),Object(Me.b)("modal.manual_status.button_dnd"),Object(Me.b)("modal.manual_status.button_offline"),Object(Me.b)("modal.manual_status.button_online"),Object(Me.b)("modal.manual_status.cancel_"),Object(Me.b)("modal.manual_status.cancel_away"),Object(Me.b)("modal.manual_status.cancel_dnd"),Object(Me.b)("modal.manual_status.cancel_offline"),Object(Me.b)("modal.manual_status.cancel_ooo"),Object(Me.b)("modal.manual_status.message_"),Object(Me.b)("modal.manual_status.message_away"),Object(Me.b)("modal.manual_status.message_dnd"),Object(Me.b)("modal.manual_status.message_offline"),Object(Me.b)("modal.manual_status.message_online"),Object(Me.b)("modal.manual_status.title_"),Object(Me.b)("modal.manual_status.title_away"),Object(Me.b)("modal.manual_status.title_dnd"),Object(Me.b)("modal.manual_status.title_offline"),Object(Me.b)("modal.manual_status.title_ooo");var gl=Object(r.connect)(function(e){var t=e.entities.users.currentUserId;return{autoResetPref:Object(c.get)(e,L.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,t,""),currentUserStatus:Object(p.getStatusForUserId)(e,t)}},function(e){return{actions:Object(a.bindActionCreators)({autoResetStatus:cl.a,setStatus:i.setStatus,savePreferences:ll.savePreferences},e)}})(yl);function vl(e){return(vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function El(e){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ol(e,t){return(Ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cl=Object(Y.g)({mainHeader:{default:{id:Object(Me.b)("shortcuts.header"),defaultMessage:"Keyboard Shortcuts\tCtrl|/"},mac:{id:Object(Me.b)("shortcuts.header.mac"),defaultMessage:"Keyboard Shortcuts\t|/"}},navHeader:{id:Object(Me.b)("shortcuts.nav.header"),defaultMessage:"Navigation"},navPrev:{default:{id:Object(Me.b)("shortcuts.nav.prev"),defaultMessage:"Previous channel:\tAlt|Up"},mac:{id:Object(Me.b)("shortcuts.nav.prev.mac"),defaultMessage:"Previous channel:\t|Up"}},navNext:{default:{id:Object(Me.b)("shortcuts.nav.next"),defaultMessage:"Next channel:\tAlt|Down"},mac:{id:Object(Me.b)("shortcuts.nav.next.mac"),defaultMessage:"Next channel:\t|Down"}},navUnreadPrev:{default:{id:Object(Me.b)("shortcuts.nav.unread_prev"),defaultMessage:"Previous unread channel:\tAlt|Shift|Up"},mac:{id:Object(Me.b)("shortcuts.nav.unread_prev.mac"),defaultMessage:"Previous unread channel:\t|Shift|Up"}},navUnreadNext:{default:{id:Object(Me.b)("shortcuts.nav.unread_next"),defaultMessage:"Next unread channel:\tAlt|Shift|Down"},mac:{id:Object(Me.b)("shortcuts.nav.unread_next.mac"),defaultMessage:"Next unread channel:\t|Shift|Down"}},navSwitcher:{default:{id:Object(Me.b)("shortcuts.nav.switcher"),defaultMessage:"Quick channel switcher:\tCtrl|K"},mac:{id:Object(Me.b)("shortcuts.nav.switcher.mac"),defaultMessage:"Quick channel switcher:\t|K"}},navDMMenu:{default:{id:Object(Me.b)("shortcuts.nav.direct_messages_menu"),defaultMessage:"Direct messages menu:\tCtrl|Shift|K"},mac:{id:Object(Me.b)("shortcuts.nav.direct_messages_menu.mac"),defaultMessage:"Direct messages menu:\t|Shift|K"}},navSettings:{default:{id:Object(Me.b)("shortcuts.nav.settings"),defaultMessage:"Account settings:\tCtrl|Shift|A"},mac:{id:Object(Me.b)("shortcuts.nav.settings.mac"),defaultMessage:"Account settings:\t|Shift|A"}},navMentions:{default:{id:Object(Me.b)("shortcuts.nav.recent_mentions"),defaultMessage:"Recent mentions:\tCtrl|Shift|M"},mac:{id:Object(Me.b)("shortcuts.nav.recent_mentions.mac"),defaultMessage:"Recent mentions:\t|Shift|M"}},navFocusCenter:{default:{id:Object(Me.b)("shortcuts.nav.focus_center"),defaultMessage:"Set focus to input field:\tCtrl|Shift|L"},mac:{id:Object(Me.b)("shortcuts.nav.focus_center.mac"),defaultMessage:"Set focus to input field:\t|Shift|L"}},msgHeader:{id:Object(Me.b)("shortcuts.msgs.header"),defaultMessage:"Messages"},msgInputHeader:{id:Object(Me.b)("shortcuts.msgs.input.header"),defaultMessage:"Works inside an empty input field"},msgEdit:{id:Object(Me.b)("shortcuts.msgs.edit"),defaultMessage:"Edit last message in channel:\tUp"},msgReply:{id:Object(Me.b)("shortcuts.msgs.reply"),defaultMessage:"Reply to last message in channel:\tShift|Up"},msgReprintPrev:{default:{id:Object(Me.b)("shortcuts.msgs.reprint_prev"),defaultMessage:"Reprint previous message:\tCtrl|Up"},mac:{id:Object(Me.b)("shortcuts.msgs.reprint_prev.mac"),defaultMessage:"Reprint previous message:\t|Up"}},msgReprintNext:{default:{id:Object(Me.b)("shortcuts.msgs.reprint_next"),defaultMessage:"Reprint next message:\tCtrl|Down"},mac:{id:Object(Me.b)("shortcuts.msgs.reprint_next.mac"),defaultMessage:"Reprint next message:\t|Down"}},msgCompHeader:{id:Object(Me.b)("shortcuts.msgs.comp.header"),defaultMessage:"Autocomplete"},msgCompUsername:{id:Object(Me.b)("shortcuts.msgs.comp.username"),defaultMessage:"Username:\t@|[a-z]|Tab"},msgCompChannel:{id:Object(Me.b)("shortcuts.msgs.comp.channel"),defaultMessage:"Channel:\t~|[a-z]|Tab"},msgCompEmoji:{id:Object(Me.b)("shortcuts.msgs.comp.emoji"),defaultMessage:"Emoji:\t:|[a-z]|Tab"},filesHeader:{id:Object(Me.b)("shortcuts.files.header"),defaultMessage:"Files"},filesUpload:{default:{id:Object(Me.b)("shortcuts.files.upload"),defaultMessage:"Upload files:\tCtrl|U"},mac:{id:Object(Me.b)("shortcuts.files.upload.mac"),defaultMessage:"Upload files:\t|U"}},browserHeader:{id:Object(Me.b)("shortcuts.browser.header"),defaultMessage:"Built-in Browser Commands"},browserChannelPrev:{default:{id:Object(Me.b)("shortcuts.browser.channel_prev"),defaultMessage:"Back in history:\tAlt|Left"},mac:{id:Object(Me.b)("shortcuts.browser.channel_prev.mac"),defaultMessage:"Back in history:\t|["}},browserChannelNext:{default:{id:Object(Me.b)("shortcuts.browser.channel_next"),defaultMessage:"Forward in history:\tAlt|Right"},mac:{id:Object(Me.b)("shortcuts.browser.channel_next.mac"),defaultMessage:"Forward in history:\t|]"}},browserFontIncrease:{default:{id:Object(Me.b)("shortcuts.browser.font_increase"),defaultMessage:"Zoom in:\tCtrl|+"},mac:{id:Object(Me.b)("shortcuts.browser.font_increase.mac"),defaultMessage:"Zoom in:\t|+"}},browserFontDecrease:{default:{id:Object(Me.b)("shortcuts.browser.font_decrease"),defaultMessage:"Zoom out:\tCtrl|-"},mac:{id:Object(Me.b)("shortcuts.browser.font_decrease.mac"),defaultMessage:"Zoom out:\t|-"}},browserInputHeader:{id:Object(Me.b)("shortcuts.browser.input.header"),defaultMessage:"Works inside an input field"},browserHighlightPrev:{id:Object(Me.b)("shortcuts.browser.highlight_prev"),defaultMessage:"Highlight text to the previous line:\tShift|Up"},browserHighlightNext:{id:Object(Me.b)("shortcuts.browser.highlight_next"),defaultMessage:"Highlight text to the next line:\tShift|Down"},browserNewline:{id:Object(Me.b)("shortcuts.browser.newline"),defaultMessage:"Create a new line:\tShift|Enter"},info:{id:Object(Me.b)("shortcuts.info"),defaultMessage:"Begin a message with / for a list of all the commands at your disposal."}}),Pl=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=El(t).call(this,e),n=!a||"object"!==vl(a)&&"function"!=typeof a?wl(r):a,Sl(wl(n),"handleToggle",function(){n.setState({show:!n.state.show})}),Sl(wl(n),"handleHide",function(){n.setState({show:!1})}),n.state={show:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ol(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){gs.addModalListener(P.Q.ActionTypes.TOGGLE_SHORTCUTS_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){gs.removeModalListener(P.Q.ActionTypes.TOGGLE_SHORTCUTS_MODAL,this.handleToggle)}},{key:"getShortcuts",value:function(){var e=this.props.isMac,t={};return Object.keys(Cl).forEach(function(n){e&&Cl[n].mac?t[n]=Cl[n].mac:!e&&Cl[n].default?t[n]=Cl[n].default:t[n]=Cl[n]}),t}},{key:"render",value:function(){var e=this.getShortcuts(),t=this.props.intl.formatMessage;return E.a.createElement(K.a,{dialogClassName:"a11y__modal shortcuts-modal",show:this.state.show,onHide:this.handleHide,onExited:this.handleHide,role:"dialog","aria-labelledby":"shortcutsModalLabel"},E.a.createElement("div",{className:"shortcuts-content"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"shortcutsModalLabel"},E.a.createElement("strong",null,Tl(t(e.mainHeader))))),E.a.createElement(K.a.Body,{ref:"modalBody"},E.a.createElement("div",{className:"row"},E.a.createElement("div",{className:"col-sm-4"},E.a.createElement("div",{className:"section"},E.a.createElement("div",null,E.a.createElement("h4",{className:"section-title"},E.a.createElement("strong",null,t(e.navHeader))),Tl(t(e.navPrev)),Tl(t(e.navNext)),Tl(t(e.navUnreadPrev)),Tl(t(e.navUnreadNext)),Tl(t(e.navSwitcher)),Tl(t(e.navDMMenu)),Tl(t(e.navSettings)),Tl(t(e.navMentions)),Tl(t(e.navFocusCenter))))),E.a.createElement("div",{className:"col-sm-4"},E.a.createElement("div",{className:"section"},E.a.createElement("div",null,E.a.createElement("h4",{className:"section-title"},E.a.createElement("strong",null,t(e.msgHeader))),E.a.createElement("span",null,E.a.createElement("strong",null,t(e.msgInputHeader))),E.a.createElement("div",{className:"subsection"},Tl(t(e.msgEdit)),Tl(t(e.msgReply)),Tl(t(e.msgReprintPrev)),Tl(t(e.msgReprintNext))),E.a.createElement("span",null,E.a.createElement("strong",null,t(e.msgCompHeader))),E.a.createElement("div",{className:"subsection"},Tl(t(e.msgCompUsername)),Tl(t(e.msgCompChannel)),Tl(t(e.msgCompEmoji)))))),E.a.createElement("div",{className:"col-sm-4"},E.a.createElement("div",{className:"section"},E.a.createElement("div",null,E.a.createElement("h4",{className:"section-title"},E.a.createElement("strong",null,t(e.filesHeader))),Tl(t(e.filesUpload))),E.a.createElement("div",{className:"section--lower"},E.a.createElement("h4",{className:"section-title"},E.a.createElement("strong",null,t(e.browserHeader))),Tl(t(e.browserChannelPrev)),Tl(t(e.browserChannelNext)),Tl(t(e.browserFontIncrease)),Tl(t(e.browserFontDecrease)),E.a.createElement("span",null,E.a.createElement("strong",null,t(e.browserInputHeader))),E.a.createElement("div",{className:"subsection"},Tl(t(e.browserHighlightPrev)),Tl(t(e.browserHighlightNext)),Tl(t(e.browserNewline))))))),E.a.createElement("div",{className:"info__label"},t(e.info)))))}}])&&_l(n.prototype,r),a&&_l(n,a),t}();function Tl(e){if(!e)return null;var t=e.split("\t"),n=E.a.createElement("span",null,t[0]),r=null;return t.length>1&&(r=t[1].split("|").map(function(e){return E.a.createElement("span",{className:"shortcut-key",key:e},e)})),E.a.createElement("div",{className:"shortcut-line"},n,r)}Sl(Pl,"propTypes",{intl:Y.i.isRequired,isMac:v.a.bool.isRequired});var jl=Object(Y.h)(Pl),kl=n(309),Ml=n(97),Nl=n(1488),Rl=n.n(Nl),Il=n(2010),Al=n.n(Il),xl=n(2011),Ll=n.n(xl);function Dl(e){var t="file-overlay hidden";return"right"===e.overlayType?t+=" right-file-overlay":"center"===e.overlayType&&(t+=" center-file-overlay"),E.a.createElement("div",{className:t},E.a.createElement("div",{className:"overlay__indent"},E.a.createElement("div",{className:"overlay__circle"},E.a.createElement("img",{className:"overlay__files",src:Al.a,alt:"Files"}),E.a.createElement("span",null,E.a.createElement(Y.c,{id:"generic_icons.upload",defaultMessage:"Upload Icon"},function(e){return E.a.createElement("i",{className:"fa fa-upload",title:e})}),E.a.createElement(Y.c,{id:"upload_overlay.info",defaultMessage:"Drop a file to upload it."})),E.a.createElement("img",{className:"overlay__logo",src:Ll.a,width:"100",alt:"Logo"}))))}Dl.propTypes={overlayType:v.a.string};var Ul=n(1738),ql=n(183),Hl=n.n(ql),Fl=n(1597),Bl=n.n(Fl);function Gl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=t,this.timer=-1,this.fire=this.fire.bind(this)}var t,n,r;return t=e,(n=[{key:"fire",value:function(){this.action(),this.timer=-1}},{key:"fireAfter",value:function(e){this.timer>=0&&window.clearTimeout(this.timer),this.timer=window.setTimeout(this.fire,e)}},{key:"cancel",value:function(){window.clearTimeout(this.timer)}}])&&Gl(t.prototype,n),r&&Gl(t,r),e}();function Wl(e){return e.views.system.websocketConnectionErrorCount}var zl=n(310),Kl=n(121),Yl=n(251),Ql=n(63),Jl=n(1657);function Zl(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Xl(e,t){return function(){var n,r=(n=regeneratorRuntime.mark(function n(r,a){var o,i,l,c,u,f,h,b,y,g,v,_,E;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=a(),(l=(i=e).indexOf(" "))<0&&(l=i.length),c=i.substring(0,l).toLowerCase(),i=c+" "+i.substring(l,i.length).trim(),n.t0=c,n.next="/search"===n.t0?9:"/shortcuts"===n.t0?11:"/leave"===n.t0?16:"/settings"===n.t0?35:"/collapse"===n.t0?37:"/expand"===n.t0?37:38;break;case 9:return r(q.i(i.substring(l+1,i.length))),n.abrupt("return",{data:!0});case 11:if(!T.m()){n.next=14;break}return u={message:Object(j.ab)("create_post.shortcutsNotSupported","Keyboard shortcuts are not supported on your device")},n.abrupt("return",{error:u});case 14:return C.n(),n.abrupt("return",{data:!0});case 16:if(!t.channel_id||!t.root_id&&!t.parent_id){n.next=19;break}return C.h("/leave is not supported in reply threads. Use it in the center channel instead.",t.channel_id,t.parent_id),n.abrupt("return",{data:!0});case 19:if((f=Object(m.getCurrentChannel)(o)).type!==P.i.PRIVATE_CHANNEL){n.next=25;break}return C.m(f),n.abrupt("return",{data:!0});case 25:if(f.type!==P.i.DM_CHANNEL&&f.type!==P.i.GM_CHANNEL){n.next=34;break}return f.type===P.i.DM_CHANNEL?(h=Object(j.F)(f),b=P.i.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW):(h=f.id,b=P.i.Preferences.CATEGORY_GROUP_CHANNEL_SHOW),y=Object(p.getCurrentUserId)(o),r(Object(ll.savePreferences)(y,[{category:b,name:h,user_id:y,value:"false"}])),Object(Sa.isFavoriteChannel)(f)&&r(Object(s.unfavoriteChannel)(f.id)),g=Object(d.getCurrentTeamId)(o),v=Object(m.getRedirectChannelNameForTeam)(o,g),Q.a.push("".concat(Object(d.getCurrentRelativeTeamUrl)(o),"/channels/").concat(v)),n.abrupt("return",{data:!0});case 34:return n.abrupt("break",38);case 35:return r(Object(U.b)({ModalId:P.r.USER_SETTINGS,dialogType:Jl.a})),n.abrupt("return",{data:!0});case 37:r(q.h());case 38:return n.prev=38,n.next=41,ii.Client4.executeCommand(i,t);case 41:_=n.sent,n.next=47;break;case 44:return n.prev=44,n.t1=n.catch(38),n.abrupt("return",{error:n.t1});case 47:if(E=_.goto_location&&Object(ss.f)(_.goto_location),"/logout"!==i.trim()){n.next=51;break}return C.e(E?_.goto_location:"/"),n.abrupt("return",{data:!0});case 51:return _.trigger_id&&r({type:Ko.IntegrationTypes.RECEIVED_DIALOG_TRIGGER_ID,data:_.trigger_id}),E&&(_.goto_location.startsWith("/")?Q.a.push(_.goto_location):_.goto_location.startsWith(Object(ss.e)())?Q.a.push(_.goto_location.substr(Object(ss.e)().length)):window.open(_.goto_location)),n.abrupt("return",{data:!0});case 54:case"end":return n.stop()}},n,null,[[38,44]])}),function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){Zl(o,r,a,i,s,"next",e)}function s(e){Zl(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e,t){return r.apply(this,arguments)}}()}function $l(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function ec(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){$l(o,r,a,i,s,"next",e)}function s(e){$l(o,r,a,i,s,"throw",e)}i(void 0)})}}function tc(e){return function(){var t=ec(regeneratorRuntime.mark(function t(n,r){var a,o,i,s,l,c,u,p,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((a=r().plugins.components.MessageWillBePosted)&&0!==a.length){t.next=3;break}return t.abrupt("return",{data:e});case 3:o=e,i=!0,s=!1,l=void 0,t.prev=7,c=a[Symbol.iterator]();case 9:if(i=(u=c.next()).done){t.next=21;break}return p=u.value,t.next=13,p.hook(o);case 13:if(!(d=t.sent)){t.next=18;break}if(!d.error){t.next=17;break}return t.abrupt("return",{error:d.error});case 17:o=d.post;case 18:i=!0,t.next=9;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(7),s=!0,l=t.t0;case 27:t.prev=27,t.prev=28,i||null==c.return||c.return();case 30:if(t.prev=30,!s){t.next=33;break}throw l;case 33:return t.finish(30);case 34:return t.finish(27);case 35:return t.abrupt("return",{data:o});case 36:case"end":return t.stop()}},t,null,[[7,23,27,35],[28,,30,34]])}));return function(e,n){return t.apply(this,arguments)}}()}function nc(e,t){return function(){var n=ec(regeneratorRuntime.mark(function n(r,a){var o,i,s,l,c,u,p,d,m,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((o=a().plugins.components.SlashCommandWillBePosted)&&0!==o.length){n.next=3;break}return n.abrupt("return",{data:{message:e,args:t}});case 3:i=e,s=t,l=!0,c=!1,u=void 0,n.prev=8,p=o[Symbol.iterator]();case 10:if(l=(d=p.next()).done){n.next=23;break}return m=d.value,n.next=14,m.hook(i,s);case 14:if(!(f=n.sent)){n.next=20;break}if(!f.error){n.next=18;break}return n.abrupt("return",{error:f.error});case 18:i=f.message,s=f.args;case 20:l=!0,n.next=10;break;case 23:n.next=29;break;case 25:n.prev=25,n.t0=n.catch(8),c=!0,u=n.t0;case 29:n.prev=29,n.prev=30,l||null==p.return||p.return();case 32:if(n.prev=32,!c){n.next=35;break}throw u;case 35:return n.finish(32);case 36:return n.finish(29);case 37:return n.abrupt("return",{data:{message:i,args:s}});case 38:case"end":return n.stop()}},n,null,[[8,25,29,37],[30,,32,36]])}));return function(e,t){return n.apply(this,arguments)}}()}var rc=n(147),ac=n(690);function oc(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function ic(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){oc(o,r,a,i,s,"next",e)}function s(e){oc(o,r,a,i,s,"throw",e)}i(void 0)})}}function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){lc(e,t,n[t])})}return e}function lc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cc(){return Object(rc.a)(P.G.COMMENT_DRAFT,function(e,t){return t?sc({},t,{uploadsInProgress:[]}):t})}function uc(e,t){return Object(rc.e)("".concat(P.G.COMMENT_DRAFT).concat(e),t)}function pc(e,t){var n=Object($a.makeGetMessageInHistoryItem)(L.Posts.MESSAGE_TYPES.COMMENT);return function(){return function(r,a){var o=Object(Ml.i)(a(),P.G.COMMENT_DRAFT,e);if(""===o.message||o.message===n(a())){-1===t?r(Object(x.moveHistoryIndexBack)(L.Posts.MESSAGE_TYPES.COMMENT)):1===t&&r(Object(x.moveHistoryIndexForward)(L.Posts.MESSAGE_TYPES.COMMENT));var i=n(a());r(uc(e,sc({},o,{message:i})))}}}}function dc(e,t,n){return function(){var r=ic(regeneratorRuntime.mark(function r(a,o){var i,s,l,c,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=o(),s=Object(p.getCurrentUserId)(i),l=j.D(),c={file_ids:[],message:n.message,channel_id:e,root_id:t,parent_id:t,pending_post_id:"".concat(s,":").concat(l),user_id:s,create_at:l,metadata:{},props:{}},r.next=6,a(tc(c));case 6:if(!(u=r.sent).error){r.next=9;break}return r.abrupt("return",{error:u.error});case 9:return c=u.data,r.abrupt("return",a(q.b(c,n.fileInfos)));case 11:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}()}function mc(e,t,n){return function(r){"+"===t?r(q.a(e,n)):"-"===t&&r(Object(x.removeReaction)(e,n))}}function fc(e,t,n){return function(){var r=ic(regeneratorRuntime.mark(function r(a,o){var i,s,l,c,u,p,m;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=o(),s=Object(d.getCurrentTeamId)(i),l={channel_id:e,team_id:s,root_id:t,parent_id:t},c=n.message,r.next=6,a(nc(c,l));case 6:if(!(u=r.sent).error){r.next=11;break}return r.abrupt("return",{error:u.error});case 11:if(u.data.message||u.data.args){r.next=13;break}return r.abrupt("return",{});case 13:return c=u.data.message,l=u.data.args,r.next=17,a(Xl(c,l));case 17:if(p=r.sent,!(m=p.error)){r.next=23;break}if(!m.sendMessage){r.next=22;break}return r.abrupt("return",a(dc(e,t,n)));case 22:throw m;case 23:return r.abrupt("return",{});case 24:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}()}function hc(e,t){var n=function(e,t){return Object(Kl.a)(p.getCurrentUserId,function(t){return Object($a.getPostIdsInChannel)(t,e)},function(e){return function(t){return Object($a.getPost)(e,t)}},function(e,n,r){var a=null;if(!n)return a;var o=!0,i=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=r(l.value)||{};if(!(u.user_id!==e||u.props&&u.props.from_webhook||u.state===P.i.POST_DELETED||u.type&&u.type.startsWith(P.i.SYSTEM_MESSAGE_PREFIX)||Object(Ql.isPostPendingOrFailed)(u))){if(!t){a=u;break}if(u.root_id===t||u.id===t){a=u;break}}}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}return a})}(e,t),r=Object($a.makeGetCommentCountForPost)();return function(){return function(e,t){var a=t(),o=n(a);return o?e(q.j(o.id,r(a,{post:o}),"reply_textbox",j.ab("create_comment.commentTitle","Comment"),!0)):{data:!1}}}}n(947);var bc=n(1535);function yc(e){if(-1===Array.from(e.types).indexOf("text/html"))return!1;var t=e.getData("text/html");if(!/<table/i.test(t))return!1;var n=function(e){var t=document.createElement("div");return t.innerHTML=e,t.querySelector("table")}(t);return n||!1}function gc(e){return e.textContent.trim().replace(/\|/g,"\\|").replace(/\n/g," ")||""}function vc(e,t){var n,r=Array.from(e.querySelectorAll("tr")),a=(n=r.shift(),Array.from(n.querySelectorAll("td, th")).map(gc)),o=a.map(function(){return"---"}),i="|".concat(a.join(" | "),"|\n|").concat(o.join(" | "),"|\n"),s=r.map(function(e){return"|".concat(Array.from(e.querySelectorAll("td")).map(gc).join(" | "),"|")}).join("\n"),l="".concat(i).concat(s,"\n");return t?"".concat(t,"\n\n").concat(l):l}var _c=n(1763),Ec=n(1766);function wc(e){return(wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sc(e,t){return!t||"object"!==wc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cc(e){return(Cc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pc(e,t){return(Pc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Sc(this,Cc(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pc(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.attach",defaultMessage:"Attachment Icon"},function(e){return E.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 15",role:"icon","aria-label":e},E.a.createElement("g",{fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-1029.000000, -954.000000)",fillRule:"nonzero",fill:"inherit"},E.a.createElement("g",{transform:"translate(25.000000, 937.000000)"},E.a.createElement("g",{transform:"translate(1004.000000, 17.000000)"},E.a.createElement("path",{d:"M5.35,15.56 C3.98,15.56 2.61,15.039 1.567,13.997 C0.557,12.984 0,11.642 0,10.212 C0,8.783 0.557,7.44 1.566,6.429 L6.869,1.126 C8.371,-0.376 10.812,-0.375 12.314,1.125 C13.815,2.627 13.815,5.069 12.314,6.57 L7.011,11.873 C6.094,12.792 4.603,12.79 3.687,11.873 C2.771,10.958 2.771,9.467 3.687,8.551 L8.99,3.248 C9.323,2.916 9.861,2.916 10.193,3.248 C10.525,3.579 10.525,4.118 10.193,4.449 L4.89,9.752 C4.637,10.006 4.637,10.418 4.89,10.672 C5.143,10.923 5.555,10.925 5.809,10.672 L11.113,5.369 C11.952,4.53 11.952,3.166 11.113,2.327 C10.276,1.49 8.911,1.488 8.073,2.327 L2.769,7.631 C2.079,8.32 1.699,9.237 1.699,10.212 C1.699,11.188 2.079,12.104 2.768,12.794 C4.19,14.216 6.502,14.216 7.925,12.798 L7.929,12.794 C7.929,12.793 7.929,12.793 7.929,12.793 L15.355,5.369 C15.687,5.037 16.224,5.037 16.556,5.369 C16.888,5.7 16.888,6.239 16.556,6.57 L8.779,14.348 L8.761,14.332 C7.776,15.15 6.562,15.56 5.35,15.56 Z"}))))))}))}}])&&Oc(n.prototype,r),a&&Oc(n,a),t}(),jc=n(1541);function kc(e){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nc(e,t){return!t||"object"!==kc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rc(e){return(Rc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ic(e,t){return(Ic=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ac=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Nc(this,Rc(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ic(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.canDownload,n=e.children,r=e.compactDisplay,a=e.fileInfo,o=e.handleImageClick,i=e.iconClass,s=a.name,l=Object(jc.f)(s);return r?E.a.createElement(_c.a,{delayShow:1e3,placement:"top",overlay:E.a.createElement(Ec.a,{id:"file-name__tooltip"},s)},E.a.createElement("a",{href:"#",onClick:o,className:"post-image__name",rel:"noopener noreferrer"},E.a.createElement(Tc,{className:"icon"}),l)):t?E.a.createElement("div",{className:i||"post-image__name"},E.a.createElement("a",{href:Object(bc.getFileDownloadUrl)(a.id),"aria-label":Object(j.ab)("view_image_popover.download","Download").toLowerCase(),download:s,target:"_blank",rel:"noopener noreferrer"},E.a.createElement(_c.a,{delayShow:1e3,placement:"top",overlay:E.a.createElement(Ec.a,{id:"file-name__tooltip"},Object(j.ab)("view_image_popover.download","Download").toLowerCase())},n||l))):E.a.createElement("span",{className:"post-image__name"},l)}}])&&Mc(n.prototype,r),a&&Mc(n,a),t}();function xc(e){return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dc(e,t){return!t||"object"!==xc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uc(e){return(Uc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qc(e,t){return(qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ac,"propTypes",{fileInfo:v.a.object.isRequired,handleImageClick:v.a.func,compactDisplay:v.a.bool,canDownload:v.a.bool,children:v.a.element,iconClass:v.a.string});var Hc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Dc(this,Uc(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qc(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement(Y.c,{id:"generic_icons.remove",defaultMessage:"Remove Icon"},function(e){return E.a.createElement("i",{className:"fa fa-remove",title:e})})}}])&&Lc(n.prototype,r),a&&Lc(n,a),t}(),Fc=n(1773);function Bc(e){return(Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vc(e){return(Vc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zc(e,t){return(zc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yc=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Vc(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Bc(a)&&"function"!=typeof a?Wc(r):a,Kc(Wc(n),"handleRemove",function(){n.props.handleRemove(n.props.clientId)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zc(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t,n=0,r=this.props,a=r.fileInfo,o=r.clientId;if(a){var i=(n=a.percent)&&" (".concat(n.toFixed(0),"%)"),s=Object(jc.d)(a.type);t=E.a.createElement("div",{className:"file-icon "+j.A(s)}),e=E.a.createElement(E.a.Fragment,null,E.a.createElement(Ac,{fileInfo:a,index:o,handleImageClick:null,compactDisplay:!1,canDownload:!1}),E.a.createElement("span",{className:"post-image__uploadingTxt"},100===n?E.a.createElement(Y.c,{id:"create_post.fileProcessing",defaultMessage:"Processing..."}):E.a.createElement(E.a.Fragment,null,E.a.createElement(Y.c,{id:"admin.plugin.uploading",defaultMessage:"Uploading..."}),E.a.createElement("span",null,i))),n&&E.a.createElement(Fc.a,{className:"post-image__progressBar",now:n,active:100===n}))}return E.a.createElement("div",{ref:o,key:o,className:"file-preview post-image__column","data-client-id":o},E.a.createElement("div",{className:"post-image__thumbnail"},t),E.a.createElement("div",{className:"post-image__details"},E.a.createElement("div",{className:"post-image__detail_wrapper"},E.a.createElement("div",{className:"post-image__detail"},e)),E.a.createElement("div",null,E.a.createElement("a",{className:"file-preview__remove",onClick:this.handleRemove},E.a.createElement(Hc,null)))))}}])&&Gc(n.prototype,r),a&&Gc(n,a),t}();function Qc(e){return(Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zc(e){return(Zc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $c(e,t){return($c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Kc(Yc,"propTypes",{handleRemove:v.a.func.isRequired,clientId:v.a.string.isRequired,fileInfo:v.a.object});var tu=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Zc(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Qc(a)&&"function"!=typeof a?Xc(r):a,eu(Xc(n),"handleRemove",function(e){n.props.onRemove(e)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$c(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this,t=[];return this.props.fileInfos.forEach(function(n,r){var a,o=j.y(n.extension),i="file-preview post-image__column";if(o===P.m.SVG&&e.props.enableSVGs)a=E.a.createElement("img",{alt:"file preview",className:"post-image normal",src:Object(bc.getFileUrl)(n.id)});else if(o===P.m.IMAGE){var s="post-image";n.width<P.Q.THUMBNAIL_WIDTH&&n.height<P.Q.THUMBNAIL_HEIGHT?s+=" small":s+=" normal";var l=Object(bc.getFileThumbnailUrl)(n.id);j.R(n.extension)&&!n.has_preview_image&&(l=Object(bc.getFileUrl)(n.id)),a=E.a.createElement("div",{className:s,style:{backgroundImage:"url(".concat(l,")"),backgroundSize:"cover"}})}else i+=" custom-file",a=E.a.createElement("div",{className:"file-icon "+j.A(o)});t.push(E.a.createElement("div",{key:n.id,className:i},E.a.createElement("div",{className:"post-image__thumbnail"},a),E.a.createElement("div",{className:"post-image__details"},E.a.createElement("div",{className:"post-image__detail_wrapper"},E.a.createElement("div",{className:"post-image__detail"},E.a.createElement(Ac,{fileInfo:n,index:r,handleImageClick:null,compactDisplay:!1,canDownload:!1}),E.a.createElement("span",{className:"post-image__type"},n.extension.toUpperCase()),E.a.createElement("span",{className:"post-image__size"},j.p(n.size)))),E.a.createElement("div",null,E.a.createElement("a",{className:"file-preview__remove",onClick:e.handleRemove.bind(e,n.id)},E.a.createElement(Hc,null))))))}),this.props.uploadsInProgress.forEach(function(n){t.push(E.a.createElement(Yc,{key:n,clientId:n,fileInfo:e.props.uploadsProgressPercent[n],handleRemove:e.handleRemove}))}),E.a.createElement("div",{className:"file-preview__container",ref:"container"},t)}}])&&Jc(n.prototype,r),a&&Jc(n,a),t}();eu(tu,"propTypes",{enableSVGs:v.a.bool.isRequired,onRemove:v.a.func.isRequired,fileInfos:v.a.arrayOf(v.a.object).isRequired,uploadsInProgress:v.a.array,uploadsProgressPercent:v.a.object}),eu(tu,"defaultProps",{fileInfos:[],uploadsInProgress:[],uploadsProgressPercent:{}});var nu=Object(r.connect)(function(e){return{enableSVGs:"true"===Object(u.getConfig)(e).EnableSVGs}})(tu),ru=n(148),au=n(1785),ou=n.n(au),iu=n(122);function su(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lu(e,t,n,r,a){return function(r){return r({type:Ko.FileTypes.UPLOAD_FILES_REQUEST}),ou.a.post(ii.Client4.getFilesRoute()).set(ii.Client4.getOptions({method:"post"}).headers).attach("files",e,t).field("channel_id",n).field("client_ids",a).accept("application/json")}}function cu(e,t,n,r,a,o){var i=o.err,s=o.res;return function(e,t){if(i){var o;o=s&&s.body&&s.body.id?s.body:0!==i.status&&i.status?{message:j.ab("channel_loader.unknown_error","We received an unexpected status code from the server.")+" ("+i.status+")"}:{message:j.ab("file_upload.generic_error","There was a problem uploading your files.")},Object(iu.forceLogoutIfNecessary)(i,e,t);var l={type:Ko.FileTypes.UPLOAD_FILES_FAILURE,clientIds:[a],channelId:n,rootId:r,error:i};return e(Object(ru.batchActions)([l,Object(H.getLogErrorAction)(i)])),{error:o}}var c=s.body.file_infos.map(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){su(e,t,n[t])})}return e}({},e,{clientId:s.body.client_ids[t]})});return e(Object(ru.batchActions)([{type:Ko.FileTypes.RECEIVED_UPLOAD_FILES,data:c,channelId:n,rootId:r},{type:Ko.FileTypes.UPLOAD_FILES_SUCCESS}])),{data:s.body}}}n(425);var uu=n(419),pu=n.n(uu),du=(n(2032),n(1533)),mu=n(1530);function fu(e){return(fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_u(e,t,n[t])})}return e}function bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yu(e){return(yu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vu(e,t){return(vu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eu=Object(Y.g)({limited:{id:Object(Me.b)("file_upload.limited"),defaultMessage:"Uploads limited to {count, number} files maximum. Please use additional posts for more files."},filesAbove:{id:Object(Me.b)("file_upload.filesAbove"),defaultMessage:"Files above {max}MB could not be uploaded: {filenames}"},fileAbove:{id:Object(Me.b)("file_upload.fileAbove"),defaultMessage:"File above {max}MB could not be uploaded: {filename}"},zeroBytesFiles:{id:Object(Me.b)("file_upload.zeroBytesFiles"),defaultMessage:"You are uploading empty files: {filenames}"},zeroBytesFile:{id:Object(Me.b)("file_upload.zeroBytesFile"),defaultMessage:"You are uploading an empty file: {filename}"},pasted:{id:Object(Me.b)("file_upload.pasted"),defaultMessage:"Image Pasted at "},uploadFile:{id:Object(Me.b)("file_upload.upload_files"),defaultMessage:"Upload files"}}),wu=500,Ou={left:"inherit",right:0,bottom:"100%",top:"auto"},Su=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=yu(t).call(this,e),n=!a||"object"!==fu(a)&&"function"!=typeof a?gu(r):a,_u(gu(n),"fileUploadSuccess",function(e,t,r){if(e){n.props.onFileUpload(e.file_infos,e.client_ids,t,r);for(var a=Object.assign({},n.state.requests),o=0;o<e.client_ids.length;o++)Reflect.deleteProperty(a,e.client_ids[o]);n.setState({requests:a})}}),_u(gu(n),"fileUploadFail",function(e,t,r,a){n.props.onUploadError(e,t,r,a)}),_u(gu(n),"pluginUploadFiles",function(e){n.props.onUploadError(null),n.uploadFiles(e)}),_u(gu(n),"checkPluginHooksAndUploadFiles",function(e){n.props.onUploadError(null);var t=Array.from(e).sort(function(e,t){return e.name.localeCompare(t.name,n.props.locale,{numeric:!0})}),r=n.props.pluginFilesWillUploadHooks,a=!0,o=!1,i=void 0;try{for(var s,l=r[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value.hook(t,n.pluginUploadFiles);c.message&&n.props.onUploadError(c.message),t=c.files}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}t&&n.uploadFiles(t)}),_u(gu(n),"uploadFiles",function(e){for(var t=n.props,r=t.currentChannelId,a=t.rootId,o=P.Q.MAX_UPLOAD_FILES-n.props.fileCount,i=0,s=[],l=[],c=[],u=function(t){if(e[t].size>n.props.maxFileSize)return s.push(e[t]),"continue";0===e[t].size&&l.push(e[t]);var o=Object(j.r)(),u=n.props.actions.uploadFile(e[t],e[t].name,r,a,o);u.on("progress",function(r){n.props.onUploadProgress({clientId:o,name:e[t].name,percent:r.percent,type:e[t].type})}),u.end(function(i,s){var l=n.props.actions.handleFileUploadEnd(e[t],e[t].name,r,a,o,{err:i,res:s}),c=l.error,u=l.data;c?n.fileUploadFail(c,o,r,a):u&&n.fileUploadSuccess(u,r,a)}),n.setState({requests:hu({},n.state.requests,_u({},o,u))}),c.push(o),i+=1},p=0;p<e.length&&i<o;p++)u(p);n.props.onUploadStart(c,r);var d=n.context.intl.formatMessage,m=[];if(e.length>o&&m.push(d(Eu.limited,{count:P.Q.MAX_UPLOAD_FILES})),s.length>1){var f=s.map(function(e){return e.name}).join(", ");m.push(d(Eu.filesAbove,{max:n.props.maxFileSize/1048576,filenames:f}))}else s.length>0&&m.push(d(Eu.fileAbove,{max:n.props.maxFileSize/1048576,filename:s[0].name}));if(l.length>1){var h=l.map(function(e){return e.name}).join(", ");m.push(d(Eu.zeroBytesFiles,{filenames:h}))}else l.length>0&&m.push(d(Eu.zeroBytesFile,{filename:l[0].name}));m.length>0&&n.props.onUploadError(m.join(", "))}),_u(gu(n),"handleChange",function(e){e.target.files.length>0&&(n.checkPluginHooksAndUploadFiles(e.target.files),Object(j.d)(e.target)),n.props.onFileUploadChange()}),_u(gu(n),"handleDrop",function(e){if(n.props.canUploadFiles){n.props.onUploadError(null);var t=e.originalEvent.dataTransfer.items||[],r=e.originalEvent.dataTransfer.files,a=[];Array.from(r).forEach(function(e,n){var r=t[n];r&&r.webkitGetAsEntry&&r.webkitGetAsEntry().isDirectory||a.push(e)});var o=e.originalEvent.dataTransfer.types;if(o){if(o.includes&&!o.includes("Files"))return;if(o.contains&&!o.contains("Files"))return}0!==a.length?(a.length&&n.checkPluginHooksAndUploadFiles(a),n.props.onFileUploadChange()):n.props.onUploadError(Object(j.ab)("file_upload.drag_folder","Folders cannot be uploaded. Please drag all files separately."))}else n.props.onUploadError(Object(j.ab)("file_upload.disabled","File attachments are disabled."))}),_u(gu(n),"registerDragEvents",function(e,t){var r=gu(n),a=Hl()(t),o=new Vl(function(){a.hasClass("hidden")||a.addClass("hidden")}),i={};i=n.props.canUploadFiles?{enter:function(e,n){var r=n.originalEvent.dataTransfer;Object(j.Q)(r)&&Hl()(t).removeClass("hidden")},leave:function(e,t){var n=t.originalEvent.dataTransfer;Object(j.Q)(n)&&!a.hasClass("hidden")&&a.addClass("hidden"),o.cancel()},over:function(){o.fireAfter(wu)},drop:function(e,t){a.hasClass("hidden")||a.addClass("hidden"),o.cancel(),r.handleDrop(t)}}:{drop:function(e,t){r.handleDrop(t)}},Hl()(e).dragster(i)}),_u(gu(n),"containsEventTarget",function(e,t){return e&&e.contains(t)}),_u(gu(n),"pasteUpload",function(e){var t=n.context.intl.formatMessage;if(e.clipboardData&&e.clipboardData.items&&!yc(e.clipboardData)){var r=n.props.getTarget(),a=pu.a.findDOMNode(r);if(n.containsEventTarget(a,e.target)){n.props.onUploadError(null);for(var o=[],i=0;i<e.clipboardData.items.length;i++){var s=e.clipboardData.items[i];"file"===s.kind&&o.push(s)}if(o&&o.length>0){if(!n.props.canUploadFiles)return void n.props.onUploadError(Object(j.ab)("file_upload.disabled","File attachments are disabled."));for(var l=[],c=0;c<o.length;c++){var u=o[c].getAsFile();if(u){var p=new Date,d=p.getHours();d=d<10?"0".concat(d):"".concat(d);var m=p.getMinutes();m=m<10?"0".concat(m):"".concat(m);var f="";u.name?u.name.includes(".")&&(f=u.name.substr(u.name.lastIndexOf("."))):o[c].type.includes("/")&&(f="."+o[c].type.split("/")[1].toLowerCase());var h=t(Eu.pasted)+p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate()+" "+d+"-"+m+f,b=new Blob([u],{type:u.type});b.name=h,l.push(b)}}l.length>0&&(n.checkPluginHooksAndUploadFiles(l),n.props.onFileUploadChange())}}}}),_u(gu(n),"keyUpload",function(e){if(Object(j.e)(e)&&Object(j.S)(e,P.Q.KeyCodes.U)){if(e.preventDefault(),!n.props.canUploadFiles)return void n.props.onUploadError(Object(j.ab)("file_upload.disabled","File attachments are disabled."));var t="post"===n.props.postType&&"post_textbox"===document.activeElement.id,r="comment"===n.props.postType&&"reply_textbox"===document.activeElement.id;(t||r)&&(n.fileInput.current.focus(),n.fileInput.current.click())}}),_u(gu(n),"cancelUpload",function(e){var t=Object.assign({},n.state.requests),r=t[e];r&&(r.abort(),Reflect.deleteProperty(t,e),n.setState({requests:t}))}),_u(gu(n),"handleMaxUploadReached",function(e){e&&e.preventDefault(),(0,n.props.onUploadError)((0,n.context.intl.formatMessage)(Eu.limited,{count:P.Q.MAX_UPLOAD_FILES}))}),_u(gu(n),"toggleMenu",function(e){n.setState({menuOpen:e})}),_u(gu(n),"handleLocalFileUploaded",function(e){P.Q.MAX_UPLOAD_FILES-n.props.fileCount>0?n.props.onClick&&n.props.onClick():n.handleMaxUploadReached(e),n.setState({menuOpen:!1})}),_u(gu(n),"simulateInputClick",function(){n.fileInput.current.click()}),n.state={requests:{},menuOpen:!1},n.fileInput=E.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vu(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"componentDidMount",value:function(){"post"===this.props.postType?this.registerDragEvents(".row.main",".center-file-overlay"):"comment"===this.props.postType&&this.registerDragEvents(".post-right__container",".right-file-overlay"),document.addEventListener("paste",this.pasteUpload),document.addEventListener("keydown",this.keyUpload)}},{key:"componentWillUnmount",value:function(){var e;e="post"===this.props.postType?Hl()(".row.main"):Hl()(".post-right__container"),document.removeEventListener("paste",this.pasteUpload),document.removeEventListener("keydown",this.keyUpload),e.off("dragenter dragleave dragover drop dragster:enter dragster:leave dragster:over dragster:drop")}},{key:"render",value:function(){var e=this,t=this.context.intl.formatMessage,n=!0;Object(T.n)()&&(n=!1);var r="";Object(T.h)()&&(r="image/*");var a,o=P.Q.MAX_UPLOAD_FILES-this.props.fileCount,i=t({id:"accessibility.button.attachment",defaultMessage:"attachment"});if(0===this.props.pluginFileUploadMethods.length)a=E.a.createElement("div",null,E.a.createElement("button",{type:"button",id:"fileUploadButton","aria-label":i,className:"style--none post-action icon icon--attachment",onClick:this.simulateInputClick},E.a.createElement(Tc,null)),E.a.createElement("input",{tabIndex:"-1","aria-label":t(Eu.uploadFile),ref:this.fileInput,type:"file",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:n,accept:r}));else{var s=this.props.pluginFileUploadMethods.map(function(t){return E.a.createElement("li",{key:t.pluginId+"_fileuploadpluginmenuitem",onClick:function(){t.action&&t.action(e.checkPluginHooksAndUploadFiles),e.setState({menuOpen:!1})}},E.a.createElement("a",{href:"#"},E.a.createElement("span",{className:"margin-right"},t.icon),t.text))});a=E.a.createElement("div",null,E.a.createElement("input",{tabIndex:"-1","aria-label":t(Eu.uploadFile),ref:this.fileInput,type:"file",className:"file-attachment-menu-item-input",onChange:this.handleChange,onClick:this.handleLocalFileUploaded,multiple:n,accept:r}),E.a.createElement(du.a,null,E.a.createElement("button",{type:"button","aria-label":i,className:"style--none post-action"},E.a.createElement("div",{id:"fileUploadButton",className:"icon icon--attachment"},E.a.createElement(Tc,null))),E.a.createElement(mu.a,{openLeft:!0,openUp:!0,ariaLabel:t({id:"file_upload.menuAriaLabel",defaultMessage:"Upload type selector"}),customStyles:Ou},E.a.createElement("li",null,E.a.createElement("a",{href:"#",onClick:this.simulateInputClick},E.a.createElement("span",{className:"margin-right"},E.a.createElement("i",{className:"fa fa-laptop"})),E.a.createElement(Y.c,{id:"yourcomputer",defaultMessage:"Your computer"}))),s)))}return this.props.canUploadFiles||(a=null),E.a.createElement("div",{className:o<=0?" style--none btn-file__disabled":"style--none"},a)}}])&&bu(n.prototype,r),a&&bu(n,a),t}();_u(Su,"propTypes",{currentChannelId:v.a.string.isRequired,rootId:v.a.string,fileCount:v.a.number.isRequired,getTarget:v.a.func.isRequired,locale:v.a.string.isRequired,onClick:v.a.func,onFileUpload:v.a.func,onFileUploadChange:v.a.func,onUploadError:v.a.func,onUploadStart:v.a.func,postType:v.a.string,maxFileSize:v.a.number,canUploadFiles:v.a.bool.isRequired,pluginFileUploadMethods:v.a.arrayOf(v.a.object),pluginFilesWillUploadHooks:v.a.arrayOf(v.a.object),onUploadProgress:v.a.func.isRequired,actions:v.a.shape({uploadFile:v.a.func.isRequired,handleFileUploadEnd:v.a.func.isRequired}).isRequired}),_u(Su,"contextTypes",{intl:Y.i}),_u(Su,"defaultProps",{pluginFileUploadMethods:[],pluginFilesWillUploadHooks:[]});var Cu=Object(r.connect)(function(e){var t=Object(u.getConfig)(e),n=parseInt(t.MaxFileSize,10);return{currentChannelId:Object(m.getCurrentChannelId)(e),maxFileSize:n,canUploadFiles:Object(jc.b)(t),locale:Object(zl.a)(e),pluginFileUploadMethods:e.plugins.components.FileUploadMethod,pluginFilesWillUploadHooks:e.plugins.components.FilesWillUploadHook}},function(e){return{actions:Object(a.bindActionCreators)({uploadFile:lu,handleFileUploadEnd:cu},e)}},null,{withRef:!0})(Su),Pu=n(2033);function Tu(e){return(Tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ju(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mu(e){return(Mu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ru(e,t){return(Ru=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Iu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Au=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Mu(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Tu(a)&&"function"!=typeof a?Nu(r):a,Iu(Nu(n),"getTypingText",function(){var e=[],t=0;if(n.props.typingUsers&&(t=(e=ju(n.props.typingUsers)).length),0===t)return"";if(1===t)return E.a.createElement(Y.c,{id:"msg_typing.isTyping",defaultMessage:"{user} is typing...",values:{user:e[0]}});var r=e.pop();return E.a.createElement(Y.c,{id:"msg_typing.areTyping",defaultMessage:"{users} and {last} are typing...",values:{users:e.join(", "),last:r}})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ru(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",{className:"msg-typing"},this.getTypingText())}}])&&ku(n.prototype,r),a&&ku(n,a),t}();Iu(Au,"propTypes",{typingUsers:v.a.array.isRequired});var xu=Object(r.connect)(function(){var e=Object(Pu.makeGetUsersTypingByChannelAndPost)();return function(t,n){return{typingUsers:e(t,{channelId:n.channelId,postId:n.postId})}}})(Au);function Lu(e){return(Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Du(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uu(e,t){return!t||"object"!==Lu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qu(e){return(qu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hu(e,t){return(Hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Uu(this,qu(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hu(e,t)}(t,E.a.Component),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return e.show!==this.props.show}},{key:"render",value:function(){return E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.props.onHide,role:"dialog","aria-labelledby":"postDeletedModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"postDeletedModalLabel"},E.a.createElement(Y.c,{id:"post_delete.notPosted",defaultMessage:"Comment could not be posted"}))),E.a.createElement(K.a.Body,null,E.a.createElement("p",null,E.a.createElement(Y.c,{id:"post_delete.someone",defaultMessage:"Someone deleted the message on which you tried to post a comment."}))),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-primary",autoFocus:!0,onClick:this.props.onHide},E.a.createElement(Y.c,{id:"post_delete.okay",defaultMessage:"Okay"}))))}}])&&Du(n.prototype,r),a&&Du(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fu,"propTypes",{show:v.a.bool.isRequired,onHide:v.a.func.isRequired});var Bu=n(1491);function Gu(e){return(Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wu(e){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ku(e,t){return(Ku=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qu=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Wu(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Gu(a)&&"function"!=typeof a?zu(r):a,Yu(zu(n),"renderSlashCommandError",function(){if(!n.props.submittedMessage)return n.props.error.message;var e=n.props.submittedMessage.split(" ")[0];return E.a.createElement(E.a.Fragment,null,E.a.createElement(Y.c,{id:"message_submit_error.invalidCommand",defaultMessage:"Command with a trigger of '{command}' not found. ",values:{command:e}}),E.a.createElement("a",{href:"#",onClick:n.props.handleSubmit},E.a.createElement(Y.c,{id:"message_submit_error.sendAsMessageLink",defaultMessage:"Click here to send as a message."})))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ku(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props.error;if(!e)return null;var t=e.message;return Object(_t.k)(e)&&(t=this.renderSlashCommandError()),E.a.createElement("div",{className:"has-error"},E.a.createElement("label",{className:"control-label"},t))}}])&&Vu(n.prototype,r),a&&Vu(n,a),t}();Yu(Qu,"propTypes",{error:v.a.object.isRequired,handleSubmit:v.a.func.isRequired,submittedMessage:v.a.string});var Ju=Qu;function Zu(e){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xu(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $u(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function ep(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){$u(o,r,a,i,s,"next",e)}function s(e){$u(o,r,a,i,s,"throw",e)}i(void 0)})}}function tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ip(e,t,n[t])})}return e}function np(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rp(e){return(rp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ap(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function op(e,t){return(op=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ip(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sp=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=rp(t).call(this,e),n=!a||"object"!==Zu(a)&&"function"!=typeof a?ap(r):a,ip(ap(n),"updatePreview",function(e){n.setState({showPreview:e})}),ip(ap(n),"focusTextboxIfNecessary",function(e){n.props.rhsExpanded&&(document.getElementsByClassName("channel-switch-modal").length||Object(_t.p)(e,document.activeElement)&&n.focusTextbox())}),ip(ap(n),"pasteHandler",function(e){if(e.clipboardData&&e.clipboardData.items&&"reply_textbox"===e.target.id){var t=yc(e.clipboardData);if(t){e.preventDefault();var r=n.state.draft,a=vc(t,r.message.trim()),o=tp({},r,{message:a});n.props.onUpdateCommentDraft(o),n.setState({draft:o})}}}),ip(ap(n),"handleNotifyAllConfirmation",function(e){n.hideNotifyAllModal(),n.doSubmit(e)}),ip(ap(n),"hideNotifyAllModal",function(){n.setState({showConfirmModal:!1})}),ip(ap(n),"showNotifyAllModal",function(){n.setState({showConfirmModal:!0})}),ip(ap(n),"toggleEmojiPicker",function(){n.setState({showEmojiPicker:!n.state.showEmojiPicker})}),ip(ap(n),"hideEmojiPicker",function(){n.setState({showEmojiPicker:!1})}),ip(ap(n),"handleEmojiClick",function(e){var t=e.name||e.aliases[0];if(t){var r=n.state.draft,a=tp({},r,{message:""===r.message?":".concat(t,": "):/\s+$/.test(r.message)?"".concat(r.message,":").concat(t,": "):"".concat(r.message," :").concat(t,": ")});n.props.onUpdateCommentDraft(a),n.draftsForPost[n.props.rootId]=a,n.setState({showEmojiPicker:!1,draft:a})}}),ip(ap(n),"handleGifClick",function(e){var t=n.state.draft,r=tp({},t,{message:""===t.message?e:/\s+$/.test(t.message)?"".concat(t.message).concat(e," "):"".concat(t.message," ").concat(e," ")});n.props.onUpdateCommentDraft(r),n.draftsForPost[n.props.rootId]=r,n.setState({showEmojiPicker:!1,draft:r}),n.focusTextbox()}),ip(ap(n),"handlePostError",function(e){n.setState({postError:e})}),ip(ap(n),"handleSubmit",function(){var e=ep(regeneratorRuntime.mark(function e(t){var r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=n.props.channelMembersCount,!(n.props.enableConfirmNotificationsToChannel&&r>P.Q.NOTIFY_ALL_MEMBERS&&Object(_t.c)(n.state.draft.message))){e.next=12;break}if(!n.props.isTimezoneEnabled){e.next=10;break}return e.next=7,n.props.getChannelTimezones(n.props.channelId);case 7:a=e.sent,(o=a.data)?n.setState({channelTimezoneCount:o.length}):n.setState({channelTimezoneCount:0});case 10:return n.showNotifyAllModal(),e.abrupt("return");case 12:return e.next=14,n.doSubmit(t);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),ip(ap(n),"doSubmit",function(){var e=ep(regeneratorRuntime.mark(function e(t){var r,a,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),r=n.state.draft,n.shouldEnableAddButton()){e.next=5;break}return e.abrupt("return");case 5:if(!(r.uploadsInProgress.length>0)){e.next=7;break}return e.abrupt("return");case 7:if(!n.state.postError){e.next=11;break}return n.setState({errorClass:"animation--highlight"}),setTimeout(function(){n.setState({errorClass:null})},P.Q.ANIMATION_TIMEOUT),e.abrupt("return");case 11:if(!n.props.rootDeleted){e.next=14;break}return n.showPostDeletedModal(),e.abrupt("return");case 14:return 150,a=Date.now()-n.lastBlurAt<150,n.focusTextbox(a),o=n.state.serverError,i=!1,Object(_t.k)(o)&&r.message===o.submittedMessage&&(i=!0),s={ignoreSlash:i},e.prev=21,e.next=24,n.props.onSubmit(s);case 24:n.setState({postError:null,serverError:null}),e.next=33;break;case 27:return e.prev=27,e.t0=e.catch(21),Object(_t.k)(e.t0)&&n.props.onUpdateCommentDraft(r),e.t0.submittedMessage=r.message,n.setState({serverError:e.t0}),e.abrupt("return");case 33:n.setState({draft:tp({},n.props.draft,{uploadsInProgress:[]})});case 34:case"end":return e.stop()}},e,null,[[21,27]])}));return function(t){return e.apply(this,arguments)}}()),ip(ap(n),"commentMsgKeyPress",function(e){var t=n.props,r=t.ctrlSend,a=t.codeBlockOnCtrlEnter,o=Object(_t.o)(e,n.state.draft.message,r,a),i=o.allowSending,s=o.withClosedCodeBlock,l=o.message;if(i){if(e.persist(),n.refs.textbox&&n.refs.textbox.getWrappedInstance().blur(),s&&l){var c=tp({},n.state.draft,{message:l});n.props.onUpdateCommentDraft(c),n.setState({draft:c},function(){return n.handleSubmit(e)}),n.draftsForPost[n.props.rootId]=c}else n.handleSubmit(e);n.updatePreview(!1),setTimeout(function(){n.focusTextbox()})}n.emitTypingEvent()}),ip(ap(n),"emitTypingEvent",function(){var e=n.props,t=e.channelId,r=e.rootId;C.d(t,r)}),ip(ap(n),"scrollToBottom",function(){var e=Hl()(".post-right__scroll");e[0]&&e.parent().scrollTop(e[0].scrollHeight)}),ip(ap(n),"handleChange",function(e){var t=e.target.value,r=n.state.serverError;Object(_t.k)(r)&&(r=null);var a=tp({},n.state.draft,{message:t});n.props.onUpdateCommentDraft(a),n.setState({draft:a,serverError:r},function(){n.scrollToBottom()}),n.draftsForPost[n.props.rootId]=a}),ip(ap(n),"handleKeyDown",function(e){if((n.props.ctrlSend||n.props.codeBlockOnCtrlEnter)&&j.S(e,P.Q.KeyCodes.ENTER)&&(e.ctrlKey||e.metaKey))return n.updatePreview(!1),void n.commentMsgKeyPress(e);var t=n.state.draft.message;e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||!j.S(e,P.Q.KeyCodes.UP)||""!==t||(e.preventDefault(),n.refs.textbox&&n.refs.textbox.getWrappedInstance().blur(),n.props.onEditLatestPost().data||n.focusTextbox(!0));!e.ctrlKey&&!e.metaKey||e.altKey||e.shiftKey||(j.S(e,P.Q.KeyCodes.UP)?(e.preventDefault(),n.props.onMoveHistoryIndexBack()):j.S(e,P.Q.KeyCodes.DOWN)&&(e.preventDefault(),n.props.onMoveHistoryIndexForward()))}),ip(ap(n),"handleFileUploadChange",function(){n.focusTextbox()}),ip(ap(n),"handleUploadStart",function(e){var t=n.state.draft,r=tp({},t,{uploadsInProgress:[].concat(Xu(t.uploadsInProgress),Xu(e))});n.props.onUpdateCommentDraft(r),n.setState({draft:r}),n.draftsForPost[n.props.rootId]=r,n.focusTextbox()}),ip(ap(n),"handleUploadProgress",function(e){var t=e.clientId,r=e.name,a=e.percent,o=e.type,i=tp({},n.state.uploadsProgressPercent,ip({},t,{percent:a,name:r,type:o}));n.setState({uploadsProgressPercent:i})}),ip(ap(n),"handleFileUploadComplete",function(e,t,r,a){for(var o=n.draftsForPost[a],i=Xu(o.uploadsInProgress),s=Object(bc.sortFileInfos)([].concat(Xu(o.fileInfos),Xu(e)),n.props.locale),l=0;l<t.length;l++){var c=i.indexOf(t[l]);-1!==c&&i.splice(c,1)}var u=tp({},o,{fileInfos:s,uploadsInProgress:i});n.props.updateCommentDraftWithRootId(a,u),n.draftsForPost[a]=u,n.props.rootId===a&&n.setState({draft:u}),void 0!==n.refs.preview&&n.refs.preview&&n.refs.preview.refs.container.scrollIntoView()}),ip(ap(n),"handleUploadError",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1!==t){var a=tp({},n.draftsForPost[r]),o=Xu(a.uploadsInProgress),i=o.indexOf(t);-1!==i&&o.splice(i,1);var s=tp({},a,{uploadsInProgress:o});n.props.updateCommentDraftWithRootId(r,s),n.draftsForPost[r]=s,n.props.rootId===r&&n.setState({draft:s})}var l=e;e&&"string"==typeof e&&(l=new Error(e)),n.setState({serverError:l})}),ip(ap(n),"removePreview",function(e){var t=n.state.draft,r=Xu(t.fileInfos),a=Xu(t.uploadsInProgress);n.handleUploadError(null);var o=r.findIndex(function(t){return t.id===e});-1===o?-1!==(o=a.indexOf(e))&&(a.splice(o,1),n.refs.fileUpload&&n.refs.fileUpload.getWrappedInstance()&&n.refs.fileUpload.getWrappedInstance().cancelUpload(e)):r.splice(o,1);var i=tp({},t,{fileInfos:r,uploadsInProgress:a});n.props.onUpdateCommentDraft(i),n.setState({draft:i}),n.draftsForPost[n.props.rootId]=i,n.handleFileUploadChange()}),ip(ap(n),"getFileCount",function(){var e=n.state.draft,t=e.fileInfos,r=e.uploadsInProgress;return t.length+r.length}),ip(ap(n),"getFileUploadTarget",function(){return n.refs.textbox.getWrappedInstance()}),ip(ap(n),"getCreateCommentControls",function(){return n.refs.createCommentControls}),ip(ap(n),"shouldEnableAddButton",function(){return!!n.props.enableAddButton||Object(_t.k)(n.state.serverError)}),ip(ap(n),"focusTextbox",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!n.refs.textbox||!e&&T.m()||n.refs.textbox.getWrappedInstance().focus()}),ip(ap(n),"showPostDeletedModal",function(){n.setState({showPostDeletedModal:!0})}),ip(ap(n),"hidePostDeletedModal",function(){n.setState({showPostDeletedModal:!1}),n.props.resetCreatePostRequest()}),ip(ap(n),"handleBlur",function(){n.lastBlurAt=Date.now()}),ip(ap(n),"handleHeightChange",function(e,t){n.setState({renderScrollbar:e>t})}),n.state={showPostDeletedModal:!1,showConfirmModal:!1,showEmojiPicker:!1,showPreview:!1,draft:{message:"",uploadsInProgress:[],fileInfos:[]},channelTimezoneCount:0,uploadsProgressPercent:{},renderScrollbar:!1},n.lastBlurAt=0,n.draftsForPost={},n.doInitialScrollToBottom=!1,n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&op(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.props.clearCommentDraftUploads(),this.props.onResetHistoryIndex(),this.setState({draft:tp({},this.props.draft,{uploadsInProgress:[]})})}},{key:"componentDidMount",value:function(){this.focusTextbox(),document.addEventListener("paste",this.pasteHandler),document.addEventListener("keydown",this.focusTextboxIfNecessary),""!==this.props.draft.message&&(this.doInitialScrollToBottom=!0)}},{key:"componentWillUnmount",value:function(){this.props.resetCreatePostRequest(),document.removeEventListener("paste",this.pasteHandler),document.removeEventListener("keydown",this.focusTextboxIfNecessary)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){"api.post.create_post.root_id.app_error"===e.createPostErrorId&&e.createPostErrorId!==this.props.createPostErrorId&&this.showPostDeletedModal(),e.rootId!==this.props.rootId&&this.setState({draft:tp({},e.draft,{uploadsInProgress:[]})}),this.props.messageInHistory!==e.messageInHistory&&this.setState({draft:e.draft})}},{key:"componentDidUpdate",value:function(e,t){t.draft.uploadsInProgress.length<this.state.draft.uploadsInProgress.length&&this.scrollToBottom(),t.showEmojiPicker&&!this.state.showEmojiPicker&&this.focusTextbox(),e.rootId===this.props.rootId&&e.selectedPostFocussedAt===this.props.selectedPostFocussedAt||this.focusTextbox(),this.doInitialScrollToBottom&&(this.scrollToBottom(),this.doInitialScrollToBottom=!1)}},{key:"render",value:function(){var e=this.state.draft,t=this.props.readOnlyChannel,n=this.context.intl.formatMessage,r=this.shouldEnableAddButton(),a=this.state.renderScrollbar,o=j.ab("accessibility.sections.rhsFooter","reply input region"),i=E.a.createElement(Y.c,{id:"notify_all.title.confirm",defaultMessage:"Confirm sending notifications to entire channel"}),s=E.a.createElement(Y.c,{id:"notify_all.confirm",defaultMessage:"Confirm"}),l="";l=this.state.channelTimezoneCount&&this.props.isTimezoneEnabled?E.a.createElement(Bu.b,{id:"notify_all.question_timezone",defaultMessage:"By using @all or @channel you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{totalMembers:this.props.channelMembersCount-1,timezones:this.state.channelTimezoneCount}}):E.a.createElement(Y.c,{id:"notify_all.question",defaultMessage:"By using @all or @channel you are about to send notifications to {totalMembers} people. Are you sure you want to do this?",values:{totalMembers:this.props.channelMembersCount-1}});var c=null;this.state.serverError&&(c=E.a.createElement(Ju,{id:"postServerError",error:this.state.serverError,submittedMessage:this.state.serverError.submittedMessage,handleSubmit:this.handleSubmit}));var u=null;if(this.state.postError){var p="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");u=E.a.createElement("label",{className:p},this.state.postError)}var d=null;!t&&(e.fileInfos.length>0||e.uploadsInProgress.length>0)&&(d=E.a.createElement(nu,{fileInfos:e.fileInfos,onRemove:this.removePreview,uploadsInProgress:e.uploadsInProgress,uploadsProgressPercent:this.state.uploadsProgressPercent,ref:"preview"}));var m=null;e.uploadsInProgress.length>0&&(m=E.a.createElement("span",{className:"pull-right post-right-comments-upload-in-progress"},1===e.uploadsInProgress.length?E.a.createElement(Y.c,{id:"create_comment.file",defaultMessage:"File uploading"}):E.a.createElement(Y.c,{id:"create_comment.files",defaultMessage:"Files uploading"})));var f,h="btn btn-primary comment-btn pull-right";r||(h+=" disabled"),t||this.state.showPreview||(f=E.a.createElement(Cu,{ref:"fileUpload",fileCount:this.getFileCount(),getTarget:this.getFileUploadTarget,onFileUploadChange:this.handleFileUploadChange,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onUploadProgress:this.handleUploadProgress,rootId:this.props.rootId,postType:"comment"}));var b,y=null,g=n({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();!this.props.enableEmojiPicker||t||this.state.showPreview||(y=E.a.createElement("div",null,E.a.createElement(va,{show:this.state.showEmojiPicker,target:this.getCreateCommentControls,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:this.props.enableGifPicker,topOffset:55}),E.a.createElement("button",{"aria-label":g,type:"button",onClick:this.toggleEmojiPicker,className:"style--none emoji-picker__container post-action"},E.a.createElement(Vn,{className:"icon icon--emoji emoji-rhs "+(this.state.showEmojiPicker?"active":"")})))),b=t?j.ab("create_post.read_only","This channel is read-only. Only members with permission can post here."):j.ab("create_comment.addComment","Add a comment...");var v="";return a&&(v=" scroll"),E.a.createElement("form",{onSubmit:this.handleSubmit},E.a.createElement("div",{role:"application",id:"rhsFooter","aria-label":o,tabIndex:"-1",className:"post-create a11y__region".concat(v),"data-a11y-sort-order":"4"},E.a.createElement("div",{id:this.props.rootId,className:"post-create-body comment-create-body"},E.a.createElement("div",{className:"post-body__cell"},E.a.createElement(Hi,{onChange:this.handleChange,onKeyPress:this.commentMsgKeyPress,onKeyDown:this.handleKeyDown,onComposition:this.emitTypingEvent,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:t?"":e.message,onBlur:this.handleBlur,createMessage:b,emojiEnabled:this.props.enableEmojiPicker,initialText:"",channelId:this.props.channelId,isRHS:!0,popoverMentionKeyClick:!0,id:"reply_textbox",ref:"textbox",disabled:t,characterLimit:this.props.maxPostSize,preview:this.state.showPreview,badConnection:this.props.badConnection,listenForMentionKeyClick:!0}),E.a.createElement("span",{ref:"createCommentControls",className:"post-body__actions"},f,y))),E.a.createElement("div",{className:"post-create-footer"},E.a.createElement("div",{className:"d-flex justify-content-between"},E.a.createElement(xu,{channelId:this.props.channelId,postId:this.props.rootId}),E.a.createElement(Qi,{characterLimit:this.props.maxPostSize,showPreview:this.state.showPreview,updatePreview:this.updatePreview,message:t?"":this.state.message})),E.a.createElement("div",null,E.a.createElement("input",{type:"button",disabled:!r,className:h,value:n({id:"create_comment.comment",defaultMessage:"Add Comment"}),onClick:this.handleSubmit}),m,u,d,c))),E.a.createElement(Fu,{show:this.state.showPostDeletedModal,onHide:this.hidePostDeletedModal}),E.a.createElement(Xs.a,{title:i,message:l,confirmButtonText:s,show:this.state.showConfirmModal,onConfirm:this.handleNotifyAllConfirmation,onCancel:this.hideNotifyAllModal}))}}])&&np(n.prototype,r),a&&np(n,a),t}();ip(sp,"propTypes",{channelId:v.a.string.isRequired,channelMembersCount:v.a.number.isRequired,rootId:v.a.string.isRequired,rootDeleted:v.a.bool.isRequired,messageInHistory:v.a.string,draft:v.a.shape({message:v.a.string.isRequired,uploadsInProgress:v.a.array.isRequired,fileInfos:v.a.array.isRequired}).isRequired,enableAddButton:v.a.bool.isRequired,codeBlockOnCtrlEnter:v.a.bool,ctrlSend:v.a.bool,latestPostId:v.a.string,locale:v.a.string.isRequired,getSidebarBody:v.a.func,createPostErrorId:v.a.string,clearCommentDraftUploads:v.a.func.isRequired,onUpdateCommentDraft:v.a.func.isRequired,updateCommentDraftWithRootId:v.a.func.isRequired,onSubmit:v.a.func.isRequired,onResetHistoryIndex:v.a.func.isRequired,onMoveHistoryIndexBack:v.a.func.isRequired,onMoveHistoryIndexForward:v.a.func.isRequired,onEditLatestPost:v.a.func.isRequired,getChannelTimezones:v.a.func.isRequired,resetCreatePostRequest:v.a.func.isRequired,readOnlyChannel:v.a.bool,enableConfirmNotificationsToChannel:v.a.bool.isRequired,enableEmojiPicker:v.a.bool.isRequired,enableGifPicker:v.a.bool.isRequired,badConnection:v.a.bool.isRequired,maxPostSize:v.a.number.isRequired,rhsExpanded:v.a.bool.isRequired,isTimezoneEnabled:v.a.bool.isRequired,selectedPostFocussedAt:v.a.number.isRequired}),ip(sp,"contextTypes",{intl:Y.i.isRequired});var lp=Object(r.connect)(function(){var e=Object($a.makeGetMessageInHistoryItem)(L.Posts.MESSAGE_TYPES.COMMENT);return function(t,n){var r=t.requests.posts.createPost.error||{},a=Object(Ml.i)(t,P.G.COMMENT_DRAFT,n.rootId),o=0!==a.message.trim().length||0!==a.fileInfos.length,i=Object(m.getAllChannelStats)(t)[n.channelId]?Object(m.getAllChannelStats)(t)[n.channelId].member_count:1,s=e(t),l=t.entities.channels.channels[n.channelId]||{},d=Object(u.getConfig)(t),f="true"===d.EnableConfirmNotificationsToChannel,h="true"===d.EnableEmojiPicker,b="true"===d.EnableGifPicker,y=Wl(t)>1,g="true"===d.ExperimentalTimezone;return{draft:a,messageInHistory:s,enableAddButton:o,channelMembersCount:i,codeBlockOnCtrlEnter:Object(c.getBool)(t,L.Preferences.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:Object(c.getBool)(t,L.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),createPostErrorId:r.server_error_id,readOnlyChannel:!Object(p.isCurrentUserSystemAdmin)(t)&&"true"===d.ExperimentalTownSquareIsReadOnly&&l.name===P.i.DEFAULT_CHANNEL,enableConfirmNotificationsToChannel:f,enableEmojiPicker:h,enableGifPicker:b,locale:Object(zl.a)(t),maxPostSize:parseInt(d.MaxPostSize,10)||P.i.DEFAULT_CHARACTER_LIMIT,rhsExpanded:Object(Ml.a)(t),badConnection:y,isTimezoneEnabled:g,selectedPostFocussedAt:Object(Ml.r)(t)}}},function(){var e,t,n,r,o,i,l,c;function u(){return Object(x.resetHistoryIndex)(L.Posts.MESSAGE_TYPES.COMMENT)}return function(p,d){return i!==d.rootId&&(e=function(e){return function(t){return uc(e,t)}}(d.rootId),n=pc(d.rootId,-1),r=pc(d.rootId,1)),i===d.rootId&&l===d.channelId||(o=hc(d.channelId,d.rootId)),i===d.rootId&&l===d.channelId&&c===d.latestPostId||(t=function(e,t,n){return function(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r=ic(regeneratorRuntime.mark(function r(o,i){var s,l,c,u,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=Object(Ml.i)(i(),P.G.COMMENT_DRAFT,t),l=s.message,o(Object(x.addMessageIntoHistory)(l)),o(uc(t,null)),c=j.a.exec(l),u=Object(Yl.getCustomEmojisByName)(i()),p=new ac.a(u),!c||!p.has(c[2])){r.next=11;break}o(mc(n,c[1],c[2])),r.next=17;break;case 11:if(0!==l.indexOf("/")||a.ignoreSlash){r.next=16;break}return r.next=14,o(fc(e,t,s));case 14:r.next=17;break;case 16:o(dc(e,t,s));case 17:case"end":return r.stop()}},r)})),function(e,t){return r.apply(this,arguments)}}}(d.channelId,d.rootId,d.latestPostId)),i=d.rootId,l=d.channelId,c=d.latestPostId,Object(a.bindActionCreators)({clearCommentDraftUploads:cc,onUpdateCommentDraft:e,updateCommentDraftWithRootId:uc,onSubmit:t,onResetHistoryIndex:u,onMoveHistoryIndexBack:n,onMoveHistoryIndexForward:r,onEditLatestPost:o,resetCreatePostRequest:x.resetCreatePostRequest,getChannelTimezones:s.getChannelTimezones},p)}})(sp),cp=n(316),up=n(314),pp=n(243);function dp(e){return(dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fp(e,t){return!t||"object"!==dp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hp(e){return(hp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bp(e,t){return(bp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fp(this,hp(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bp(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.date,n=e.enableTimezone,r=e.timeZone,a=n&&r?{timeZone:r}:{};return E.a.createElement("div",{className:"date-separator"},E.a.createElement("hr",{className:"separator__hr"}),E.a.createElement("div",{className:"separator__text"},E.a.createElement(Y.a,Object.assign({},a,{value:t,weekday:"short",month:"short",day:"2-digit",year:"numeric"}))))}}])&&mp(n.prototype,r),a&&mp(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yp,"propTypes",{date:v.a.oneOfType([v.a.number,v.a.instanceOf(Date)]).isRequired,timeZone:v.a.string,enableTimezone:v.a.bool});var gp=Object(r.connect)(function(e,t){var n,r=Object(p.getCurrentUserId)(e);return n=t.userTimezone?t.userTimezone:Object(cp.getUserTimezone)(e,r),{enableTimezone:Object(pp.a)(e),timeZone:Object(up.getUserCurrentTimezone)(n)}})(yp),vp=n(69);function _p(e){return(_p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ep(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wp(e,t){return!t||"object"!==_p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Op(e){return(Op=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sp(e,t){return(Sp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wp(this,Op(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sp(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){if(!this.props.isMobile)return E.a.createElement("noscript",null);if(0===this.props.createAt)return E.a.createElement("noscript",null);var e=E.a.createElement(Y.a,{value:this.props.createAt,weekday:"short",day:"2-digit",month:"short",year:"numeric"}),t="post-list__timestamp";return this.props.isScrolling&&(t+=" scrolling"),this.props.isRhsPost&&(t+=" rhs"),E.a.createElement("div",{className:t},E.a.createElement("div",null,E.a.createElement("span",null,e)))}}])&&Ep(n.prototype,r),a&&Ep(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Cp,"propTypes",{isScrolling:v.a.bool.isRequired,isMobile:v.a.bool,createAt:v.a.oneOfType([v.a.instanceOf(Date),v.a.number]).isRequired,isRhsPost:v.a.bool});var Pp=Object(r.connect)(function(e,t){var n=t.postId;if(vp.isCombinedUserActivityPost(n)){var r=vp.getPostIdsForCombinedUserActivityPost(n);n=r[r.length-1]}var a=Object($a.getPost)(e,n);return{createAt:a?a.create_at:0}})(Cp),Tp=n(4),jp=n.n(Tp);function kp(e){return(kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Np(e,t){return!t||"object"!==kp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rp(e){return(Rp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ip(e,t){return(Ip=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ap(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Np(this,Rp(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ip(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){return this.props.hasPermission&&!this.props.invert?this.props.children:!this.props.hasPermission&&this.props.invert?this.props.children:null}}])&&Mp(n.prototype,r),a&&Mp(n,a),t}();Ap(xp,"defaultProps",{invert:!1}),Ap(xp,"propTypes",{channelId:v.a.string,teamId:v.a.string,permissions:v.a.arrayOf(v.a.string).isRequired,hasPermission:v.a.bool.isRequired,invert:v.a.bool.isRequired,children:v.a.node.isRequired});var Lp=Object(r.connect)(function(e,t){if(!t.channelId||null===t.teamId||void 0===t.teamId)return{hasPermission:!1};var n=!0,r=!1,a=void 0;try{for(var o,i=t.permissions[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if(Object(D.haveIChannelPermission)(e,{channel:t.channelId,team:t.teamId,permission:s}))return{hasPermission:!0}}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return{hasPermission:!1}})(xp),Dp=n(1517);function Up(e){return(Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hp(e){return(Hp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bp(e,t){return(Bp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vp=80,Wp=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Hp(t).call(this,e),n=!a||"object"!==Up(a)&&"function"!=typeof a?Fp(r):a,Gp(Fp(n),"handleEditDisable",function(){n.setState({canEdit:!1})}),Gp(Fp(n),"handleFlagMenuItemActivated",function(){n.props.isFlagged?n.props.actions.unflagPost(n.props.post.id):n.props.actions.flagPost(n.props.post.id)}),Gp(Fp(n),"handleAddReactionMenuItemActivated",function(e){e.preventDefault(),n.props.handleAddReactionClick&&n.props.handleAddReactionClick()}),Gp(Fp(n),"handlePermalinkMenuItemActivated",function(e){e.preventDefault(),Object(C.j)(n.props.post)}),Gp(Fp(n),"handlePinMenuItemActivated",function(){n.props.post.is_pinned?n.props.actions.unpinPost(n.props.post.id):n.props.actions.pinPost(n.props.post.id)}),Gp(Fp(n),"handleDeleteMenuItemActivated",function(e){e.preventDefault();var t={ModalId:P.r.DELETE_POST,dialogType:oe,dialogProps:{post:n.props.post,commentCount:n.props.commentCount,isRHS:n.props.location===P.q.RHS_ROOT||n.props.location===P.q.RHS_COMMENT}};n.props.actions.openModal(t)}),Gp(Fp(n),"handleEditMenuItemActivated",function(){n.props.actions.setEditingPost(n.props.post.id,n.props.commentCount,n.props.location===P.q.CENTER?"post_textbox":"reply_textbox",n.props.post.root_id?j.ab("rhs_comment.comment","Comment"):j.ab("create_post.post","Post"),n.props.location===P.q.RHS_ROOT||n.props.location===P.q.RHS_COMMENT)}),Gp(Fp(n),"tooltip",E.a.createElement(Ec.a,{id:"dotmenu-icon-tooltip",className:"hidden-xs"},E.a.createElement(Y.c,{id:"post_info.dot_menu.tooltip.more_actions",defaultMessage:"More Actions"}))),Gp(Fp(n),"refCallback",function(e){if(e){var t=e.rect();(t.y||t.top)+t.height>window.innerHeight-Vp&&n.setState({openUp:!0})}}),n.editDisableAction=new Vl(n.handleEditDisable),n.state={openUp:!1},n.buttonRef=E.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bp(e,t)}(t,_["Component"]),n=t,a=[{key:"getDerivedStateFromProps",value:function(e){return{canDelete:_t.a(e.post)&&!e.isReadOnly,canEdit:_t.b(e.post)&&!e.isReadOnly}}}],(r=[{key:"disableCanEditPostByTime",value:function(){var e=this.props,t=e.post,n=e.isLicensed,r=e.postEditTimeLimit;if(_t.b(t)&&n&&String(r)!==String(P.UNSET_POST_EDIT_TIME_LIMIT)){var a=t.create_at+1e3*r-j.D();a>0&&this.editDisableAction.fireAfter(a+1e3)}}},{key:"componentDidMount",value:function(){this.disableCanEditPostByTime()}},{key:"componentWillUnmount",value:function(){this.editDisableAction.cancel()}},{key:"render",value:function(){var e=this,t=_t.m(this.props.post),n=j.U(),r=this.props.pluginMenuItems.filter(function(t){return t.filter?t.filter(e.props.post.id):t}).map(function(t){return E.a.createElement(Dp.a,{key:t.id+"_pluginmenuitem",text:t.text,onClick:function(){t.action&&t.action(e.props.post.id)}})});return this.state.canDelete||this.state.canEdit||0!==r.length||!t?E.a.createElement(du.a,{onToggle:this.props.handleDropdownOpened},E.a.createElement(_c.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:this.tooltip,rootClose:!0},E.a.createElement("button",{id:"".concat(this.props.location,"_button_").concat(this.props.post.id),"aria-label":j.ab("post_info.dot_menu.tooltip.more_actions","More Actions").toLowerCase(),className:"post__dropdown color--link style--none",type:"button","aria-expanded":"false"})),E.a.createElement(mu.a,{id:"".concat(this.props.location,"_dropdown_").concat(this.props.post.id),openLeft:!0,openUp:this.state.openUp,ref:this.refCallback,ariaLabel:j.ab("post_info.menuAriaLabel","Post extra options")},E.a.createElement(Lp,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[jp.a.ADD_REACTION]},E.a.createElement(Dp.a,{show:n&&!t&&!this.props.isReadOnly&&this.props.enableEmojiPicker,text:j.ab("rhs_root.mobile.add_reaction","Add Reaction"),onClick:this.handleAddReactionMenuItemActivated})),E.a.createElement(Dp.a,{show:n&&!t&&this.props.isFlagged,text:j.ab("rhs_root.mobile.unflag","Unflag"),onClick:this.handleFlagMenuItemActivated}),E.a.createElement(Dp.a,{show:n&&!t&&!this.props.isFlagged,text:j.ab("rhs_root.mobile.flag","Flag"),onClick:this.handleFlagMenuItemActivated}),E.a.createElement(Dp.a,{show:!t&&this.props.location===P.q.CENTER,text:j.ab("post_info.reply","Reply"),onClick:this.props.handleCommentClick}),E.a.createElement(Dp.a,{show:!t,text:j.ab("post_info.permalink","Permalink"),onClick:this.handlePermalinkMenuItemActivated}),E.a.createElement(Dp.a,{id:"unpin_post_".concat(this.props.post.id),show:!t&&!this.props.isReadOnly&&this.props.post.is_pinned,text:j.ab("post_info.unpin","Unpin"),onClick:this.handlePinMenuItemActivated}),E.a.createElement(Dp.a,{id:"pin_post_".concat(this.props.post.id),show:!t&&!this.props.isReadOnly&&!this.props.post.is_pinned,text:j.ab("post_info.pin","Pin"),onClick:this.handlePinMenuItemActivated}),E.a.createElement(Dp.a,{id:"delete_post_".concat(this.props.post.id),show:this.state.canDelete,text:j.ab("post_info.del","Delete"),onClick:this.handleDeleteMenuItemActivated}),E.a.createElement(Dp.a,{id:"edit_post_".concat(this.props.post.id),show:this.state.canEdit,text:j.ab("post_info.edit","Edit"),onClick:this.handleEditMenuItemActivated}),r,E.a.createElement(I.a,{postId:this.props.post.id,pluggableName:"PostDropdownMenuItem"}))):null}}])&&qp(n.prototype,r),a&&qp(n,a),t}();Gp(Wp,"propTypes",{post:v.a.object.isRequired,teamId:v.a.string,location:v.a.oneOf([P.q.CENTER,P.q.RHS_ROOT,P.q.RHS_COMMENT,P.q.SEARCH]).isRequired,commentCount:v.a.number,isFlagged:v.a.bool,handleCommentClick:v.a.func,handleDropdownOpened:v.a.func,handleAddReactionClick:v.a.func,isReadOnly:v.a.bool,pluginMenuItems:v.a.arrayOf(v.a.object),isLicensed:v.a.bool.isRequired,postEditTimeLimit:v.a.string.isRequired,enableEmojiPicker:v.a.bool.isRequired,actions:v.a.shape({flagPost:v.a.func.isRequired,unflagPost:v.a.func.isRequired,setEditingPost:v.a.func.isRequired,pinPost:v.a.func.isRequired,unpinPost:v.a.func.isRequired,openModal:v.a.func.isRequired}).isRequired}),Gp(Wp,"defaultProps",{post:{},commentCount:0,isFlagged:!1,isReadOnly:!1,pluginMenuItems:[],location:P.q.CENTER,enableEmojiPicker:!1});var zp=Object(r.connect)(function(e){return{postEditTimeLimit:Object(u.getConfig)(e).PostEditTimeLimit,isLicensed:"true"===Object(u.getLicense)(e).IsLicensed,teamId:Object(d.getCurrentTeamId)(e),pluginMenuItems:e.plugins.components.PostDropdownMenu}},function(e){return{actions:Object(a.bindActionCreators)({flagPost:q.d,unflagPost:q.l,setEditingPost:q.j,pinPost:q.g,unpinPost:q.m,openModal:U.b},e)}})(Wp);function Kp(e){return(Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qp(e,t){return!t||"object"!==Kp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jp(e){return(Jp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zp(e,t){return(Zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qp(this,Jp(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zp(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.download",defaultMessage:"Download Icon"},function(e){return E.a.createElement("svg",{width:"40px",height:"40px",viewBox:"0 0 42 42",role:"icon","aria-label":e},E.a.createElement("g",{stroke:"inherit",strokeWidth:"1",fill:"none",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-986.000000, -1142.000000)"},E.a.createElement("g",{transform:"translate(50.000000, 1034.000000)"},E.a.createElement("g",{transform:"translate(539.000000, 54.000000)"},E.a.createElement("g",{transform:"translate(398.000000, 55.000000)"},E.a.createElement("g",{transform:"translate(11.000000, 11.000000)",fillRule:"nonzero",fill:"inherit"},E.a.createElement("path",{d:"M8.7345,14.1405 C8.74725,14.1525 8.763,14.15775 8.7765,14.16825 C8.802,14.18775 8.82675,14.20875 8.85675,14.22075 C8.9025,14.24025 8.95125,14.25 9,14.25 C9.04875,14.25 9.0975,14.24025 9.14325,14.22075 C9.18975,14.20125 9.23175,14.17275 9.267,14.1375 L13.764,9.6405 C13.91025,9.49425 13.91025,9.2565 13.764,9.11025 C13.61775,8.964 13.38,8.964 13.23375,9.11025 L9.375,12.969 L9.375,0.375 C9.375,0.168 9.207,0 9,0 C8.793,0 8.625,0.168 8.625,0.375 L8.625,12.9705 L4.76475,9.11025 C4.6185,8.964 4.38075,8.964 4.2345,9.11025 C4.08825,9.2565 4.08825,9.49425 4.2345,9.6405 L8.7345,14.1405 Z M17.25,13.5 C17.043,13.5 16.875,13.668 16.875,13.875 L16.875,17.25 L1.125,17.25 L1.125,13.875 C1.125,13.668 0.957,13.5 0.75,13.5 C0.543,13.5 0.375,13.668 0.375,13.875 L0.375,17.625 C0.375,17.832 0.543,18 0.75,18 L17.25,18 C17.457,18 17.625,17.832 17.625,17.625 L17.625,13.875 C17.625,13.668 17.457,13.5 17.25,13.5 Z"}))))))))}))}}])&&Yp(n.prototype,r),a&&Yp(n,a),t}();function $p(e){return($p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ed(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function td(e,t){return!t||"object"!==$p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nd(e){return(nd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rd(e,t){return(rd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ad=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),td(this,nd(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rd(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props.fileInfo,t=Object(j.y)(e.extension);if(t===P.m.IMAGE){var n="post-image";e.width<P.Q.THUMBNAIL_WIDTH&&e.height<P.Q.THUMBNAIL_HEIGHT?n+=" small":n+=" normal";var r=Object(bc.getFileThumbnailUrl)(e.id);return Object(j.R)(e.extension)&&!e.has_preview_image&&(r=Object(bc.getFileUrl)(e.id)),E.a.createElement("div",{className:n,style:{backgroundImage:"url(".concat(r,")"),backgroundSize:"cover"}})}return e.extension===P.m.SVG&&this.props.enableSVGs?E.a.createElement("img",{alt:"file thumbnail image",className:"post-image normal",src:Object(bc.getFileUrl)(e.id)}):E.a.createElement("div",{className:"file-icon "+Object(j.A)(t)})}}])&&ed(n.prototype,r),a&&ed(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ad,"propTypes",{enableSVGs:v.a.bool.isRequired,fileInfo:v.a.object.isRequired});var od=Object(r.connect)(function(e){return{enableSVGs:"true"===Object(u.getConfig)(e).EnableSVGs}})(ad);function id(e){return(id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ld(e){return(ld=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ud(e,t){return(ud=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dd=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ld(t).call(this,e),n=!a||"object"!==id(a)&&"function"!=typeof a?cd(r):a,pd(cd(n),"loadFiles",function(){var e=n.props.fileInfo;if(Object(j.y)(e.extension)===P.m.IMAGE){var t=Object(bc.getFileThumbnailUrl)(e.id);Object(j.Z)(t,n.handleImageLoaded)}else e.extension===P.m.SVG&&n.props.enableSVGs&&Object(j.Z)(Object(bc.getFileUrl)(e.id),n.handleImageLoaded)}),pd(cd(n),"handleImageLoaded",function(){n.mounted&&n.setState({loaded:!0})}),pd(cd(n),"onAttachmentClick",function(e){e.preventDefault(),n.props.handleImageClick&&n.props.handleImageClick(n.props.index)}),n.state={loaded:Object(j.y)(e.fileInfo.extension)!==P.m.IMAGE},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ud(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.mounted=!0,this.loadFiles()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.fileInfo.id!==this.props.fileInfo.id){var t=e.fileInfo.extension;this.setState({loaded:Object(j.y)(t)!==P.m.IMAGE&&!(e.enableSVGs&&t===P.m.SVG)})}}},{key:"componentDidUpdate",value:function(e){this.state.loaded||this.props.fileInfo.id===e.fileInfo.id||this.loadFiles()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t,n,r=this.props,a=r.compactDisplay,o=r.fileInfo,i=Object(jc.f)(o.name),s="".concat(Object(j.ab)("file_attachment.thumbnail","file thumbnail")," ").concat(o.name).toLowerCase();return a||(e=E.a.createElement("a",{"aria-label":s,className:"post-image__thumbnail",href:"#",onClick:this.onAttachmentClick},this.state.loaded?E.a.createElement(od,{fileInfo:o}):E.a.createElement("div",{className:"post-image__load"})),t=E.a.createElement("div",{className:"post-image__detail_wrapper",onClick:this.onAttachmentClick},E.a.createElement("div",{className:"post-image__detail"},E.a.createElement("span",{className:"post-image__name"},i),E.a.createElement("span",{className:"post-image__type"},o.extension.toUpperCase()),E.a.createElement("span",{className:"post-image__size"},Object(j.p)(o.size))))),this.props.canDownloadFiles&&(n=E.a.createElement(Ac,{fileInfo:o,compactDisplay:a,canDownload:this.props.canDownloadFiles,handleImageClick:this.onAttachmentClick,iconClass:"post-image__download"},E.a.createElement(Xp,null))),E.a.createElement("div",{className:"post-image__column"},e,E.a.createElement("div",{className:"post-image__details"},t,n))}}])&&sd(n.prototype,r),a&&sd(n,a),t}();pd(dd,"propTypes",{fileInfo:v.a.object.isRequired,index:v.a.number.isRequired,handleImageClick:v.a.func,compactDisplay:v.a.bool,canDownloadFiles:v.a.bool,enableSVGs:v.a.bool.isRequired});var md=Object(r.connect)(function(e){var t=Object(u.getConfig)(e);return{canDownloadFiles:Object(jc.a)(t),enableSVGs:"true"===t.EnableSVGs}})(dd),fd=n(1595),hd=n(1660);function bd(e){return(bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gd(e){return(gd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _d(e,t){return(_d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ed=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=gd(t).call(this,e))||"object"!==bd(a)&&"function"!=typeof a?vd(r):a).handleFileInfoChanged=n.handleFileInfoChanged.bind(vd(n)),n.handleLoadError=n.handleLoadError.bind(vd(n)),n.stop=n.stop.bind(vd(n)),n.state={canPlay:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_d(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.handleFileInfoChanged(this.props.fileInfo)}},{key:"componentDidMount",value:function(){this.refs.source&&Hl()(pu.a.findDOMNode(this.refs.source)).one("error",this.handleLoadError)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.fileUrl!==e.fileUrl&&this.handleFileInfoChanged(e.fileInfo)}},{key:"handleFileInfoChanged",value:function(e){var t=pu.a.findDOMNode(this.refs.video);t||(t=document.createElement("video"));var n=t.canPlayType(e.mime_type);this.setState({canPlay:"probably"===n||"maybe"===n})}},{key:"componentDidUpdate",value:function(){this.refs.source&&Hl()(pu.a.findDOMNode(this.refs.source)).one("error",this.handleLoadError)}},{key:"handleLoadError",value:function(){this.setState({canPlay:!1})}},{key:"stop",value:function(){if(this.refs.video){var e=pu.a.findDOMNode(this.refs.video);e.pause(),e.currentTime=0}}},{key:"render",value:function(){if(!this.state.canPlay)return E.a.createElement(hd.a,{fileInfo:this.props.fileInfo,fileUrl:this.props.fileUrl});var e=P.Q.WEB_VIDEO_WIDTH,t=P.Q.WEB_VIDEO_HEIGHT;return j.U()&&(e=P.Q.MOBILE_VIDEO_WIDTH,t=P.Q.MOBILE_VIDEO_HEIGHT),E.a.createElement("video",{key:this.props.fileInfo.id,ref:"video","data-setup":"{}",controls:"controls",width:e,height:t},E.a.createElement("source",{ref:"source",src:this.props.fileUrl}))}}])&&yd(n.prototype,r),a&&yd(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ed,"propTypes",{fileInfo:v.a.object.isRequired,fileUrl:v.a.string.isRequired});var wd=n(303),Od=n(1538);function Sd(e){return(Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pd(e){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Td(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jd(e,t){return(jd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kd=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=Pd(t).call(this,e))||"object"!==Sd(a)&&"function"!=typeof a?Td(r):a).updateStateFromProps=n.updateStateFromProps.bind(Td(n)),n.handleReceivedError=n.handleReceivedError.bind(Td(n)),n.handleReceivedCode=n.handleReceivedCode.bind(Td(n)),n.state={code:"",lang:"",loading:!0,success:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jd(e,t)}(t,E.a.Component),n=t,a=[{key:"supports",value:function(e){return Boolean(wd.b(e.extension))}}],(r=[{key:"componentDidMount",value:function(){this.updateStateFromProps(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.fileUrl!==e.fileUrl&&this.updateStateFromProps(e)}},{key:"updateStateFromProps",value:function(e){var t=wd.b(e.fileInfo.extension);!t||e.fileInfo.size>P.Q.CODE_PREVIEW_MAX_FILE_SIZE?this.setState({code:"",lang:"",loading:!1,success:!1}):(this.setState({code:"",lang:t,loading:!0}),Hl.a.ajax({async:!0,url:e.fileUrl,type:"GET",dataType:"text",error:this.handleReceivedError,success:this.handleReceivedCode}))}},{key:"handleReceivedCode",value:function(e){var t=e;"#document"===e.nodeName&&(t=(new XMLSerializer).serializeToString(e)),this.setState({code:t,loading:!1,success:!0})}},{key:"handleReceivedError",value:function(){this.setState({loading:!1,success:!1})}},{key:"render",value:function(){if(this.state.loading)return E.a.createElement("div",{className:"view-image__loading"},E.a.createElement(Od.a,null));if(!this.state.success)return E.a.createElement(hd.a,{fileInfo:this.props.fileInfo,fileUrl:this.props.fileUrl});for(var e=this.state.code.match(/\r\n|\r|\n|$/g).length,t="",n=1;n<=e;n++)t+=t?"\n"+n:n;var r=wd.c(this.state.lang),a=wd.d(this.state.lang,this.state.code);return E.a.createElement("div",{className:"post-code"},E.a.createElement("span",{className:"post-code__language"},"".concat(this.props.fileInfo.name," - ").concat(r)),E.a.createElement("div",{className:"post-code__container"},E.a.createElement("code",{className:"hljs"},E.a.createElement("table",null,E.a.createElement("tbody",null,E.a.createElement("tr",null,E.a.createElement("td",{className:"post-code__lineno"},t),E.a.createElement("td",{dangerouslySetInnerHTML:{__html:a}})))))))}}])&&Cd(n.prototype,r),a&&Cd(n,a),t}();kd.propTypes={fileInfo:v.a.object.isRequired,fileUrl:v.a.string.isRequired};var Md=n(1770),Nd=n(2034),Rd=n.n(Nd);function Id(e){var t=e.fileInfo,n=e.canDownloadFiles,r=t.has_preview_image,a=t.id,o=t.link||Object(bc.getFileDownloadUrl)(a),i=r?Object(bc.getFilePreviewUrl)(a):o;return n?E.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",download:!0},E.a.createElement("img",{alt:"preview url image",src:i})):E.a.createElement("img",{src:i})}function Ad(e){return(Ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ld(e,t){return!t||"object"!==Ad(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dd(e){return(Dd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ud(e,t){return(Ud=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Id.propTypes={fileInfo:v.a.object.isRequired,canDownloadFiles:v.a.bool.isRequired};var Hd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ld(this,Dd(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ud(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e="";this.props.enablePublicLink&&this.props.showPublicLink&&(e=E.a.createElement("div",null,E.a.createElement("a",{href:"#",className:"public-link text","data-title":"Public Image",onClick:this.props.onGetPublicLink},E.a.createElement(Y.c,{id:"view_image_popover.publicLink",defaultMessage:"Get Public Link"})),E.a.createElement("span",{className:"text"}," | ")));var t="modal-button-bar";this.props.show&&(t+=" footer--show");var n=null;if(this.props.canDownloadFiles){var r,a={};this.props.isExternalFile&&!this.props.isDesktopApp?r=E.a.createElement(Y.c,{id:"view_image_popover.open",defaultMessage:"Open"}):(r=E.a.createElement(Y.c,{id:"view_image_popover.download",defaultMessage:"Download"}),a.download=this.props.filename),n=E.a.createElement("div",{className:"image-links"},e,E.a.createElement("a",Object.assign({href:this.props.fileURL,className:"text",target:"_blank",rel:"noopener noreferrer"},a),r))}return E.a.createElement("div",{ref:"imageFooter",className:t},E.a.createElement("span",{className:"pull-left text"},E.a.createElement(Y.c,{id:"view_image_popover.file",defaultMessage:"File {count, number} of {total, number}",values:{count:this.props.fileIndex+1,total:this.props.totalFiles}})),n)}}])&&xd(n.prototype,r),a&&xd(n,a),t}();qd(Hd,"propTypes",{show:v.a.bool.isRequired,fileIndex:v.a.number.isRequired,totalFiles:v.a.number.isRequired,filename:v.a.string.isRequired,fileURL:v.a.string.isRequired,showPublicLink:v.a.bool,enablePublicLink:v.a.bool.isRequired,canDownloadFiles:v.a.bool.isRequired,isExternalFile:v.a.bool.isRequired,onGetPublicLink:v.a.func,isDesktopApp:v.a.bool.isRequired}),qd(Hd,"defaultProps",{show:!1,fileIndex:0,totalFiles:0,filename:"",fileURL:"",showPublicLink:!0});var Fd=Object(r.connect)(function(){return{isDesktopApp:Object(T.c)()}})(Hd);function Bd(e){return(Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Yd(e,t,n[t])})}return e}function Vd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wd(e){return(Wd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kd(e,t){return(Kd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qd=P.Q.KeyCodes,Jd=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Wd(t).call(this,e),n=!a||"object"!==Bd(a)&&"function"!=typeof a?zd(r):a,Yd(zd(n),"handleNext",function(e){e&&e.stopPropagation();var t=n.state.imageIndex+1;t>n.props.fileInfos.length-1&&(t=0),n.showImage(t)}),Yd(zd(n),"handlePrev",function(e){e&&e.stopPropagation();var t=n.state.imageIndex-1;t<0&&(t=n.props.fileInfos.length-1),n.showImage(t)}),Yd(zd(n),"handleKeyPress",function(e){j.S(e,Qd.RIGHT)?n.handleNext():j.S(e,Qd.LEFT)&&n.handlePrev()}),Yd(zd(n),"onModalShown",function(e){document.addEventListener("keyup",n.handleKeyPress),n.showImage(e.startIndex)}),Yd(zd(n),"onModalHidden",function(){document.addEventListener("keyup",n.handleKeyPress),n.refs.video&&n.refs.video.stop()}),Yd(zd(n),"showImage",function(e){n.setState({imageIndex:e});var t=window.innerHeight-100;n.setState({imageHeight:t}),n.state.loaded[e]||n.loadImage(e)}),Yd(zd(n),"loadImage",function(e){var t,r=n.props.fileInfos[e];j.y(r.extension)===P.m.IMAGE&&Boolean(r.id)?(t=r.has_image_preview?Object(bc.getFilePreviewUrl)(r.id):Object(bc.getFileUrl)(r.id),j.Z(t,function(){return n.handleImageLoaded(e)},function(t){return n.handleImageProgress(e,t)})):n.handleImageLoaded(e)}),Yd(zd(n),"handleImageLoaded",function(e){n.setState(function(t){return{loaded:Gd({},t.loaded,Yd({},e,!0))}})}),Yd(zd(n),"handleImageProgress",function(e,t){n.setState(function(n){return{progress:Gd({},n.progress,Yd({},e,t))}})}),Yd(zd(n),"handleGetPublicLink",function(){n.props.onModalDismissed(),C.k(n.props.fileInfos[n.state.imageIndex].id)}),Yd(zd(n),"onMouseEnterImage",function(){n.setState({showFooter:!0})}),Yd(zd(n),"onMouseLeaveImage",function(){n.setState({showFooter:!1})}),n.state={imageIndex:n.props.startIndex,imageHeight:"100%",loaded:j.q(!1,n.props.fileInfos.length),progress:j.q(0,n.props.fileInfos.length),showFooter:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kd(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===e.show&&!1===this.props.show?this.onModalShown(e):!1===e.show&&!0===this.props.show&&this.onModalHidden(),this.props.fileInfos.length!==e.fileInfos.length&&this.setState({loaded:j.q(!1,e.fileInfos.length),progress:j.q(0,e.fileInfos.length)})}},{key:"render",value:function(){if(this.props.fileInfos.length<1||this.props.fileInfos.length-1<this.state.imageIndex)return null;var e,t=this.props.fileInfos[this.state.imageIndex],n=!t.link,r=t.link||t.name,a=t.link||Object(bc.getFileUrl)(t.id),o=t.link||Object(bc.getFileDownloadUrl)(t.id),i=!t.id;if(this.state.loaded[this.state.imageIndex]){var s=j.y(t.extension);e=s===P.m.IMAGE||s===P.m.SVG?E.a.createElement(Id,{fileInfo:t,canDownloadFiles:this.props.canDownloadFiles}):s===P.m.VIDEO||s===P.m.AUDIO?E.a.createElement(Ed,{fileInfo:t,fileUrl:a}):t&&t.extension&&t.extension===P.m.PDF?E.a.createElement(k.a,{doLoad:Rd.a,fileInfo:t,fileUrl:a}):kd.supports(t)?E.a.createElement(kd,{fileInfo:t,fileUrl:a}):E.a.createElement(hd.a,{fileInfo:t,fileUrl:a})}else{var l=j.ab("view_image.loading","Loading"),c=Math.floor(this.state.progress[this.state.imageIndex]);e=E.a.createElement(Md.a,{loading:l,progress:c})}var u=!0,p=!1,d=void 0;try{for(var m,f=this.props.pluginFilePreviewComponents[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var h=m.value;if(h.override(t,this.props.post)){e=E.a.createElement(h.component,{fileInfo:t,post:this.props.post});break}}}catch(e){p=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(p)throw d}}var b=null,y=null;this.props.fileInfos.length>1&&(b=E.a.createElement("a",{id:"previewArrowLeft",ref:"previewArrowLeft",className:"modal-prev-bar",href:"#",onClick:this.handlePrev},E.a.createElement("i",{className:"image-control image-prev"})),y=E.a.createElement("a",{id:"previewArrowRight",ref:"previewArrowRight",className:"modal-next-bar",href:"#",onClick:this.handleNext},E.a.createElement("i",{className:"image-control image-next"})));var g="modal-close";return this.state.showFooter&&(g+=" modal-close--show"),E.a.createElement(K.a,{show:this.props.show,onHide:this.props.onModalDismissed,className:"modal-image",dialogClassName:"a11y__modal modal-image",role:"dialog","aria-labelledby":"viewImageModalLabel"},E.a.createElement(K.a.Body,null,E.a.createElement("div",{className:"modal-image__wrapper",onClick:this.props.onModalDismissed},E.a.createElement("div",{onMouseEnter:this.onMouseEnterImage,onMouseLeave:this.onMouseLeaveImage,onClick:function(e){return e.stopPropagation()}},E.a.createElement(K.a.Title,{componentClass:"h1",id:"viewImageModalLabel",className:"hide"},r),E.a.createElement("div",{className:g,onClick:this.props.onModalDismissed}),E.a.createElement("div",{className:"modal-image__content"},e),E.a.createElement(Fd,{show:this.state.showFooter,showPublicLink:n,fileIndex:this.state.imageIndex,totalFiles:this.props.fileInfos.length,filename:r,fileURL:o,enablePublicLink:this.props.enablePublicLink,canDownloadFiles:this.props.canDownloadFiles,isExternalFile:i,onGetPublicLink:this.handleGetPublicLink}))),b,y))}}])&&Vd(n.prototype,r),a&&Vd(n,a),t}();Yd(Jd,"propTypes",{post:v.a.object.isRequired,show:v.a.bool.isRequired,onModalDismissed:v.a.func.isRequired,fileInfos:v.a.arrayOf(v.a.object).isRequired,startIndex:v.a.number.isRequired,canDownloadFiles:v.a.bool.isRequired,enablePublicLink:v.a.bool.isRequired,pluginFilePreviewComponents:v.a.arrayOf(v.a.object)}),Yd(Jd,"defaultProps",{show:!1,fileInfos:[],startIndex:0,pluginFilePreviewComponents:[]});var Zd=Object(r.connect)(function(e,t){var n=Object(u.getConfig)(e);return{canDownloadFiles:Object(jc.a)(n),enablePublicLink:"true"===n.EnablePublicLink,pluginFilePreviewComponents:e.plugins.components.FilePreview,post:t.post||Object($a.getPost)(e,t.postId)}})(Jd);function Xd(e){return(Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function em(e){return(em=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nm(e,t){return(nm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var am=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=em(t).call(this,e),n=!a||"object"!==Xd(a)&&"function"!=typeof a?tm(r):a,rm(tm(n),"imageLoaded",function(){n.mounted&&n.setState({loaded:!0})}),rm(tm(n),"handleImageClick",function(e){e.preventDefault(),n.setState({showPreviewModal:!0})}),rm(tm(n),"showPreviewModal",function(){n.setState({showPreviewModal:!1})}),rm(tm(n),"toggleEmbedVisibility",function(){n.props.actions.toggleEmbedVisibility(n.props.postId)}),n.state={loaded:!1,showPreviewModal:!1,dimensions:{width:e.fileInfo.width,height:e.fileInfo.height}},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nm(e,t)}(t,E.a.PureComponent),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.fileInfo.width!==t.dimensions.width||e.fileInfo.height!==t.dimensions.height?{dimensions:{width:e.fileInfo.width,height:e.fileInfo.height}}:null}}],(r=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props.fileInfo,t=this.state.loaded,n=e.has_preview_image,r=e.id,a=Object(bc.getFileUrl)(r),o=n?Object(bc.getFilePreviewUrl)(r):a,i=e.height,s=e.width,l="";(s<50||i<50)&&(l="min-preview ",i>s&&(l+="min-preview--portrait "));var c,u=E.a.createElement("button",{key:"toggle",className:"style--none post__embed-visibility color--link","data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.toggleEmbedVisibility}),p=E.a.createElement("div",{className:"image-name"},u,E.a.createElement("div",{onClick:this.handleImageClick},e.name)),d="",m={},f={},h="";return Object(j.y)(e.extension)===P.m.SVG&&(h="svg",this.state.dimensions.height?m={width:"100%"}:f={height:350,maxWidth:"100%"}),t&&(c=E.a.createElement(Zd,{show:this.state.showPreviewModal,onModalDismissed:this.showPreviewModal,fileInfos:[e],postId:this.props.postId}),d="image-fade-in"),E.a.createElement("div",{className:"file-view--single"},E.a.createElement("div",{className:"file__image"},p,this.props.isEmbedVisible&&E.a.createElement("div",{className:"image-container",style:f},E.a.createElement("div",{className:"image-loaded ".concat(d," ").concat(h),style:m},E.a.createElement(fd.a,{onClick:this.handleImageClick,className:l,src:o,dimensions:this.state.dimensions,fileInfo:this.props.fileInfo,onImageLoaded:this.imageLoaded,showLoader:this.props.isEmbedVisible}))),c))}}])&&$d(n.prototype,r),a&&$d(n,a),t}();rm(am,"propTypes",{postId:v.a.string.isRequired,fileInfo:v.a.object.isRequired,isRhsOpen:v.a.bool.isRequired,isEmbedVisible:v.a.bool,actions:v.a.shape({toggleEmbedVisibility:v.a.func.isRequired}).isRequired}),rm(am,"defaultProps",{fileInfo:{}});var om=Object(r.connect)(function(e){return{isRhsOpen:Object(Ml.c)(e)}},function(e){return{actions:Object(a.bindActionCreators)({toggleEmbedVisibility:q.k},e)}})(am);function im(e){return(im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lm(e){return(lm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function um(e,t){return(um=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dm=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=lm(t).call(this,e),n=!a||"object"!==im(a)&&"function"!=typeof a?cm(r):a,pm(cm(n),"hidePreviewModal",function(){n.setState({showPreviewModal:!1})}),n.handleImageClick=n.handleImageClick.bind(cm(n)),n.state={showPreviewModal:!1,startImgIndex:0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&um(e,t)}(t,E.a.Component),n=t,(r=[{key:"handleImageClick",value:function(e){this.setState({showPreviewModal:!0,startImgIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.compactDisplay,n=e.enableSVGs,r=e.fileInfos,a=e.fileCount,o=e.locale;if(!1===t)if(r&&1===r.length){var i=Object(j.y)(r[0].extension);if(i===P.m.IMAGE||i===P.m.SVG&&n)return E.a.createElement(om,{fileInfo:r[0],isEmbedVisible:this.props.isEmbedVisible,postId:this.props.post.id})}else if(1===a&&this.props.isEmbedVisible)return E.a.createElement("div",{style:mm.minHeightPlaceholder});var s=Object(bc.sortFileInfos)(r,o),l=[];if(s&&s.length>0)for(var c=0;c<s.length;c++){var u=s[c];l.push(E.a.createElement(md,{key:u.id,fileInfo:s[c],index:c,handleImageClick:this.handleImageClick,compactDisplay:t}))}else if(a>0)for(var p=0;p<a;p++)l.push(E.a.createElement("div",{key:"fileCount-".concat(p),className:"post-image__column post-image__column--placeholder"}));return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"post-image__columns clearfix"},l),E.a.createElement(Zd,{show:this.state.showPreviewModal,onModalDismissed:this.hidePreviewModal,startIndex:this.state.startImgIndex,fileInfos:s,postId:this.props.post.id}))}}])&&sm(n.prototype,r),a&&sm(n,a),t}();pm(dm,"propTypes",{post:v.a.object.isRequired,fileCount:v.a.number.isRequired,fileInfos:v.a.arrayOf(v.a.object),compactDisplay:v.a.bool,enableSVGs:v.a.bool,isEmbedVisible:v.a.bool,locale:v.a.string.isRequired});var mm={minHeightPlaceholder:{minHeight:"385px"}};var fm=Object(r.connect)(function(){var e=Object(Gs.makeGetFilesForPost)();return function(t,n){var r=n.post?n.post.id:"",a=e(t,r),o=0;return n.post.metadata&&n.post.metadata.files?o=(n.post.metadata.files||[]).length:n.post.file_ids?o=n.post.file_ids.length:n.post.filenames&&(o=n.post.filenames.length),{enableSVGs:"true"===Object(u.getConfig)(t).EnableSVGs,fileInfos:a,fileCount:o,isEmbedVisible:Object(z.b)(t,n.post.id),locale:Object(zl.a)(t)}}})(dm),hm=n(1546),bm=n(1693);function ym(e){return(ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vm(e){return(vm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Em(e,t){return(Em=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Om=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=vm(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==ym(a)&&"function"!=typeof a?_m(r):a,wm(_m(n),"getProfilePictureURL",function(){var e=n.props,t=e.post,r=e.user;return r&&r.id===t.user_id?j.J(r):t.user_id?j.J(t.user_id):""}),wm(_m(n),"getStatus",function(e,t,r){return e||t||r&&r.is_bot?"":n.props.status}),wm(_m(n),"getPostIconURL",function(e,t,r){var a=n.props,o=a.enablePostIconOverride,i=a.hasImageProxy,s=a.post.props,l="",c="";return s&&(l=s.override_icon_url,c=s.use_user_icon),n.props.compactDisplay?"":!t&&r&&!c&&o?l&&""!==l?_t.f(l,i):P.Q.DEFAULT_WEBHOOK_LOGO:e}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Em(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.compactDisplay,n=e.isBusy,r=e.isRHS,a=e.post,o=e.user,i=e.isBot,s=_t.m(a),l=_t.l(a);if(s&&!t&&!l&&!i)return E.a.createElement(bm.a,{className:"icon"});var c=_t.e(a),u=!c&&!l,p=this.getProfilePictureURL(),d=this.getPostIconURL(p,c,l),m=a.props?a.props.override_icon_emoji:"",f="string"==typeof m&&""!==m,h=this.getStatus(c,l,o);return E.a.createElement(hm.a,{hasMention:u,isBusy:n,isRHS:r,src:d,profileSrc:p,isEmoji:f,status:h,userId:o?o.id:null,username:o?o.username:null})}}])&&gm(n.prototype,r),a&&gm(n,a),t}();wm(Om,"propTypes",{compactDisplay:v.a.bool.isRequired,enablePostIconOverride:v.a.bool.isRequired,hasImageProxy:v.a.bool.isRequired,isBusy:v.a.bool,isRHS:v.a.bool,post:v.a.object.isRequired,status:v.a.string,user:v.a.object,isBot:v.a.bool,postIconOverrideURL:v.a.string}),wm(Om,"defaultProps",{status:P.O.OFFLINE});var Sm=Object(r.connect)(function(e,t){var n=Object(u.getConfig)(e),r=Object(p.getUser)(e,t.userId);return{enablePostIconOverride:"true"===n.EnablePostIconOverride,hasImageProxy:"true"===n.HasImageProxy,status:Object(p.getStatusForUserId)(e,t.userId),isBot:Boolean(r&&r.is_bot),user:r}})(Om);function Cm(e){return(Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tm(e){return(Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function km(e,t){return(km=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nm=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Tm(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Cm(a)&&"function"!=typeof a?jm(r):a,Mm(jm(n),"retryPost",function(e){e.preventDefault();var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Mm(e,t,n[t])})}return e}({},n.props.post);Reflect.deleteProperty(t,"id"),n.props.actions.createPost(t)}),Mm(jm(n),"cancelPost",function(e){e.preventDefault(),n.props.actions.removePost(n.props.post)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&km(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",{className:"pending-post-actions"},E.a.createElement("a",{className:"post-retry",href:"#",onClick:this.retryPost},E.a.createElement(Y.c,{id:"pending_post_actions.retry",defaultMessage:"Retry"}))," - ",E.a.createElement("a",{className:"post-cancel",href:"#",onClick:this.cancelPost},E.a.createElement(Y.c,{id:"pending_post_actions.cancel",defaultMessage:"Cancel"})))}}])&&Pm(n.prototype,r),a&&Pm(n,a),t}();Mm(Nm,"propTypes",{post:v.a.object.isRequired,actions:v.a.shape({createPost:v.a.func.isRequired,removePost:v.a.func.isRequired}).isRequired});var Rm=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({createPost:q.b,removePost:x.removePost},e)}})(Nm);function Im(e){return(Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Am(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xm(e,t){return!t||"object"!==Im(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lm(e){return(Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dm(e,t){return(Dm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Um=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xm(this,Lm(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dm(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.flag",defaultMessage:"Flag Icon"},function(e){return E.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 16 16",role:"icon","aria-label":e},E.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-1106.000000, -33.000000)",fillRule:"nonzero",fill:"inherit"},E.a.createElement("g",null,E.a.createElement("g",{transform:"translate(1096.000000, 22.000000)"},E.a.createElement("g",{transform:"translate(10.000000, 11.000000)"},E.a.createElement("path",{d:"M8,1 L2,1 C2,0.447 1.553,0 1,0 C0.447,0 0,0.447 0,1 L0,15.5 C0,15.776 0.224,16 0.5,16 L1.5,16 C1.776,16 2,15.776 2,15.5 L2,11 L7,11 L7,12 C7,12.553 7.447,13 8,13 L15,13 C15.553,13 16,12.553 16,12 L16,4 C16,3.447 15.553,3 15,3 L9,3 L9,2 C9,1.447 8.553,1 8,1 Z M9,11 L9,9.5 C9,9.224 8.776,9 8.5,9 L2,9 L2,3 L7,3 L7,4.5 C7,4.776 7.224,5 7.5,5 L14,5 L14,11 L9,11 Z"})))))))}))}}])&&Am(n.prototype,r),a&&Am(n,a),t}();function qm(e){return(qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fm(e,t){return!t||"object"!==qm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bm(e){return(Bm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gm(e,t){return(Gm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vm=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fm(this,Bm(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gm(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.flagged",defaultMessage:"Flagged Icon"},function(e){return E.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",role:"icon","aria-label":e},E.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-1073.000000, -33.000000)",fillRule:"nonzero",fill:"inherit"},E.a.createElement("g",{transform:"translate(-1.000000, 0.000000)"},E.a.createElement("g",{transform:"translate(1064.000000, 22.000000)"},E.a.createElement("g",{transform:"translate(10.000000, 11.000000)"},E.a.createElement("path",{d:"M8,1 L2,1 C2,0.447 1.553,0 1,0 C0.447,0 0,0.447 0,1 L0,15.5 C0,15.776 0.224,16 0.5,16 L1.5,16 C1.776,16 2,15.776 2,15.5 L2,11 L7,11 L7,12 C7,12.553 7.447,13 8,13 L15,13 C15.553,13 16,12.553 16,12 L16,4 C16,3.447 15.553,3 15,3 L9,3 L9,2 C9,1.447 8.553,1 8,1 Z"})))))))}))}}])&&Hm(n.prototype,r),a&&Hm(n,a),t}();function Wm(e){return(Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Km(e){return(Km=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ym(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qm(e,t){return(Qm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zm=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=Km(t).call(this),e=!r||"object"!==Wm(r)&&"function"!=typeof r?Ym(n):r,Jm(Ym(e),"handlePress",function(t){t.preventDefault();var n=e.props,r=n.actions,a=n.isFlagged,o=n.postId;a?r.unflagPost(o):r.flagPost(o)}),Jm(Ym(e),"handleA11yActivateEvent",function(){e.setState({a11yActive:!0})}),Jm(Ym(e),"handleA11yDeactivateEvent",function(){e.setState({a11yActive:!1})}),e.buttonRef=E.a.createRef(),e.state={a11yActive:!1},e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qm(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.buttonRef.current&&(this.buttonRef.current.addEventListener(P.c.ACTIVATE,this.handleA11yActivateEvent),this.buttonRef.current.addEventListener(P.c.DEACTIVATE,this.handleA11yDeactivateEvent))}},{key:"componentWillUnmount",value:function(){this.buttonRef.current&&(this.buttonRef.current.removeEventListener(P.c.ACTIVATE,this.handleA11yActivateEvent),this.buttonRef.current.removeEventListener(P.c.DEACTIVATE,this.handleA11yDeactivateEvent))}},{key:"componentDidUpdate",value:function(){this.state.a11yActive&&this.buttonRef.current&&this.buttonRef.current.dispatchEvent(new Event(P.c.UPDATE))}},{key:"render",value:function(){if(this.props.isEphemeral)return null;var e,t=this.props.isFlagged,n=t?"visible":"";return e=t?E.a.createElement(Vm,{className:"icon"}):E.a.createElement(Um,{className:"icon"}),E.a.createElement("button",{ref:this.buttonRef,id:"".concat(this.props.location,"_flagIcon_").concat(this.props.postId),"aria-label":t?Object(j.ab)("flag_post.unflag","Unflag").toLowerCase():Object(j.ab)("flag_post.flag","Flag for follow up").toLowerCase(),className:"style--none flag-icon__container "+n,onClick:this.handlePress},E.a.createElement(_c.a,{key:"flagtooltipkey"+n,delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:E.a.createElement(Ec.a,{id:"flagTooltip"},E.a.createElement(Y.c,{id:t?Object(Me.b)("flag_post.unflag"):Object(Me.b)("flag_post.flag"),defaultMessage:t?"Unflag":"Flag for follow up"}))},e))}}])&&zm(n.prototype,r),a&&zm(n,a),t}();Jm(Zm,"propTypes",{location:v.a.oneOf([P.q.CENTER,P.q.RHS_ROOT,P.q.RHS_COMMENT,P.q.SEARCH]).isRequired,postId:v.a.string.isRequired,isFlagged:v.a.bool.isRequired,isEphemeral:v.a.bool,actions:v.a.shape({flagPost:v.a.func.isRequired,unflagPost:v.a.func.isRequired}).isRequired}),Jm(Zm,"defaultProps",{isEphemeral:!1,location:P.q.CENTER});var Xm=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({flagPost:q.d,unflagPost:q.l},e)}})(Zm),$m=n(1871);function ef(e){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nf(e){return(nf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function af(e,t){return(af=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function of(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sf=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,n=!(a=(e=nf(t)).call.apply(e,[this].concat(i)))||"object"!==ef(a)&&"function"!=typeof a?rf(r):a,of(rf(n),"handleClick",function(){Object(j.U)()&&C.c()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&af(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=E.a.createElement($m.a,{eventTime:this.props.eventTime});if(Object(T.m)()||!this.props.isPermalink)return E.a.createElement("div",{role:"presentation",className:"post__permalink"},e);var t=this.props,n=t.location,r=t.postId,a=t.teamUrl;return E.a.createElement(Fi.a,{role:"presentation",id:"".concat(n,"_time_").concat(r),to:"".concat(a,"/pl/").concat(r),className:"post__permalink",onClick:this.handleClick},e)}}])&&tf(n.prototype,r),a&&tf(n,a),t}();of(sf,"propTypes",{isPermalink:v.a.bool.isRequired,eventTime:v.a.number.isRequired,location:v.a.oneOf([P.q.CENTER,P.q.RHS_ROOT,P.q.RHS_COMMENT,P.q.SEARCH]).isRequired,postId:v.a.string,teamUrl:v.a.string}),of(sf,"defaultProps",{eventTime:0,location:P.q.CENTER});var lf=Object(r.connect)(function(e){return{teamUrl:Object(d.getCurrentRelativeTeamUrl)(e)}})(sf);function cf(e){return(cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pf(e){return(pf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function df(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mf(e,t){return(mf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ff(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hf=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=pf(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==cf(a)&&"function"!=typeof a?df(r):a,ff(df(n),"handleAddEmoji",function(e){n.setState({showEmojiPicker:!1});var t=e.name||e.aliases[0];n.props.actions.addReaction(n.props.postId,t),n.props.toggleEmojiPicker()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mf(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t,n=this.props,r=n.channelId,a=n.location,o=n.postId,i=n.showEmojiPicker,s=n.teamId;return a!==P.q.RHS_ROOT&&a!==P.q.RHS_COMMENT||(e=va.RHS_SPACE_REQUIRED_ABOVE,t=va.RHS_SPACE_REQUIRED_BELOW),E.a.createElement(Lp,{channelId:r,teamId:s,permissions:[jp.a.ADD_REACTION]},E.a.createElement("div",null,E.a.createElement(va,{show:i,target:this.props.getDotMenuRef,onHide:this.props.toggleEmojiPicker,onEmojiClose:this.props.toggleEmojiPicker,onEmojiClick:this.handleAddEmoji,topOffset:-7,spaceRequiredAbove:e,spaceRequiredBelow:t}),E.a.createElement("button",{id:"".concat(a,"_reaction_").concat(o),"aria-label":Object(j.ab)("post_info.tooltip.add_reactions","Add Reaction").toLowerCase(),className:"reacticon__container color--link style--none",onClick:this.props.toggleEmojiPicker},E.a.createElement(_c.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:E.a.createElement(Ec.a,{id:"reaction-icon-tooltip",className:"hidden-xs"},E.a.createElement(Y.c,{id:"post_info.tooltip.add_reactions",defaultMessage:"Add Reaction"}))},E.a.createElement(Vn,{className:"icon icon--emoji"})))))}}])&&uf(n.prototype,r),a&&uf(n,a),t}();ff(hf,"propTypes",{channelId:v.a.string,postId:v.a.string.isRequired,teamId:v.a.string.isRequired,getDotMenuRef:v.a.func.isRequired,location:v.a.oneOf([P.q.CENTER,P.q.RHS_ROOT,P.q.RHS_COMMENT]).isRequired,showEmojiPicker:v.a.bool.isRequired,toggleEmojiPicker:v.a.func.isRequired,actions:v.a.shape({addReaction:v.a.func.isRequired}).isRequired}),ff(hf,"defaultProps",{location:P.q.CENTER,showEmojiPicker:!1});var bf=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({addReaction:q.a},e)}})(hf),yf=(n(250),n(953)),gf=n.n(yf);function vf(e){return(vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ef(e){return(Ef=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Of(e,t){return(Of=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cf=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Ef(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==vf(a)&&"function"!=typeof a?wf(r):a,Sf(wf(n),"handleAddReaction",function(e){e.preventDefault();var t=n.props,r=t.actions,a=t.post,o=t.emojiName;r.addReaction(a.id,o)}),Sf(wf(n),"handleRemoveReaction",function(e){e.preventDefault(),n.props.actions.removeReaction(n.props.post.id,n.props.emojiName)}),Sf(wf(n),"loadMissingProfiles",function(){var e=n.props.reactions.map(function(e){return e.user_id});n.props.actions.getMissingProfilesByIds(e)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Of(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){if(!this.props.emojiImageUrl)return null;var e,t,n=!1,r=[],a=this.props.otherUsersCount,o=!0,i=!1,s=void 0;try{for(var l,c=this.props.profiles[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;u.id===this.props.currentUserId?n=!0:r.push(j.v(u))}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}r.sort(),n&&r.unshift(j.ab("reaction.you","You")),e=a>0?r.length>0?E.a.createElement(Y.c,{id:"reaction.usersAndOthersReacted",defaultMessage:"{users} and {otherUsers, number} other {otherUsers, plural, one {user} other {users}}",values:{users:r.join(", "),otherUsers:a}}):E.a.createElement(Y.c,{id:"reaction.othersReacted",defaultMessage:"{otherUsers, number} {otherUsers, plural, one {user} other {users}}",values:{otherUsers:a}}):r.length>1?E.a.createElement(Y.c,{id:"reaction.usersReacted",defaultMessage:"{users} and {lastUser}",values:{users:r.slice(0,-1).join(", "),lastUser:r[r.length-1]}}):r[0],t=r.length+a>1?n?E.a.createElement(Y.c,{id:"reaction.reactionVerb.youAndUsers",defaultMessage:"reacted"}):E.a.createElement(Y.c,{id:"reaction.reactionVerb.users",defaultMessage:"reacted"}):n?E.a.createElement(Y.c,{id:"reaction.reactionVerb.you",defaultMessage:"reacted"}):E.a.createElement(Y.c,{id:"reaction.reactionVerb.user",defaultMessage:"reacted"});var p,d,m=E.a.createElement(Y.c,{id:"reaction.reacted",defaultMessage:"{users} {reactionVerb} with {emoji}",values:{users:E.a.createElement("b",null,e),reactionVerb:t,emoji:E.a.createElement("b",null,":"+this.props.emojiName+":")}}),f="post-reaction",h=this.props.emojiName.replace(/_/g," "),b="".concat(j.ab("reaction.reactWidth.ariaLabel","react with")," ").concat(h);return n?(this.props.canRemoveReaction?(p=this.handleRemoveReaction,b="".concat(j.ab("reaction.removeReact.ariaLabel","remove reaction")," ").concat(h),d=E.a.createElement(Y.c,{id:"reaction.clickToRemove",defaultMessage:"(click to remove)"})):f+=" post-reaction--read-only",f+=" post-reaction--current-user"):!n&&this.props.canAddReaction?(p=this.handleAddReaction,d=E.a.createElement(Y.c,{id:"reaction.clickToAdd",defaultMessage:"(click to add)"})):f+=" post-reaction--read-only",E.a.createElement("button",{id:"postReaction-".concat(this.props.post.id,"-").concat(this.props.emojiName),"aria-label":b,className:"style--none ".concat(f),onClick:p},E.a.createElement(_c.a,{delayShow:1e3,placement:"top",shouldUpdatePosition:!0,overlay:E.a.createElement(Ec.a,{id:"".concat(this.props.post.id,"-").concat(this.props.emojiName,"-reaction")},m,E.a.createElement("br",null),d),onEnter:this.loadMissingProfiles},E.a.createElement("span",null,E.a.createElement("span",{className:"post-reaction__emoji emoticon",style:{backgroundImage:"url("+this.props.emojiImageUrl+")"}}),E.a.createElement("span",{className:"post-reaction__count"},this.props.reactionCount))))}}])&&_f(n.prototype,r),a&&_f(n,a),t}();function Pf(e,t,n,r,a,o,i,s){return!!Object(D.haveIChannelPermission)(e,{team:t,channel:n,permission:s})&&!(r===gf.a.DEFAULT_CHANNEL&&"true"===a.ExperimentalTownSquareIsReadOnly&&"true"===o.IsLicensed&&!i.roles.includes("system_admin"))}Sf(Cf,"propTypes",{post:v.a.object.isRequired,currentUserId:v.a.string.isRequired,emojiName:v.a.string.isRequired,reactionCount:v.a.number.isRequired,profiles:v.a.array.isRequired,otherUsersCount:v.a.number.isRequired,reactions:v.a.arrayOf(v.a.object).isRequired,canAddReaction:v.a.bool.isRequired,canRemoveReaction:v.a.bool.isRequired,emojiImageUrl:v.a.string.isRequired,actions:v.a.shape({addReaction:v.a.func.isRequired,getMissingProfilesByIds:v.a.func.isRequired,removeReaction:v.a.func.isRequired})});var Tf=Object(r.connect)(function(){var e=Object(p.makeGetProfilesForReactions)();return function(t,n){var r,a=Object(u.getConfig)(t),o=Object(u.getLicense)(t),i=Object(p.getCurrentUser)(t),s=e(t,n.reactions);r=lr.a.has(n.emojiName)?lr.d[lr.a.get(n.emojiName)]:Object(Yl.getCustomEmojisByName)(t).get(n.emojiName);var l="";r&&(l=Object(_r.getEmojiImageUrl)(r));var c=Object(m.getChannel)(t,n.post.channel_id)||{},d=0!==c.delete_at,f=c.team_id,h=!1,b=!1;return d||(h=Pf(t,f,n.post.channel_id,c.name,a,o,i,jp.a.REMOVE_REACTION),b=Pf(t,f,n.post.channel_id,c.name,a,o,i,jp.a.ADD_REACTION)),{profiles:s,otherUsersCount:n.reactions.length-s.length,currentUserId:Object(p.getCurrentUserId)(t),reactionCount:n.reactions.length,canAddReaction:h,canRemoveReaction:b,emojiImageUrl:l}}},function(e){return{actions:Object(a.bindActionCreators)({addReaction:q.a,removeReaction:x.removeReaction,getMissingProfilesByIds:i.getMissingProfilesByIds},e)}})(Cf);function jf(e){return(jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mf(e){return(Mf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rf(e,t){return(Rf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function If(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Af=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Mf(t).call(this,e),n=!a||"object"!==jf(a)&&"function"!=typeof a?Nf(r):a,If(Nf(n),"getTarget",function(){return n.refs.addReactionButton}),If(Nf(n),"handleEmojiClick",function(e){n.setState({showEmojiPicker:!1});var t=e.name||e.aliases[0];n.props.actions.addReaction(n.props.post.id,t)}),If(Nf(n),"hideEmojiPicker",function(){n.setState({showEmojiPicker:!1})}),If(Nf(n),"toggleEmojiPicker",function(){n.setState({showEmojiPicker:!n.state.showEmojiPicker})}),n.state={showEmojiPicker:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rf(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.reactions!==e.reactions&&Object(j.k)()&&this.props.actions.scrollPostList()}},{key:"render",value:function(){var e=this,t=new Map,n=[];if(this.props.reactions)for(var r=0,a=Object.values(this.props.reactions);r<a.length;r++){var o=a[r],i=o.emoji_name;t.has(i)?t.get(i).push(o):(n.push(i),t.set(i,[o]))}if(0===t.size)return null;var s=n.map(function(n){return E.a.createElement(Tf,{key:n,post:e.props.post,emojiName:n,reactions:t.get(n)||[]})}),l=this.getTarget(),c=15;l&&(c=window.innerWidth-l.getBoundingClientRect().right-260)<0&&(c=15);var u=null;if(this.props.enableEmojiPicker){var p=E.a.createElement(Ec.a,{id:"addReactionTooltip"},E.a.createElement(Y.c,{id:"reaction_list.addReactionTooltip",defaultMessage:"Add reaction"}));u=E.a.createElement("span",{className:"emoji-picker__container"},E.a.createElement(va,{show:this.state.showEmojiPicker,target:this.getTarget,onHide:this.hideEmojiPicker,onEmojiClose:this.hideEmojiPicker,onEmojiClick:this.handleEmojiClick,rightOffset:c,topOffset:-5}),E.a.createElement(_c.a,{placement:"top",delayShow:P.Q.OVERLAY_TIME_DELAY,overlay:p},E.a.createElement(Lp,{channelId:this.props.post.channel_id,teamId:this.props.teamId,permissions:[jp.a.ADD_REACTION]},E.a.createElement("button",{"aria-label":Object(j.ab)("reaction.add.ariaLabel","add reaction"),className:"style--none post-reaction",onClick:this.toggleEmojiPicker},E.a.createElement("span",{id:"addReaction-".concat(this.props.post.id),className:"post-reaction__add",ref:"addReactionButton"},"+")))))}var d="post-add-reaction";return this.state.showEmojiPicker&&(d+=" post-add-reaction-emoji-picker-open"),E.a.createElement("div",{"aria-label":Object(j.ab)("reaction.container.ariaLabel","reactions"),className:"post-reaction-list"},s,E.a.createElement("div",{className:d},u))}}])&&kf(n.prototype,r),a&&kf(n,a),t}();If(Af,"propTypes",{post:v.a.object.isRequired,teamId:v.a.string,reactions:v.a.object,enableEmojiPicker:v.a.bool.isRequired,actions:v.a.shape({addReaction:v.a.func.isRequired,scrollPostList:v.a.func.isRequired})});var xf=Object(r.connect)(function(){var e=Object($a.makeGetReactionsForPost)();return function(t,n){var r="true"===Object(u.getConfig)(t).EnableEmojiPicker&&!n.isReadOnly;return{teamId:(Object(m.getChannel)(t,n.post.channel_id)||{}).team_id,reactions:e(t,n.post.id),enableEmojiPicker:r}}},function(e){return{actions:Object(a.bindActionCreators)({addReaction:q.a,scrollPostList:Ea.j},e)}})(Af),Lf=n(1616);function Df(e){return(Df="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qf(e){return(qf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ff(e,t){return(Ff=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gf=600,Vf=200,Wf=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=qf(t).call(this,e),n=!a||"object"!==Df(a)&&"function"!=typeof a?Hf(r):a,Bf(Hf(n),"toggleCollapse",function(e){e.preventDefault(),n.setState(function(e){return{isCollapsed:!e.isCollapsed}})}),Bf(Hf(n),"checkTextOverflow",function(){n.overflowRef&&window.cancelAnimationFrame(n.overflowRef),n.overflowRef=window.requestAnimationFrame(function(){var e=n.refs.textContainer,t=!1;e&&e.scrollHeight>n.maxHeight&&(t=!0),t!==n.state.isOverflow&&n.setState({isOverflow:t})})}),Bf(Hf(n),"handleResize",function(){n.checkTextOverflow()}),n.maxHeight=n.props.isAttachmentText?Vf:Gf,n.state={isCollapsed:!0,isOverflow:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ff(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.checkTextOverflow(),window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){this.props.text===e.text&&this.props.isRHSExpanded===e.isRHSExpanded&&this.props.isRHSOpen===e.isRHSOpen&&this.props.checkOverflow===e.checkOverflow||this.checkTextOverflow()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),this.overflowRef&&window.cancelAnimationFrame(this.overflowRef)}},{key:"render",value:function(){var e,t=this.state,n=t.isCollapsed,r=t.isOverflow,a=this.props,o=a.children,i=a.isAttachmentText,s=a.compactDisplay,l="post-message";n?(e=this.maxHeight,l+=" post-message--collapsed"):l+=" post-message--expanded";var c="post-collapse__gradient",u="post-collapse__show-more";i&&(c="post-attachment-collapse__gradient",u="post-attachment-collapse__show-more");var p=null;if(r){!i&&n&&s&&(e-=22);var d="fa fa-angle-up",m=Object(j.ab)("post_info.message.show_less","Show Less");n&&(d="fa fa-angle-down",m=Object(j.ab)("post_info.message.show_more","Show More")),p=E.a.createElement("div",{className:"post-collapse"},E.a.createElement("div",{id:"collapseGradient",className:c}),E.a.createElement("div",{className:u},E.a.createElement("div",{className:"post-collapse__show-more-line"}),E.a.createElement("button",{id:"showMoreButton",className:"post-collapse__show-more-button",onClick:this.toggleCollapse},E.a.createElement("span",{className:d}),m),E.a.createElement("div",{className:"post-collapse__show-more-line"}))),l+=" post-message--overflow"}return E.a.createElement("div",{className:l},E.a.createElement("div",{style:{maxHeight:e},className:"post-message__text-container",ref:"textContainer"},o),p)}}])&&Uf(n.prototype,r),a&&Uf(n,a),t}();Bf(Wf,"propTypes",{children:v.a.node,checkOverflow:v.a.number,isAttachmentText:v.a.bool,isRHSExpanded:v.a.bool.isRequired,isRHSOpen:v.a.bool.isRequired,text:v.a.string,compactDisplay:v.a.bool.isRequired});var zf=Object(r.connect)(function(e){return{isRHSExpanded:Object(Ml.a)(e),isRHSOpen:Object(Ml.c)(e),compactDisplay:Object(c.get)(e,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.MESSAGE_DISPLAY,P.z.MESSAGE_DISPLAY_DEFAULT)===P.z.MESSAGE_DISPLAY_COMPACT}})(Wf);function Kf(e){return(Kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qf(e,t){return!t||"object"!==Kf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jf(e){return(Jf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zf(e,t){return(Zf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qf(this,Jf(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zf(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.action,n=e.handleAction;return E.a.createElement("button",{"data-action-id":t.id,"data-action-cookie":t.cookie,key:t.id,onClick:n},E.a.createElement(Oa.a,{message:t.name,options:{mentionHighlight:!1,markdown:!1,autolinkedUrlSchemes:[]}}))}}])&&Yf(n.prototype,r),a&&Yf(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Xf,"propTypes",{action:v.a.object.isRequired,handleAction:v.a.func.isRequired});var $f=n(1751),eh=n(1676),th=n(1752),nh=n(1753);function rh(e){return(rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oh(e){return(oh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ih(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sh(e,t){return(sh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ch=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=oh(t).call(this,e),n=!a||"object"!==rh(a)&&"function"!=typeof a?ih(r):a,lh(ih(n),"handleSelected",function(e){if(e){var t=n.props.action,r="",a="";"users"===t.data_source?(a=e.username,r=e.id):"channels"===t.data_source?(a=e.display_name,r=e.id):(a=e.text,r=e.value),n.props.actions.selectAttachmentMenuAction(n.props.postId,n.props.action.id,n.props.action.cookie,n.props.action.data_source,a,r),n.setState({value:a})}});var o,i=e.action;n.providers=[],i&&("users"===i.data_source?n.providers=[new eh.a]:"channels"===i.data_source?n.providers=[new th.a]:i.options&&(n.providers=[new $f.a(i.options)]));var s="";return i.default_option&&i.options&&(s=(o=i.options.find(function(e){return e.value===i.default_option}))?o.text:""),n.state={selected:o,value:s},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sh(e,t)}(t,E.a.PureComponent),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.selected&&e.selected!==t.selected?{value:e.selected.text,selected:e.selected}:null}}],(r=[{key:"render",value:function(){var e=this.props.action;return E.a.createElement(nh.a,{providers:this.providers,onSelected:this.handleSelected,placeholder:e.name,inputClassName:"post-attachment-dropdown",value:this.state.value})}}])&&ah(n.prototype,r),a&&ah(n,a),t}();lh(ch,"propTypes",{postId:v.a.string.isRequired,action:v.a.object.isRequired,selected:v.a.object,actions:v.a.shape({selectAttachmentMenuAction:v.a.func.isRequired}).isRequired});var uh=Object(r.connect)(function(e,t){var n=e.views.posts.menuActions[t.postId];return{selected:n&&n[t.action&&t.action.id]}},function(e){return{actions:Object(a.bindActionCreators)({selectAttachmentMenuAction:W},e)}})(ch),ph=n(828);function dh(e){return(dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fh(e,t){return!t||"object"!==dh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hh(e){return(hh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bh(e,t){return(bh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yh=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fh(this,hh(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bh(e,t)}(t,ph["a"]),n=t,(r=[{key:"link",value:function(e,t,n){var r=e;Object(ss.c)(e)||(r="http://".concat(r));var a='<a class="theme markdown__link" href="'.concat(r,'" target="_blank"');return t&&(a+=' title="'+t+'"'),a+=">".concat(n,"</a>")}}])&&mh(n.prototype,r),a&&mh(n,a),t}();function gh(e){return(gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _h(e){return(_h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wh(e,t){return(wh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sh=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=_h(t).call(this,e),n=!a||"object"!==gh(a)&&"function"!=typeof a?Eh(r):a,Oh(Eh(n),"handleHeightReceivedForThumbUrl",function(e){var t=e.height,r=n.props.attachment;(!n.props.imagesMetadata||n.props.imagesMetadata&&!n.props.imagesMetadata[r.thumb_url])&&n.handleHeightReceived(t)}),Oh(Eh(n),"handleHeightReceivedForImageUrl",function(e){var t=e.height,r=n.props.attachment;(!n.props.imagesMetadata||n.props.imagesMetadata&&!n.props.imagesMetadata[r.image_url])&&n.handleHeightReceived(t)}),Oh(Eh(n),"handleHeightReceived",function(e){n.mounted&&e>0&&n.setState(function(e){return{checkOverflow:e.checkOverflow+1}})}),Oh(Eh(n),"renderPostActions",function(){var e=n.props.attachment.actions;if(!e||!e.length)return"";var t=[];return e.forEach(function(e){if(e.id&&e.name)switch(e.type){case"select":t.push(E.a.createElement(uh,{key:e.id,postId:n.props.postId,action:e}));break;case"button":default:t.push(E.a.createElement(Xf,{key:e.id,action:e,handleAction:n.handleAction}))}}),E.a.createElement("div",{className:"attachment-actions"},t)}),Oh(Eh(n),"handleAction",function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-action-id"),r=e.currentTarget.getAttribute("data-action-cookie");n.props.actions.doPostActionWithCookie(n.props.postId,t,r)}),Oh(Eh(n),"getFieldsTable",function(){var e=n.props.attachment.fields;if(!e||!e.length)return"";var t=[],r=[],a=[],o=0,i=!1,s=0,l={markdown:!1,mentionHighlight:!1};return e.forEach(function(e,n){(2===o||!0!==e.short||i)&&(t.push(E.a.createElement("table",{className:"attachment-fields",key:"attachment__table__"+s},E.a.createElement("thead",null,E.a.createElement("tr",null,r)),E.a.createElement("tbody",null,E.a.createElement("tr",null,a)))),r=[],a=[],o=0,s+=1,i=!1),r.push(E.a.createElement("th",{className:"attachment-field__caption",key:"attachment__field-caption-"+n+"__"+s,width:"50%"},E.a.createElement(Oa.a,{message:e.title,options:l}))),a.push(E.a.createElement("td",{className:"attachment-field",key:"attachment__field-"+n+"__"+s},E.a.createElement(Oa.a,{message:e.value}))),o+=1,i=!(!0===e.short)}),r.length>0&&t.push(E.a.createElement("table",{className:"attachment-fields",key:"attachment__table__"+s},E.a.createElement("thead",null,E.a.createElement("tr",null,r)),E.a.createElement("tbody",null,E.a.createElement("tr",null,a)))),E.a.createElement("div",null,t)}),n.state={checkOverflow:0},n.imageProps={onImageLoaded:n.handleHeightReceived},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wh(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.attachment,a=n.options,o="";r.pretext&&(o="attachment--pretext",e=E.a.createElement("div",{className:"attachment__thumb-pretext"},E.a.createElement(Oa.a,{message:r.pretext})));var i,s,l,c,u=[];if((r.author_name||r.author_icon)&&(r.author_icon&&u.push(E.a.createElement(Lf.a,{key:"attachment__author-icon",src:r.author_icon,imageMetadata:this.props.imagesMetadata[r.author_icon]},function(e){return E.a.createElement("img",{alt:"attachment author icon",className:"attachment__author-icon",src:e,height:"14",width:"14"})})),r.author_name&&u.push(E.a.createElement("span",{className:"attachment__author-name",key:"attachment__author-name"},r.author_name))),r.author_link&&Object(ss.f)(r.author_link)&&(u=E.a.createElement("a",{href:r.author_link,target:"_blank",rel:"noopener noreferrer"},u)),r.title&&(i=r.title_link&&Object(ss.f)(r.title_link)?E.a.createElement("h1",{className:"attachment__title"},E.a.createElement("a",{className:"attachment__title-link",href:r.title_link,target:"_blank",rel:"noopener noreferrer"},r.title)):E.a.createElement("h1",{className:"attachment__title"},E.a.createElement(Oa.a,{message:r.title,options:{mentionHighlight:!1,renderer:new yh,autolinkedUrlSchemes:[]}}))),r.text&&(s=E.a.createElement(zf,{checkOverflow:this.state.checkOverflow,isAttachmentText:!0,text:r.text},E.a.createElement(Oa.a,{message:r.text||"",options:a,imageProps:this.imageProps}))),r.image_url){var p=this.props.imagesMetadata[r.image_url];l=E.a.createElement("div",{className:"attachment__image-container"},E.a.createElement(Lf.a,{src:r.image_url,imageMetadata:p},function(e){return E.a.createElement(fd.a,{className:"attachment__image",onImageLoaded:t.handleHeightReceivedForImageUrl,src:e,dimensions:p})}))}if(r.thumb_url){var d=this.props.imagesMetadata[r.thumb_url];c=E.a.createElement("div",{className:"attachment__thumb-container"},E.a.createElement(Lf.a,{src:r.thumb_url,imageMetadata:d},function(e){return E.a.createElement(fd.a,{onImageLoaded:t.handleHeightReceivedForThumbUrl,src:e,dimensions:d})}))}var m,f=this.getFieldsTable(),h=this.renderPostActions();return r.color&&"#"===r.color[0]&&(m={borderLeftColor:r.color}),E.a.createElement("div",{className:"attachment "+o,ref:"attachment"},e,E.a.createElement("div",{className:"attachment__content"},E.a.createElement("div",{className:m?"clearfix attachment__container":"clearfix attachment__container attachment__container--"+r.color,style:m},u,i,E.a.createElement("div",null,E.a.createElement("div",{className:c?"attachment__body":"attachment__body attachment__body--no_thumb",onClick:j.G},s,l,f,h),c,E.a.createElement("div",{style:Ch.footer})))))}}])&&vh(n.prototype,r),a&&vh(n,a),t}();Oh(Sh,"propTypes",{postId:v.a.string.isRequired,attachment:v.a.object.isRequired,options:v.a.object,imagesMetadata:v.a.object,actions:v.a.shape({doPostActionWithCookie:v.a.func.isRequired}).isRequired});var Ch={footer:{clear:"both"}};var Ph=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({doPostActionWithCookie:x.doPostActionWithCookie},e)}})(Sh);function Th(e){return(Th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kh(e,t){return!t||"object"!==Th(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mh(e){return(Mh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nh(e,t){return(Nh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ih=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kh(this,Mh(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nh(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this,t=[];return this.props.attachments.forEach(function(n,r){t.push(E.a.createElement(Ph,{attachment:n,postId:e.props.postId,key:"att_"+r,options:e.props.options,imagesMetadata:e.props.imagesMetadata}))}),E.a.createElement("div",{id:"messageAttachmentList_".concat(this.props.postId),className:"attachment__list"},t)}}])&&jh(n.prototype,r),a&&jh(n,a),t}();function Ah(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"y";return Math.sqrt(Math.pow(e[n]-t[n],2)+Math.pow(e[r]-t[r],2))}function xh(e){return(xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lh(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Dh(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Lh(o,r,a,i,s,"next",e)}function s(e){Lh(o,r,a,i,s,"throw",e)}i(void 0)})}}function Uh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qh(e){return(qh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fh(e,t){return(Fh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Rh(Ih,"propTypes",{postId:v.a.string.isRequired,attachments:v.a.array.isRequired,options:v.a.object,imagesMetadata:v.a.object}),Rh(Ih,"defaultProps",{imagesMetadata:{}});var Gh={height:80,width:80},Vh=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=qh(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==xh(a)&&"function"!=typeof a?Hh(r):a,Bh(Hh(n),"getImageMetadata",function(e){if(!e)return null;var t=n.props.post.metadata.images;return t?t[e]:null}),Bh(Hh(n),"isLargeImage",function(e){if(!e)return!1;var t=e.height,n=e.width;return n>=150&&n/t>=16/9}),Bh(Hh(n),"handleRemovePreview",Dh(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object.assign({},n.props.post.props))[P.y.REMOVE_LINK_PREVIEW]="true",r={id:n.props.post.id,props:t},e.abrupt("return",n.props.actions.editPost(r));case 4:case"end":return e.stop()}},e)}))),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fh(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"renderImageToggle",value:function(){return E.a.createElement("button",{className:"style--none post__embed-visibility color--link","data-expanded":this.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:this.props.toggleEmbedVisibility})}},{key:"renderLargeImage",value:function(e,t){return this.props.isEmbedVisible?E.a.createElement(Lf.a,{src:e,imageMetadata:t},function(e){return E.a.createElement(fd.a,{className:"attachment__image attachment__image--opengraph large_image",src:e,dimensions:t})}):null}},{key:"renderSmallImage",value:function(e,t){return this.props.isEmbedVisible?E.a.createElement("div",{className:"attachment__image__container--opengraph"},E.a.createElement(Lf.a,{src:e,imageMetadata:t},function(e){return E.a.createElement(fd.a,{className:"attachment__image attachment__image--opengraph",src:e,dimensions:t})})):null}},{key:"truncateText",value:function(e){return e&&e.length>300?e.substring(0,300-"...".length)+"...":e}},{key:"hasPreviewBeenRemoved",value:function(){var e=this.props.post;return!(!e||!e.props)&&"true"===e.props[P.y.REMOVE_LINK_PREVIEW]}},{key:"render",value:function(){if(!this.props.previewEnabled||!this.props.enableLinkPreviews)return null;if(!this.props.post||Object(_t.m)(this.props.post))return null;if(this.hasPreviewBeenRemoved())return null;var e=this.props.openGraphData;if(!e)return null;var t,n,r=function(e,t){if(!e||!e.images||0===e.images.length)return null;var n=e.images.map(function(e){var n=e.secure_url||e.url;return e.width&&e.height||!t||!t[n]?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Bh(e,t,n[t])})}return e}({},e,{height:e.height||t[n].height,width:e.width||t[n].width})}),r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"y",a={},o=!0,i=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;void 0===a[n]||void 0===a[r]?a=u:Ah(u,e,n,r)<Ah(a,e,n,r)&&(a=u)}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}return a}(Gh,n,"width","height");return r.secure_url||r.url}(e,this.props.post.metadata.images),a=this.getImageMetadata(r),o=this.isLargeImage(a);return this.props.currentUserId===this.props.post.user_id&&(t=E.a.createElement("button",{id:"removePreviewButton",type:"button",className:"btn-close","aria-label":"Close",onClick:this.handleRemovePreview},E.a.createElement("span",{"aria-hidden":"true"},""))),(e.description||r)&&(n=E.a.createElement("div",{className:"attachment__body attachment__body--opengraph"},E.a.createElement("div",null,this.truncateText(e.description)," ",r&&o&&this.renderImageToggle()),r&&o&&this.renderLargeImage(r,a))),E.a.createElement("div",{className:"attachment attachment--opengraph"},E.a.createElement("div",{className:"attachment__content"},E.a.createElement("div",{className:"clearfix attachment__container attachment__container--opengraph"},E.a.createElement("div",{className:"attachment__body__wrap attachment__body__wrap--opengraph"},E.a.createElement("span",{className:"sitename"},this.truncateText(e.site_name)),t,E.a.createElement("h1",{className:"attachment__title attachment__title--opengraph"+(e.title?"":" is-url")},E.a.createElement("a",{className:"attachment__title-link attachment__title-link--opengraph",href:Object(ss.g)(e.url||this.props.link),target:"_blank",rel:"noopener noreferrer",title:e.title||e.url||this.props.link},this.truncateText(e.title||e.url||this.props.link))),n),r&&!o&&this.renderSmallImage(r,a))))}}])&&Uh(n.prototype,r),a&&Uh(n,a),t}();Bh(Vh,"propTypes",{link:v.a.string.isRequired,currentUserId:v.a.string,post:v.a.object,openGraphData:v.a.object,enableLinkPreviews:v.a.bool.isRequired,previewEnabled:v.a.bool.isRequired,isEmbedVisible:v.a.bool,toggleEmbedVisibility:v.a.func.isRequired,actions:v.a.shape({editPost:v.a.func.isRequired}).isRequired});var Wh=Object(r.connect)(function(e,t){var n=Object(u.getConfig)(e);return{currentUserId:Object(p.getCurrentUserId)(e),enableLinkPreviews:"true"===n.EnableLinkPreviews,openGraphData:Object($a.getOpenGraphMetadataForUrl)(e,t.link),previewEnabled:Object(c.getBool)(e,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.LINK_PREVIEW_DISPLAY,!0)}},function(e){return{actions:Object(a.bindActionCreators)({editPost:V},e)}})(Vh);function zh(e){return(zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yh(e){return(Yh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jh(e,t){return(Jh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xh=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Yh(t).call(this,e),n=!a||"object"!==zh(a)&&"function"!=typeof a?Qh(r):a,Zh(Qh(n),"showModal",function(e){e.preventDefault(),n.setState({showModal:!0})}),Zh(Qh(n),"hideModal",function(){n.setState({showModal:!1})}),n.state={showModal:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jh(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this;return E.a.createElement("div",{className:"post__embed-container"},E.a.createElement(Lf.a,{src:this.props.link,imageMetadata:this.props.imageMetadata},function(t){return E.a.createElement(E.a.Fragment,null,E.a.createElement(fd.a,{className:"img-div attachment__image cursor--pointer",src:t,dimensions:e.props.imageMetadata,showLoader:!0,onClick:e.showModal}),E.a.createElement(Zd,{show:e.state.showModal,onModalDismissed:e.hideModal,post:e.props.post,startIndex:0,fileInfos:[{has_preview_image:!1,link:t,extension:e.props.imageMetadata.format}]}))}))}}])&&Kh(n.prototype,r),a&&Kh(n,a),t}();Zh(Xh,"propTypes",{imageMetadata:v.a.object.isRequired,link:v.a.string.isRequired,post:v.a.object.isRequired});var $h=Xh;function eb(e){return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nb(e){return(nb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ab(e,t){return(ab=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ob(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ib=/(?:http|https):\/\/(?:www\.|m\.)?(?:(?:youtube\.com\/(?:(?:v\/)|(?:(?:watch|embed\/watch)(?:\/|.*v=))|(?:embed\/)|(?:user\/[^\/]+\/u\/[0-9]\/)))|(?:youtu\.be\/))([^#&?]*)/,sb=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=nb(t).call(this,e),n=!a||"object"!==eb(a)&&"function"!=typeof a?rb(r):a,ob(rb(n),"updateStateFromProps",function(e){var t=e.link,r=t.trim().match(ib);r&&11===r[1].length&&(!1===e.show&&n.stop(),n.setState({videoId:r[1],time:n.handleYoutubeTime(t)}))}),ob(rb(n),"play",function(){n.setState({playing:!0})}),ob(rb(n),"stop",function(){n.setState({playing:!1})}),n.state={playing:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ab(e,t)}(t,E.a.PureComponent),n=t,a=[{key:"isYoutubeLink",value:function(e){return e.trim().match(ib)}}],(r=[{key:"UNSAFE_componentWillMount",value:function(){this.updateStateFromProps(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateStateFromProps(e)}},{key:"handleYoutubeTime",value:function(e){var t=e.match(/[\\?&](t|start|time_continue)=([0-9]+h)?([0-9]+m)?([0-9]+s?)/);if(!t||!t[0])return"";var n=t[2]?t[2].match(/([0-9]+)h/):null,r=t[3]?t[3].match(/([0-9]+)m/):null,a=t[4]?t[4].match(/([0-9]+)s?/):null,o=0;return n&&n[1]&&(o+=3600*parseInt(n[1],10)),r&&r[1]&&(o+=60*parseInt(r[1],10)),a&&a[1]&&(o+=parseInt(a[1],10)),"&start="+o.toString()}},{key:"render",value:function(){var e,t=this.props.metadata,n=E.a.createElement("h4",null,E.a.createElement("span",{className:"video-type"},"YouTube - "),E.a.createElement("span",{className:"video-title"},E.a.createElement("a",{href:this.props.link,target:"blank",rel:"noopener noreferrer"},t.title)));if(this.state.playing)e=E.a.createElement("iframe",{src:"https://www.youtube.com/embed/"+this.state.videoId+"?autoplay=1&autohide=1&border=0&wmode=opaque&fs=1&enablejsapi=1"+this.state.time,width:"480px",height:"360px",type:"text/html",frameBorder:"0",allowFullScreen:"allowfullscreen"});else{var r=t.images[0];e=E.a.createElement("div",{className:"embed-responsive video-div__placeholder"},E.a.createElement("div",{className:"video-thumbnail__container"},E.a.createElement(Lf.a,{src:r.secure_url||r.url},function(e){return E.a.createElement("img",{src:e,alt:"youtube video thumbnail",className:"video-thumbnail"})}),E.a.createElement("div",{className:"block"},E.a.createElement("span",{className:"play-button"},E.a.createElement("span",null)))))}return E.a.createElement("div",{className:"post__embed-container"},E.a.createElement("div",null,n,E.a.createElement("div",{className:"video-div embed-responsive-item",onClick:this.play},e)))}}])&&tb(n.prototype,r),a&&tb(n,a),t}();ob(sb,"propTypes",{link:v.a.string.isRequired,show:v.a.bool.isRequired,metadata:v.a.object});var lb=Object(r.connect)(function(e,t){var n=Object(u.getConfig)(e);return{currentChannelId:Object(m.getCurrentChannelId)(e),googleDeveloperKey:n.GoogleDeveloperKey,hasImageProxy:"true"===n.HasImageProxy,metadata:Object($a.getOpenGraphMetadataForUrl)(e,t.link)}})(sb);function cb(e){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ub(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pb(e){return(pb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function db(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mb(e,t){return(mb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hb=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=pb(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==cb(a)&&"function"!=typeof a?db(r):a,fb(db(n),"toggleEmbedVisibility",function(){n.props.actions.toggleEmbedVisibility(n.props.post.id)}),fb(db(n),"getEmbed",function(){var e=n.props.post.metadata;return e&&e.embeds&&0!==e.embeds.length?e.embeds[0]:null}),fb(db(n),"isEmbedToggleable",function(e){return"image"===e.type||"opengraph"===e.type&&lb.isYoutubeLink(e.url)}),fb(db(n),"renderEmbed",function(e){switch(e.type){case"image":return n.props.isEmbedVisible?E.a.createElement($h,{imageMetadata:n.props.post.metadata.images[e.url],link:e.url,post:n.props.post}):null;case"message_attachment":var t=[];return n.props.post.props&&n.props.post.props.attachments&&(t=n.props.post.props.attachments),E.a.createElement(Ih,{attachments:t,postId:n.props.post.id,options:n.props.options,imagesMetadata:n.props.post.metadata.images});case"opengraph":return lb.isYoutubeLink(e.url)?n.props.isEmbedVisible?E.a.createElement(lb,{link:e.url,show:n.props.isEmbedVisible}):null:E.a.createElement(Wh,{link:e.url,isEmbedVisible:n.props.isEmbedVisible,post:n.props.post,toggleEmbedVisibility:n.toggleEmbedVisibility});default:return null}}),fb(db(n),"renderToggle",function(e){return E.a.createElement("button",{key:"toggle",className:"style--none post__embed-visibility color--link ".concat(e?"pull-left":""),"data-expanded":n.props.isEmbedVisible,"aria-label":"Toggle Embed Visibility",onClick:n.toggleEmbedVisibility})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mb(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.getEmbed();if(e){var t=this.isEmbedToggleable(e),n=/^\s*https?:\/\/.*$/.test(this.props.post.message);return E.a.createElement("div",null,t&&n&&this.renderToggle(!0),this.props.children,t&&!n&&this.renderToggle(!1),this.renderEmbed(e))}return this.props.children}}])&&ub(n.prototype,r),a&&ub(n,a),t}();fb(hb,"propTypes",{post:v.a.object.isRequired,children:v.a.element,isEmbedVisible:v.a.bool,options:v.a.object,actions:v.a.shape({toggleEmbedVisibility:v.a.func.isRequired}).isRequired});var bb=Object(r.connect)(function(e,t){return{isEmbedVisible:Object(z.b)(e,t.post.id)}},function(e){return{actions:Object(a.bindActionCreators)({toggleEmbedVisibility:q.k},e)}})(hb);function yb(e){return(yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vb(e){return(vb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eb(e,t){return(Eb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ob=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=vb(t).call(this,e),n=!a||"object"!==yb(a)&&"function"!=typeof a?_b(r):a,wb(_b(n),"handleHeightReceived",function(e){e>0&&n.setState(function(e){return{checkOverflow:e.checkOverflow+1}})}),n.state={collapse:!0,hasOverflow:!1,checkOverflow:0},n.imageProps={onImageLoaded:n.handleHeightReceived},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eb(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"renderDeletedPost",value:function(){return E.a.createElement("p",null,E.a.createElement(Y.c,{id:"post_body.deleted",defaultMessage:"(message deleted)"}))}},{key:"renderEditedIndicator",value:function(){return _t.j(this.props.post)?E.a.createElement("span",{id:"postEdited_".concat(this.props.post.id),className:"post-edited__indicator"},E.a.createElement(Y.c,{id:"post_message_view.edited",defaultMessage:"(edited)"})):null}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.enableFormatting,r=e.options,a=e.pluginPostTypes,o=e.compactDisplay,i=e.isRHS,s=e.theme;if(t.state===L.Posts.POST_DELETED)return this.renderDeletedPost();if(!n)return E.a.createElement("span",null,t.message);var l=t.props&&t.props.type?t.props.type:t.type;if(a.hasOwnProperty(l)){var c=a[l].component;return E.a.createElement(c,{post:t,compactDisplay:o,isRHS:i,theme:s})}var u=t.message,p=j.V(t);if(o&&p){var d=j.ab("post_info.message.visible.compact"," (Only visible to you)");u=u.concat(d)}return E.a.createElement(zf,{checkOverflow:this.state.checkOverflow,text:u},E.a.createElement("div",{"aria-readonly":"true",tabIndex:"0",id:"postMessageText_".concat(t.id),className:"post-message__text",onClick:j.G},E.a.createElement(So,{message:u,imageProps:this.imageProps,isRHS:i,options:r,post:t,channelId:t.channel_id})),this.renderEditedIndicator(),E.a.createElement(I.a,{pluggableName:"PostMessageAttachment",postId:t.id,onHeightChange:this.handleHeightReceived}))}}])&&gb(n.prototype,r),a&&gb(n,a),t}();wb(Ob,"propTypes",{post:v.a.object.isRequired,enableFormatting:v.a.bool,options:v.a.object,compactDisplay:v.a.bool,isRHS:v.a.bool,isRHSOpen:v.a.bool,isRHSExpanded:v.a.bool,theme:v.a.object.isRequired,pluginPostTypes:v.a.object}),wb(Ob,"defaultProps",{options:{},isRHS:!1,pluginPostTypes:{}});var Sb=Object(r.connect)(function(e){return{enableFormatting:Object(c.getBool)(e,L.Preferences.CATEGORY_ADVANCED_SETTINGS,"formatting",!0),isRHSExpanded:Object(Ml.a)(e),isRHSOpen:Object(Ml.c)(e),pluginPostTypes:e.plugins.postTypes,theme:Object(c.getTheme)(e)}})(Ob);function Cb(e){var t=e.post,n=e.previewCollapsed,r=e.previewEnabled,a=e.isEmbedVisible,o=e.pluginPostTypes,i=t.type&&o.hasOwnProperty(t.type),s=E.a.createElement(Sb,{post:t,isRHS:!0,hasMention:!0});return t.state===L.Posts.POST_DELETED||i?s:E.a.createElement(bb,{post:t,previewCollapsed:n,previewEnabled:r,isEmbedVisible:a},s)}var Pb=n(1677);function Tb(e){return(Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kb(e,t){return!t||"object"!==Tb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mb(e){return(Mb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nb(e,t){return(Nb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rb=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kb(this,Mb(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nb(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.info",defaultMessage:"Info Icon"},function(e){return E.a.createElement("svg",{className:"svg-text-color","aria-label":e,width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},E.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-1015.000000, -516.000000)",fill:"inherit"},E.a.createElement("path",{d:"M1027,540 C1020.37258,540 1015,534.627417 1015,528 C1015,521.372583 1020.37258,516 1027,516 C1033.62742,516 1039,521.372583 1039,528 C1039,534.627417 1033.62742,540 1027,540 Z M1027,527 C1025.89543,527 1025,527.895431 1025,529 L1025,533 C1025,534.104569 1025.89543,535 1027,535 C1028.10457,535 1029,534.104569 1029,533 L1029,529 C1029,527.895431 1028.10457,527 1027,527 Z M1027,525 C1028.10457,525 1029,524.104569 1029,523 C1029,521.895431 1028.10457,521 1027,521 C1025.89543,521 1025,521.895431 1025,523 C1025,524.104569 1025.89543,525 1027,525 Z"}))))}))}}])&&jb(n.prototype,r),a&&jb(n,a),t}(),Ib=n(1732);function Ab(e){return(Ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lb(e){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Db(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ub(e,t){return(Ub=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hb=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Lb(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Ab(a)&&"function"!=typeof a?Db(r):a,qb(Db(n),"hideProfilePopover",function(){n.refs.overlay.hide()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ub(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.disablePopover,n=e.displayName,r=e.isBusy,a=e.isRHS,o=e.hasMention,i=e.hideStatus,s=e.overwriteName,l=e.user,c=e.userId,u=s||n||"...";if(t)return E.a.createElement("div",{className:"user-popover"},u);var p="right";a&&!Object(j.U)()&&(p="left");var d="";return l&&(d=Object(j.J)(l)),E.a.createElement(E.a.Fragment,null,E.a.createElement(_c.a,{ref:"overlay",trigger:"click",placement:p,rootClose:!0,overlay:E.a.createElement(Ib.a,{userId:c,src:d,isBusy:r,hide:this.hideProfilePopover,hideStatus:i,isRHS:a,hasMention:o})},E.a.createElement("button",{"aria-label":u.toLowerCase(),className:"user-popover style--none"},u)),E.a.createElement(ko.a,{show:Boolean(l&&l.is_bot),className:"badge-popoverlist"}))}}])&&xb(n.prototype,r),a&&xb(n,a),t}();qb(Hb,"propTypes",{disablePopover:v.a.bool,displayName:v.a.string,hasMention:v.a.bool,hideStatus:v.a.bool,isBusy:v.a.bool,isRHS:v.a.bool,overwriteName:v.a.node,user:v.a.object,userId:v.a.string}),qb(Hb,"defaultProps",{disablePopover:!1,hasMention:!1,hideStatus:!1,isRHS:!1,overwriteImage:"",overwriteName:""});var Fb=Object(r.connect)(function(){var e=Object(p.makeGetDisplayName)();return function(t,n){return{displayName:e(t,n.userId),user:Object(p.getUser)(t,n.userId)}}})(Hb);function Bb(e){return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vb(e){return(Vb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zb(e,t){return(zb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yb=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Vb(t).call(this,e),n=!a||"object"!==Bb(a)&&"function"!=typeof a?Wb(r):a,Kb(Wb(n),"removePost",function(){n.props.removePost(n.props.post)}),Kb(Wb(n),"createRemovePostButton",function(){return E.a.createElement("button",{className:"post__remove theme color--link style--none",type:"button",onClick:n.removePost},"")}),Kb(Wb(n),"renderPostTime",function(){var e=n.props.post,t=!(L.Posts.POST_DELETED===e.state||Object(Ql.isPostPendingOrFailed)(e));return E.a.createElement(lf,{isPermalink:t,eventTime:e.create_at,postId:e.id,location:P.q.RHS_COMMENT})}),Kb(Wb(n),"toggleEmojiPicker",function(){var e=!n.state.showEmojiPicker;n.setState({showEmojiPicker:e})}),Kb(Wb(n),"getClassName",function(e,t){var r="post post--thread same--root post--comment";return n.props.currentUserId===e.user_id&&(r+=" current--user"),t&&(r+=" post--system"),n.props.compactDisplay&&(r+=" post--compact"),e.is_pinned&&(r+=" post--pinned"),(n.state.dropdownOpened||n.state.showEmojiPicker)&&(r+=" post--hovered"),n.props.isConsecutivePost&&(r+=" same--user"),r}),Kb(Wb(n),"handleDropdownOpened",function(e){n.setState({dropdownOpened:e})}),Kb(Wb(n),"getDotMenuRef",function(){return n.refs.dotMenu}),Kb(Wb(n),"setHover",function(){n.setState({hover:!0})}),Kb(Wb(n),"unsetHover",function(){n.setState({hover:!1})}),Kb(Wb(n),"handleA11yActivateEvent",function(){n.setState({a11yActive:!0})}),Kb(Wb(n),"handleA11yDeactivateEvent",function(){n.setState({a11yActive:!1})}),Kb(Wb(n),"handlePostFocus",function(){var e=n.props,t=e.post,r=e.author,a=e.reactions,o=e.isFlagged;n.setState({currentAriaLabel:_t.d(t,r,o,a,n.context.intl)})}),n.postRef=E.a.createRef(),n.state={showEmojiPicker:!1,dropdownOpened:!1,hover:!1,a11yActive:!1,currentAriaLabel:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zb(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.postRef.current&&(this.postRef.current.addEventListener(P.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.addEventListener(P.c.DEACTIVATE,this.handleA11yDeactivateEvent))}},{key:"componentWillUnmount",value:function(){this.postRef.current&&(this.postRef.current.removeEventListener(P.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.removeEventListener(P.c.DEACTIVATE,this.handleA11yDeactivateEvent))}},{key:"componentDidUpdate",value:function(){this.state.a11yActive&&this.postRef.current.dispatchEvent(new Event(P.c.UPDATE))}},{key:"render",value:function(){var e,t,n,r,a=this,o=this.props,i=o.post,s=o.isConsecutivePost,l=o.isReadOnly,c=o.channelIsArchived,u=i&&i.state===L.Posts.POST_DELETED,p=Object(Ql.isPostEphemeral)(i),d=_t.m(i),m=_t.e(i),f=null;(this.props.compactDisplay||Object(j.U)())&&(f=E.a.createElement(Fb,{userId:i.user_id,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0})),s||(f=E.a.createElement(Fb,{userId:i.user_id,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0}),t=E.a.createElement(Sm,{compactDisplay:this.props.compactDisplay,isBusy:this.props.isBusy,isRHS:!0,post:i,userId:i.user_id}),i.props&&i.props.from_webhook?(f=i.props.override_username&&this.props.enablePostUsernameOverride?E.a.createElement(Fb,{userId:i.user_id,hideStatus:!0,overwriteName:i.props.override_username,disablePopover:!0}):E.a.createElement(Fb,{userId:i.user_id,hideStatus:!0,disablePopover:!0}),e=E.a.createElement(ko.a,{className:"col col__name"})):m?(f=E.a.createElement("span",{className:"auto-responder"},E.a.createElement(Fb,{userId:i.user_id,hideStatus:!0,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0})),e=E.a.createElement(Pb.a,{className:"col col__name"},E.a.createElement(Y.c,{id:"post_info.auto_responder",defaultMessage:"AUTOMATIC REPLY"}))):d&&(f=E.a.createElement(Fb,{overwriteName:E.a.createElement(Y.c,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:P.Q.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0}),n=E.a.createElement("span",{className:"post__visibility"},E.a.createElement(Y.c,{id:"post_info.message.visible",defaultMessage:"(Only visible to you)"}))));var h="";i.failed&&(h+=" post-failed",r=E.a.createElement(Rm,{post:this.props.post})),_t.j(this.props.post)&&(h+=" post--edited");var b,y,g,v=null;if(i.file_ids&&i.file_ids.length>0&&(v=E.a.createElement(fm,{post:i,compactDisplay:this.props.compactDisplay})),l||p||i.failed||d||!this.props.enableEmojiPicker||c||(b=E.a.createElement(bf,{channelId:i.channel_id,postId:i.id,teamId:this.props.teamId,getDotMenuRef:this.getDotMenuRef,location:P.q.RHS_COMMENT,showEmojiPicker:this.state.showEmojiPicker,toggleEmojiPicker:this.toggleEmojiPicker})),p)y=E.a.createElement("div",{className:"col col__remove"},this.createRemovePostButton());else if(u)y=null;else if(!d&&(Object(j.U)()||this.state.hover||this.state.a11yActive||this.state.dropdownOpened||this.state.showEmojiPicker)){var _=E.a.createElement(zp,{post:this.props.post,location:P.q.RHS_COMMENT,isFlagged:this.props.isFlagged,handleDropdownOpened:this.handleDropdownOpened,handleAddReactionClick:this.toggleEmojiPicker,isReadOnly:l||c,enableEmojiPicker:this.props.enableEmojiPicker});y=E.a.createElement("div",{ref:"dotMenu",className:"col col__reply"},_,b)}i.is_pinned&&(g=E.a.createElement("span",{className:"post__pinned-badge"},E.a.createElement(Y.c,{id:"post_info.pinned",defaultMessage:"Pinned"})));var w=null;(this.state.hover||this.state.a11yActive||this.state.dropdownOpened||this.state.showEmojiPicker||this.props.isFlagged)&&(w=E.a.createElement(Xm,{location:P.q.RHS_COMMENT,postId:i.id,isFlagged:this.props.isFlagged,isEphemeral:p}));var O,S=this.renderPostTime();return i.props&&i.props.card&&(O=E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:E.a.createElement(Ec.a,null,E.a.createElement(Y.c,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},E.a.createElement("button",{className:"card-icon__container icon--show style--none",onClick:function(e){e.preventDefault(),a.props.handleCardClick(a.props.post)}},E.a.createElement(Rb,{className:"icon icon__info","aria-hidden":"true"})))),E.a.createElement("div",{role:"listitem",ref:this.postRef,id:"rhsPost_"+i.id,tabIndex:"-1",className:"a11y__section ".concat(this.getClassName(i,d)),onMouseOver:this.setHover,onMouseLeave:this.unsetHover,"aria-label":this.state.currentAriaLabel,onFocus:this.handlePostFocus},E.a.createElement("div",{role:"application",className:"post__content"},E.a.createElement("div",{className:"post__img"},t),E.a.createElement("div",null,E.a.createElement("div",{className:"post__header"},E.a.createElement("div",{className:"col col__name"},f,e),E.a.createElement("div",{className:"col"},S,g,O,w,n),y),E.a.createElement("div",{className:"post__body"},E.a.createElement("div",{className:h},r,E.a.createElement(Cb,{post:i,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,isEmbedVisible:this.props.isEmbedVisible,pluginPostTypes:this.props.pluginPostTypes})),v,E.a.createElement(xf,{post:i,isReadOnly:l||c})))))}}])&&Gb(n.prototype,r),a&&Gb(n,a),t}();function Qb(e,t){var n=t.post,r=t.previousPostId&&Object($a.getPost)(e,t.previousPostId),a=!1;if(r){var o=Boolean(n.props&&n.props.from_webhook),i=Boolean(r.props&&r.props.from_webhook);!(r&&r.user_id===n.user_id&&n.create_at-r.create_at<=L.Posts.POST_COLLAPSE_TIMEOUT)||o||i||Object(Ql.isSystemMessage)(n)||Object(Ql.isSystemMessage)(r)||r.root_id!==n.root_id&&r.id!==n.root_id||(a=!0)}return a}Kb(Yb,"propTypes",{post:v.a.object,teamId:v.a.string.isRequired,currentUserId:v.a.string.isRequired,compactDisplay:v.a.bool,author:v.a.string,reactions:v.a.object,isFlagged:v.a.bool,isBusy:v.a.bool,removePost:v.a.func.isRequired,previewCollapsed:v.a.string.isRequired,previewEnabled:v.a.bool.isRequired,isEmbedVisible:v.a.bool,enableEmojiPicker:v.a.bool.isRequired,enablePostUsernameOverride:v.a.bool.isRequired,isReadOnly:v.a.bool.isRequired,pluginPostTypes:v.a.object,channelIsArchived:v.a.bool.isRequired,isConsecutivePost:v.a.bool,handleCardClick:v.a.func}),Kb(Yb,"contextTypes",{intl:Y.i.isRequired});var Jb=Object(r.connect)(function(e,t){var n=Object($a.makeGetReactionsForPost)(),r=Object(p.makeGetDisplayName)(),a=Object(u.getConfig)(e),o="true"===a.EnableEmojiPicker,i="true"===a.EnablePostUsernameOverride,s=t.teamId||Object(d.getCurrentTeamId)(e),l=e.entities.channels.channels[t.post.channel_id];return{author:r(e,t.post.user_id),reactions:n(e,t.post.id),enableEmojiPicker:o,enablePostUsernameOverride:i,isEmbedVisible:Object(z.b)(e,t.post.id),isReadOnly:Object(m.isChannelReadOnlyById)(e,t.post.channel_id),teamId:s,pluginPostTypes:e.plugins.postTypes,channelIsArchived:0!==l.delete_at,isConsecutivePost:Qb(e,t),isFlagged:null!=Object(c.get)(e,P.z.CATEGORY_FLAGGED_POST,t.post.id,null),compactDisplay:Object(c.get)(e,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.MESSAGE_DISPLAY,P.z.MESSAGE_DISPLAY_DEFAULT)===P.z.MESSAGE_DISPLAY_COMPACT}})(Yb);function Zb(e){return(Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $b(e){return($b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ey(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ty(e,t){return(ty=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ny(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ry=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=$b(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Zb(a)&&"function"!=typeof a?ey(r):a,ny(ey(n),"handleBack",function(e){switch(e.preventDefault(),n.props.previousRhsState){case P.A.SEARCH:n.props.actions.showSearchResults();break;case P.A.MENTION:n.props.actions.showMentions();break;case P.A.FLAG:n.props.actions.showFlaggedPosts();break;case P.A.PIN:n.props.actions.showPinnedPosts()}}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ty(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){var e,t,n=E.a.createElement(Ec.a,{id:"closeSidebarTooltip"},E.a.createElement(Y.c,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close Sidebar"}));switch(this.props.previousRhsState){case P.A.SEARCH:case P.A.MENTION:t=E.a.createElement(Ec.a,{id:"backToResultsTooltip"},E.a.createElement(Y.c,{id:"rhs_header.backToResultsTooltip",defaultMessage:"Back to Search Results"}));break;case P.A.FLAG:t=E.a.createElement(Ec.a,{id:"backToResultsTooltip"},E.a.createElement(Y.c,{id:"rhs_header.backToFlaggedTooltip",defaultMessage:"Back to Flagged Posts"}));break;case P.A.PIN:t=E.a.createElement(Ec.a,{id:"backToResultsTooltip"},E.a.createElement(Y.c,{id:"rhs_header.backToPinnedTooltip",defaultMessage:"Back to Pinned Posts"}))}var r=E.a.createElement(Ec.a,{id:"expandSidebarTooltip"},E.a.createElement(Y.c,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand Sidebar"})),a=E.a.createElement(Ec.a,{id:"shrinkSidebarTooltip"},E.a.createElement(Y.c,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink Sidebar"}));return t&&(e=E.a.createElement("a",{href:"#",onClick:this.handleBack,className:"sidebar--right__back"},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},E.a.createElement(Y.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},function(e){return E.a.createElement("i",{className:"fa fa-angle-left","aria-label":e})})))),E.a.createElement("div",{className:"sidebar--right__header"},E.a.createElement("span",{className:"sidebar--right__title"},e,E.a.createElement(Y.c,{id:"rhs_header.details",defaultMessage:"Message Details"})),E.a.createElement("div",{className:"pull-right"},E.a.createElement("button",{type:"button",className:"sidebar--right__expand","aria-label":"Expand",onClick:this.props.actions.toggleRhsExpanded},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:r},E.a.createElement(Y.c,{id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"},function(e){return E.a.createElement("i",{className:"fa fa-expand","aria-label":e})})),E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:a},E.a.createElement(Y.c,{id:"rhs_header.expandTooltip.icon",defaultMessage:"Shrink Sidebar Icon"},function(e){return E.a.createElement("i",{className:"fa fa-compress","aria-label":e})}))),E.a.createElement("button",{id:"rhsCloseButton",type:"button",className:"sidebar--right__close","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:n},E.a.createElement(Y.c,{id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"},function(e){return E.a.createElement("i",{className:"fa fa-sign-out","aria-label":e})})))))}}])&&Xb(n.prototype,r),a&&Xb(n,a),t}();ny(ry,"propTypes",{previousRhsState:v.a.oneOf(Object.values(P.A)),actions:v.a.shape({showMentions:v.a.func,showSearchResults:v.a.func,showFlaggedPosts:v.a.func,showPinnedPosts:v.a.func,closeRightHandSide:v.a.func,toggleRhsExpanded:v.a.func})});var ay=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({showSearchResults:kl.n,showMentions:kl.k,showFlaggedPosts:kl.j,showPinnedPosts:kl.l,closeRightHandSide:kl.b,toggleRhsExpanded:kl.p},e)}})(ry);function oy(e){return(oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sy(e){return(sy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ly(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cy(e,t){return(cy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var py=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=sy(t).call(this,e),n=!a||"object"!==oy(a)&&"function"!=typeof a?ly(r):a,uy(ly(n),"renderPostTime",function(e){var t=n.props.post;if(t.type===P.Q.PostTypes.FAKE_PARENT_DELETED)return null;var r=!(e||L.Posts.POST_DELETED===t.state||Ql.isPostPendingOrFailed(t));return E.a.createElement(lf,{isPermalink:r,eventTime:t.create_at,postId:t.id,location:P.q.RHS_ROOT})}),uy(ly(n),"toggleEmojiPicker",function(){var e=!n.state.showEmojiPicker;n.setState({showEmojiPicker:e})}),uy(ly(n),"getClassName",function(e,t){var r="post post--root post--thread";return n.props.currentUserId===e.user_id&&(r+=" current--user"),t&&(r+=" post--system"),n.props.compactDisplay&&(r+=" post--compact"),e.is_pinned&&(r+=" post--pinned"),(n.state.dropdownOpened||n.state.showEmojiPicker)&&(r+=" post--hovered"),r}),uy(ly(n),"handleDropdownOpened",function(e){n.setState({dropdownOpened:e})}),uy(ly(n),"handlePostFocus",function(){var e=n.props,t=e.post,r=e.author,a=e.reactions,o=e.isFlagged;n.setState({currentAriaLabel:_t.d(t,r,o,a,n.context.intl)})}),uy(ly(n),"getDotMenuRef",function(){return n.refs.dotMenu}),n.state={showEmojiPicker:!1,testStateObj:!0,dropdownOpened:!1,currentAriaLabel:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cy(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.post,o=r.isReadOnly,i=r.teamId,s=r.channelIsArchived,l=r.channelType,c=r.channelDisplayName,u=a&&a.state===L.Posts.POST_DELETED,p=j.V(a),d=_t.m(a);e="D"===l?E.a.createElement(Y.c,{id:"rhs_root.direct",defaultMessage:"Direct Message"}):c,o||p||a.failed||d||!this.props.enableEmojiPicker||s||(t=E.a.createElement(bf,{channelId:a.channel_id,postId:a.id,teamId:i,getDotMenuRef:this.getDotMenuRef,location:P.q.RHS_ROOT,showEmojiPicker:this.state.showEmojiPicker,toggleEmojiPicker:this.toggleEmojiPicker}));var m,f,h=null;a.file_ids&&a.file_ids.length>0&&(h=E.a.createElement(fm,{post:a,compactDisplay:this.props.compactDisplay})),d?m=E.a.createElement(Fb,{overwriteName:E.a.createElement(Y.c,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:P.Q.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0}):a.props&&a.props.from_webhook?(m=a.props.override_username&&this.props.enablePostUsernameOverride?E.a.createElement(Fb,{key:a.user_id,userId:a.user_id,hideStatus:!0,overwriteName:a.props.override_username,disablePopover:!0}):E.a.createElement(Fb,{key:a.user_id,userId:a.user_id,hideStatus:!0,disablePopover:!0}),f=E.a.createElement(ko.a,null)):m=E.a.createElement(Fb,{key:a.user_id,userId:a.user_id,isBusy:this.props.isBusy,isRHS:!0,hasMention:!0});var b,y="";_t.j(this.props.post)&&(y+=" post--edited"),a.is_pinned&&(b=E.a.createElement("span",{className:"post__pinned-badge"},E.a.createElement(Y.c,{id:"post_info.pinned",defaultMessage:"Pinned"})));var g,v,_,w=E.a.createElement(zp,{post:this.props.post,location:P.q.RHS_ROOT,isFlagged:this.props.isFlagged,handleDropdownOpened:this.handleDropdownOpened,handleAddReactionClick:this.toggleEmojiPicker,commentCount:this.props.commentCount,isReadOnly:o||s,enableEmojiPicker:this.props.enableEmojiPicker});return u||this.props.post.type===P.Q.PostTypes.FAKE_PARENT_DELETED||(g=E.a.createElement("div",{ref:"dotMenu",className:"col col__reply"},w,t)),!p&&!a.failed&&!d&&(v=E.a.createElement(Xm,{location:P.q.RHS_ROOT,postId:a.id,isFlagged:this.props.isFlagged})),this.props.post.props&&this.props.post.props.card&&(_=E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:E.a.createElement(Ec.a,null,E.a.createElement(Y.c,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},E.a.createElement("button",{className:"card-icon__container icon--show style--none",onClick:function(e){e.preventDefault(),n.props.handleCardClick(n.props.post)}},E.a.createElement(Rb,{className:"icon icon__info","aria-hidden":"true"})))),E.a.createElement("div",{role:"listitem",id:"rhsPost_"+a.id,tabIndex:"-1",className:"thread__root a11y__section ".concat(this.getClassName(a,d)),"aria-label":this.state.currentAriaLabel,onFocus:this.handlePostFocus},E.a.createElement("div",{className:"post-right-channel__name"},e),E.a.createElement("div",{role:"application",className:"post__content"},E.a.createElement("div",{className:"post__img"},E.a.createElement(Sm,{compactDisplay:this.props.compactDisplay,isBusy:this.props.isBusy,isRHS:!0,post:a,userId:a.user_id})),E.a.createElement("div",null,E.a.createElement("div",{className:"post__header"},E.a.createElement("div",{className:"col__name"},m,f),E.a.createElement("div",{className:"col"},this.renderPostTime(p),b,_,v),g),E.a.createElement("div",{className:"post__body"},E.a.createElement("div",{className:y},E.a.createElement(Cb,{post:a,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,isEmbedVisible:this.props.isEmbedVisible,pluginPostTypes:this.props.pluginPostTypes})),h,E.a.createElement(xf,{post:a,isReadOnly:o||s})))))}}])&&iy(n.prototype,r),a&&iy(n,a),t}();uy(py,"propTypes",{post:v.a.object.isRequired,teamId:v.a.string.isRequired,currentUserId:v.a.string.isRequired,compactDisplay:v.a.bool,commentCount:v.a.number.isRequired,author:v.a.string,reactions:v.a.object,isFlagged:v.a.bool,previewCollapsed:v.a.string,previewEnabled:v.a.bool,isBusy:v.a.bool,isEmbedVisible:v.a.bool,enableEmojiPicker:v.a.bool.isRequired,enablePostUsernameOverride:v.a.bool.isRequired,isReadOnly:v.a.bool.isRequired,pluginPostTypes:v.a.object,channelIsArchived:v.a.bool.isRequired,channelType:v.a.string,channelDisplayName:v.a.string,handleCardClick:v.a.func.isRequired}),uy(py,"contextTypes",{intl:Y.i.isRequired}),uy(py,"defaultProps",{commentCount:0});var dy=Object(r.connect)(function(e,t){var n=Object($a.makeGetReactionsForPost)(),r=Object(p.makeGetDisplayName)(),a=Object(u.getConfig)(e),o="true"===a.EnableEmojiPicker,i="true"===a.EnablePostUsernameOverride,s=t.teamId||Object(d.getCurrentTeamId)(e),l=Object(m.getChannel)(e,t.post.channel_id)||{};return{author:r(e,t.post.user_id),reactions:n(e,t.post.id),enableEmojiPicker:o,enablePostUsernameOverride:i,isEmbedVisible:Object(z.b)(e,t.post.id),isReadOnly:Object(m.isChannelReadOnlyById)(e,t.post.channel_id),teamId:s,pluginPostTypes:e.plugins.postTypes,channelIsArchived:0!==l.delete_at,channelType:l.type,channelDisplayName:l.display_name,isFlagged:null!=Object(c.get)(e,P.z.CATEGORY_FLAGGED_POST,t.post.id,null),compactDisplay:Object(c.get)(e,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.MESSAGE_DISPLAY,P.z.MESSAGE_DISPLAY_DEFAULT)===P.z.MESSAGE_DISPLAY_COMPACT}})(py);function my(e){return(my="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hy(e){return(hy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function by(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yy(e,t){return(yy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vy(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function _y(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function Ey(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}var wy=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=hy(t).call(this,e),n=!a||"object"!==my(a)&&"function"!=typeof a?by(r):a,gy(by(n),"handleResize",function(){n.setState({windowWidth:j.mb(),windowHeight:j.lb()}),T.m()&&"reply_textbox"===document.activeElement.id&&n.scrollToBottom()}),gy(by(n),"handleCardClick",function(e){e&&n.props.actions.selectPostCard(e)}),gy(by(n),"handleCardClickPost",function(e){e&&n.props.actions.selectPostCard(e)}),gy(by(n),"onBusy",function(e){n.setState({isBusy:e})}),gy(by(n),"filterPosts",function(e,t,n){var r=[];return e.forEach(function(e){"system_ephemeral"===e.type&&e.create_at<n||e.root_id===t.id&&r.unshift(e)}),r}),gy(by(n),"scrollToBottom",function(){Hl()(".post-right__scroll")[0]&&Hl()(".post-right__scroll").parent().scrollTop(Hl()(".post-right__scroll")[0].scrollHeight)}),gy(by(n),"updateFloatingTimestamp",function(){if(j.U()&&n.props.posts){for(var e=n.refs.rhspostlist.childNodes,t=n.refs.rhspostlist.getBoundingClientRect(),r="",a=0;a<e.length;a++)if(e[a].offsetTop+t.top-100>0){r=n.props.posts[a].id;break}r!==n.state.topRhsPostId&&n.setState({topRhsPostId:r})}}),gy(by(n),"handleScroll",function(){n.updateFloatingTimestamp(),n.state.isScrolling||n.setState({isScrolling:!0}),n.scrollStopAction.fireAfter(P.Q.SCROLL_DELAY)}),gy(by(n),"handleScrollStop",function(){n.setState({isScrolling:!1})}),gy(by(n),"getSidebarBody",function(){return n.refs.sidebarbody}),n.scrollStopAction=new Vl(n.handleScrollStop);var o=(new Date).getTime();return n.state={windowWidth:j.mb(),windowHeight:j.lb(),isScrolling:!1,topRhsPostId:0,openTime:o},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yy(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.scrollToBottom(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.selected&&e.selected&&this.props.selected.id!==e.selected.id&&this.setState({openTime:(new Date).getTime()})}},{key:"componentDidUpdate",value:function(e){var t=e.posts||[],n=this.props.posts||[];(this.props.socketConnectionStatus&&!e.socketConnectionStatus&&this.props.actions.getPostThread(this.props.selected.id),t.length>=n.length)||n[n.length-1].user_id===this.props.currentUserId&&this.scrollToBottom()}},{key:"shouldComponentUpdate",value:function(e,t){return!j.c(t.postsArray,this.props.posts)||(!j.c(t.selected,this.props.selected)||(e.previewEnabled!==this.props.previewEnabled||(t.isBusy!==this.state.isBusy||(t.isScrolling!==this.state.isScrolling||t.topRhsPostId!==this.state.topRhsPostId))))}},{key:"render",value:function(){if(null==this.props.posts||null==this.props.selected)return E.a.createElement("div",null);var e=this.filterPosts(this.props.posts,this.props.selected,this.state.openTime),t=this.props,n=t.selected,r=t.currentUserId,a=n.create_at;!a&&this.props.posts.length>0&&(a=this.props.posts[this.props.posts.length-1].create_at);for(var o,i=j.s(a),s=i,l=[],c=e.length,u=0;u<c;u++){var p=e[u],d=u>0?e[u-1].id:"",m=j.s(p.create_at);m.toDateString()!==s.toDateString()&&(s=m,l.push(E.a.createElement(gp,{key:m,date:m})));var f=p.id?p.id:p.pending_post_id;l.push(E.a.createElement(Jb,{key:f+"commentKey",ref:p.id,post:p,previousPostId:d,teamId:this.props.channel.team_id,currentUserId:r,isBusy:this.state.isBusy,removePost:this.props.actions.removePost,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,handleCardClick:this.handleCardClickPost}))}var h=n.type===P.Q.PostTypes.FAKE_PARENT_DELETED,b=0!==this.props.channel.delete_at;if(h||(o=b?E.a.createElement("div",{className:"channel-archived-warning"},E.a.createElement(Bu.b,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."})):E.a.createElement("div",{className:"post-create__container"},E.a.createElement(lp,{channelId:n.channel_id,rootId:n.id,rootDeleted:n.state===L.Posts.POST_DELETED,latestPostId:c>0?e[c-1].id:n.id,getSidebarBody:this.getSidebarBody}))),this.props.channel.type===P.Q.DM_CHANNEL){var y=j.u(this.props.channel.id);y&&y.delete_at&&(o=E.a.createElement("div",{className:"post-create-message"},E.a.createElement(Y.c,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a deactivated user."})))}return E.a.createElement("div",{id:"rhsContainer",className:"sidebar-right__body",ref:"sidebarbody"},E.a.createElement(Pp,{isScrolling:this.state.isScrolling,isMobile:j.U(),postId:this.state.topRhsPostId,isRhsPost:!0}),E.a.createElement(ay,{previousRhsState:this.props.previousRhsState}),E.a.createElement(Bl.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:_y,renderThumbVertical:Ey,renderView:vy,onScroll:this.handleScroll},E.a.createElement("div",{className:"post-right__scroll"},E.a.createElement("div",{role:"application",id:"rhsContent","aria-label":j.ab("accessibility.sections.rhsContent","message details complimentary region"),className:"post-right__content a11y__region","data-a11y-sort-order":"3","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0},!h&&E.a.createElement(gp,{date:i}),E.a.createElement(dy,{ref:n.id,post:n,commentCount:c,teamId:this.props.channel.team_id,currentUserId:this.props.currentUserId,previewCollapsed:this.props.previewCollapsed,previewEnabled:this.props.previewEnabled,isBusy:this.state.isBusy,handleCardClick:this.handleCardClick}),h&&i&&E.a.createElement(gp,{date:i}),E.a.createElement("div",{ref:"rhspostlist",className:"post-right-comments-container"},l)),o)))}}])&&fy(n.prototype,r),a&&fy(n,a),t}();gy(wy,"propTypes",{posts:v.a.arrayOf(v.a.object).isRequired,channel:v.a.object.isRequired,selected:v.a.object.isRequired,previousRhsState:v.a.string,currentUserId:v.a.string.isRequired,previewCollapsed:v.a.string.isRequired,previewEnabled:v.a.bool.isRequired,socketConnectionStatus:v.a.bool.isRequired,actions:v.a.shape({removePost:v.a.func.isRequired,selectPostCard:v.a.func.isRequired,getPostThread:v.a.func.isRequired}).isRequired});var Oy=Object(r.connect)(function(){var e=Object($a.makeGetPostsForThread)();return function(t){var n=Object(Ml.o)(t),r=Object(Ul.a)(t),a=null,o=[];n&&(o=e(t,{rootId:n.id}),a=Object(m.getChannel)(t,n.channel_id));var i=Object(c.get)(t,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.COLLAPSE_DISPLAY,P.z.COLLAPSE_DISPLAY_DEFAULT);return{selected:n,channel:a,posts:o,socketConnectionStatus:r.connected,previewCollapsed:i,previewEnabled:Object(c.getBool)(t,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.LINK_PREVIEW_DISPLAY,P.z.LINK_PREVIEW_DISPLAY_DEFAULT)}}},function(e){return{actions:Object(a.bindActionCreators)({removePost:x.removePost,selectPostCard:kl.e,getPostThread:x.getPostThread},e)}})(wy);function Sy(e){return(Sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Py(e){return(Py=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ty(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jy(e,t){return(jy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ky(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var My=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Py(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Sy(a)&&"function"!=typeof a?Ty(r):a,ky(Ty(n),"handleBack",function(e){switch(e.preventDefault(),n.props.previousRhsState){case P.A.SEARCH:n.props.actions.showSearchResults();break;case P.A.MENTION:n.props.actions.showMentions();break;case P.A.FLAG:n.props.actions.showFlaggedPosts();break;case P.A.PIN:n.props.actions.showPinnedPosts()}}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jy(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){var e,t;switch(this.props.previousRhsState){case P.A.SEARCH:case P.A.MENTION:t=E.a.createElement(Ec.a,{id:"backToResultsTooltip"},E.a.createElement(Y.c,{id:"rhs_header.backToResultsTooltip",defaultMessage:"Back to Search Results"}));break;case P.A.FLAG:t=E.a.createElement(Ec.a,{id:"backToResultsTooltip"},E.a.createElement(Y.c,{id:"rhs_header.backToFlaggedTooltip",defaultMessage:"Back to Flagged Posts"}));break;case P.A.PIN:t=E.a.createElement(Ec.a,{id:"backToResultsTooltip"},E.a.createElement(Y.c,{id:"rhs_header.backToPinnedTooltip",defaultMessage:"Back to Pinned Posts"}))}var n=E.a.createElement(Ec.a,{id:"closeSidebarTooltip"},E.a.createElement(Y.c,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close Sidebar"})),r=E.a.createElement(Ec.a,{id:"expandSidebarTooltip"},E.a.createElement(Y.c,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand Sidebar"})),a=E.a.createElement(Ec.a,{id:"shrinkSidebarTooltip"},E.a.createElement(Y.c,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink Sidebar"}));return t&&(e=E.a.createElement("a",{href:"#",onClick:this.handleBack,className:"sidebar--right__back"},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},E.a.createElement(Y.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},function(e){return E.a.createElement("i",{className:"fa fa-angle-left","aria-label":e})})))),E.a.createElement("div",{className:"sidebar--right__header"},E.a.createElement("span",{className:"sidebar--right__title"},e,E.a.createElement(Y.c,{id:"search_header.title5",defaultMessage:"Extra information"})),E.a.createElement("div",{className:"pull-right"},E.a.createElement("button",{type:"button",className:"sidebar--right__expand","aria-label":"Expand",onClick:this.props.actions.toggleRhsExpanded},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:r},E.a.createElement(Y.c,{id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"},function(e){return E.a.createElement("i",{className:"fa fa-expand","aria-label":e})})),E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:a},E.a.createElement(Y.c,{id:"rhs_header.expandTooltip.icon",defaultMessage:"Shrink Sidebar Icon"},function(e){return E.a.createElement("i",{className:"fa fa-compress","aria-label":e})}))),E.a.createElement("button",{type:"button",className:"sidebar--right__close","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:n},E.a.createElement(Y.c,{id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"},function(e){return E.a.createElement("i",{className:"fa fa-sign-out","aria-label":e})})))))}}])&&Cy(n.prototype,r),a&&Cy(n,a),t}();ky(My,"propTypes",{previousRhsState:v.a.oneOf(Object.values(P.A)),actions:v.a.shape({showMentions:v.a.func,showSearchResults:v.a.func,showFlaggedPosts:v.a.func,showPinnedPosts:v.a.func,closeRightHandSide:v.a.func,toggleRhsExpanded:v.a.func.isRequired})});var Ny=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({showMentions:kl.k,showSearchResults:kl.n,showFlaggedPosts:kl.j,showPinnedPosts:kl.l,closeRightHandSide:kl.b,toggleRhsExpanded:kl.p},e)}})(My);function Ry(e){return(Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ay(e){return(Ay=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ly(e,t){return(Ly=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uy(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function qy(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function Hy(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}var Fy=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ay(t).call(this,e),n=!a||"object"!==Ry(a)&&"function"!=typeof a?xy(r):a,Dy(xy(n),"handleScroll",function(){n.state.isScrolling||n.setState({isScrolling:!0}),n.scrollStopAction.fireAfter(P.Q.SCROLL_DELAY)}),Dy(xy(n),"handleScrollStop",function(){n.setState({isScrolling:!1})}),Dy(xy(n),"getSidebarBody",function(){return n.refs.sidebarbody}),Dy(xy(n),"handleClick",function(){j.U()&&C.c()}),n.scrollStopAction=new Vl(n.handleScrollStop),n.state={isScrolling:!1,topRhsPostCreateAt:0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ly(e,t)}(t,E.a.Component),n=t,(r=[{key:"shouldComponentUpdate",value:function(e,t){return!j.c(t.selected,this.props.selected)||t.isScrolling!==this.state.isScrolling}},{key:"render",value:function(){if(null==this.props.selected)return E.a.createElement("div",null);var e=this.props,t=e.selected,n=e.pluginPostCardTypes,r=e.teamUrl,a=t.type,o=null;if(n.hasOwnProperty(a)){var i=n[a].component;o=E.a.createElement(i,{post:t})}o||(o=E.a.createElement("div",{className:"info-card"},E.a.createElement(Oa.a,{message:t.props&&t.props.card})));var s=E.a.createElement(Fb,{userId:t.user_id,hideStatus:!0,disablePopover:!0});t.props.override_username&&this.props.enablePostUsernameOverride&&(s=E.a.createElement(Fb,{userId:t.user_id,hideStatus:!0,disablePopover:!0,overwriteName:t.props.override_username}));var l=E.a.createElement(Sm,{compactDisplay:!1,post:t,userId:t.user_id});return E.a.createElement("div",{className:"sidebar-right__body sidebar-right__card",ref:"sidebarbody"},E.a.createElement(Ny,{previousRhsState:this.props.previousRhsState}),E.a.createElement(Bl.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:qy,renderThumbVertical:Hy,renderView:Uy,onScroll:this.handleScroll},E.a.createElement("div",{className:"post-right__scroll"},o,E.a.createElement("div",{className:"d-flex post-card--info"},E.a.createElement("div",{className:"post-card--post-by overflow--ellipsis"},E.a.createElement(Y.c,{id:"rhs_card.message_by",defaultMessage:"Message by {avatar} {user}",values:{user:s,avatar:l}})),E.a.createElement("div",{className:"post-card--view-post"},E.a.createElement(Fi.a,{to:"".concat(r,"/pl/").concat(t.id),className:"post__permalink",onClick:this.handleClick},E.a.createElement(Y.c,{id:"rhs_card.jump",defaultMessage:"Jump"})))))))}}])&&Iy(n.prototype,r),a&&Iy(n,a),t}();Dy(Fy,"propTypes",{selected:v.a.object,pluginPostCardTypes:v.a.object,previousRhsState:v.a.oneOf(Object.values(P.A)),enablePostUsernameOverride:v.a.bool,teamUrl:v.a.string}),Dy(Fy,"defaultProps",{pluginPostCardTypes:{}});var By=Object(r.connect)(function(e){var t=Object(Ml.p)(e);return{enablePostUsernameOverride:"true"===Object(u.getConfig)(e).EnablePostUsernameOverride,selected:t,pluginPostCardTypes:e.plugins.postCardTypes,teamUrl:Object(d.getCurrentRelativeTeamUrl)(e)}})(Fy),Gy=n(1767);function Vy(e){return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zy(e,t){return!t||"object"!==Vy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ky(e){return(Ky=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yy(e,t){return(Yy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zy(this,Ky(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yy(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement(Y.c,{id:"generic_icons.select",defaultMessage:"Select Icon"},function(e){return E.a.createElement("i",{className:"fa fa fa-plus-square",title:e})})}}])&&Wy(n.prototype,r),a&&Wy(n,a),t}();function Jy(e){return(Jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $y(e,t,n){return t&&Xy(e.prototype,t),n&&Xy(e,n),e}function eg(e,t){return!t||"object"!==Jy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tg(e){return(tg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ng(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rg(e,t)}function rg(e,t){return(rg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ag(e){return e.type===P.Q.DM_CHANNEL?"@"+e.display_name:e.type===P.Q.GM_CHANNEL?"@"+e.display_name.replace(/ /g,""):e.name}var og=function(e){function t(){return Zy(this,t),eg(this,tg(t).apply(this,arguments))}return ng(t,Mo["a"]),$y(t,[{key:"render",value:function(){var e=this.props,t=e.item,n="search-autocomplete__item";e.isSelection&&(n+=" selected a11y--focused");var r=ag(t),a=null;if(t.type===P.Q.DM_CHANNEL){var o=Object(j.u)(t.id);a=E.a.createElement(ko.a,{show:Boolean(o&&o.is_bot),className:"badge-popoverlist"})}return E.a.createElement("div",Object.assign({onClick:this.handleClick,className:n},Mo.a.baseProps),E.a.createElement(Qy,null),E.a.createElement("span",{className:"search-autocomplete__name"},r),a)}}]),t}(),ig=function(e){function t(){return Zy(this,t),eg(this,tg(t).apply(this,arguments))}return ng(t,jo["a"]),$y(t,[{key:"handlePretextChanged",value:function(e,t){var n=this,r=/\b(?:in|channel):\s*(\S*)$/i.exec(e.toLowerCase());if(r){var a=r[1];this.startNewRequest(a),Object(Yo.c)(a,function(e){if(!n.shouldCancelDispatch(a)){var r=e.sort(zo.sortChannelsByTypeAndDisplayName.bind(null,"en")),o=r.map(ag);t({matchedPretext:a,terms:o,items:r,component:og})}})}return Boolean(r)}}]),t}();function sg(e){return(sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cg(e,t){return!t||"object"!==sg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ug(e){return(ug=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pg(e,t){return(pg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=cg(this,ug(t).call(this,e))).suggestionReadOut=E.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pg(e,t)}(t,Ri["a"]),n=t,(r=[{key:"generateLabel",value:function(e){e.username?(this.currentLabel=e.username,(e.first_name||e.last_name)&&e.nickname?this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name," ").concat(e.nickname):e.nickname?this.currentLabel+=" ".concat(e.nickname):(e.first_name||e.last_name)&&(this.currentLabel+=" ".concat(e.first_name," ").concat(e.last_name))):e.type===P.Q.DM_CHANNEL||e.type===P.Q.GM_CHANNEL?this.currentLabel=e.display_name:this.currentLabel=e.name,this.currentLabel&&(this.currentLabel=this.currentLabel.toLowerCase()),this.announceLabel()}},{key:"getContent",value:function(){return Hl()(pu.a.findDOMNode(this.refs.popover)).find(".popover-content")}},{key:"renderChannelDivider",value:function(e){var t;return t=e===P.Q.OPEN_CHANNEL?E.a.createElement(Y.c,{id:"suggestion.search.public",defaultMessage:"Public Channels"}):e===P.Q.PRIVATE_CHANNEL?E.a.createElement(Y.c,{id:"suggestion.search.private",defaultMessage:"Private Channels"}):E.a.createElement(Y.c,{id:"suggestion.search.direct",defaultMessage:"Direct Messages"}),E.a.createElement("div",{key:e+"-divider",className:"search-autocomplete__divider"},E.a.createElement("span",null,t))}},{key:"render",value:function(){if(0===this.props.items.length)return null;for(var e=[],t=0;t<this.props.items.length;t++){var n=this.props.items[t],r=this.props.terms[t],a=r===this.props.selection,o=this.props.components[t];this.props.renderDividers&&(0!==t&&n.type===this.props.items[t-1].type||(n.type===P.Q.OPEN_CHANNEL?e.push(this.renderChannelDivider(P.Q.OPEN_CHANNEL)):n.type===P.Q.PRIVATE_CHANNEL?e.push(this.renderChannelDivider(P.Q.PRIVATE_CHANNEL)):0!==t&&this.props.items[t-1].type!==P.Q.OPEN_CHANNEL&&this.props.items[t-1].type!==P.Q.PRIVATE_CHANNEL||e.push(this.renderChannelDivider(P.Q.DM_CHANNEL)))),a&&(this.currentItem=n),e.push(E.a.createElement(o,{key:r,ref:r,item:n,term:r,matchedPretext:this.props.matchedPretext[t],isSelection:a,onClick:this.props.onCompleteWord}))}return E.a.createElement(Gy.a,{ref:"popover",id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},E.a.createElement("div",{ref:this.suggestionReadOut,"aria-live":"polite",className:"hidden-label"}),e)}}])&&lg(n.prototype,r),a&&lg(n,a),t}();function fg(e){return(fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bg(e,t){return!t||"object"!==fg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yg(e){return(yg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gg(e,t){return(gg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}dg(mg,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){dg(e,t,n[t])})}return e}({},Ri.a.propTypes));var vg=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bg(this,yg(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gg(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){if(0===this.props.items.length)return null;var e=this.props.items[0],t=this.props.terms[0],n=this.props.components[0],r=E.a.createElement(n,{key:t,ref:t,item:e,term:t,matchedPretext:this.props.matchedPretext[0],isSelection:!1,onClick:this.props.onCompleteWord});return E.a.createElement(Gy.a,{ref:"popover",id:"search-autocomplete__popover",className:"search-help-popover autocomplete visible",placement:"bottom"},r)}}])&&hg(n.prototype,r),a&&hg(n,a),t}();function _g(e){return(_g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Og(e,t,n){return t&&wg(e.prototype,t),n&&wg(e,n),e}function Sg(e,t){return!t||"object"!==_g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cg(e){return(Cg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tg(e,t)}function Tg(e,t){return(Tg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vg,"propTypes",{onCompleteWord:v.a.func.isRequired,items:v.a.array.isRequired,terms:v.a.array.isRequired,components:v.a.array.isRequired,matchedPretext:v.a.array.isRequired});var jg=function(e){function t(){return Eg(this,t),Sg(this,Cg(t).apply(this,arguments))}return Pg(t,Mo["a"]),Og(t,[{key:"render",value:function(){var e=this.props,t=e.item,n="search-autocomplete__item";e.isSelection&&(n+=" selected a11y--focused");var r=t.username,a="";return(t.first_name||t.last_name)&&t.nickname?a="- ".concat(j.z(t)," (").concat(t.nickname,")"):t.nickname?a="- (".concat(t.nickname,")"):(t.first_name||t.last_name)&&(a="- ".concat(j.z(t))),E.a.createElement("div",Object.assign({className:n,onClick:this.handleClick},Mo.a.baseProps),E.a.createElement(Qy,null),E.a.createElement("img",{alt:"",className:"profile-img rounded",src:j.J(t)}),E.a.createElement("div",{className:"mention--align"},E.a.createElement("span",null,r),E.a.createElement(ko.a,{show:Boolean(t.is_bot),className:"badge-autocomplete"}),E.a.createElement("span",{className:"mention__fullname"}," ",a)))}}]),t}(),kg=function(e){function t(){return Eg(this,t),Sg(this,Cg(t).apply(this,arguments))}return Pg(t,jo["a"]),Og(t,[{key:"handlePretextChanged",value:function(e,t){var n=this,r=/\bfrom:\s*(\S*)$/i.exec(e.toLowerCase());if(r){var a=r[1];this.startNewRequest(a),Object(cl.c)(a,function(e){if(!n.shouldCancelDispatch(a)){var r=Object.assign([],e.users),o=r.map(function(e){return e.username});t({matchedPretext:a,terms:o,items:r,component:jg})}})}return Boolean(r)}},{key:"allowDividers",value:function(){return!1}}]),t}(),Mg=n(2036),Ng=n.n(Mg);n(2043);function Rg(e){return(Rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ig(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ag(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xg(e,t,n){return t&&Ag(e.prototype,t),n&&Ag(e,n),e}function Lg(e,t){return!t||"object"!==Rg(t)&&"function"!=typeof t?Ug(e):t}function Dg(e){return(Dg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ug(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hg(e,t)}function Hg(e,t){return(Hg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fg=function(e){function t(e){var n;return Ig(this,t),(n=Lg(this,Dg(t).call(this,e))).handleDayClick=n.handleDayClick.bind(Ug(n)),n}return qg(t,Mo["a"]),xg(t,[{key:"handleDayClick",value:function(e){var t=e.toISOString().split("T")[0];this.props.onClick(t,this.props.matchedPretext)}},{key:"render",value:function(){return E.a.createElement(Ng.a,{onDayClick:this.handleDayClick,showOutsideDays:!0})}}]),t}(),Bg=function(e){function t(){return Ig(this,t),Lg(this,Dg(t).apply(this,arguments))}return qg(t,jo["a"]),xg(t,[{key:"handlePretextChanged",value:function(e,t){var n=/\b(?:on|before|after):\s*(\S*)$/i.exec(e.toLowerCase());if(n){var r=n[1];this.startNewRequest(r);var a=Object.assign([],[{label:"Selected Date",date:r}]);t({matchedPretext:r,terms:a.map(function(e){return e.date}),items:a,component:Fg})}return Boolean(n)}},{key:"allowDividers",value:function(){return!1}},{key:"presentationType",value:function(){return"date"}}]),t}();function Gg(e){var t,n,r=e.iconComponent,a=e.ariaLabel,o=e.buttonClass,i=e.buttonId,s=e.onClick,l=e.tooltipKey,c=e.tooltipText,u={flaggedPosts:{class:"text-nowrap",id:"flaggedTooltip",messageID:Object(Me.b)("channel_header.flagged"),message:"Flagged Posts"},pinnedPosts:{class:"",id:"pinnedPostTooltip",messageID:Object(Me.b)("channel_header.pinnedPosts"),message:"Pinned Posts"},recentMentions:{class:"",id:"recentMentionsTooltip",messageID:Object(Me.b)("channel_header.recentMentions"),message:"Recent Mentions"},search:{class:"",id:"searchTooltip",messageID:Object(Me.b)("channel_header.search"),message:"Search"}};return t="plugin"===l&&c?E.a.createElement(Ec.a,{id:"pluginTooltip",className:""},E.a.createElement("span",null,c)):function(e){return null==u[e]?null:E.a.createElement(Ec.a,{id:u[e].id,className:u[e].class},E.a.createElement(Y.c,{id:u[e].messageID,defaultMessage:u[e].message}))}(l),a&&(n="".concat(Object(j.ab)(u[l].messageID,u[l].message))),t?E.a.createElement("div",{className:"flex-child"},E.a.createElement(_c.a,{trigger:["hover"],delayShow:P.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:t},E.a.createElement("button",{id:i,"aria-label":n,className:o||"channel-header__icon icon--hidden style--none",onClick:s},r))):E.a.createElement("div",{className:"flex-child"},E.a.createElement("button",{id:i,className:o||"channel-header__icon icon--hidden style--none",onClick:s},r))}function Vg(e){return(Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zg(e,t){return!t||"object"!==Vg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kg(e){return(Kg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yg(e,t){return(Yg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Gg.propTypes={ariaLabel:v.a.bool,buttonClass:v.a.string,buttonId:v.a.string.isRequired,iconComponent:v.a.element.isRequired,onClick:v.a.func.isRequired,tooltipKey:v.a.string,tooltipText:v.a.string};var Qg=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zg(this,Kg(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yg(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){return E.a.createElement(E.a.Fragment,null,this.props.withTitle&&E.a.createElement("h4",null,E.a.createElement(Y.c,{id:"search_bar.usage.title",defaultMessage:"Search Options"})),E.a.createElement(Bu.b,{id:"search_bar.usage.tips",defaultMessage:'* Use **"quotation marks"** to search for phrases\\n* Use **from:** to find posts from specific users and **in:** to find posts in specific channels\\n* Use **on:** to find posts on a specific date\\n* Use **before:** to find posts before a specific date\\n* Use **after:** to find posts after a specific date'}))}}])&&Wg(n.prototype,r),a&&Wg(n,a),t}();function Jg(e){return(Jg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xg(e,t){return!t||"object"!==Jg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $g(e){return($g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ev(e,t){return(ev=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Qg,"propTypes",{withTitle:v.a.bool});var tv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xg(this,$g(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ev(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.mention",defaultMessage:"Mention Icon"},function(e){return E.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 20 20",version:"1.1",role:"icon","aria-label":e},E.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-1057.000000, -31.000000)",fill:"inherit"},E.a.createElement("g",null,E.a.createElement("g",{transform:"translate(1049.000000, 22.000000)"},E.a.createElement("path",{d:"M17.4296875,15.8867188 C15.9882812,15.8867188 15.1210938,17.0351562 15.1210938,18.96875 C15.1210938,20.8789062 15.9882812,22.0507812 17.4179688,22.0507812 C18.8945312,22.0507812 19.84375,20.8554688 19.84375,18.96875 C19.84375,17.0820312 18.90625,15.8867188 17.4296875,15.8867188 Z M17.8398438,9.125 C23.3242188,9.125 27.25,12.59375 27.25,17.7734375 C27.25,21.5117188 25.5625,23.9609375 22.7734375,23.9609375 C21.4023438,23.9609375 20.265625,23.1992188 20.078125,22.0390625 L19.9609375,22.0390625 C19.46875,23.2226562 18.4140625,23.8789062 17.0429688,23.8789062 C14.6054687,23.8789062 12.9648438,21.8867188 12.9648438,18.9101562 C12.9648438,16.0625 14.6171875,14.09375 16.9960938,14.09375 C18.25,14.09375 19.3632812,14.7382812 19.8085938,15.7460938 L19.9375,15.7460938 L19.9375,14.328125 L21.9179688,14.328125 L21.9179688,20.984375 C21.9179688,21.7578125 22.328125,22.2851562 23.171875,22.2851562 C24.4726562,22.2851562 25.421875,20.6679688 25.421875,17.8320312 C25.421875,13.5664062 22.2929688,10.7421875 17.7109375,10.7421875 C13.1640625,10.7421875 9.90625,14.140625 9.90625,18.96875 C9.90625,24.1367188 13.3515625,27.0429688 18.109375,27.0429688 C19.5625,27.0429688 21.0507812,26.84375 21.7773438,26.5390625 L21.7773438,28.15625 C20.78125,28.484375 19.4570312,28.671875 18.0273438,28.671875 C12.2382812,28.671875 8.078125,25.109375 8.078125,18.8984375 C8.078125,13.0625 12.0859375,9.125 17.8398438,9.125 Z"}))))))}))}}])&&Zg(n.prototype,r),a&&Zg(n,a),t}(),nv=n(1599);function rv(e){return(rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function av(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iv(e){return(iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lv(e,t){return(lv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uv=P.Q.KeyCodes,pv=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=iv(t).call(this),e=!r||"object"!==rv(r)&&"function"!=typeof r?sv(n):r,cv(sv(e),"handleClose",function(){e.props.actions.closeRightHandSide()}),cv(sv(e),"handleKeyDown",function(e){j.S(e,uv.ESCAPE)&&(e.stopPropagation(),e.preventDefault())}),cv(sv(e),"handleChange",function(t){var n=t.target.value;e.props.actions.updateSearchTerms(n)}),cv(sv(e),"handleUserBlur",function(){setTimeout(function(){e.setState({focused:!1})},200)}),cv(sv(e),"handleClear",function(){e.props.actions.updateSearchTerms("")}),cv(sv(e),"handleUserFocus",function(){e.setState({focused:!0})}),cv(sv(e),"handleSearch",function(){var t,n=(t=regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.length){t.next=6;break}return t.next=3,e.props.actions.showSearchResults();case 3:r=t.sent,r.error||e.handleSearchOnSuccess();case 6:case"end":return t.stop()}},t)}),function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function i(e){av(o,r,a,i,s,"next",e)}function s(e){av(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()),cv(sv(e),"handleSearchOnSuccess",function(){j.U()&&e.search&&(e.search.value="")}),cv(sv(e),"handleSubmit",function(t){t.preventDefault();var n=e.props.searchTerms.trim();0!==n.length&&(e.handleSearch(n),e.search.blur())}),cv(sv(e),"searchMentions",function(t){t.preventDefault(),e.props.isMentionSearch?e.props.actions.closeRightHandSide():e.props.actions.showMentions()}),cv(sv(e),"getFlagged",function(t){t.preventDefault(),e.props.isFlaggedPosts?e.props.actions.closeRightHandSide():e.props.actions.showFlaggedPosts()}),cv(sv(e),"getSearch",function(t){e.search=t}),e.state={focused:!1},e.suggestionProviders=[new ig,new kg,new Bg],e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lv(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){j.U()&&setTimeout(function(){var e=document.querySelector(".app__body .sidebar--menu");e&&e.classList.remove("visible")})}},{key:"renderHintPopover",value:function(){if(j.U())return null;var e="search-help-popover";return!this.props.searchTerms&&this.state.focused&&(e+=" visible"),E.a.createElement(Gy.a,{id:"searchbar-help-popup",placement:"bottom",className:e},E.a.createElement(Qg,{withTitle:!0}))}},{key:"render",value:function(){var e,t;if(this.props.showMentionFlagBtns){var n=this.props.isMentionSearch?"active":"";e=E.a.createElement(Gg,{iconComponent:E.a.createElement(tv,{className:"icon icon__mentions","aria-hidden":"true"}),buttonClass:"channel-header__icon style--none "+n,buttonId:"channelHeaderMentionButton",onClick:this.searchMentions,tooltipKey:"recentMentions"});var r=this.props.isFlaggedPosts?"active":"";t=E.a.createElement(Gg,{iconComponent:E.a.createElement(Um,{className:"icon icon__flag"}),buttonClass:"channel-header__icon style--none "+r,buttonId:"channelHeaderFlagButton",onClick:this.getFlagged,tooltipKey:"flaggedPosts"})}var a=!this.props.isSearchingTerm&&this.props.searchTerms&&""!==this.props.searchTerms.trim(),o="search__form";this.state.focused&&(o+=" focused");var i=E.a.createElement(Ec.a,{id:"searchClearTooltip"},E.a.createElement(Y.c,{id:"search_bar.clear",defaultMessage:"Clear search query"}));return E.a.createElement("div",{className:"sidebar-right__table"},E.a.createElement("div",{className:"sidebar-collapse__container"},E.a.createElement("div",{id:"sidebarCollapse",className:"sidebar-collapse",onClick:this.handleClose},E.a.createElement(Y.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},function(e){return E.a.createElement("span",{className:"fa fa-2x fa-angle-left",title:e})}))),E.a.createElement("div",{id:"searchFormContainer",className:"search-form__container"},E.a.createElement("form",{role:"application",className:o,onSubmit:this.handleSubmit,style:dv.searchForm,autoComplete:"off"},E.a.createElement(nv.a,{id:"searchIcon",className:"search__icon","aria-hidden":"true"}),E.a.createElement(Ni.a,{ref:this.getSearch,id:"searchBox",tabIndex:"0",className:"search-bar a11y__region","data-a11y-sort-order":"8","aria-describedby":"searchbar-help-popup",placeholder:j.ab("search_bar.search","Search"),value:this.props.searchTerms,onFocus:this.handleUserFocus,onBlur:this.handleUserBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,listComponent:mg,dateComponent:vg,providers:this.suggestionProviders,type:"search",autoFocus:this.props.isFocus&&""===this.props.searchTerms,delayInputUpdate:!0,renderDividers:!0}),a&&E.a.createElement("div",{id:"searchClearButton",className:"sidebar__search-clear visible",onClick:this.handleClear},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"bottom",overlay:i},E.a.createElement("span",{className:"sidebar__search-clear-x","aria-hidden":"true"},""))),this.props.isSearchingTerm&&E.a.createElement(Od.a,null),this.renderHintPopover())),e,t)}}])&&ov(n.prototype,r),a&&ov(n,a),t}();cv(pv,"propTypes",{isSearchingTerm:v.a.bool,searchTerms:v.a.string,isMentionSearch:v.a.bool,isFlaggedPosts:v.a.bool,showMentionFlagBtns:v.a.bool,isFocus:v.a.bool,actions:v.a.shape({updateSearchTerms:v.a.func,showSearchResults:v.a.func,showMentions:v.a.func,showFlaggedPosts:v.a.func,closeRightHandSide:v.a.func})}),cv(pv,"defaultProps",{showMentionFlagBtns:!0,isFocus:!1});var dv={searchForm:{overflow:"visible"}};var mv=Object(r.connect)(function(e){var t=Object(Ml.k)(e);return{isSearchingTerm:Object(Ml.g)(e),searchTerms:Object(Ml.m)(e),isMentionSearch:t===P.A.MENTION,isFlaggedPosts:t===P.A.FLAG}},function(e){return{actions:Object(a.bindActionCreators)({updateSearchTerms:kl.r,showSearchResults:kl.n,showMentions:kl.k,showFlaggedPosts:kl.j,closeRightHandSide:kl.b},e)}})(pv),fv=n(301),hv=n(2044);function bv(e){return(bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gv(e,t){return!t||"object"!==bv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vv(e){return(vv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _v(e,t){return(_v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ev=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gv(this,vv(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_v(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){var e=E.a.createElement(Ec.a,{id:"closeSidebarTooltip"},E.a.createElement(Y.c,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close Sidebar"})),t=E.a.createElement(Ec.a,{id:"expandSidebarTooltip"},E.a.createElement(Y.c,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand Sidebar"})),n=E.a.createElement(Ec.a,{id:"shrinkSidebarTooltip"},E.a.createElement(Y.c,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink Sidebar"}));return E.a.createElement("div",{className:"sidebar--right__header"},E.a.createElement("span",{className:"sidebar--right__title"},this.props.children),E.a.createElement("div",{className:"pull-right"},E.a.createElement("button",{type:"button",className:"sidebar--right__expand","aria-label":"Expand",onClick:this.props.actions.toggleRhsExpanded},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:t},E.a.createElement(Y.c,{id:"rhs_header.expandSidebarTooltip.icon",defaultMessage:"Expand Sidebar Icon"},function(e){return E.a.createElement("i",{className:"fa fa-expand","aria-label":e})})),E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:n},E.a.createElement(Y.c,{id:"rhs_header.expandTooltip.icon",defaultMessage:"Shrink Sidebar Icon"},function(e){return E.a.createElement("i",{className:"fa fa-compress","aria-label":e})}))),E.a.createElement("button",{id:"searchResultsCloseButton",type:"button",className:"sidebar--right__close","aria-label":"Close",onClick:this.props.actions.closeRightHandSide},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:e},E.a.createElement(Y.c,{id:"rhs_header.closeTooltip.icon",defaultMessage:"Close Sidebar Icon"},function(e){return E.a.createElement("i",{className:"fa fa-sign-out","aria-label":e})})))))}}])&&yv(n.prototype,r),a&&yv(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ev,"propTypes",{children:v.a.element,actions:v.a.shape({closeRightHandSide:v.a.func,toggleRhsExpanded:v.a.func.isRequired})});var wv=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({closeRightHandSide:kl.b,toggleRhsExpanded:kl.p},e)}})(Ev);function Ov(e){return(Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cv(e,t){return!t||"object"!==Ov(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pv(e){return(Pv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tv(e,t){return(Tv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cv(this,Pv(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tv(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.reply",defaultMessage:"Reply Icon"},function(e){return E.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",width:"17px",height:"17px",viewBox:"-158 242 18 18",style:kv,role:"icon","aria-label":e},E.a.createElement("path",{d:"M-142.2,252.6c-2-3-4.8-4.7-8.3-4.8v-3.3c0-0.2-0.1-0.3-0.2-0.3s-0.3,0-0.4,0.1l-6.9,6.2c-0.1,0.1-0.1,0.2-0.1,0.3 c0,0.1,0,0.2,0.1,0.3l6.9,6.4c0.1,0.1,0.3,0.1,0.4,0.1c0.1-0.1,0.2-0.2,0.2-0.4v-3.8c4.2,0,7.4,0.4,9.6,4.4c0.1,0.1,0.2,0.2,0.3,0.2 c0,0,0.1,0,0.1,0c0.2-0.1,0.3-0.3,0.2-0.4C-140.2,257.3-140.6,255-142.2,252.6z M-150.8,252.5c-0.2,0-0.4,0.2-0.4,0.4v3.3l-6-5.5 l6-5.3v2.8c0,0.2,0.2,0.4,0.4,0.4c3.3,0,6,1.5,8,4.5c0.5,0.8,0.9,1.6,1.2,2.3C-144,252.8-147.1,252.5-150.8,252.5z"}))}))}}])&&Sv(n.prototype,r),a&&Sv(n,a),t}(),kv={enableBackground:"new -158 242 18 18"};function Mv(e){return(Mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rv(e,t){return!t||"object"!==Mv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Iv(e){return(Iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Av(e,t){return(Av=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Rv(this,Iv(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Av(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e="",t="comment-icon__container";this.props.commentCount>0?(t+=" icon--show",e=E.a.createElement("span",{className:"comment-count"},this.props.commentCount)):""!==this.props.searchStyle&&(t=t+" "+this.props.searchStyle);var n=E.a.createElement(Ec.a,{id:"comment-icon-tooltip",className:"hidden-xs"},E.a.createElement(Y.c,{id:"post_info.comment_icon.tooltip.reply",defaultMessage:"Reply"}));return E.a.createElement("button",{id:"".concat(this.props.location,"_commentIcon_").concat(this.props.postId),"aria-label":Object(j.ab)("post_info.comment_icon.tooltip.reply","Reply").toLowerCase(),className:t+" color--link style--none "+this.props.extraClass,onClick:this.props.handleCommentClick},E.a.createElement(_c.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:n},E.a.createElement("span",{className:"d-flex"},E.a.createElement(jv,{className:"comment-icon"}),e)))}}])&&Nv(n.prototype,r),a&&Nv(n,a),t}();xv(Lv,"propTypes",{location:v.a.oneOf([P.q.CENTER,P.q.SEARCH]).isRequired,handleCommentClick:v.a.func.isRequired,searchStyle:v.a.string,commentCount:v.a.number,postId:v.a.string,extraClass:v.a.string}),xv(Lv,"defaultProps",{searchStyle:"",commentCount:0,extraClass:"",location:P.q.CENTER});var Dv=n(1576);function Uv(e){return(Uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hv(e){return(Hv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bv(e,t){return(Bv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vv=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Hv(t).call(this,e),n=!a||"object"!==Uv(a)&&"function"!=typeof a?Fv(r):a,Gv(Fv(n),"handleFocusRHSClick",function(e){e.preventDefault(),n.props.actions.selectPost(n.props.post)}),Gv(Fv(n),"handleJumpClick",function(){j.U()&&n.props.actions.closeRightHandSide(),n.props.actions.setRhsExpanded(!1),Q.a.push("/".concat(n.props.currentTeamName,"/pl/").concat(n.props.post.id))}),Gv(Fv(n),"handleCardClick",function(e){e&&n.props.actions.selectPostCard(e)}),Gv(Fv(n),"handleDropdownOpened",function(e){n.setState({dropdownOpened:e})}),Gv(Fv(n),"renderPostTime",function(){var e=n.props.post,t=!(L.Posts.POST_DELETED===e.state||Ql.isPostPendingOrFailed(e));return E.a.createElement(lf,{isPermalink:t,eventTime:e.create_at,postId:e.id,location:P.q.SEARCH})}),Gv(Fv(n),"getClassName",function(){var e="post post--thread";return n.props.compactDisplay&&(e+=" post--compact"),n.state.dropdownOpened&&(e+=" post--hovered"),e}),n.state={dropdownOpened:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bv(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.post,a=n.channelIsArchived,o=n.channelId,i=n.channelType,s=this.props.channelName;i===P.Q.DM_CHANNEL&&(s=E.a.createElement(Y.c,{id:"search_item.direct",defaultMessage:"Direct Message (with {username})",values:{username:j.v(j.u(o))}}));var l=!1;r.props&&r.props.from_webhook&&r.props.override_username&&this.props.enablePostUsernameOverride&&(e=r.props.override_username,l=!0);var c=E.a.createElement(Sm,{compactDisplay:this.props.compactDisplay,post:r,userId:r.user_id}),u=E.a.createElement("div",{className:"post__img"},c),p="";_t.j(this.props.post)&&(p+=" post--edited");var d,m,f,h,b,y=null;r.file_ids&&r.file_ids.length>0&&(y=E.a.createElement(fm,{post:r,compactDisplay:this.props.compactDisplay})),r.state===P.Q.POST_DELETED||r.state===L.Posts.POST_DELETED?d=E.a.createElement("p",null,E.a.createElement(Y.c,{id:"post_body.deleted",defaultMessage:"(message deleted)"})):(m=E.a.createElement(Xm,{location:P.q.SEARCH,postId:r.id,isFlagged:this.props.isFlagged}),r.props&&r.props.card&&(f=E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:E.a.createElement(Ec.a,null,E.a.createElement(Y.c,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},E.a.createElement("button",{className:"card-icon__container icon--show style--none",onClick:function(e){e.preventDefault(),t.handleCardClick(t.props.post)}},E.a.createElement(Rb,{className:"icon icon__info","aria-hidden":"true"})))),h=E.a.createElement("div",{className:"col__controls col__reply"},E.a.createElement(zp,{post:r,location:P.q.SEARCH,isFlagged:this.props.isFlagged,handleDropdownOpened:this.handleDropdownOpened,commentCount:this.props.commentCountForPost,isReadOnly:a||null}),E.a.createElement(Lv,{location:P.q.SEARCH,handleCommentClick:this.handleFocusRHSClick,postId:r.id,searchStyle:"search-item__comment"}),E.a.createElement("a",{onClick:this.handleJumpClick,className:"search-item__jump"},E.a.createElement(Y.c,{id:"search_item.jump",defaultMessage:"Jump"}))),d=E.a.createElement(bb,{post:r,options:{searchTerm:this.props.term,searchMatches:this.props.matches}},E.a.createElement(Sb,{post:r,options:{searchTerm:this.props.term,searchMatches:this.props.matches,mentionHighlight:this.props.isMentionSearch}}))),r.is_pinned&&(b=E.a.createElement("span",{className:"post__pinned-badge"},E.a.createElement(Y.c,{id:"post_info.pinned",defaultMessage:"Pinned"})));var g=j.s(r.create_at);return E.a.createElement("div",{"data-testid":"search-item-container",className:"search-item__container"},E.a.createElement(gp,{date:g}),E.a.createElement("div",{className:this.getClassName()},E.a.createElement("div",{className:"search-channel__name"},s,a&&E.a.createElement("span",{className:"search-channel__archived"},E.a.createElement(Dv.a,{className:"icon icon__archive channel-header-archived-icon svg-text-color"}),E.a.createElement(Y.c,{id:"search_item.channelArchived",defaultMessage:"Archived"}))),E.a.createElement("div",{role:"application",className:"post__content"},u,E.a.createElement("div",null,E.a.createElement("div",{className:"post__header"},E.a.createElement("div",{className:"col col__name"},E.a.createElement(Fb,{userId:r.user_id,overwriteName:e,disablePopover:l,isRHS:!0}),E.a.createElement(ko.a,{show:Boolean(r.props&&r.props.from_webhook&&!this.props.isBot)})),E.a.createElement("div",{className:"col"},this.renderPostTime(),b,f,m),h),E.a.createElement("div",{className:"search-item-snippet post__body"},E.a.createElement("div",{className:p},d,y))))))}}])&&qv(n.prototype,r),a&&qv(n,a),t}();Gv(Vv,"propTypes",{post:v.a.object,matches:v.a.array,channelId:v.a.string,channelName:v.a.string,channelType:v.a.string,channelIsArchived:v.a.bool,compactDisplay:v.a.bool,isMentionSearch:v.a.bool,term:v.a.string,isFlagged:v.a.bool,currentTeamName:v.a.string,commentCountForPost:v.a.number,enablePostUsernameOverride:v.a.bool.isRequired,isBot:v.a.bool.isRequired,actions:v.a.shape({closeRightHandSide:v.a.func.isRequired,selectPost:v.a.func.isRequired,selectPostCard:v.a.func.isRequired,setRhsExpanded:v.a.func.isRequired}).isRequired}),Gv(Vv,"defaultProps",{isBot:!1,channelIsArchived:!1});var Wv=Object(r.connect)(function(){var e=Object($a.makeGetCommentCountForPost)();return function(t,n){var r=Object(u.getConfig)(t),a=Object(c.getMyPreferences)(t),o="true"===r.EnablePostUsernameOverride,i=n.post,s=Object(p.getUser)(t,i.user_id),l=Object(m.getChannel)(t,i.channel_id)||{delete_at:0};return{channelId:l.id,channelName:l.display_name,channelType:l.type,channelIsArchived:0!==l.delete_at,currentTeamName:Object(d.getCurrentTeam)(t).name,commentCountForPost:e(t,{post:i}),enablePostUsernameOverride:o,isFlagged:Object(Ql.isPostFlagged)(i.id,a),isBot:!!s&&s.is_bot}}},function(e){return{actions:Object(a.bindActionCreators)({closeRightHandSide:kl.b,selectPost:kl.g,selectPostCard:kl.f,setRhsExpanded:kl.i},e)}})(Vv);function zv(e){return(zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yv(e,t){return!t||"object"!==zv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qv(e){return(Qv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jv(e,t){return(Jv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yv(this,Qv(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jv(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){return E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.usage.dataRetention",defaultMessage:"Only messages posted in the last {days} days are returned. Contact your System Administrator for more detail.",values:{days:this.props.dataRetentionMessageRetentionDays}}))}}])&&Kv(n.prototype,r),a&&Kv(n,a),t}();function Xv(e){return(Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e_(e,t){return!t||"object"!==Xv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function t_(e){return(t_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n_(e,t){return(n_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Zv,"propTypes",{dataRetentionMessageRetentionDays:v.a.string});var r_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e_(this,t_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n_(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){return E.a.createElement(E.a.Fragment,null,E.a.createElement("ul",null,E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.usageFlag1",defaultMessage:"You haven't flagged any messages yet."})),E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.usageFlag2",defaultMessage:"You can add a flag to messages and comments by clicking the {flagIcon} icon next to the timestamp.",values:{flagIcon:E.a.createElement(Um,{className:"usage__icon"})}})),E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.usageFlag4",defaultMessage:"Flags are a way to mark messages for follow up. Your flags are personal, and cannot be seen by other users."})),this.props.dataRetentionEnableMessageDeletion&&E.a.createElement(Zv,{dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays})))}}])&&$v(n.prototype,r),a&&$v(n,a),t}();function a_(e){return(a_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i_(e,t){return!t||"object"!==a_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s_(e){return(s_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l_(e,t){return(l_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(r_,"propTypes",{dataRetentionEnableMessageDeletion:v.a.bool,dataRetentionMessageRetentionDays:v.a.string});var c_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i_(this,s_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l_(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){return E.a.createElement(E.a.Fragment,null,E.a.createElement("h4",{id:"noResultsMessage"},E.a.createElement(Y.c,{id:"search_results.noResults",defaultMessage:"No results found. Try again?"})),E.a.createElement("ul",null,E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.noResults.partialPhraseSuggestion",defaultMessage:'If you\'re searching a partial phrase (ex. searching "rea", looking for "reach" or "reaction"), append a * to your search term.'})),E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.noResults.stopWordsSuggestion",defaultMessage:'Two letter searches and common words like "this", "a" and "is" won\'t appear in search results due to the excessive results returned.'})),this.props.dataRetentionEnableMessageDeletion&&E.a.createElement(Zv,{dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays})))}}])&&o_(n.prototype,r),a&&o_(n,a),t}();function u_(e){return(u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d_(e,t){return!t||"object"!==u_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m_(e){return(m_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f_(e,t){return(f_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(c_,"propTypes",{dataRetentionEnableMessageDeletion:v.a.bool,dataRetentionMessageRetentionDays:v.a.string});var h_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d_(this,m_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f_(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){return E.a.createElement(E.a.Fragment,null,E.a.createElement("ul",null,E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.usagePin1",defaultMessage:"There are no pinned messages yet."})),E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.usagePin2",defaultMessage:"All members of this channel can pin important or useful messages."})),E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.usagePin3",defaultMessage:"Pinned messages are visible to all channel members."})),E.a.createElement("li",null,E.a.createElement(Y.c,{id:"search_results.usagePin4",defaultMessage:'To pin a message: Go to the message that you want to pin and click [...] > "Pin to channel".'})),this.props.dataRetentionEnableMessageDeletion&&E.a.createElement(Zv,{dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays})))}}])&&p_(n.prototype,r),a&&p_(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(h_,"propTypes",{dataRetentionEnableMessageDeletion:v.a.bool,dataRetentionMessageRetentionDays:v.a.string});var b_=n(1526);function y_(e){return(y_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g_(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function v_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function __(e){return(__=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w_(e,t){return(w_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S_=30;function C_(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function P_(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function T_(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}var j_=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=__(t).call(this,e),n=!a||"object"!==y_(a)&&"function"!=typeof a?E_(r):a,O_(E_(n),"handleResize",function(){n.setState({windowWidth:j.mb(),windowHeight:j.lb()})}),O_(E_(n),"scrollToTop",function(){n.refs.scrollbars.scrollToTop()}),O_(E_(n),"handleScroll",function(){if(!(n.props.isFlaggedPosts||n.props.isPinnedPosts||n.props.isSearchingTerm||n.props.isSearchGettingMore)){var e=n.refs.scrollbars.getScrollHeight();n.refs.scrollbars.getScrollTop()+n.refs.scrollbars.getClientHeight()+S_>=e&&n.loadMorePosts()}}),O_(E_(n),"loadMorePosts",Object(iu.debounce)(function(){n.props.actions.getMorePostsForSearch()},100)),n.state={windowWidth:j.mb(),windowHeight:j.lb()},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w_(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.scrollToTop(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"shouldComponentUpdate",value:function(e,t){return function(e,t,n,r){for(var a in t)if(t.hasOwnProperty(a)&&"results"!==a&&t[a]!==e[a])return!0;for(var o in r)if(r.hasOwnProperty(o)&&r[o]!==n[o])return!0;var i=e.results,s=t.results;if(i.length!==s.length)return!0;for(var l=0;l<i.length;l++)if(i[l]!==s[l])return!0;return!1}(this.props,e,this.state,t)}},{key:"componentDidUpdate",value:function(e){this.props.searchTerms!==e.searchTerms&&this.scrollToTop()}},{key:"render",value:function(){var e=this,t=this.props.results,n=!t||0===t.length,r=this.props.searchTerms,a=null,o=null;if(this.props.isSearchingTerm||this.props.isSearchingFlaggedPost||this.props.isSearchingPinnedPost||!this.props.isOpened)a=E.a.createElement("div",{className:"sidebar--right__subheader"},E.a.createElement("div",{className:"sidebar--right__loading"},E.a.createElement(b_.a,{text:j.ab("search_header.loading","Searching")})));else if(this.props.isFlaggedPosts&&n)a=E.a.createElement("div",{className:"sidebar--right__subheader"},E.a.createElement(r_,{dataRetentionEnableMessageDeletion:this.props.dataRetentionEnableMessageDeletion,dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays}));else if(this.props.isPinnedPosts&&n)a=E.a.createElement("div",{className:"sidebar--right__subheader"},E.a.createElement(h_,{dataRetentionEnableMessageDeletion:this.props.dataRetentionEnableMessageDeletion,dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays}));else if(!r&&n)a=E.a.createElement("div",{className:"sidebar--right__subheader"},E.a.createElement(Qg,null));else if(n)a=E.a.createElement("div",{className:"sidebar--right__subheader"},E.a.createElement(c_,{dataRetentionEnableMessageDeletion:this.props.dataRetentionEnableMessageDeletion,dataRetentionMessageRetentionDays:this.props.dataRetentionMessageRetentionDays}));else{var i;this.props.isPinnedPosts?(i=g_(t)).sort(function(e,t){return t.create_at-e.create_at}):i=t,a=i.map(function(t){return E.a.createElement(Wv,{key:t.id,compactDisplay:e.props.compactDisplay,post:t,matches:e.props.matches[t.id],term:e.props.isFlaggedPosts||e.props.isPinnedPosts||e.props.isMentionSearch?"":r,isMentionSearch:e.props.isMentionSearch})},this),this.props.isSearchAtEnd||this.props.isFlaggedPosts||this.props.isPinnedPosts||(o=E.a.createElement("div",{className:"loading-screen"},E.a.createElement("div",{className:"loading__content"},E.a.createElement("div",{className:"round round-1"}),E.a.createElement("div",{className:"round round-2"}),E.a.createElement("div",{className:"round round-3"}))))}var s=E.a.createElement(Y.c,{id:"search_header.results",defaultMessage:"Search Results"});return this.props.isMentionSearch?s=E.a.createElement(Y.c,{id:"search_header.title2",defaultMessage:"Recent Mentions"}):this.props.isFlaggedPosts?s=E.a.createElement(Y.c,{id:"search_header.title3",defaultMessage:"Flagged Posts"}):this.props.isPinnedPosts?s=E.a.createElement(Y.c,{id:"search_header.title4",defaultMessage:"Pinned posts in {channelDisplayName}",values:{channelDisplayName:this.props.channelDisplayName}}):this.props.isCard&&(s=E.a.createElement(Y.c,{id:"search_header.title5",defaultMessage:"Extra information"})),E.a.createElement("div",{className:"sidebar-right__body"},E.a.createElement(wv,null,s),E.a.createElement(Bl.a,{ref:"scrollbars",autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:P_,renderThumbVertical:T_,renderView:C_,onScroll:this.handleScroll},E.a.createElement("div",{id:"search-items-container",className:"search-items-container"},a,o)))}}])&&v_(n.prototype,r),a&&v_(n,a),t}();O_(j_,"propTypes",{results:v.a.array,matches:v.a.object,currentUser:v.a.object,searchTerms:v.a.string,isSearchingTerm:v.a.bool,isSearchingFlaggedPost:v.a.bool,isSearchingPinnedPost:v.a.bool,isSearchGettingMore:v.a.bool,isSearchAtEnd:v.a.bool,compactDisplay:v.a.bool,isMentionSearch:v.a.bool,isFlaggedPosts:v.a.bool,isPinnedPosts:v.a.bool,isCard:v.a.bool,channelDisplayName:v.a.string.isRequired,dataRetentionEnableMessageDeletion:v.a.bool.isRequired,dataRetentionMessageRetentionDays:v.a.string,isOpened:v.a.bool,actions:v.a.shape({getMorePostsForSearch:v.a.func.isRequired})}),O_(j_,"defaultProps",{matches:{},currentUser:{}});var k_=Object(r.connect)(function(){var e,t;return function(n){var r=Object(u.getConfig)(n),a="true"===r.DataRetentionEnableMessageDeletion,o=r.DataRetentionMessageRetentionDays,i="true"===r.ExperimentalViewArchivedChannels,s=Object($a.getSearchResults)(n);s&&s!==e&&(t=[],(e=s).forEach(function(e){if(e){var r=Object(m.getChannel)(n,e.channel_id);r&&0!==r.delete_at&&!i||t.push(e)}}));var l=Object(hv.getCurrentSearchForCurrentTeam)(n)||{};return{results:t,matches:Object($a.getSearchMatches)(n),currentUser:Object(p.getCurrentUser)(n),searchTerms:Object(Ml.l)(n),isSearchingTerm:Object(Ml.g)(n),isSearchingFlaggedPost:Object(Ml.e)(n),isSearchingPinnedPost:Object(Ml.f)(n),isSearchGettingMore:Object(Ml.d)(n),isSearchAtEnd:l.isEnd,compactDisplay:c.get(n,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.MESSAGE_DISPLAY,P.z.MESSAGE_DISPLAY_DEFAULT)===P.z.MESSAGE_DISPLAY_COMPACT,dataRetentionEnableMessageDeletion:a,dataRetentionMessageRetentionDays:o}}},function(e){return{actions:Object(a.bindActionCreators)({getMorePostsForSearch:fv.getMorePostsForSearch},e)}})(j_);function M_(e){return(M_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R_(e,t){return!t||"object"!==M_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I_(e){return(I_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A_(e,t){return(A_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),R_(this,I_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A_(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("div",{id:"rhsContainer",className:"sidebar-right__body",ref:"sidebarbody"},E.a.createElement(wv,null,this.props.title),E.a.createElement(I.a,{pluggableName:"RightHandSidebarComponent",pluggableId:this.props.pluggableId}))}}])&&N_(n.prototype,r),a&&N_(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(x_,"propTypes",{title:v.a.oneOfType([v.a.string,v.a.object]),pluggableId:v.a.string.isRequired});var L_=Object(r.connect)(function(e){var t=e.plugins.components.RightHandSidebarComponent,n=Object(Ml.h)(e),r=t.find(function(e){return e.id===n});return{title:r?r.title:"",pluggableId:n}})(x_);function D_(e){return(D_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q_(e){return(q_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F_(e,t){return(F_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G_=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=q_(t).call(this,e),n=!a||"object"!==D_(a)&&"function"!=typeof a?H_(r):a,B_(H_(n),"determineTransition",function(){var e=window.getComputedStyle(n.sidebarRight.current).getPropertyValue("transition"),t=Boolean(e)&&"all 0s ease 0s"!==e;n.sidebarRight.current&&t?(n.setState({isOpened:n.props.isOpen}),n.sidebarRight.current.addEventListener("transitionend",n.onFinishTransition)):(n.setState({isOpened:!0}),n.sidebarRight.current&&n.sidebarRight.current.removeEventListener("transitionend",n.onFinishTransition))}),B_(H_(n),"onFinishTransition",function(e){"transform"===e.propertyName&&n.setState({isOpened:n.props.isOpen})}),B_(H_(n),"onShrink",function(){n.props.actions.setRhsExpanded(!1)}),n.sidebarRight=E.a.createRef(),n.state={isOpened:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F_(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.determineTransition),this.determineTransition()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.determineTransition),this.sidebarRight.current&&this.sidebarRight.current.removeEventListener("transitionend",this.onFinishTransition)}},{key:"componentDidUpdate",value:function(e){var t=e.searchVisible||e.postRightVisible,n=this.props.searchVisible||this.props.postRightVisible;!t&&n&&(Object(vt.d)("ui","ui_rhs_opened"),j.k()&&setTimeout(this.props.actions.scrollPostList,0));var r=this.props,a=r.actions,o=r.isPinnedPosts,i=r.channel;o&&e.isPinnedPosts===o&&i.id!==e.channel.id&&a.showPinnedPosts(i.id)}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.currentUserId,r=e.isFlaggedPosts,a=e.isMentionSearch,o=e.isPinnedPosts,i=e.postRightVisible,s=e.postCardVisible,l=e.previousRhsState,c=e.searchVisible,u=e.isPluginView,p=null,d="";this.props.isExpanded&&(d="sidebar--right--expanded");var m=null;n&&(m=E.a.createElement(mv,{isFocus:c&&!r&&!o}));var f="";return t&&(f=t.type===P.Q.DM_CHANNEL||t.type===P.Q.GM_CHANNEL?j.ab("rhs_root.direct","Direct Message"):t.display_name),c?p=E.a.createElement("div",{className:"sidebar--right__content"},E.a.createElement("div",{className:"search-bar__container channel-header alt"},m),E.a.createElement(k_,{isMentionSearch:a,isFlaggedPosts:r,isPinnedPosts:o,toggleSize:this.toggleSize,shrink:this.onShrink,channelDisplayName:f,isOpened:this.state.isOpened})):i?p=E.a.createElement("div",{className:"post-right__container"},E.a.createElement(Dl,{overlayType:"right"}),E.a.createElement("div",{className:"search-bar__container channel-header alt"},m),E.a.createElement(Oy,{previousRhsState:l,currentUserId:n,toggleSize:this.toggleSize,shrink:this.onShrink})):u?p=E.a.createElement("div",{className:"post-right__container"},E.a.createElement("div",{className:"search-bar__container channel-header alt"},m),E.a.createElement(L_,null)):s&&(p=E.a.createElement("div",{className:"post-right__container"},E.a.createElement("div",{className:"search-bar__container channel-header alt"},m),E.a.createElement(By,{previousRhsState:l}))),p||(d=""),E.a.createElement("div",{className:Rl()("sidebar--right",d,{"move--left":this.props.isOpen}),id:"sidebar-right",ref:this.sidebarRight},E.a.createElement("div",{onClick:this.onShrink,className:"sidebar--right__bg"}),E.a.createElement("div",{className:"sidebar-right-container"},p))}}])&&U_(n.prototype,r),a&&U_(n,a),t}();B_(G_,"propTypes",{isExpanded:v.a.bool.isRequired,isOpen:v.a.bool.isRequired,currentUserId:v.a.string.isRequired,channel:v.a.object,postRightVisible:v.a.bool,postCardVisible:v.a.bool,searchVisible:v.a.bool,isMentionSearch:v.a.bool,isFlaggedPosts:v.a.bool,isPinnedPosts:v.a.bool,isPluginView:v.a.bool,previousRhsState:v.a.string,actions:v.a.shape({setRhsExpanded:v.a.func.isRequired,showPinnedPosts:v.a.func.isRequired,scrollPostList:v.a.func.isRequired})});var V_=Object(r.connect)(function(e){var t=Object(Ml.k)(e),n=Object(Ml.n)(e),r=null;if(n&&null==(r=Object(m.getChannel)(e,n))){var a=e.views.channel.focusedPostId,o=Object($a.getPost)(e,a);null!=o&&(r=Object(m.getChannel)(e,o.channel_id))}return{isExpanded:Object(Ml.a)(e),isOpen:Object(Ml.c)(e),channel:r,currentUserId:Object(p.getCurrentUserId)(e),postRightVisible:Boolean(Object(Ml.s)(e)),postCardVisible:Boolean(Object(Ml.q)(e)),searchVisible:Boolean(t)&&t!==P.A.PLUGIN,previousRhsState:Object(Ml.j)(e),isMentionSearch:t===P.A.MENTION,isFlaggedPosts:t===P.A.FLAG,isPinnedPosts:t===P.A.PIN,isPluginView:t===P.A.PLUGIN}},function(e){return{actions:Object(a.bindActionCreators)({setRhsExpanded:kl.i,showPinnedPosts:kl.l,scrollPostList:Ea.j},e)}})(G_),W_=n(2385),z_=n(2045),K_=n.n(z_),Y_=n(2046),Q_=n.n(Y_);function J_(e){return(J_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X_(e){return(X_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eE(e,t){return(eE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nE=P.Q.Preferences,rE=P.Q.TutorialSteps,aE=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=X_(t).call(this,e),n=!a||"object"!==J_(a)&&"function"!=typeof a?$_(r):a,tE($_(n),"show",function(){n.setState({show:!0})}),tE($_(n),"hide",function(){n.setState({show:!1})}),tE($_(n),"handleNext",function(){if(n.state.currentScreen<n.props.screens.length-1)n.setState({currentScreen:n.state.currentScreen+1});else{if(n.props.diagnosticsTag){var e=n.props.diagnosticsTag;n.props.screens.length>1&&(e+="_"+(n.state.currentScreen+1).toString()),n.state.currentScreen===n.props.screens.length-1?e+="_okay":e+="_next",Object(vt.d)("tutorial",e)}var t=n.props,r=t.currentUserId,a=t.actions,o=a.closeRhsMenu,i=a.savePreferences,s=[{user_id:r,category:nE.TUTORIAL_STEP,name:r,value:(n.props.step+1).toString()}];o(),n.hide(),i(r,s)}}),tE($_(n),"skipTutorial",function(e){if(e.preventDefault(),n.props.diagnosticsTag){var t=n.props.diagnosticsTag;n.props.screens.length>1&&(t+="_"+n.state.currentScreen),t+="_skip",Object(vt.d)("tutorial",t)}var r=n.props,a=r.currentUserId,o=r.actions,i=[{user_id:a,category:nE.TUTORIAL_STEP,name:a,value:rE.FINISHED.toString()}];o.savePreferences(a,i)}),tE($_(n),"handleCircleClick",function(e,t){e.preventDefault(),n.setState({currentScreen:t})}),tE($_(n),"getTarget",function(){return n.refs.target}),n.state={currentScreen:0,show:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eE(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.state.currentScreen===this.props.screens.length-1?E.a.createElement(Y.c,{id:"tutorial_tip.ok",defaultMessage:"Okay"}):E.a.createElement(Y.c,{id:"tutorial_tip.next",defaultMessage:"Next"}),n=[];if(this.props.screens.length>1)for(var r=function(t){var r="circle";t===e.state.currentScreen&&(r+=" active"),n.push(E.a.createElement("a",{href:"#",key:"dotactive"+t,className:r,"data-screen":t,onClick:function(n){return e.handleCircleClick(n,t)}}))},a=0;a<this.props.screens.length;a++)r(a);var o=K_.a;return"tip-overlay--header"!==this.props.overlayClass&&"tip-overlay--sidebar"!==this.props.overlayClass&&"tip-overlay--header--up"!==this.props.overlayClass||(o=Q_.a),E.a.createElement("div",{id:"tipButton",className:"tip-div "+this.props.overlayClass,onClick:this.show},E.a.createElement("img",{alt:"tutorial tip",className:"tip-button",src:o,width:"35",onClick:this.show,ref:"target"}),E.a.createElement(ie.a,{show:this.state.show},E.a.createElement("div",{className:"tip-backdrop"})),E.a.createElement(ie.a,{placement:this.props.placement,show:this.state.show,rootClose:!0,onHide:this.hide,target:this.getTarget},E.a.createElement("div",{className:"tip-overlay "+this.props.overlayClass},E.a.createElement("div",{className:"arrow"}),this.props.screens[this.state.currentScreen],E.a.createElement("div",{className:"tutorial__footer"},E.a.createElement("div",{className:"tutorial__circles"},n),E.a.createElement("div",{className:"text-right"},E.a.createElement("button",{id:"tipNextButton",className:"btn btn-primary",onClick:this.handleNext},t),E.a.createElement("div",{className:"tip-opt"},E.a.createElement(Y.c,{id:"tutorial_tip.seen",defaultMessage:"Seen this before? "}),E.a.createElement("a",{href:"#",onClick:this.skipTutorial},E.a.createElement(Y.c,{id:"tutorial_tip.out",defaultMessage:"Opt out of these tips."}))))))))}}])&&Z_(n.prototype,r),a&&Z_(n,a),t}();tE(aE,"propTypes",{currentUserId:v.a.string.isRequired,step:v.a.number.isRequired,screens:v.a.array.isRequired,placement:v.a.string.isRequired,overlayClass:v.a.string,diagnosticsTag:v.a.string,actions:v.a.shape({closeRhsMenu:v.a.func.isRequired,savePreferences:v.a.func.isRequired})}),tE(aE,"defaultProps",{overlayClass:""});var oE=Object(r.connect)(function(e){var t=Object(p.getCurrentUserId)(e);return{currentUserId:t,step:Object(c.getInt)(e,P.z.TUTORIAL_STEP,t,0)}},function(e){return{actions:Object(a.bindActionCreators)({closeRhsMenu:kl.a,savePreferences:ll.savePreferences},e)}})(aE),iE=function(e){var t=e.toggleFunc,n=e.onBottom,r=[];r.push(E.a.createElement("div",null,E.a.createElement("h4",null,E.a.createElement(Y.c,{id:"sidebar_header.tutorial.title",defaultMessage:"Main Menu"})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"sidebar_header.tutorial.body1",defaultMessage:"The **Main Menu** is where you can **Invite New Members**, access your **Account Settings** and set your **Theme Color**."})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"sidebar_header.tutorial.body2",defaultMessage:"Team administrators can also access their **Team Settings** from this menu."})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"sidebar_header.tutorial.body3",defaultMessage:"System administrators will find a **System Console** option to administrate the entire system."}))));var a="right",o="left";return n&&(a="bottom",o="up"),E.a.createElement("div",{onClick:t},E.a.createElement(oE,{placement:a,screens:r,overlayClass:"tip-overlay--header--"+o,diagnosticsTag:"tutorial_tip_3_main_menu"}))};iE.propTypes={toggleFunc:v.a.func,onBottom:v.a.bool.isRequired};var sE=iE,lE=n(76);function cE(e){return(cE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uE(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){gE(e,t,n[t])})}return e}function dE(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function mE(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){dE(o,r,a,i,s,"next",e)}function s(e){dE(o,r,a,i,s,"throw",e)}i(void 0)})}}function fE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hE(e){return(hE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yE(e,t){return(yE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vE=Object(Y.g)({emailError:{id:Object(Me.b)("invite_member.emailError"),defaultMessage:"Please enter a valid email address"},firstname:{id:Object(Me.b)("invite_member.firstname"),defaultMessage:"First name"},lastname:{id:Object(Me.b)("invite_member.lastname"),defaultMessage:"Last name"},modalTitle:{id:Object(Me.b)("invite_member.modalTitle"),defaultMessage:"Discard Invitations?"},modalMessage:{id:Object(Me.b)("invite_member.modalMessage"),defaultMessage:"You have unsent invitations, are you sure you want to discard them?"},modalButton:{id:Object(Me.b)("invite_member.modalButton"),defaultMessage:"Yes, Discard"}}),_E=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=hE(t).call(this,e),n=!a||"object"!==cE(a)&&"function"!=typeof a?bE(r):a,gE(bE(n),"onHide",function(){n.setState({show:!1})}),gE(bE(n),"handleSubmit",mE(regeneratorRuntime.mark(function e(){var t,r,a,o,i,s,l,c,u,p,d,m,f,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=n.state.inviteIds,r=t.length,a=[],o=[],i=pE({},n.state.emailErrors),s=pE({},n.state.firstNameErrors),l=pE({},n.state.lastNameErrors),c=!0,u=0;u<r;u++)p={},d=t[u],p.email=pu.a.findDOMNode(n.refs["email"+d]).value.trim(),p.firstName=pu.a.findDOMNode(n.refs["first_name"+d]).value.trim(),p.lastName=pu.a.findDOMNode(n.refs["last_name"+d]).value.trim(),""===p.email&&0!==d||(p.email&&Object(lE.isEmail)(p.email)?i[d]="":(i[d]=n.props.intl.formatMessage(vE.emailError),c=!1),a.push(p));if(n.setState({emailErrors:i,firstNameErrors:s,lastNameErrors:l}),c&&0!==a.length){e.next=12;break}return e.abrupt("return");case 12:return a.forEach(function(e){o.push(e.email)}),n.setState({isSendingEmails:!0}),e.next=16,n.props.actions.sendEmailInvitesToTeam(n.props.teamId,o);case 16:m=e.sent,f=m.data,h=m.error,f?(n.handleHide(!1),n.setState({isSendingEmails:!1})):h&&("api.team.invite_members.already.app_error"===h.id?(i[h.detailed_error]=h.message,n.setState({emailErrors:i})):n.setState({serverError:h.message}),n.setState({isSendingEmails:!1}));case 20:case"end":return e.stop()}},e)}))),gE(bE(n),"handleHide",function(e){if(e){for(var t=!1,r=0;r<n.state.inviteIds.length;r++){var a=n.state.inviteIds[r];if(""!==pu.a.findDOMNode(n.refs["email"+a]).value.trim()){t=!0;break}}if(t)return void n.setState({showConfirmModal:!0})}n.clearFields(),n.setState({show:!1,showConfirmModal:!1})}),gE(bE(n),"addInviteFields",function(){var e=n.state.idCount+1,t=uE(n.state.inviteIds);t.push(e),n.setState({inviteIds:t,idCount:e})}),gE(bE(n),"clearFields",function(){for(var e=n.state.inviteIds,t=0;t<e.length;t++){var r=e[t];pu.a.findDOMNode(n.refs["email"+r]).value="",pu.a.findDOMNode(n.refs["first_name"+r]).value="",pu.a.findDOMNode(n.refs["last_name"+r]).value=""}n.setState({inviteIds:[0],idCount:0,emailErrors:{},firstNameErrors:{},lastNameErrors:{}})}),gE(bE(n),"removeInviteFields",function(e){var t=n.state.idCount,r=n.state.inviteIds.filter(function(t){return t!==e});r.length||r.push(++t),n.setState({inviteIds:r,idCount:t})}),gE(bE(n),"showGetTeamInviteLinkModal",function(){n.handleHide(!1),C.l()}),gE(bE(n),"handleKeyDown",function(e){j.S(e,P.Q.KeyCodes.ENTER)&&(e.preventDefault(),n.handleSubmit())}),gE(bE(n),"hideConfirmModal",function(){n.setState({showConfirmModal:!1})}),n.state={show:!0,inviteIds:[0],idCount:0,emailErrors:{},firstNameErrors:{},lastNameErrors:{},showConfirmModal:!1,isSendingEmails:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yE(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props.currentUser,t=this.props.intl.formatMessage;if(null!=e&&null!=this.props.teamType){for(var n=[],r=this.state.inviteIds,a=0;a<r.length;a++){var o=r[a],i=null;this.state.emailErrors[o]&&(i=E.a.createElement("label",{className:"control-label"},this.state.emailErrors[o]));var s=null;this.state.firstNameErrors[o]&&(s=E.a.createElement("label",{className:"control-label"},this.state.firstNameErrors[o]));var l=null;this.state.lastNameErrors[o]&&(l=E.a.createElement("label",{className:"control-label"},this.state.lastNameErrors[o]));var c=null;o&&(c=E.a.createElement("div",null,E.a.createElement("button",{type:"button",className:"btn btn-link remove__member",onClick:this.removeInviteFields.bind(this,o)},E.a.createElement("span",{className:"fa fa-trash",title:t({id:"generic_icons.remove",defaultMessage:"Remove Icon"})}))));var u="form-group invite";i&&(u+=" has-error");var p,d="form-group";s&&(d+=" has-error");var m="form-group";l&&(m+=" has-error"),p=E.a.createElement("div",{className:"row row--invite"},E.a.createElement("div",{className:"col-sm-6"},E.a.createElement("div",{className:d},E.a.createElement(ke.a,{onKeyDown:this.handleKeyDown,type:"text",className:"form-control",ref:"first_name"+o,placeholder:vE.firstname,maxLength:"64",disabled:!this.props.enableUserCreation,spellCheck:"false"}),s)),E.a.createElement("div",{className:"col-sm-6"},E.a.createElement("div",{className:m},E.a.createElement(ke.a,{onKeyDown:this.handleKeyDown,type:"text",className:"form-control",ref:"last_name"+o,placeholder:vE.lastname,maxLength:"64",disabled:!this.props.enableUserCreation,spellCheck:"false"}),l))),n[o]=E.a.createElement("div",{key:"key"+o},c,E.a.createElement("div",{className:u},E.a.createElement("input",{onKeyUp:this.displayNameKeyUp,onKeyDown:this.handleKeyDown,type:"text",ref:"email"+o,className:"form-control",placeholder:"email@domain.com",maxLength:"64",disabled:!this.props.enableUserCreation,spellCheck:"false",autoFocus:!0}),i),p)}var f=null;this.state.serverError&&(f=E.a.createElement("div",{className:"form-group has-error"},E.a.createElement("label",{className:"control-label"},this.state.serverError)));var h=null,b=null;if(this.props.enableUserCreation){h=E.a.createElement("div",null,f,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.addInviteFields},E.a.createElement(Y.c,{id:"invite_member.addAnother",defaultMessage:"Add another"})),E.a.createElement("br",null),E.a.createElement("br",null),E.a.createElement("span",null,E.a.createElement(Bu.b,{id:"invite_member.autoJoin",defaultMessage:"People invited automatically join the **{channel}** channel.",values:{channel:this.props.defaultChannelName}})));var y=E.a.createElement(Y.c,{id:"invite_member.send",defaultMessage:"Send Invitation"});this.state.inviteIds.length>1&&(y=E.a.createElement(Y.c,{id:"invite_member.send2",defaultMessage:"Send Invitations"})),b=E.a.createElement("button",{onClick:this.handleSubmit,type:"button",className:"btn btn-primary",disabled:this.state.isSendingEmails},E.a.createElement(b_.a,{loading:this.state.isSendingEmails,text:j.ab("invite_member.sending"," Sending")},y))}else if(this.props.enableUserCreation){var g=null;if(e&&"O"===this.props.teamType){var v=E.a.createElement("button",{className:"color--link style--none",onClick:this.showGetTeamInviteLinkModal},E.a.createElement(Y.c,{id:"invite_member.inviteLink",defaultMessage:"Team Invite Link"}));g=E.a.createElement("p",null,E.a.createElement(Y.c,{id:"invite_member.teamInviteLink",defaultMessage:"You can also invite people using the {link}.",values:{link:v}}))}h=E.a.createElement("div",null,E.a.createElement("p",null,E.a.createElement(Y.c,{id:"invite_member.content",defaultMessage:"Email is currently disabled for your team, and email invitations cannot be sent. Contact your System Administrator to enable email and email invitations."})),g)}else h=E.a.createElement("div",null,E.a.createElement("p",null,E.a.createElement(Y.c,{id:"invite_member.disabled",defaultMessage:"User creation has been disabled for your team. Please ask your Team Administrator for details."})));return E.a.createElement("div",null,E.a.createElement(K.a,{dialogClassName:"a11y__modal modal-invite-member",show:this.state.show,onHide:this.handleHide.bind(this,!0),onExited:this.props.onHide,enforceFocus:!this.state.showConfirmModal,backdrop:!this.state.isSendingEmails||"static",role:"dialog","aria-labelledby":"inviteMemberModalLabel"},E.a.createElement(K.a.Header,{closeButton:!this.state.isSendingEmails},E.a.createElement(K.a.Title,{componentClass:"h1",id:"inviteMemberModalLabel"},E.a.createElement(Y.c,{id:"invite_member.newMember",defaultMessage:"Send Email Invite"}))),E.a.createElement(K.a.Body,{ref:"modalBody"},E.a.createElement("form",null,n),h),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.handleHide.bind(this,!0),disabled:this.state.isSendingEmails},E.a.createElement(Y.c,{id:"invite_member.cancel",defaultMessage:"Cancel"})),b)),E.a.createElement(Xs.a,{title:t(vE.modalTitle),message:t(vE.modalMessage),confirmButtonText:t(vE.modalButton),show:this.state.showConfirmModal,onConfirm:this.handleHide.bind(this,!1),onCancel:this.hideConfirmModal}))}return null}}])&&fE(n.prototype,r),a&&fE(n,a),t}();gE(_E,"propTypes",{intl:Y.i.isRequired,enableUserCreation:v.a.bool.isRequired,currentUser:v.a.object.isRequired,defaultChannelName:v.a.string.isRequired,teamType:v.a.string.isRequired,teamId:v.a.string.isRequired,onHide:v.a.func.isRequired,actions:v.a.shape({sendEmailInvitesToTeam:v.a.func.isRequired}).isRequired});var EE=Object(Y.h)(_E);var wE=Object(r.connect)(function(e){var t="true"===Object(u.getConfig)(e).EnableUserCreation,n=Object(m.getChannelsNameMapInCurrentTeam)(e)[P.Q.DEFAULT_CHANNEL],r=Object(d.getCurrentTeam)(e);return{enableUserCreation:t,currentUser:Object(p.getCurrentUser)(e),defaultChannelName:n?n.display_name:"",teamType:r?r.type:"",teamId:r?r.id:""}},function(e){return{actions:Object(a.bindActionCreators)({sendEmailInvitesToTeam:l.sendEmailInvitesToTeam},e)}})(EE),OE=n(1589),SE=n(1571);function CE(e){return(CE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TE(e,t){return!t||"object"!==CE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jE(e){return(jE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kE(e,t){return(kE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ME=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),TE(this,jE(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kE(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"navbar_dropdown.leave.icon",defaultMessage:"Leave Team Icon"},function(e){return E.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 164 164",style:NE,role:"icon","aria-label":e},E.a.createElement("path",{d:"M26.023,164L26.023,7.035L26.022,0.32L137.658,0.32L137.658,164L124.228,164L124.228, 13.749L39.452,13.749L39.452,164L26.023, 164ZM118.876,164L118.876,18.619L58.137,32.918L58.137,149.701L118.876,164Z"}))}))}}])&&PE(n.prototype,r),a&&PE(n,a),t}(),NE={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421},RE=n(1581);function IE(e){return(IE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xE(e){return(xE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DE(e,t){return(DE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function UE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qE=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=xE(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==IE(a)&&"function"!=typeof a?LE(r):a,UE(LE(n),"handleKeyPress",function(e){Object(j.S)(e,P.Q.KeyCodes.ENTER)&&n.handleSubmit(e)}),UE(LE(n),"handleSubmit",function(){n.props.onHide(),n.props.actions.leaveTeam(n.props.currentTeamId,n.props.currentUserId),n.props.actions.toggleSideBarRightMenu()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DE(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.props.show&&document.addEventListener("keypress",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keypress",this.handleKeyPress)}},{key:"render",value:function(){return E.a.createElement(K.a,{dialogClassName:"a11y__modal",className:"modal-confirm",show:this.props.show,onHide:this.props.onHide,id:"leaveTeamModal",role:"dialog","aria-labelledby":"leaveTeamModalLabel"},E.a.createElement(K.a.Header,{closeButton:!1},E.a.createElement(K.a.Title,{componentClass:"h1",id:"leaveTeamModalLabel"},E.a.createElement(Y.c,{id:"leave_team_modal.title",defaultMessage:"Leave the team?"}))),E.a.createElement(K.a.Body,null,E.a.createElement(Y.c,{id:"leave_team_modal.desc",defaultMessage:"You will be removed from all public and private channels.  If the team is private you will not be able to rejoin the team.  Are you sure?"})),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.props.onHide,id:"leaveTeamNo"},E.a.createElement(Y.c,{id:"leave_team_modal.no",defaultMessage:"No"})),E.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.handleSubmit,id:"leaveTeamYes"},E.a.createElement(Y.c,{id:"leave_team_modal.yes",defaultMessage:"Yes"}))))}}])&&AE(n.prototype,r),a&&AE(n,a),t}();UE(qE,"propTypes",{currentUserId:v.a.string.isRequired,currentTeamId:v.a.string.isRequired,onHide:v.a.func.isRequired,show:v.a.bool.isRequired,intl:Y.i.isRequired,actions:v.a.shape({leaveTeam:v.a.func.isRequired,toggleSideBarRightMenu:v.a.func.isRequired})});var HE=Object(Y.h)(qE);var FE=Object(r.connect)(function(e){var t=P.r.LEAVE_TEAM;return{currentUserId:Object(p.getCurrentUserId)(e),currentTeamId:Object(d.getCurrentTeamId)(e),show:Object(RE.a)(e,t)}},function(e){return{actions:Object(a.bindActionCreators)({leaveTeam:l.removeUserFromTeam,toggleSideBarRightMenu:C.o},e)}})(HE),BE=n(1547),GE=n(1866);function VE(e){return(VE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zE(e){return(zE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YE(e,t){return(YE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var QE=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=zE(t).call(this,e))||"object"!==VE(a)&&"function"!=typeof a?KE(r):a).handleTermChange=n.handleTermChange.bind(KE(n)),n.nextPage=n.nextPage.bind(KE(n)),n.previousPage=n.previousPage.bind(KE(n)),n.search=n.search.bind(KE(n)),n.state={term:"",page:0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YE(e,t)}(t,E.a.Component),n=t,(r=[{key:"handleTermChange",value:function(e){this.setState({term:e})}},{key:"nextPage",value:function(){this.setState({page:this.state.page+1}),this.props.nextPage(this.state.page+1)}},{key:"previousPage",value:function(){this.setState({page:this.state.page-1})}},{key:"search",value:function(e){this.props.search(e),""!==e&&this.setState({page:0})}},{key:"render",value:function(){return E.a.createElement(GE.a,Object.assign({},this.props,{nextPage:this.nextPage,previousPage:this.previousPage,search:this.search,page:this.state.page,term:this.state.term,onTermChange:this.handleTermChange}))}}])&&WE(n.prototype,r),a&&WE(n,a),t}();function JE(e){return(JE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XE(e,t){return!t||"object"!==JE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $E(e){return($E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ew(e,t){return(ew=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(QE,"propTypes",{users:v.a.arrayOf(v.a.object),usersPerPage:v.a.number,total:v.a.number,extraInfo:v.a.object,nextPage:v.a.func.isRequired,search:v.a.func.isRequired,actions:v.a.arrayOf(v.a.func),actionProps:v.a.object,actionUserProps:v.a.object,focusOnMount:v.a.bool});var tw=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),XE(this,$E(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ew(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement(Y.c,{id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"},function(e){return E.a.createElement("i",{className:"fa fa-angle-down",title:e})})}}])&&ZE(n.prototype,r),a&&ZE(n,a),t}();function nw(e){return(nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rw(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function aw(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){rw(o,r,a,i,s,"next",e)}function s(e){rw(o,r,a,i,s,"throw",e)}i(void 0)})}}function ow(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iw(e){return(iw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lw(e,t){return(lw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uw=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=iw(t).call(this,e),n=!a||"object"!==nw(a)&&"function"!=typeof a?sw(r):a,cw(sw(n),"handleMakeMember",aw(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.currentUser,n.props.user.id!==t.id||!t.roles.includes("system_admin")){e.next=5;break}n.handleDemote(n.props.user,"team_user"),e.next=19;break;case 5:return e.next=7,n.props.actions.updateTeamMemberSchemeRoles(n.props.teamMember.team_id,n.props.user.id,!0,!1);case 7:if(r=e.sent,!(a=r.error)){e.next=13;break}n.setState({serverError:a.message}),e.next=19;break;case 13:if(n.props.actions.getUser(n.props.user.id),n.props.actions.getTeamMember(n.props.teamMember.team_id,n.props.user.id),n.props.user.id!==t.id){e.next=19;break}return e.next=18,n.props.actions.getMyTeamMembers();case 18:n.props.actions.getMyTeamUnreads();case 19:case"end":return e.stop()}},e)}))),cw(sw(n),"handleRemoveFromTeam",aw(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.removeUserFromTeamAndGetStats(n.props.teamMember.team_id,n.props.user.id);case 2:t=e.sent,(r=t.error)&&n.setState({serverError:r.message});case 5:case"end":return e.stop()}},e)}))),cw(sw(n),"handleMakeAdmin",aw(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.currentUser,n.props.user.id!==t.id||!t.roles.includes("system_admin")){e.next=5;break}n.handleDemote(n.props.user,"team_user team_admin"),e.next=10;break;case 5:return e.next=7,n.props.actions.updateTeamMemberSchemeRoles(n.props.teamMember.team_id,n.props.user.id,!0,!0);case 7:r=e.sent,(a=r.error)?n.setState({serverError:a.message}):(n.props.actions.getUser(n.props.user.id),n.props.actions.getTeamMember(n.props.teamMember.team_id,n.props.user.id));case 10:case"end":return e.stop()}},e)}))),cw(sw(n),"handleDemote",function(e,t,r){n.setState({serverError:n.state.serverError,showDemoteModal:!0,user:e,role:t,newRole:r})}),cw(sw(n),"handleDemoteCancel",function(){n.setState({serverError:null,showDemoteModal:!1,user:null,role:null,newRole:null})}),cw(sw(n),"handleDemoteSubmit",aw(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.updateTeamMemberSchemeRoles(n.props.teamMember.team_id,n.props.user.id,!0,!1);case 2:t=e.sent,(r=t.error)?n.setState({serverError:r.message}):(n.props.actions.getUser(n.props.user.id),Q.a.push(n.props.teamUrl));case 5:case"end":return e.stop()}},e)}))),n.state={serverError:null,showDemoteModal:!1,user:null,role:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lw(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){var e=null;this.state.serverError&&(e=E.a.createElement("div",{className:"has-error"},E.a.createElement("label",{className:"has-error control-label"},this.state.serverError)));var t=this.props,n=t.currentTeam,r=t.teamMember,a=t.user,o=E.a.createElement(Y.c,{id:"team_members_dropdown.member",defaultMessage:"Member"});(r.roles.length>0&&j.L(r.roles)||r.scheme_admin)&&(o=E.a.createElement(Y.c,{id:"team_members_dropdown.teamAdmin",defaultMessage:"Team Admin"})),a.roles.length>0&&j.W(a.roles)&&(o=E.a.createElement(Y.c,{id:"team_members_dropdown.systemAdmin",defaultMessage:"System Admin"}));var i=this.props.currentUser,s=(j.L(r.roles)||r.scheme_admin)&&!j.W(a.roles),l=!j.L(r.roles)&&!j.W(a.roles)&&!r.scheme_admin;a.delete_at>0&&(o=E.a.createElement(Y.c,{id:"team_members_dropdown.inactive",defaultMessage:"Inactive"}),s=!1,l=!1);var c=a.id!==i.id&&!n.group_constrained,u=null;if(a.id===i.id){var p=E.a.createElement(Y.c,{id:"team_members_dropdown.confirmDemoteRoleTitle",defaultMessage:"Confirm demotion from System Admin role"}),d=E.a.createElement("div",null,E.a.createElement(Y.c,{id:"team_members_dropdown.confirmDemoteDescription",defaultMessage:"If you demote yourself from the System Admin role and there is not another user with System Admin privileges, you'll need to re-assign a System Admin by accessing the Mattermost server through a terminal and running the following command."}),E.a.createElement("br",null),E.a.createElement("br",null),E.a.createElement(Y.c,{id:"team_members_dropdown.confirmDemotionCmd",defaultMessage:"platform roles system_admin {username}",vallues:{username:i.username}}),e),m=E.a.createElement(Y.c,{id:"team_members_dropdown.confirmDemotion",defaultMessage:"Confirm Demotion"});u=E.a.createElement(Xs.a,{show:this.state.showDemoteModal,title:p,message:d,confirmButtonText:m,onConfirm:this.handleDemoteSubmit,onCancel:this.handleDemoteCancel})}if(!c&&!l&&!s)return E.a.createElement("div",null,o);var f=this.props,h=f.index,b=f.totalUsers,y=!1;return b>3&&b-h<=3&&(y=!0),E.a.createElement(du.a,null,E.a.createElement("button",{id:"teamMembersDropdown_".concat(a.username),className:"dropdown-toggle theme color--link style--none",type:"button","aria-expanded":"true"},E.a.createElement("span",null,o," "),E.a.createElement(tw,null)),E.a.createElement("div",null,E.a.createElement(mu.a,{openLeft:!0,openUp:y,ariaLabel:j.ab("team_members_dropdown.menuAriaLabel","Team member role change")},E.a.createElement(Dp.a,{id:"removeFromTeam",show:c,onClick:this.handleRemoveFromTeam,text:j.ab("team_members_dropdown.leave_team","Remove From Team")}),E.a.createElement(Dp.a,{show:l,onClick:this.handleMakeAdmin,text:j.ab("team_members_dropdown.makeAdmin","Make Team Admin")}),E.a.createElement(Dp.a,{show:s,onClick:this.handleMakeMember,text:j.ab("team_members_dropdown.makeMember","Make Member")})),u,e))}}])&&ow(n.prototype,r),a&&ow(n,a),t}();cw(uw,"propTypes",{user:v.a.object.isRequired,currentUser:v.a.object.isRequired,teamMember:v.a.object.isRequired,teamUrl:v.a.string.isRequired,currentTeam:v.a.object.isRequired,index:v.a.number.isRequired,totalUsers:v.a.number.isRequired,actions:v.a.shape({getMyTeamMembers:v.a.func.isRequired,getMyTeamUnreads:v.a.func.isRequired,getUser:v.a.func.isRequired,getTeamMember:v.a.func.isRequired,getTeamStats:v.a.func.isRequired,getChannelStats:v.a.func.isRequired,updateTeamMemberSchemeRoles:v.a.func.isRequired,removeUserFromTeamAndGetStats:v.a.func.isRequired,updateUserActive:v.a.func.isRequired}).isRequired});var pw=Object(r.connect)(function(e){return{currentUser:Object(p.getCurrentUser)(e),currentChannelId:Object(m.getCurrentChannelId)(e),teamUrl:Object(d.getCurrentRelativeTeamUrl)(e),currentTeam:Object(d.getCurrentTeam)(e)}},function(e){return{actions:Object(a.bindActionCreators)({getMyTeamMembers:l.getMyTeamMembers,getMyTeamUnreads:l.getMyTeamUnreads,getUser:i.getUser,getTeamMember:l.getTeamMember,getTeamStats:l.getTeamStats,getChannelStats:s.getChannelStats,updateUserActive:i.updateUserActive,updateTeamMemberSchemeRoles:l.updateTeamMemberSchemeRoles,removeUserFromTeamAndGetStats:b.d},e)}})(uw);function dw(e){return(dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mw(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function fw(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){mw(o,r,a,i,s,"next",e)}function s(e){mw(o,r,a,i,s,"throw",e)}i(void 0)})}}function hw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bw(e){return(bw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gw(e,t){return(gw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _w=50,Ew=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=bw(t).call(this,e),n=!a||"object"!==dw(a)&&"function"!=typeof a?yw(r):a,vw(yw(n),"loadComplete",function(){n.setState({loading:!1})}),vw(yw(n),"nextPage",function(e){n.props.actions.loadProfilesAndTeamMembers(e+1,_w)}),vw(yw(n),"search",function(e){n.props.actions.setModalSearchTerm(e)}),n.searchTimeoutId=0,n.state={loading:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gw(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.props.actions.loadProfilesAndTeamMembers(0,P.Q.PROFILE_CHUNK_SIZE,this.props.currentTeamId).then(function(t){t.data&&e.loadComplete()}),this.props.actions.getTeamStats(this.props.currentTeamId)}},{key:"componentWillUnmount",value:function(){this.props.actions.setModalSearchTerm("")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);var n=e.searchTerm;if(""===n)return this.loadComplete(),void(this.searchTimeoutId="");var r=setTimeout(fw(regeneratorRuntime.mark(function a(){var o,i,s,l,c,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=e.actions,i=o.loadStatusesForProfilesList,s=o.loadTeamMembersForProfilesList,l=o.searchProfiles,a.next=3,l(n,{team_id:e.currentTeamId});case 3:if(c=a.sent,u=c.data,r===t.searchTimeoutId){a.next=7;break}return a.abrupt("return");case 7:t.setState({loading:!0}),i(u),s(u,e.currentTeamId).then(function(e){e.data&&t.loadComplete()});case 10:case"end":return a.stop()}},a)})),P.Q.SEARCH_TIMEOUT_MILLISECONDS);this.searchTimeoutId=r}}},{key:"render",value:function(){var e=null;this.props.canManageTeamMembers&&(e=[pw]);var t,n=this.props.teamMembers,r=this.props.users,a={};if(this.state.loading)t=null;else{t=[];for(var o=0;o<r.length;o++){var i=r[o];n[i.id]&&0===i.delete_at&&(t.push(i),a[i.id]={teamMember:n[i.id]})}}return E.a.createElement(QE,{users:t,usersPerPage:_w,total:this.props.totalTeamMembers,nextPage:this.nextPage,search:this.search,actions:e,actionUserProps:a,focusOnMount:!T.m()})}}])&&hw(n.prototype,r),a&&hw(n,a),t}();vw(Ew,"propTypes",{searchTerm:v.a.string.isRequired,users:v.a.arrayOf(v.a.object).isRequired,teamMembers:v.a.object.isRequired,currentTeamId:v.a.string.isRequired,totalTeamMembers:v.a.number.isRequired,canManageTeamMembers:v.a.bool,actions:v.a.shape({searchProfiles:v.a.func.isRequired,getTeamStats:v.a.func.isRequired,loadProfilesAndTeamMembers:v.a.func.isRequired,loadStatusesForProfilesList:v.a.func.isRequired,loadTeamMembersForProfilesList:v.a.func.isRequired,setModalSearchTerm:v.a.func.isRequired}).isRequired});var ww=Object(r.connect)(function(e,t){var n,r=Object(D.haveITeamPermission)(e,{team:t.teamId,permission:L.Permissions.MANAGE_TEAM_ROLES}),a=e.views.search.modalSearch;n=a?Object(p.searchProfilesInCurrentTeam)(e,a):Object(p.getProfilesInCurrentTeam)(e);var o=Object(d.getCurrentTeamStats)(e)||{active_member_count:0};return{searchTerm:a,users:n,teamMembers:Object(d.getMembersInCurrentTeam)(e)||{},currentTeamId:e.entities.teams.currentTeamId,totalTeamMembers:o.active_member_count,canManageTeamMembers:r}},function(e){return{actions:Object(a.bindActionCreators)({searchProfiles:i.searchProfiles,getTeamStats:l.getTeamStats,loadProfilesAndTeamMembers:cl.g,loadStatusesForProfilesList:f.b,loadTeamMembersForProfilesList:cl.m,setModalSearchTerm:BE.a},e)}})(Ew);function Ow(e){return(Ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cw(e){return(Cw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tw(e,t){return(Tw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kw=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Cw(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Ow(a)&&"function"!=typeof a?Pw(r):a,jw(Pw(n),"onHide",function(){n.props.onHide()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tw(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function(){var e="";return this.props.currentTeam&&(e=this.props.currentTeam.display_name),E.a.createElement(K.a,{dialogClassName:"a11y__modal more-modal",show:this.props.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"teamMemberModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"teamMemberModalLabel"},E.a.createElement(Y.c,{id:"team_member_modal.members",defaultMessage:"{team} Members",values:{team:e}}))),E.a.createElement(K.a.Body,null,E.a.createElement(ww,{teamId:this.props.currentTeam.id})))}}])&&Sw(n.prototype,r),a&&Sw(n,a),t}();jw(kw,"propTypes",{show:v.a.bool.isRequired,currentTeam:v.a.object.isRequired,onHide:v.a.func.isRequired,onLoad:v.a.func});var Mw=Object(r.connect)(function(e){var t=P.r.TEAM_MEMBERS;return{currentTeam:Object(d.getCurrentTeam)(e),show:Object(RE.a)(e,t)}})(kw),Nw=n(1762),Rw=n.n(Nw),Iw=n(1508),Aw=n(1519),xw=n(1790),Lw=n(1600);function Dw(e){return(Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ww(e,t,n[t])})}return e}function qw(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Hw(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){qw(o,r,a,i,s,"next",e)}function s(e){qw(o,r,a,i,s,"throw",e)}i(void 0)})}}function Fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bw(e){return(Bw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vw(e,t){return(Vw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ww(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zw=["image/jpeg","image/png","image/bmp"],Kw=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Bw(t).call(this,e),n=!a||"object"!==Dw(a)&&"function"!=typeof a?Gw(r):a,Ww(Gw(n),"handleAllowedDomainsSubmit",Hw(regeneratorRuntime.mark(function e(){var t,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={serverError:"",clientError:""},(r=Uw({},n.props.team)).allowed_domains=n.state.allowed_domains,e.next=5,n.props.actions.patchTeam(r);case 5:a=e.sent,(o=a.error)?(t.serverError=o.message,n.setState(t)):n.updateSection("");case 8:case"end":return e.stop()}},e)}))),Ww(Gw(n),"handleOpenInviteSubmit",Hw(regeneratorRuntime.mark(function e(){var t,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={serverError:"",clientError:""},(r=Uw({},n.props.team)).allow_open_invite=n.state.allow_open_invite,e.next=5,n.props.actions.patchTeam(r);case 5:a=e.sent,(o=a.error)?(t.serverError=o.message,n.setState(t)):n.updateSection("");case 8:case"end":return e.stop()}},e)}))),Ww(Gw(n),"handleNameSubmit",Hw(regeneratorRuntime.mark(function e(){var t,r,a,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={serverError:"",clientError:""},r=!0,(a=n.state.name.trim())?a.length<P.Q.MIN_TEAMNAME_LENGTH?(t.clientError=E.a.createElement(Y.c,{id:"general_tab.teamNameRestrictions",defaultMessage:"Team Name must be {min} or more characters up to a maximum of {max}. You can add a longer team description.",values:{min:P.Q.MIN_TEAMNAME_LENGTH,max:P.Q.MAX_TEAMNAME_LENGTH}}),r=!1):t.clientError="":(t.clientError=j.ab("general_tab.required","This field is required"),r=!1),n.setState(t),r){e.next=7;break}return e.abrupt("return");case 7:return(o=Uw({},n.props.team)).display_name=n.state.name,e.next=11,n.props.actions.patchTeam(o);case 11:i=e.sent,(s=i.error)?(t.serverError=s.message,n.setState(t)):n.updateSection("");case 14:case"end":return e.stop()}},e)}))),Ww(Gw(n),"handleInviteIdSubmit",Hw(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={serverError:"",clientError:""},n.setState(t),e.next=4,n.props.actions.regenerateTeamInviteId(n.props.team.id);case 4:r=e.sent,(a=r.error)?(t.serverError=a.message,n.setState(t)):n.updateSection("");case 7:case"end":return e.stop()}},e)}))),Ww(Gw(n),"handleDescriptionSubmit",Hw(regeneratorRuntime.mark(function e(){var t,r,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={serverError:"",clientError:""},r=!0,n.state.description.trim()===n.props.team.description?(t.clientError=j.ab("general_tab.chooseDescription","Please choose a new description for your team"),r=!1):t.clientError="",n.setState(t),r){e.next=7;break}return e.abrupt("return");case 7:return(a=Uw({},n.props.team)).description=n.state.description,e.next=11,n.props.actions.patchTeam(a);case 11:o=e.sent,(i=o.error)?(t.serverError=i.message,n.setState(t)):n.updateSection("");case 14:case"end":return e.stop()}},e)}))),Ww(Gw(n),"handleTeamIconSubmit",Hw(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.teamIconFile){e.next=2;break}return e.abrupt("return");case 2:if(n.state.submitActive){e.next=4;break}return e.abrupt("return");case 4:return n.setState({loadingIcon:!0,clientError:"",serverError:""}),e.next=7,n.props.actions.setTeamIcon(n.props.team.id,n.state.teamIconFile);case 7:t=e.sent,(r=t.error)?n.setState({loadingIcon:!1,serverError:r.message}):(n.setState({loadingIcon:!1,submitActive:!1}),n.updateSection(""));case 10:case"end":return e.stop()}},e)}))),Ww(Gw(n),"handleTeamIconRemove",Hw(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loadingIcon:!0,clientError:"",serverError:""}),e.next=3,n.props.actions.removeTeamIcon(n.props.team.id);case 3:t=e.sent,(r=t.error)?n.setState({loadingIcon:!1,serverError:r.message}):(n.setState({loadingIcon:!1,submitActive:!1}),n.updateSection(""));case 6:case"end":return e.stop()}},e)}))),Ww(Gw(n),"handleUpdateSection",function(e){n.updateSection(e)}),n.updateSection=n.updateSection.bind(Gw(n)),n.handleNameSubmit=n.handleNameSubmit.bind(Gw(n)),n.handleAllowedDomainsSubmit=n.handleAllowedDomainsSubmit.bind(Gw(n)),n.handleInviteIdSubmit=n.handleInviteIdSubmit.bind(Gw(n)),n.handleOpenInviteSubmit=n.handleOpenInviteSubmit.bind(Gw(n)),n.handleDescriptionSubmit=n.handleDescriptionSubmit.bind(Gw(n)),n.handleTeamIconSubmit=n.handleTeamIconSubmit.bind(Gw(n)),n.handleClose=n.handleClose.bind(Gw(n)),n.updateName=n.updateName.bind(Gw(n)),n.updateDescription=n.updateDescription.bind(Gw(n)),n.updateTeamIcon=n.updateTeamIcon.bind(Gw(n)),n.updateAllowedDomains=n.updateAllowedDomains.bind(Gw(n)),n.handleOpenInviteRadio=n.handleOpenInviteRadio.bind(Gw(n)),n.state=n.setupInitialState(e),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vw(e,t)}(t,E.a.Component),n=t,(r=[{key:"updateSection",value:function(e){Hl()(".section-max").length&&Hl()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update"),this.setState(this.setupInitialState(this.props)),this.props.updateSection(e)}},{key:"setupInitialState",value:function(e){var t=e.team;return{name:t.display_name,invite_id:t.invite_id,allow_open_invite:t.allow_open_invite,description:t.description,allowed_domains:t.allowed_domains,serverError:"",clientError:"",teamIconFile:null,loadingIcon:!1,submitActive:!1}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({name:e.team.display_name,description:e.team.description,allowed_domains:e.team.allowed_domains,invite_id:e.team.invite_id,allow_open_invite:e.team.allow_open_invite})}},{key:"handleOpenInviteRadio",value:function(e){this.setState({allow_open_invite:e})}},{key:"handleClose",value:function(){this.updateSection("")}},{key:"componentDidMount",value:function(){Hl()("#team_settings").on("hidden.bs.modal",this.handleClose)}},{key:"componentWillUnmount",value:function(){Hl()("#team_settings").off("hidden.bs.modal",this.handleClose)}},{key:"updateName",value:function(e){this.setState({name:e.target.value})}},{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"updateTeamIcon",value:function(e){if(e&&e.target&&e.target.files&&e.target.files[0]){var t=e.target.files[0];zw.includes(t.type)?t.size>this.props.maxFileSize?this.setState({clientError:j.ab("general_tab.teamIconTooLarge","Unable to upload team icon. File is too large.")}):this.setState({teamIconFile:e.target.files[0],clientError:"",submitActive:!0}):this.setState({clientError:j.ab("general_tab.teamIconInvalidFileType","Only BMP, JPG or PNG images may be used for team icons")})}else this.setState({teamIconFile:null,clientError:j.ab("general_tab.teamIconError","An error occurred while selecting the image.")})}},{key:"updateAllowedDomains",value:function(e){this.setState({allowed_domains:e.target.value})}},{key:"render",value:function(){var e,t,n,r,a,o,i,s=this,l=this.props.team,c=null,u=null;if(this.state.clientError&&(c=this.state.clientError),this.state.serverError&&(u=this.state.serverError),"open_invite"===this.props.activeSection){var p;p=l.group_constrained?[E.a.createElement("div",{key:"userOpenInviteOptions"},E.a.createElement("div",null,E.a.createElement(Bu.b,{id:"team_settings.openInviteDescription.groupConstrained",defaultMessage:"No, members of this team are added and removed by linked groups. [Learn More](!https://mattermost.com/pl/default-ldap-group-constrained-team-channel.html)"})))]:[E.a.createElement("fieldset",{key:"userOpenInviteOptions"},E.a.createElement("div",{className:"radio"},E.a.createElement("label",null,E.a.createElement("input",{id:"teamOpenInvite",name:"userOpenInviteOptions",type:"radio",defaultChecked:this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!0)}),E.a.createElement(Y.c,{id:"general_tab.yes",defaultMessage:"Yes"})),E.a.createElement("br",null)),E.a.createElement("div",{className:"radio"},E.a.createElement("label",null,E.a.createElement("input",{id:"teamOpenInviteNo",name:"userOpenInviteOptions",type:"radio",defaultChecked:!this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!1)}),E.a.createElement(Y.c,{id:"general_tab.no",defaultMessage:"No"})),E.a.createElement("br",null)),E.a.createElement("div",{className:"margin-top x3"},E.a.createElement(Y.c,{id:"general_tab.openInviteDesc",defaultMessage:"When allowed, a link to this team will be included on the landing page allowing anyone with an account to join this team."})))],e=E.a.createElement(Iw.a,{title:j.ab("general_tab.openInviteTitle","Allow any user with an account on this server to join this team"),inputs:p,submit:this.handleOpenInviteSubmit,serverError:u,updateSection:this.handleUpdateSection})}else{var d="";d=!0===this.state.allow_open_invite?j.ab("general_tab.yes","Yes"):l.group_constrained?j.ab("team_settings.openInviteSetting.groupConstrained","No, members of this team are added and removed by linked groups."):j.ab("general_tab.no","No"),e=E.a.createElement(Aw.a,{title:j.ab("general_tab.openInviteTitle","Allow any user with an account on this server to join this team"),describe:d,updateSection:this.handleUpdateSection,section:"open_invite"})}if("invite_id"===this.props.activeSection&&this.props.canInviteTeamMembers){var m=[];m.push(E.a.createElement("div",{key:"teamInviteSetting"},E.a.createElement("div",{className:"row"},E.a.createElement("label",{className:"col-sm-5 control-label visible-xs-block"}),E.a.createElement("div",{className:"col-sm-12"},E.a.createElement("input",{id:"teamInviteId",autoFocus:!0,className:"form-control",type:"text",value:this.state.invite_id,maxLength:"32",onFocus:j.cb,readOnly:!0}))),E.a.createElement("div",{className:"setting-list__hint"},E.a.createElement(Y.c,{id:"general_tab.codeLongDesc",defaultMessage:"The Invite Code is used as part of the URL in the team invitation link created by {getTeamInviteLink} in the main menu. Regenerating creates a new team invitation link and invalidates the previous link.",values:{getTeamInviteLink:E.a.createElement("strong",null,E.a.createElement(Y.c,{id:"general_tab.getTeamInviteLink",defaultMessage:"Get Team Invite Link"}))}})))),t=E.a.createElement(Iw.a,{title:j.ab("general_tab.codeTitle","Invite Code"),inputs:m,submit:this.handleInviteIdSubmit,serverError:u,clientError:c,updateSection:this.handleUpdateSection,saveButtonText:j.ab("general_tab.regenerate","Regenerate")})}else this.props.canInviteTeamMembers&&(t=E.a.createElement(Aw.a,{title:j.ab("general_tab.codeTitle","Invite Code"),describe:j.ab("general_tab.codeDesc","Click 'Edit' to regenerate Invite Code."),updateSection:this.handleUpdateSection,section:"invite_id"}));if("name"===this.props.activeSection){var f=[],h=E.a.createElement(Y.c,{id:"general_tab.teamName",defaultMessage:"Team Name"});j.U()&&(h=""),f.push(E.a.createElement("div",{key:"teamNameSetting",className:"form-group"},E.a.createElement("label",{className:"col-sm-5 control-label"},h),E.a.createElement("div",{className:"col-sm-7"},E.a.createElement("input",{id:"teamName",autoFocus:!0,className:"form-control",type:"text",maxLength:P.Q.MAX_TEAMNAME_LENGTH.toString(),onChange:this.updateName,value:this.state.name,onFocus:j.cb}))));var b=E.a.createElement("span",null,j.ab("general_tab.teamNameInfo","Set the name of the team as it appears on your sign-in screen and at the top of the left-hand sidebar."));n=E.a.createElement(Iw.a,{title:j.ab("general_tab.teamName","Team Name"),inputs:f,submit:this.handleNameSubmit,serverError:u,clientError:c,updateSection:this.handleUpdateSection,extraInfo:b})}else{var y=this.state.name;n=E.a.createElement(Aw.a,{title:j.ab("general_tab.teamName","Team Name"),describe:y,updateSection:this.handleUpdateSection,section:"name"})}if("description"===this.props.activeSection){var g=[],v=E.a.createElement(Y.c,{id:"general_tab.teamDescription",defaultMessage:"Team Description"});j.U()&&(v=""),g.push(E.a.createElement("div",{key:"teamDescriptionSetting",className:"form-group"},E.a.createElement("label",{className:"col-sm-5 control-label"},v),E.a.createElement("div",{className:"col-sm-7"},E.a.createElement("input",{id:"teamDescription",autoFocus:!0,className:"form-control",type:"text",maxLength:P.Q.MAX_TEAMDESCRIPTION_LENGTH.toString(),onChange:this.updateDescription,value:this.state.description,onFocus:j.cb}))));var _=E.a.createElement("span",null,j.ab("general_tab.teamDescriptionInfo","Team description provides additional information to help users select the right team. Maximum of 50 characters."));r=E.a.createElement(Iw.a,{title:j.ab("general_tab.teamDescription","Team Description"),inputs:g,submit:this.handleDescriptionSubmit,serverError:u,clientError:c,updateSection:this.handleUpdateSection,extraInfo:_})}else{var w="";w=this.state.description?this.state.description:E.a.createElement(Y.c,{id:"general_tab.emptyDescription",defaultMessage:"Click 'Edit' to add a team description."}),r=E.a.createElement(Aw.a,{title:j.ab("general_tab.teamDescription","Team Description"),describe:w,updateSection:this.handleUpdateSection,section:"description"})}"team_icon"===this.props.activeSection?a=E.a.createElement(xw.a,{imageContext:"team",title:j.ab("general_tab.teamIcon","Team Icon"),src:j.I(l),file:this.state.teamIconFile,serverError:this.state.serverError,clientError:this.state.clientError,loadingPicture:this.state.loadingIcon,submitActive:this.state.submitActive,updateSection:function(e){s.updateSection(""),e.preventDefault()},onFileChange:this.updateTeamIcon,onSubmit:this.handleTeamIconSubmit,onRemove:this.handleTeamIconRemove}):(o=l.last_team_icon_update?E.a.createElement(Y.c,{id:"general_tab.teamIconLastUpdated",defaultMessage:"Image last updated {date}",values:{date:E.a.createElement(Y.a,{value:new Date(l.last_team_icon_update),day:"2-digit",month:"short",year:"numeric"})}}):j.U()?j.ab("general_tab.teamIconEditHintMobile","Click to upload an image"):j.ab("general_tab.teamIconEditHint","Click 'Edit' to upload an image."),a=E.a.createElement(Aw.a,{title:j.ab("general_tab.teamIcon","Team Icon"),describe:o,section:"team_icon",updateSection:this.handleUpdateSection}));if("allowed_domains"===this.props.activeSection){var O=[];O.push(E.a.createElement("div",{key:"allowedDomainsSetting",className:"form-group"},E.a.createElement("div",{className:"col-sm-12"},E.a.createElement(ke.a,{id:"allowedDomains",autoFocus:!0,className:"form-control",type:"text",onChange:this.updateAllowedDomains,value:this.state.allowed_domains,onFocus:j.cb,placeholder:{id:Object(Me.b)("general_tab.AllowedDomainsExample"),defaultMessage:"corp.mattermost.com, mattermost.org"}}))));var S=E.a.createElement("span",null,j.ab("general_tab.AllowedDomainsInfo",'Users can only join the team if their email matches a specific domain (e.g. "mattermost.org") or list of comma-separated domains (e.g. "corp.mattermost.com, mattermost.org").'));i=E.a.createElement(Iw.a,{title:j.ab("general_tab.allowedDomains","Allow only users with a specific email domain to join this team"),inputs:O,submit:this.handleAllowedDomainsSubmit,serverError:u,clientError:c,updateSection:this.handleUpdateSection,extraInfo:S})}else{var C="";C=this.state.allowed_domains?this.state.allowed_domains:E.a.createElement(Y.c,{id:"general_tab.allowedDomainsEdit",defaultMessage:"Click 'Edit' to add an email domain whitelist."}),i=E.a.createElement(Aw.a,{title:j.ab("general_tab.allowedDomains","allowedDomains"),describe:C,updateSection:this.handleUpdateSection,section:"allowed_domains"})}return E.a.createElement("div",null,E.a.createElement("div",{className:"modal-header"},E.a.createElement("button",{id:"closeButton",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},E.a.createElement("span",{"aria-hidden":"true"},"")),E.a.createElement("h4",{className:"modal-title",ref:"title"},E.a.createElement("div",{className:"modal-back"},E.a.createElement("span",{onClick:this.props.collapseModal},E.a.createElement(Lw.a,null))),E.a.createElement(Y.c,{id:"general_tab.title",defaultMessage:"General Settings"}))),E.a.createElement("div",{ref:"wrapper",className:"user-settings"},E.a.createElement("h3",{className:"tab-header"},E.a.createElement(Y.c,{id:"general_tab.title",defaultMessage:"General Settings"})),E.a.createElement("div",{className:"divider-dark first"}),n,E.a.createElement("div",{className:"divider-light"}),r,E.a.createElement("div",{className:"divider-light"}),a,!l.group_constrained&&E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"divider-light"}),i),E.a.createElement("div",{className:"divider-light"}),e,!l.group_constrained&&E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"divider-light"}),t),E.a.createElement("div",{className:"divider-dark"})))}}])&&Fw(n.prototype,r),a&&Fw(n,a),t}();Ww(Kw,"propTypes",{updateSection:v.a.func.isRequired,team:v.a.object.isRequired,activeSection:v.a.string.isRequired,closeModal:v.a.func.isRequired,collapseModal:v.a.func.isRequired,maxFileSize:v.a.number.isRequired,actions:v.a.shape({patchTeam:v.a.func.isRequired,regenerateTeamInviteId:v.a.func.isRequired,removeTeamIcon:v.a.func.isRequired,setTeamIcon:v.a.func.isRequired}).isRequired,canInviteTeamMembers:v.a.bool.isRequired});var Yw=Object(r.connect)(function(e,t){var n=Object(u.getConfig)(e);return{maxFileSize:parseInt(n.MaxFileSize,10),canInviteTeamMembers:Object(D.haveITeamPermission)(e,{team:t.team.id,permission:L.Permissions.INVITE_USER})}},function(e){return{actions:Object(a.bindActionCreators)({patchTeam:l.patchTeam,regenerateTeamInviteId:l.regenerateTeamInviteId,removeTeamIcon:l.removeTeamIcon,setTeamIcon:l.setTeamIcon},e)}})(Kw);function Qw(e){return(Qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zw(e){return(Zw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $w(e,t){return($w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eO=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=Zw(t).call(this,e))||"object"!==Qw(a)&&"function"!=typeof a?Xw(r):a).doFileSelect=n.doFileSelect.bind(Xw(n)),n.doSubmit=n.doSubmit.bind(Xw(n)),n.state={clientError:n.props.clientError,serverError:n.props.serverError,filename:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$w(e,t)}(t,E.a.Component),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(){this.setState({clientError:this.props.clientError,serverError:this.props.serverError})}},{key:"doFileSelect",value:function(e){e.preventDefault();var t=Hl()(e.target).val();"fakepath"===t.substring(3,11)&&(t=t.substring(12)),this.setState({clientError:"",serverError:"",filename:t})}},{key:"doSubmit",value:function(e){e.preventDefault();var t=pu.a.findDOMNode(this.refs.uploadinput);t.files&&t.files[0]?this.props.submit(t.files[0]):this.setState({clientError:!0})}},{key:"render",value:function(){var e=null;this.state.clientError&&(e=E.a.createElement("div",{className:"file-status"},E.a.createElement(Y.c,{id:"setting_upload.noFile",defaultMessage:"No file selected."})));var t=null;this.state.serverError&&(t=E.a.createElement("div",{className:"file-status"},this.state.serverError));var n=null,r="btn btn-sm btn-primary disabled";return this.state.filename&&(n=E.a.createElement("div",{className:"file-status file-name"},this.state.filename),r="btn btn-sm btn-primary"),E.a.createElement("ul",{className:"section-max"},E.a.createElement("li",{className:"col-sm-12 section-title"},this.props.title),E.a.createElement("li",{className:"col-sm-offset-3 col-sm-9"},this.props.helpText),E.a.createElement("li",{className:"col-sm-offset-3 col-sm-9"},E.a.createElement("ul",{className:"setting-list"},E.a.createElement("li",{className:"setting-list-item"},E.a.createElement("span",{className:"btn btn-sm btn-primary btn-file sel-btn"},E.a.createElement(Y.c,{id:"setting_upload.select",defaultMessage:"Select file"}),E.a.createElement("input",{ref:"uploadinput",accept:this.props.fileTypesAccepted,type:"file",onChange:this.doFileSelect})),E.a.createElement("a",{className:r,onClick:this.doSubmit},E.a.createElement(Y.c,{id:"setting_upload.import",defaultMessage:"Import"})),n,t,e))))}}])&&Jw(n.prototype,r),a&&Jw(n,a),t}();eO.propTypes={title:v.a.string.isRequired,submit:v.a.func.isRequired,fileTypesAccepted:v.a.string.isRequired,clientError:v.a.string,serverError:v.a.string,helpText:v.a.object};var tO=n(1542);function nO(e){return(nO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aO(e){return(aO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iO(e,t){return(iO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sO=Object(Y.g)({importSlack:{id:Object(Me.b)("team_import_tab.importSlack"),defaultMessage:"Import from Slack (Beta)"}}),lO=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=aO(t).call(this,e))||"object"!==nO(a)&&"function"!=typeof a?oO(r):a).onImportFailure=n.onImportFailure.bind(oO(n)),n.onImportSuccess=n.onImportSuccess.bind(oO(n)),n.doImportSlack=n.doImportSlack.bind(oO(n)),n.state={status:"ready",link:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iO(e,t)}(t,E.a.Component),n=t,(r=[{key:"onImportFailure",value:function(){this.setState({status:"fail"})}},{key:"onImportSuccess",value:function(e){this.setState({status:"done",link:"data:application/octet-stream;charset=utf-8,"+encodeURIComponent(atob(e.results))})}},{key:"doImportSlack",value:function(e){this.setState({status:"in-progress",link:""}),j.K(e,this.onImportSuccess,this.onImportFailure)}},{key:"render",value:function(){var e,t=this.props.intl.formatMessage,n=E.a.createElement("a",{href:"https://docs.mattermost.com/administration/migrating.html#migrating-from-slack",target:"_blank",rel:"noopener noreferrer"},E.a.createElement(Y.c,{id:"team_import_tab.importHelpDocsLink",defaultMessage:"documentation"})),r=E.a.createElement("strong",null,E.a.createElement(Y.c,{id:"team_import_tab.importHelpExportInstructions",defaultMessage:"Slack > Administration > Workspace settings > Import/Export Data > Export > Start Export"})),a=E.a.createElement("a",{href:"https://github.com/grundleborg/slack-advanced-exporter",target:"_blank",rel:"noopener noreferrer"},E.a.createElement(Y.c,{id:"team_import_tab.importHelpExporterLink",defaultMessage:"Slack Advanced Exporter"})),o=E.a.createElement("a",{href:"https://docs.mattermost.com/administration/migrating.html#migrating-from-slack-using-the-mattermost-cli",target:"_blank",rel:"noopener noreferrer"},E.a.createElement(Y.c,{id:"team_import_tab.importHelpCliDocsLink",defaultMessage:"CLI tool for Slack import"})),i=E.a.createElement("div",null,E.a.createElement("p",null,E.a.createElement(Y.c,{id:"team_import_tab.importHelpLine1",defaultMessage:"Slack import to Mattermost supports importing of messages in your Slack team's public channels."})),E.a.createElement("p",null,E.a.createElement(Y.c,{id:"team_import_tab.importHelpLine2",defaultMessage:"To import a team from Slack, go to {exportInstructions}. See {uploadDocsLink} to learn more.",values:{exportInstructions:r,uploadDocsLink:n}})),E.a.createElement("p",null,E.a.createElement(Y.c,{id:"team_import_tab.importHelpLine3",defaultMessage:"To import posts with attached files, see {slackAdvancedExporterLink} for details.",values:{slackAdvancedExporterLink:a}})),E.a.createElement("p",null,E.a.createElement(Y.c,{id:"team_import_tab.importHelpLine4",defaultMessage:"For Slack teams with over 10,000 messages, we recommend using the {cliLink}.",values:{cliLink:o}}))),s=E.a.createElement(eO,{title:t(sO.importSlack),submit:this.doImportSlack,helpText:i,fileTypesAccepted:".zip"});switch(this.state.status){case"ready":e="";break;case"in-progress":e=E.a.createElement("p",{className:"confirm-import alert alert-warning"},E.a.createElement(Od.a,{text:j.ab("team_import_tab.importing","Importing...")}));break;case"done":e=E.a.createElement("p",{className:"confirm-import alert alert-success"},E.a.createElement(vs.a,null),E.a.createElement(Y.c,{id:"team_import_tab.successful",defaultMessage:" Import successful: "}),E.a.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},E.a.createElement(Y.c,{id:"team_import_tab.summary",defaultMessage:"View Summary"})));break;case"fail":e=E.a.createElement("p",{className:"confirm-import alert alert-warning"},E.a.createElement(tO.a,null),E.a.createElement(Y.c,{id:"team_import_tab.failure",defaultMessage:" Import failure: "}),E.a.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},E.a.createElement(Y.c,{id:"team_import_tab.summary",defaultMessage:"View Summary"})))}return E.a.createElement("div",null,E.a.createElement("div",{className:"modal-header"},E.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:this.props.closeModal},E.a.createElement("span",{"aria-hidden":"true"},"")),E.a.createElement("h4",{className:"modal-title",ref:"title"},E.a.createElement("div",{className:"modal-back"},E.a.createElement("span",{onClick:this.props.collapseModal},E.a.createElement(Lw.a,null))),E.a.createElement(Y.c,{id:"team_import_tab.import",defaultMessage:"Import"}))),E.a.createElement("div",{ref:"wrapper",className:"user-settings"},E.a.createElement("h3",{className:"tab-header"},E.a.createElement(Y.c,{id:"team_import_tab.import",defaultMessage:"Import"})),E.a.createElement("div",{className:"divider-dark first"}),s,E.a.createElement("div",{className:"divider-dark"}),e))}}])&&rO(n.prototype,r),a&&rO(n,a),t}();lO.propTypes={intl:Y.i.isRequired,closeModal:v.a.func.isRequired,collapseModal:v.a.func.isRequired};var cO=Object(Y.h)(lO),uO=function(e){var t,n=e.activeTab,r=e.activeSection,a=e.updateSection,o=e.closeModal,i=e.collapseModal,s=e.team;if(!s)return null;switch(n){case"general":t=E.a.createElement("div",null,E.a.createElement(Yw,{team:s,activeSection:r,updateSection:a,closeModal:o,collapseModal:i}));break;case"import":t=E.a.createElement("div",null,E.a.createElement(cO,{team:s,activeSection:r,updateSection:a,closeModal:o,collapseModal:i}));break;default:t=E.a.createElement("div",null)}return t};uO.defaultProps={activeTab:"",activeSection:""},uO.propTypes={activeTab:v.a.string.isRequired,activeSection:v.a.string.isRequired,updateSection:v.a.func.isRequired,closeModal:v.a.func.isRequired,collapseModal:v.a.func.isRequired,team:v.a.object.isRequired};var pO=uO;var dO=Object(r.connect)(function(e){return{team:Object(d.getCurrentTeam)(e)}})(pO);function mO(e){return(mO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hO(e){return(hO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yO(e,t){return(yO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vO=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=hO(t).call(this,e),n=!a||"object"!==mO(a)&&"function"!=typeof a?bO(r):a,gO(bO(n),"updateTab",function(e){n.setState({activeTab:e,activeSection:""}),j.U()||Hl()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update")}),gO(bO(n),"updateSection",function(e){Hl()(".section-max").length&&Hl()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update"),n.setState({activeSection:e})}),gO(bO(n),"closeModal",function(){n.props.onHide()}),gO(bO(n),"collapseModal",function(){Hl()(pu.a.findDOMNode(n.refs.modalBody)).closest(".modal-dialog").removeClass("display--content"),n.setState({active_tab:"",active_section:""})}),gO(bO(n),"handleHide",function(){n.props.onHide()}),gO(bO(n),"handleHidden",function(){n.setState({activeTab:"general",activeSection:""})}),n.state={activeTab:"general",activeSection:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yO(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){j.U()||Hl()(".settings-modal .settings-content").perfectScrollbar()}},{key:"render",value:function(){var e=[];return e.push({name:"general",uiName:j.ab("team_settings_modal.generalTab","General"),icon:"icon fa fa-cog",iconTitle:j.ab("generic_icons.settings","Settings Icon")}),e.push({name:"import",uiName:j.ab("team_settings_modal.importTab","Import"),icon:"icon fa fa-upload",iconTitle:j.ab("generic_icons.upload","Upload Icon")}),E.a.createElement(K.a,{dialogClassName:"a11y__modal settings-modal settings-modal--action",show:this.props.show,onHide:this.handleHide,onExited:this.handleHidden,role:"dialog","aria-labelledby":"teamSettingsModalLabel"},E.a.createElement(K.a.Header,{id:"teamSettingsModalLabel",closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1"},E.a.createElement(Y.c,{id:"team_settings_modal.title",defaultMessage:"Team Settings"}))),E.a.createElement(K.a.Body,{ref:"modalBody"},E.a.createElement("div",{className:"settings-table"},E.a.createElement("div",{className:"settings-links"},E.a.createElement(k.a,{doLoad:Rw.a,tabs:e,activeTab:this.state.activeTab,updateTab:this.updateTab})),E.a.createElement("div",{className:"settings-content minimize-settings"},E.a.createElement(dO,{activeTab:this.state.activeTab,activeSection:this.state.activeSection,updateSection:this.updateSection,closeModal:this.closeModal,collapseModal:this.collapseModal})))))}}])&&fO(n.prototype,r),a&&fO(n,a),t}();gO(vO,"propTypes",{show:v.a.bool,onHide:v.a.func});var _O=Object(r.connect)(function(e){var t=P.r.TEAM_SETTINGS;return{show:Object(RE.a)(e,t)}})(vO),EO=n(1872),wO=n(1572),OO=n(1582);function SO(e){return(SO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CO(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function PO(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){CO(o,r,a,i,s,"next",e)}function s(e){CO(o,r,a,i,s,"throw",e)}i(void 0)})}}function TO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jO(e){return(jO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MO(e,t){return(MO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RO=50,IO=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=jO(t).call(this,e),n=!a||"object"!==SO(a)&&"function"!=typeof a?kO(r):a,NO(kO(n),"handleHide",function(){n.props.actions.setModalSearchTerm(""),n.setState({show:!1})}),NO(kO(n),"handleExit",function(){n.props.onHide&&n.props.onHide()}),NO(kO(n),"handleResponse",function(e){var t=null;e&&e.message&&(t=e.message),n.setState({saving:!1,addError:t})}),NO(kO(n),"handleSubmit",function(){var e=PO(regeneratorRuntime.mark(function e(t){var r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),0!==(r=n.state.values.map(function(e){return e.id})).length){e.next=4;break}return e.abrupt("return");case 4:return n.setState({saving:!0}),e.next=7,n.props.actions.addUsersToTeam(n.props.currentTeamId,r);case 7:a=e.sent,o=a.error,n.handleResponse(o),o||n.handleHide();case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),NO(kO(n),"addValue",function(e){var t=Object.assign([],n.state.values),r=t.map(function(e){return e.id});e&&e.id&&-1===r.indexOf(e.id)&&t.push(e),n.setState({values:t})}),NO(kO(n),"setUsersLoadingState",function(e){n.setState({loadingUsers:e})}),NO(kO(n),"handlePageChange",function(e,t){e>t&&(n.setUsersLoadingState(!0),n.props.actions.getProfilesNotInTeam(n.props.currentTeamId,n.props.currentTeamGroupConstrained,e+1,RO).then(function(){n.setUsersLoadingState(!1)}))}),NO(kO(n),"handleDelete",function(e){n.setState({values:e})}),NO(kO(n),"search",function(e){n.props.actions.setModalSearchTerm(e)}),NO(kO(n),"renderAriaLabel",function(e){return e?e.username:null}),NO(kO(n),"renderOption",function(e,t,n){var r="";t&&(r="more-modal__row--selected");var a=e.email;return e.is_bot&&(a=null),E.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+r,onClick:function(){return n(e)}},E.a.createElement(hm.a,{src:ii.Client4.getProfilePictureUrl(e.id,e.last_picture_update),width:"32",height:"32"}),E.a.createElement("div",{className:"more-modal__details"},E.a.createElement("div",{className:"more-modal__name"},Object(j.m)(e),E.a.createElement(ko.a,{show:Boolean(e.is_bot),className:"badge-popoverlist"})),E.a.createElement("div",{className:"more-modal__description"},a)),E.a.createElement("div",{className:"more-modal__actions"},E.a.createElement("div",{className:"more-modal__actions--round"},E.a.createElement(OO.a,null))))}),n.searchTimeoutId=0,n.state={values:[],show:!0,search:!1,saving:!1,addError:null,loadingUsers:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MO(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getProfilesNotInTeam(this.props.currentTeamId,this.props.currentTeamGroupConstrained,0,2*RO).then(function(){e.setUsersLoadingState(!1)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);var n=e.searchTerm;if(""===n)return;this.searchTimeoutId=setTimeout(PO(regeneratorRuntime.mark(function e(){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setUsersLoadingState(!0),e.next=3,t.props.actions.searchProfiles(n,{not_in_team_id:t.props.currentTeamId,group_constrained:t.props.currentTeamGroupConstrained});case 3:r=e.sent,(a=r.data)&&t.props.actions.loadStatusesForProfilesList(a),t.setUsersLoadingState(!1);case 7:case"end":return e.stop()}},e)})),P.Q.SEARCH_TIMEOUT_MILLISECONDS)}}},{key:"renderValue",value:function(e){return e.data.username}},{key:"render",value:function(){var e=E.a.createElement("div",{id:"numPeopleRemaining"},E.a.createElement(Y.c,{id:"multiselect.numPeopleRemaining",defaultMessage:"Use  to browse,  to select. You can add {num, number} more {num, plural, one {person} other {people}}. ",values:{num:20-this.state.values.length}})),t=Object(j.ab)("multiselect.add","Add"),n=Object(j.ab)("multiselect.adding","Adding..."),r=[];this.props.users&&(r=this.props.users.filter(function(e){return 0===e.delete_at}));var a=null;return this.state.addError&&(a=E.a.createElement("div",{className:"has-error col-sm-12"},E.a.createElement("label",{className:"control-label font-weight--normal"},this.state.addError))),E.a.createElement(K.a,{id:"addUsersToTeamModal",dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"addTeamModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"addTeamModalLabel"},E.a.createElement(Y.c,{id:"add_users_to_team.title",defaultMessage:"Add New Members To {teamName} Team",values:{teamName:E.a.createElement("strong",null,this.props.currentTeamName)}}))),E.a.createElement(K.a.Body,{role:"application"},a,E.a.createElement(wO.a,{key:"addUsersToTeamKey",options:r,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,ariaLabelRenderer:this.renderAriaLabel,perPage:RO,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:20,numRemainingText:e,buttonSubmitText:t,buttonSubmitLoadingText:n,saving:this.state.saving,loading:this.state.loadingUsers,placeholderText:Object(j.ab)("multiselect.placeholder","Search and add members")})))}}])&&TO(n.prototype,r),a&&TO(n,a),t}();NO(IO,"propTypes",{currentTeamName:v.a.string.isRequired,currentTeamId:v.a.string.isRequired,currentTeamGroupConstrained:v.a.bool,searchTerm:v.a.string.isRequired,users:v.a.array.isRequired,onHide:v.a.func,actions:v.a.shape({getProfilesNotInTeam:v.a.func.isRequired,setModalSearchTerm:v.a.func.isRequired,searchProfiles:v.a.func.isRequired,addUsersToTeam:v.a.func.isRequired,loadStatusesForProfilesList:v.a.func.isRequired}).isRequired}),NO(IO,"defaultProps",{currentTeamGroupConstrained:!1});var AO=Object(r.connect)(function(e){var t,n=e.views.search.modalSearch;t=n?Object(p.searchProfilesNotInCurrentTeam)(e,n,!0):Object(p.getProfilesNotInCurrentTeam)(e);var r=Object(d.getCurrentTeam)(e)||{},a=P.r.ADD_USER_TO_TEAM;return{currentTeamName:r.display_name,currentTeamId:r.id,currentTeamGroupConstrained:r.group_constrained,searchTerm:n,users:t,show:Object(RE.a)(e,a)}},function(e){return{actions:Object(a.bindActionCreators)({getProfilesNotInTeam:i.getProfilesNotInTeam,setModalSearchTerm:BE.a,searchProfiles:i.searchProfiles,addUsersToTeam:b.c,loadStatusesForProfilesList:f.b},e)}})(IO),xO=n(1658),LO=n(1638),DO=n(1794),UO=n(1598),qO=function(e){var t=e.to,n=e.text;return E.a.createElement(Fi.a,{to:t},n)};qO.propTypes={to:v.a.string.isRequired,text:v.a.oneOfType([v.a.string,v.a.node]).isRequired};var HO=Object(UO.a)(qO);HO.displayName="MenuItemLink";var FO=HO,BO=n(1697),GO=n(1567),VO=n(1494);function WO(e){return(WO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zO(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function KO(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){zO(o,r,a,i,s,"next",e)}function s(e){zO(o,r,a,i,s,"throw",e)}i(void 0)})}}function YO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QO(e){return(QO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZO(e,t){return(ZO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function XO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $O=50,eS=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=QO(t).call(this,e),n=!a||"object"!==WO(a)&&"function"!=typeof a?JO(r):a,XO(JO(n),"handleHide",function(){n.setState({show:!1})}),XO(JO(n),"handleExit",function(){n.props.onHide&&n.props.onHide()}),XO(JO(n),"onNext",function(){var e=n.state.page+1;n.onPageChange(e)}),XO(JO(n),"onPrev",function(){var e=n.state.page-1;n.onPageChange(e)}),XO(JO(n),"onPageChange",function(){var e=KO(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),e.next=3,n.props.loadItems(t,n.state.searchTerm);case 3:r=e.sent,n.setState({page:t,items:r.items,loading:!1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),XO(JO(n),"onSearchInput",function(){var e=KO(regeneratorRuntime.mark(function e(t){var r,a,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target,a=r.value,n.setState({loading:!0,searchTerm:a}),e.next=5,n.props.loadItems(0,a);case 5:o=e.sent,i=o.items,s=o.totalCount,n.setState({loading:!1,items:i,totalCount:s});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.numPerPage=e.numPerPage||$O,n.state={show:!0,page:0,items:[],totalCount:0,loading:!0,searchTerm:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZO(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentWillMount",value:function(){var e=KO(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadItems(0,"");case 2:t=e.sent,n=t.totalCount,r=t.items,this.setState({totalCount:n,items:r,loading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderRows",value:function(){var e=this;return this.state.loading?E.a.createElement("div",null,E.a.createElement(VO.a,{position:"absolute",key:"loading"})):this.state.items.map(function(t){return e.props.renderRow(t,e)})}},{key:"paginationRange",value:function(){var e=this.state.page*this.numPerPage+1,t=e+this.state.items.length-1;return 0===t&&(e=0),{startCount:e,endCount:t}}},{key:"render",value:function(){if(!this.props.show)return null;var e=this.paginationRange(),t=e.endCount,n=e.startCount;return E.a.createElement("div",null,E.a.createElement(K.a,{dialogClassName:"a11y__modal more-modal more-modal--action",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1"},E.a.createElement("span",{className:"name"},this.props.titleText)),this.props.titleBarButtonText&&this.props.titleBarButtonOnClick&&E.a.createElement("a",{className:"btn btn-md btn-primary",href:"#",onClick:this.props.titleBarButtonOnClick},this.props.titleBarButtonText)),E.a.createElement(K.a.Body,null,E.a.createElement("div",{className:"filtered-user-list"},E.a.createElement("div",{className:"filter-row"},E.a.createElement("div",{className:"col-xs-12"},E.a.createElement("input",{id:"searchUsersInput",className:"form-control filter-textbox",placeholder:this.props.searchPlaceholderText,onChange:this.onSearchInput})),E.a.createElement("div",{className:"col-sm-12"},E.a.createElement("span",{className:"member-count pull-left"},E.a.createElement(Y.c,{id:"list_modal.paginatorCount",defaultMessage:"{startCount, number} - {endCount, number} of {total, number} total",values:{startCount:n,endCount:t,total:this.state.totalCount}})))),E.a.createElement("div",{className:"more-modal__list"},E.a.createElement("div",null,this.renderRows())),E.a.createElement("div",{className:"filter-controls"},this.state.page>0&&E.a.createElement("button",{onClick:this.onPrev,className:"btn btn-link filter-control filter-control__prev"},E.a.createElement(Y.c,{id:"filtered_user_list.prev",defaultMessage:"Previous"})),this.state.items.length>=this.props.numPerPage&&t!==this.state.totalCount&&E.a.createElement("button",{onClick:this.onNext,className:"btn btn-link filter-control filter-control__next"},E.a.createElement(Y.c,{id:"filtered_user_list.next",defaultMessage:"Next"})))))))}}])&&YO(n.prototype,r),a&&YO(n,a),t}();XO(eS,"propTypes",{loadItems:v.a.func.isRequired,renderRow:v.a.func.isRequired,onHide:v.a.func,titleText:v.a.string,searchPlaceholderText:v.a.string,titleBarButtonText:v.a.string,titleBarButtonOnClick:v.a.func,numPerPage:v.a.number,show:v.a.bool}),XO(eS,"defaultProps",{show:!0});var tS=n(1637),nS=n.n(tS);function rS(e){return(rS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aS(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function oS(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){aS(o,r,a,i,s,"next",e)}function s(e){aS(o,r,a,i,s,"throw",e)}i(void 0)})}}function iS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sS(e){return(sS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cS(e,t){return(cS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pS=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=sS(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==rS(a)&&"function"!=typeof a?lS(r):a,uS(lS(n),"state",{showConfirmModal:!1,item:{member_count:0},listModal:null}),uS(lS(n),"loadItems",function(){var e=oS(regeneratorRuntime.mark(function e(t,r){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.getGroupsAssociatedToTeam(n.props.team.id,r,t,$O);case 2:return a=e.sent,o=a.data,e.abrupt("return",{items:o.groups,totalCount:o.totalGroupCount});case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),uS(lS(n),"handleDeleteCanceled",function(){n.setState({showConfirmModal:!1})}),uS(lS(n),"handleDeleteConfirmed",function(){n.setState({showConfirmModal:!1});var e=n.state,t=e.item,r=e.listModal;n.props.actions.unlinkGroupSyncable(t.id,n.props.team.id,L.Groups.SYNCABLE_TYPE_TEAM).then(oS(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({loading:!0}),e.next=3,r.props.loadItems(r.setState.page,r.state.searchTerm);case 3:t=e.sent,n=t.items,r.setState({loading:!1,items:n});case 6:case"end":return e.stop()}},e)})))}),uS(lS(n),"onClickRemoveGroup",function(e,t){n.setState({showConfirmModal:!0,item:e,listModal:t})}),uS(lS(n),"onClickConfirmRemoveGroup",function(e,t){return n.props.actions.unlinkGroupSyncable(e.id,n.props.team.id,L.Groups.SYNCABLE_TYPE_TEAM).then(oS(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,t.props.loadItems(t.setState.page,t.state.searchTerm);case 3:n=e.sent,r=n.items,t.setState({loading:!1,items:r});case 6:case"end":return e.stop()}},e)})))}),uS(lS(n),"onHide",function(){n.props.actions.closeModal(P.r.MANAGE_TEAM_GROUPS)}),uS(lS(n),"titleButtonOnClick",function(){n.onHide(),n.props.actions.openModal({modalId:P.r.ADD_GROUPS_TO_TEAM,dialogType:xO.a})}),uS(lS(n),"renderRow",function(e,t){return E.a.createElement("div",{key:e.id,className:"more-modal__row"},E.a.createElement("img",{className:"more-modal__image",src:nS.a,alt:"group picture",width:"32",height:"32"}),E.a.createElement("div",{className:"more-modal__details"},E.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",E.a.createElement("span",null,E.a.createElement(Y.c,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),E.a.createElement("div",{className:"more-modal__actions"},E.a.createElement("button",{id:"removeMember",type:"button",className:"btn btn-danger btn-message",onClick:function(){return n.onClickRemoveGroup(e,t)}},E.a.createElement(Y.c,{id:"group_list_modal.removeGroupButton",defaultMessage:"Remove Group"}))))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cS(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.context.intl.formatMessage,t=this.state.item.member_count;return E.a.createElement(E.a.Fragment,null,E.a.createElement(eS,{show:!this.state.showConfirmModal,titleText:e({id:"groups",defaultMessage:"{team} Groups"},{team:this.props.team.display_name}),searchPlaceholderText:e({id:"manage_team_groups_modal.search_placeholder",defaultMessage:"Search groups"}),renderRow:this.renderRow,loadItems:this.loadItems,onHide:this.onHide,titleBarButtonText:e({id:"group_list_modal.addGroupButton",defaultMessage:"Add Groups"}),titleBarButtonOnClick:this.titleButtonOnClick}),E.a.createElement(Xs.a,{show:this.state.showConfirmModal,title:e({id:"remove_group_confirm_title",defaultMessage:"Remove Group and {memberCount, number} {memberCount, plural, one {Member} other {Members}}"},{memberCount:t}),message:e({id:"remove_group_confirm_message",defaultMessage:"{memberCount, number} {memberCount, plural, one {member} other {members}} associated to this group will be removed from the team on the next scheduled AD/LDAP synchronization. Are you sure you wish to remove this group and {memberCount} {memberCount, plural, one {member} other {members}}?"},{memberCount:t}),confirmButtonText:e({id:"remove_group_confirm_button",defaultMessage:"Yes, Remove Group and {memberCount, plural, one {Member} other {Members}}"},{memberCount:t}),onConfirm:this.handleDeleteConfirmed,onCancel:this.handleDeleteCanceled}))}}])&&iS(n.prototype,r),a&&iS(n,a),t}();uS(pS,"propTypes",{team:v.a.object.isRequired,actions:v.a.shape({getGroupsAssociatedToTeam:v.a.func.isRequired,unlinkGroupSyncable:v.a.func.isRequired,closeModal:v.a.func.isRequired,openModal:v.a.func.isRequired}).isRequired}),uS(pS,"contextTypes",{intl:Y.i});var dS=Object(r.connect)(function(e,t){return{team:e.entities.teams.teams[t.teamID]}},function(e){return{actions:Object(a.bindActionCreators)({getGroupsAssociatedToTeam:GO.getGroupsAssociatedToTeam,closeModal:U.a,openModal:U.b,unlinkGroupSyncable:GO.unlinkGroupSyncable},e)}})(pS);function mS(e){return(mS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hS(e){return(hS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yS(e,t){return(yS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vS=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=hS(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==mS(a)&&"function"!=typeof a?bS(r):a,gS(bS(n),"toggleShortcutsModal",function(e){e.preventDefault(),C.n()}),gS(bS(n),"showGetTeamInviteLinkModal",function(e){e.preventDefault(),C.l()}),gS(bS(n),"handleKeyDown",function(e){Object(j.e)(e)&&e.shiftKey&&Object(j.S)(e,P.i.KeyCodes.A)&&n.props.actions.openModal({ModalId:P.r.USER_SETTINGS,dialogType:Jl.a})}),gS(bS(n),"handleEmitUserLoggedOutEvent",function(){C.e()}),gS(bS(n),"getFlagged",function(e){e.preventDefault(),n.props.actions.showFlaggedPosts(),n.props.actions.closeRhsMenu()}),gS(bS(n),"searchMentions",function(e){e.preventDefault(),n.props.isMentionSearch?n.props.actions.closeRightHandSide():(n.props.actions.closeRhsMenu(),n.props.actions.showMentions())}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yS(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.teamIsGroupConstrained;if(!n)return null;var a=this.context.intl.formatMessage,o=this.props.pluginMenuItems.map(function(t){return E.a.createElement(Dp.a,{id:t.id+"_pluginmenuitem",key:t.id+"_pluginmenuitem",onClick:function(){t.action&&t.action()},text:t.text,icon:e.props.mobile&&t.mobileIcon})});return E.a.createElement(mu.a,{mobile:this.props.mobile,id:this.props.id,ariaLabel:Object(j.ab)("navbar_dropdown.menuAriaLabel","main menu")},E.a.createElement(LO.a,null,E.a.createElement(Dp.a,{id:"recentMentions",show:this.props.mobile,onClick:this.searchMentions,icon:this.props.mobile&&E.a.createElement("i",{className:"mentions"},"@"),text:Object(j.ab)("sidebar_right_menu.recentMentions","Recent Mentions")}),E.a.createElement(Dp.a,{id:"flaggedPosts",show:this.props.mobile,onClick:this.getFlagged,icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-flag"}),text:Object(j.ab)("sidebar_right_menu.flagged","Flagged Posts")})),E.a.createElement(LO.a,null,E.a.createElement(BO.a,{id:"accountSettings",modalId:P.r.USER_SETTINGS,dialogType:Jl.a,text:Object(j.ab)("navbar_dropdown.accountSettings","Account Settings"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-cog"})})),E.a.createElement(LO.a,null,E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.MANAGE_TEAM]},E.a.createElement(BO.a,{id:"addGroupsToTeam",show:r,modalId:P.r.ADD_GROUPS_TO_TEAM,dialogType:xO.a,text:Object(j.ab)("navbar_dropdown.addGroupsToTeam","Add Groups to Team"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-user-plus"})})),E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.ADD_USER_TO_TEAM]},E.a.createElement(BO.a,{id:"addUsersToTeam",show:r,modalId:P.r.ADD_USER_TO_TEAM,dialogType:AO,text:Object(j.ab)("navbar_dropdown.addMemberToTeam","Add Members to Team"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-user-plus"})}))),E.a.createElement(LO.a,null,E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.ADD_USER_TO_TEAM]},E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.INVITE_USER]},E.a.createElement(BO.a,{id:"sendEmailInvite",show:this.props.enableEmailInvitations&&!r,modalId:P.r.EMAIL_INVITE,dialogType:wE,text:Object(j.ab)("navbar_dropdown.inviteMember","Send Email Invite"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-user-plus"})})),E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.INVITE_USER]},E.a.createElement(Dp.a,{id:"getTeamInviteLink",show:this.props.teamType===P.i.OPEN_TEAM&&this.props.enableUserCreation&&!r,onClick:this.showGetTeamInviteLinkModal,text:Object(j.ab)("navbar_dropdown.teamLink","Get Team Invite Link"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-link"})})),E.a.createElement(BO.a,{id:"addUsersToTeam",show:!r,modalId:P.r.ADD_USER_TO_TEAM,dialogType:AO,text:Object(j.ab)("navbar_dropdown.addMemberToTeam","Add Members to Team"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-user-plus"})}))),E.a.createElement(LO.a,null,E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.MANAGE_TEAM]},E.a.createElement(BO.a,{id:"teamSettings",modalId:P.r.TEAM_SETTINGS,dialogType:_O,text:Object(j.ab)("navbar_dropdown.teamSettings","Team Settings"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-globe"})})),E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.MANAGE_TEAM]},E.a.createElement(BO.a,{id:"manageGroups",show:r,modalId:P.r.MANAGE_TEAM_GROUPS,dialogProps:{teamID:this.props.teamId},dialogType:dS,text:Object(j.ab)("navbar_dropdown.manageGroups","Manage Groups"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-user-plus"})})),E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.REMOVE_USER_FROM_TEAM,L.Permissions.MANAGE_TEAM_ROLES]},E.a.createElement(BO.a,{id:"manageMembers",modalId:P.r.TEAM_MEMBERS,dialogType:Mw,text:Object(j.ab)("navbar_dropdown.manageMembers","Manage Members"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-users"})})),E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.REMOVE_USER_FROM_TEAM,L.Permissions.MANAGE_TEAM_ROLES],invert:!0},E.a.createElement(BO.a,{id:"viewMembers",modalId:P.r.TEAM_MEMBERS,dialogType:Mw,text:Object(j.ab)("navbar_dropdown.viewMembers","View Members"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-users"})}))),E.a.createElement(LO.a,null,E.a.createElement(SE.a,{permissions:[L.Permissions.CREATE_TEAM]},E.a.createElement(FO,{id:"createTeam",to:"/create_team",text:Object(j.ab)("navbar_dropdown.create","Create a New Team"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-plus-square"})})),E.a.createElement(FO,{id:"joinTeam",show:!this.props.experimentalPrimaryTeam&&this.props.moreTeamsToJoin,to:"/select_team",text:Object(j.ab)("navbar_dropdown.join","Join Another Team"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-plus-square"})}),E.a.createElement(BO.a,{id:"leaveTeam",show:!r&&this.props.experimentalPrimaryTeam!==this.props.teamName,modalId:P.r.LEAVE_TEAM,dialogType:FE,text:Object(j.ab)("navbar_dropdown.leave","Leave Team"),icon:this.props.mobile&&E.a.createElement(ME,null)})),E.a.createElement(LO.a,null,o),E.a.createElement(LO.a,null,E.a.createElement(OE.a,{teamId:this.props.teamId,permissions:[L.Permissions.MANAGE_SLASH_COMMANDS,L.Permissions.MANAGE_OAUTH,L.Permissions.MANAGE_INCOMING_WEBHOOKS,L.Permissions.MANAGE_OUTGOING_WEBHOOKS]},E.a.createElement(FO,{id:"integrations",show:!this.props.mobile&&(this.props.enableIncomingWebhooks||this.props.enableOutgoingWebhooks||this.props.enableCommands||this.props.enableOAuthServiceProvider),to:"/"+this.props.teamName+"/integrations",text:Object(j.ab)("navbar_dropdown.integrations","Integrations")})),E.a.createElement(FO,{id:"customEmojis",show:!this.props.mobile&&this.props.enableCustomEmoji&&this.props.canCreateOrDeleteCustomEmoji,to:"/"+this.props.teamName+"/emoji",text:Object(j.ab)("navbar_dropdown.emoji","Custom Emoji")})),E.a.createElement(LO.a,null,E.a.createElement(SE.a,{permissions:[L.Permissions.MANAGE_SYSTEM]},E.a.createElement(FO,{id:"systemConsole",show:!this.props.mobile,to:"/admin_console",text:Object(j.ab)("navbar_dropdown.console","System Console"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-wrench"})}))),E.a.createElement(LO.a,null,E.a.createElement(DO.a,{id:"helpLink",show:Boolean(this.props.helpLink),url:this.props.helpLink,text:Object(j.ab)("navbar_dropdown.help","Help"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-question"})}),E.a.createElement(Dp.a,{id:"keyboardShortcuts",show:!this.props.mobile,onClick:this.toggleShortcutsModal,text:Object(j.ab)("navbar_dropdown.keyboardShortcuts","Keyboard Shortcuts")}),E.a.createElement(DO.a,{id:"reportLink",show:Boolean(this.props.reportAProblemLink),url:this.props.reportAProblemLink,text:Object(j.ab)("navbar_dropdown.report","Report a Problem"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-phone"})}),E.a.createElement(DO.a,{id:"nativeAppLink",show:this.props.appDownloadLink&&!T.n(),url:Object(ss.g)(this.props.appDownloadLink),text:Object(j.ab)("navbar_dropdown.nativeApps","Download Apps"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-mobile"})}),E.a.createElement(BO.a,{id:"about",modalId:P.r.ABOUT,dialogType:EO.a,text:a({id:"navbar_dropdown.about",defaultMessage:"About {appTitle}"},{appTitle:this.props.siteName||"Mattermost"}),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-info"})})),E.a.createElement(LO.a,null,E.a.createElement(Dp.a,{id:"logout",onClick:this.handleEmitUserLoggedOutEvent,text:Object(j.ab)("navbar_dropdown.logout","Logout"),icon:this.props.mobile&&E.a.createElement("i",{className:"fa fa-sign-out"})})))}}])&&fS(n.prototype,r),a&&fS(n,a),t}();gS(vS,"propTypes",{mobile:v.a.bool.isRequired,id:v.a.string,teamId:v.a.string,teamType:v.a.string,teamName:v.a.string,siteName:v.a.string,currentUser:v.a.object,appDownloadLink:v.a.string,enableCommands:v.a.bool.isRequired,enableCustomEmoji:v.a.bool.isRequired,canCreateOrDeleteCustomEmoji:v.a.bool.isRequired,enableIncomingWebhooks:v.a.bool.isRequired,enableOAuthServiceProvider:v.a.bool.isRequired,enableOutgoingWebhooks:v.a.bool.isRequired,enableUserCreation:v.a.bool.isRequired,enableEmailInvitations:v.a.bool.isRequired,experimentalPrimaryTeam:v.a.string,helpLink:v.a.string,reportAProblemLink:v.a.string,moreTeamsToJoin:v.a.bool.isRequired,pluginMenuItems:v.a.arrayOf(v.a.object),isMentionSearch:v.a.bool,teamIsGroupConstrained:v.a.bool.isRequired,actions:v.a.shape({openModal:v.a.func.isRequred,showMentions:v.a.func,showFlaggedPosts:v.a.func,closeRightHandSide:v.a.func.isRequired,closeRhsMenu:v.a.func.isRequired}).isRequired}),gS(vS,"defaultProps",{teamType:"",mobile:!1,pluginMenuItems:[]}),gS(vS,"contextTypes",{intl:Y.i.isRequired});var _S=Object(r.connect)(function(e){var t=Object(u.getConfig)(e),n=Object(d.getCurrentTeam)(e),r=Object(p.getCurrentUser)(e),a=t.AppDownloadLink,o="true"===t.EnableCommands,i="true"===t.EnableCustomEmoji,s=t.SiteName,l="true"===t.EnableIncomingWebhooks,c="true"===t.EnableOAuthServiceProvider,m="true"===t.EnableOutgoingWebhooks,f="true"===t.EnableUserCreation,h="true"===t.EnableEmailInvitations,b=t.ExperimentalPrimaryTeam,y=t.HelpLink,g=t.ReportAProblemLink,v=Object(D.haveISystemPermission)(e,{permission:L.Permissions.CREATE_EMOJIS})||Object(D.haveISystemPermission)(e,{permission:L.Permissions.DELETE_EMOJIS});if(!v){var _=!0,E=!1,w=void 0;try{for(var O,S=Object(d.getMyTeams)(e)[Symbol.iterator]();!(_=(O=S.next()).done);_=!0){var C=O.value;if(Object(D.haveITeamPermission)(e,{team:C.id,permission:L.Permissions.CREATE_EMOJIS})||Object(D.haveITeamPermission)(e,{team:C.id,permission:L.Permissions.DELETE_EMOJIS})){v=!0;break}}}catch(e){E=!0,w=e}finally{try{_||null==S.return||S.return()}finally{if(E)throw w}}}var T=Object(d.getJoinableTeamIds)(e),j=T&&T.length>0,k=Object(Ml.k)(e);return{appDownloadLink:a,enableCommands:o,enableCustomEmoji:i,enableIncomingWebhooks:l,enableOAuthServiceProvider:c,enableOutgoingWebhooks:m,enableUserCreation:f,enableEmailInvitations:h,experimentalPrimaryTeam:b,helpLink:y,reportAProblemLink:g,pluginMenuItems:e.plugins.components.MainMenu,canCreateOrDeleteCustomEmoji:v,moreTeamsToJoin:j,siteName:s,teamId:n.id,teamName:n.name,teamType:n.type,currentUser:r,isMentionSearch:k===P.A.MENTION,teamIsGroupConstrained:Boolean(n.group_constrained)}},function(e){return{actions:Object(a.bindActionCreators)({openModal:U.b,showMentions:kl.k,showFlaggedPosts:kl.j,closeRightHandSide:kl.b,closeRhsMenu:kl.a},e)}})(vS);function ES(e){return(ES="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OS(e){return(OS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CS(e,t){return(CS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TS=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,n=!(a=(e=OS(t)).call.apply(e,[this].concat(i)))||"object"!==ES(a)&&"function"!=typeof a?SS(r):a,PS(SS(n),"handleEmitUserLoggedOutEvent",function(){C.e()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CS(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e="";null!=this.props.siteName&&(e=this.props.siteName);var t=e;this.props.teamDisplayName&&(t=this.props.teamDisplayName);var n=null;return this.props.showTutorialTip&&(n=E.a.createElement(sE,{onBottom:!0}),this.props.actions.openRhsMenu()),E.a.createElement("div",{className:Rl()("sidebar--menu",{"move--left":this.props.isOpen&&j.U()}),id:"sidebar-menu"},E.a.createElement("div",{className:"team__header theme"},E.a.createElement(Fi.a,{className:"team__name",to:"/channels/".concat(P.i.DEFAULT_CHANNEL)},t)),E.a.createElement("div",{className:"nav-pills__container mobile-main-menu"},n,E.a.createElement(W_.a,{in:this.props.isOpen&&j.U(),classNames:"MobileRightSidebarMenu",enter:!0,exit:!0,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:500,exit:500}},E.a.createElement(_S,{mobile:!0}))))}}])&&wS(n.prototype,r),a&&wS(n,a),t}();PS(TS,"propTypes",{isOpen:v.a.bool.isRequired,teamDisplayName:v.a.string,showTutorialTip:v.a.bool.isRequired,siteName:v.a.string,actions:v.a.shape({openRhsMenu:v.a.func.isRequired})});var jS=Object(r.connect)(function(e){var t=Object(u.getConfig)(e),n=Object(d.getCurrentTeam)(e),r="true"===t.EnableTutorial,a=Object(c.getInt)(e,P.z.TUTORIAL_STEP,Object(p.getCurrentUserId)(e),P.I.FINISHED),o=t.SiteName;return{teamDisplayName:n.display_name,isOpen:Object(Ml.b)(e),showTutorialTip:r&&Object(j.U)()&&a===P.I.MENU_POPOVER,siteName:o}},function(e){return{actions:Object(a.bindActionCreators)({openRhsMenu:kl.c},e)}})(TS);function kS(e){return(kS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NS(e){return(NS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IS(e,t){return(IS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xS=P.Q.ActionTypes,LS=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=NS(t).call(this,e),n=!a||"object"!==kS(a)&&"function"!=typeof a?RS(r):a,AS(RS(n),"updateShow",function(e,t){n.setState({show:e,callback:t.callback})}),AS(RS(n),"handleSubmit",function(e){e.preventDefault();var t=n.state.value;if(n.isInputValid(t)){var r=t.split(","),a={type:"custom"};a.sidebarBg=r[0],a.sidebarText=r[5],a.sidebarUnreadText=r[5],a.sidebarTextHoverBg=r[4],a.sidebarTextActiveBorder=r[2],a.sidebarTextActiveColor=r[3],a.sidebarHeaderBg=r[1],a.sidebarHeaderTextColor=r[5],a.onlineIndicator=r[6],a.awayIndicator="#E0B333",a.mentionBg=r[7],a.mentionColor="#ffffff",a.centerChannelBg="#ffffff",a.centerChannelColor="#333333",a.newMessageSeparator="#F80",a.linkColor="#2389d7",a.buttonBg="#26a970",a.buttonColor="#ffffff",a.mentionHighlightBg="#fff2bb",a.mentionHighlightLink="#2f81b7",a.codeTheme="github",n.state.callback(a),n.setState({show:!1,callback:null})}else n.setState({inputError:E.a.createElement(Y.c,{id:"user.settings.import_theme.submitError",defaultMessage:"Invalid format, please try copying and pasting in again."})})}),AS(RS(n),"handleChange",function(e){var t=e.target.value;n.setState({value:t}),n.isInputValid(t)?n.setState({inputError:null}):n.setState({inputError:E.a.createElement(Y.c,{id:"user.settings.import_theme.submitError",defaultMessage:"Invalid format, please try copying and pasting in again."})})}),AS(RS(n),"handleOnHide",function(){n.setState({show:!1})}),n.state={value:"",inputError:"",show:!1,callback:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IS(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){gs.addModalListener(xS.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}},{key:"componentWillUnmount",value:function(){gs.removeModalListener(xS.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}},{key:"isInputValid",value:function(e){if(0===e.length)return!1;if(-1!==e.indexOf(" "))return!1;if(e.length>0&&-1===e.indexOf(","))return!1;if(e.length>0){var t=e.split(",");if(8!==t.length)return!1;for(var n=0;n<t.length;n++){if(7!==t[n].length&&4!==t[n].length)return!1;if("#"!==t[n].charAt(0))return!1}}return!0}},{key:"render",value:function(){return E.a.createElement("span",null,E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.handleOnHide,role:"dialog","aria-labelledby":"importThemeModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"importThemeModalLabel"},E.a.createElement(Y.c,{id:"user.settings.import_theme.importHeader",defaultMessage:"Import Slack Theme"}))),E.a.createElement("form",{role:"form",className:"form-horizontal"},E.a.createElement(K.a.Body,null,E.a.createElement("p",null,E.a.createElement(Y.c,{id:"user.settings.import_theme.importBody",defaultMessage:'To import a theme, go to a Slack team and look for "Preferences -> Sidebar Theme". Open the custom theme option, copy the theme color values and paste them here:'})),E.a.createElement("div",{className:"form-group less"},E.a.createElement("div",{className:"col-sm-12"},E.a.createElement("input",{id:"themeVector",type:"text",className:"form-control",value:this.state.value,onChange:this.handleChange}),E.a.createElement("div",{className:"input__help"},this.state.inputError)))),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{id:"cancelButton",type:"button",className:"btn btn-link",onClick:this.handleOnHide},E.a.createElement(Y.c,{id:"user.settings.import_theme.cancel",defaultMessage:"Cancel"})),E.a.createElement("button",{id:"submitButton",onClick:this.handleSubmit,type:"submit",className:"btn btn-primary",tabIndex:"3"},E.a.createElement(Y.c,{id:"user.settings.import_theme.submit",defaultMessage:"Submit"}))))))}}])&&MS(n.prototype,r),a&&MS(n,a),t}(),DS=n(1869);function US(e){return e.views.lhs.isOpen}var qS=n(1623),HS=(n(430),n(2358));function FS(e){return(FS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GS(e){return(GS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WS(e,t){return(WS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var KS=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=GS(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==FS(a)&&"function"!=typeof a?VS(r):a,zS(VS(n),"copy",function(){var e=n.props.link;-1===e.indexOf("http://")&&-1===e.indexOf("https://")&&(e=n.props.siteURL+e),n.props.actions.copyToClipboard(e)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WS(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){var e=E.a.createElement(HS.a,{id:"copy-url-context-menu"+this.props.menuId},E.a.createElement(HS.c,{onClick:this.copy},E.a.createElement(Y.c,{id:"copy_url_context_menu.getChannelLink",defaultMessage:"Copy Link"}))),t=E.a.createElement(HS.b,{id:"copy-url-context-menu"+this.props.menuId},this.props.children);return E.a.createElement("span",null,e,t)}}])&&BS(n.prototype,r),a&&BS(n,a),t}();zS(KS,"propTypes",{children:v.a.element,link:v.a.string.isRequired,menuId:v.a.string.isRequired,siteURL:v.a.string.isRequired,actions:v.a.shape({copyToClipboard:v.a.func.isRequired})});var YS=Object(r.connect)(function(e){return{siteURL:Object(u.getConfig)(e).SiteURL}},function(){return{actions:{copyToClipboard:j.g}}})(KS);function QS(e){return(QS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZS(e){return(ZS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $S(e,t){return($S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eC=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=ZS(t).call(this,e))||"object"!==QS(a)&&"function"!=typeof a?XS(r):a).handleSwitch=n.handleSwitch.bind(XS(n)),n.handleDisabled=n.handleDisabled.bind(XS(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$S(e,t)}(t,E.a.Component),n=t,(r=[{key:"handleSwitch",value:function(e){e.preventDefault(),Object(vt.b)("TeamLink#click"),Object(vt.d)("ui","ui_team_sidebar_switch_team"),this.props.switchTeam(this.props.url)}},{key:"handleDisabled",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e,t=this.props.teamIconUrl,n=this.context.intl.formatMessage,r=this.props.active?"active":"",a=this.props.btnClass,o=this.props.disabled?"team-disabled":"",i=this.props.active||this.props.disabled?this.handleDisabled:this.handleSwitch,s=n({id:"team.button.ariaLabel",defaultMessage:"{teamName} team"},{teamName:this.props.displayName});r||(r=this.props.unread?"unread":"",s=n({id:"team.button.unread.ariaLabel",defaultMessage:"{teamName} team unread"},{teamName:this.props.displayName}),this.props.mentions&&(s=n({id:"team.button.mentions.ariaLabel",defaultMessage:"{teamName} team, {mentionCount} mentions"},{teamName:this.props.displayName,mentionCount:this.props.mentions}),e=E.a.createElement("span",{className:"badge pull-right small"},this.props.mentions))),s=s.toLowerCase();var l=this.props.content;if(!l)if(t)l=E.a.createElement("div",{className:"team-btn__content"},E.a.createElement("div",{className:"team-btn__image",style:{backgroundImage:"url('".concat(t,"')")}}));else{var c=this.props.displayName;c=c?c.replace(/\s/g,"").substring(0,2):"??",l=E.a.createElement("div",{className:"team-btn__content"},E.a.createElement("div",{className:"team-btn__initials"},c))}var u,p=this.props.tip||Object(j.ab)("team.button.name_undefined","Name undefined"),d=E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:this.props.placement,overlay:E.a.createElement(Ec.a,{id:"tooltip-".concat(this.props.url)},p)},E.a.createElement("div",{className:"team-btn "+a},e,l));return Object(T.c)()?(u=E.a.createElement("button",{className:"btn btn-link "+o,onClick:i},d),this.props.url.endsWith("create_team")||this.props.url.endsWith("select_team")||(u=E.a.createElement(YS,{link:this.props.url,menuId:this.props.url},u))):u=E.a.createElement(Fi.a,{id:"".concat(this.props.url.slice(1),"TeamButton"),"aria-label":s,className:o,to:this.props.url,onClick:i},d),E.a.createElement("div",{className:"team-container ".concat(r)},u)}}])&&JS(n.prototype,r),a&&JS(n,a),t}();function tC(e){return(tC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rC(e,t){return!t||"object"!==tC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function aC(e){return(aC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oC(e,t){return(oC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function iC(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function sC(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function lC(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(eC,"contextTypes",{intl:Y.i.isRequired}),eC.defaultProps={btnClass:"",tip:"",placement:"right",active:!1,disabled:!1,unread:!1,mentions:0},eC.propTypes={btnClass:v.a.string,url:v.a.string.isRequired,displayName:v.a.string,content:v.a.node,tip:v.a.node.isRequired,active:v.a.bool,disabled:v.a.bool,unread:v.a.bool,mentions:v.a.number,placement:v.a.oneOf(["left","right","top","bottom"]),teamIconUrl:v.a.string,switchTeam:v.a.func.isRequired};var cC=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rC(this,aC(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oC(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.props.actions.getTeams(0,200)}},{key:"render",value:function(){var e=this,t=document.querySelector("#root");if(this.props.myTeams.length<=1)return t.classList.remove("multi-teams"),null;t.classList.add("multi-teams");var n=[],r=Object(qS.a)(this.props.myTeams,this.props.locale).map(function(t){var n=e.props.myTeamMembers[t.id];return E.a.createElement(eC,{key:"switch_team_"+t.name,url:"/".concat(t.name),tip:t.display_name,active:t.id===e.props.currentTeamId,displayName:t.display_name,unread:n.msg_count>0,mentions:n.mention_count,teamIconUrl:j.I(t),switchTeam:e.props.actions.switchTeam})});return this.props.moreTeamsToJoin&&!this.props.experimentalPrimaryTeam?r.push(E.a.createElement(eC,{btnClass:"team-btn__add",key:"more_teams",url:"/select_team",tip:E.a.createElement(Y.c,{id:"team_sidebar.join",defaultMessage:"Other teams you can join."}),content:"+",switchTeam:this.props.actions.switchTeam})):r.push(E.a.createElement(SE.a,{permissions:[jp.a.CREATE_TEAM],key:"more_teams"},E.a.createElement(eC,{btnClass:"team-btn__add",url:"/create_team",tip:E.a.createElement(Y.c,{id:"navbar_dropdown.create",defaultMessage:"Create a New Team"}),content:"+",switchTeam:this.props.actions.switchTeam}))),n.push(E.a.createElement("div",{key:"team-sidebar-bottom-plugin",className:"team-sidebar-bottom-plugin is-empty"},E.a.createElement(I.a,{pluggableName:"BottomTeamSidebar"}))),E.a.createElement("div",{className:Rl()("team-sidebar",{"move--right":this.props.isOpen})},E.a.createElement("div",{className:"team-wrapper"},E.a.createElement(Bl.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:sC,renderThumbVertical:lC,renderView:iC,onScroll:this.handleScroll},r)),n)}}])&&nC(n.prototype,r),a&&nC(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(cC,"propTypes",{myTeams:v.a.array.isRequired,currentTeamId:v.a.string.isRequired,moreTeamsToJoin:v.a.bool.isRequired,myTeamMembers:v.a.object.isRequired,isOpen:v.a.bool.isRequired,experimentalPrimaryTeam:v.a.string,locale:v.a.string.isRequired,actions:v.a.shape({getTeams:v.a.func.isRequired,switchTeam:v.a.func.isRequired}).isRequired});var uC=Object(o.f)(Object(r.connect)(function(e){var t=Object(u.getConfig)(e).ExperimentalPrimaryTeam,n=Object(d.getJoinableTeamIds)(e),r=n&&n.length>0;return{currentTeamId:Object(d.getCurrentTeamId)(e),myTeams:Object(d.getMyTeams)(e),myTeamMembers:Object(d.getTeamMemberships)(e),isOpen:US(e),experimentalPrimaryTeam:t,locale:Object(zl.a)(e),moreTeamsToJoin:r}},function(e){return{actions:Object(a.bindActionCreators)({getTeams:l.getTeams,switchTeam:b.e},e)}})(cC)),pC=n(1590),dC=n(2054),mC=n(2055),fC=n.n(mC),hC=n(2056),bC=n.n(hC),yC=n(1678);function gC(e){return(gC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _C(e){return(_C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wC(e,t){return(wC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var OC=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=_C(t).call(this,e))||"object"!==gC(a)&&"function"!=typeof a?EC(r):a).createChannelRow=n.createChannelRow.bind(EC(n)),n.nextPage=n.nextPage.bind(EC(n)),n.previousPage=n.previousPage.bind(EC(n)),n.doSearch=n.doSearch.bind(EC(n)),n.nextTimeoutId=0,n.state={joiningChannel:"",page:0,nextDisabled:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wC(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){!T.m()&&this.refs.filter&&this.refs.filter.focus()}},{key:"componentDidUpdate",value:function(e,t){t.page!==this.state.page&&Hl()(this.refs.channelList).scrollTop(0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isSearch&&!this.props.isSearch&&this.setState({page:0})}},{key:"handleJoin",value:function(e){var t=this;this.setState({joiningChannel:e.id}),this.props.handleJoin(e,function(){t.setState({joiningChannel:""})})}},{key:"createChannelRow",value:function(e){var t="".concat(e.display_name,", ").concat(e.purpose).toLowerCase();return E.a.createElement("div",{className:"more-modal__row",key:e.id},E.a.createElement("div",{className:"more-modal__details"},E.a.createElement("button",{onClick:this.handleJoin.bind(this,e),"aria-label":t,className:"style--none more-modal__name"},e.display_name),E.a.createElement("p",{className:"more-modal__description"},e.purpose)),E.a.createElement("div",{className:"more-modal__actions"},E.a.createElement("button",{onClick:this.handleJoin.bind(this,e),className:"btn btn-primary",disabled:this.state.joiningChannel},E.a.createElement(b_.a,{loading:this.state.joiningChannel===e.id,text:Object(j.ab)("more_channels.joining","Joining...")},E.a.createElement(Y.c,{id:"more_channels.join",defaultMessage:"Join"})))))}},{key:"nextPage",value:function(e){var t=this;e.preventDefault(),this.setState({page:this.state.page+1,nextDisabled:!0}),this.nextTimeoutId=setTimeout(function(){return t.setState({nextDisabled:!1})},500),this.props.nextPage(this.state.page+1),Hl()(pu.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}},{key:"previousPage",value:function(e){e.preventDefault(),this.setState({page:this.state.page-1}),Hl()(pu.a.findDOMNode(this.refs.channelListScroll)).scrollTop(0)}},{key:"doSearch",value:function(){var e=this.refs.filter.value;this.props.search(e),""===e&&this.setState({page:0})}},{key:"render",value:function(){var e,t,n,r=this.props.channels;if(this.props.loading&&0===r.length)e=E.a.createElement(VO.a,{style:{marginTop:"50%"}});else if(0===r.length)e=E.a.createElement("div",{className:"no-channel-message"},E.a.createElement("p",{className:"primary-message"},E.a.createElement(Y.c,{id:"more_channels.noMore",defaultMessage:"No more channels to join"})),this.props.noResultsText);else{var a=this.state.page*this.props.channelsPerPage,o=a+this.props.channelsPerPage,i=this.props.channels.slice(a,o);e=i.map(this.createChannelRow),i.length>=this.props.channelsPerPage&&o<this.props.channels.length&&(t=E.a.createElement("button",{className:"btn btn-link filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled},E.a.createElement(Y.c,{id:"more_channels.next",defaultMessage:"Next"}))),this.state.page>0&&(n=E.a.createElement("button",{className:"btn btn-link filter-control filter-control__prev",onClick:this.previousPage},E.a.createElement(Y.c,{id:"more_channels.prev",defaultMessage:"Previous"})))}var s=E.a.createElement("div",{className:"filter-row filter-row--full"},E.a.createElement("div",{className:"col-sm-12"},E.a.createElement(yC.a,{id:"searchChannelsTextbox",ref:"filter",className:"form-control filter-textbox",placeholder:{id:Object(Me.b)("filtered_channels_list.search"),defaultMessage:"Search channels"},inputComponent:ke.a,onInput:this.doSearch})));return this.props.createChannelButton&&(s=E.a.createElement("div",{className:"channel_search"},E.a.createElement("div",{className:"search_input"},E.a.createElement(yC.a,{id:"searchChannelsTextbox",ref:"filter",className:"form-control filter-textbox",placeholder:{id:Object(Me.b)("filtered_channels_list.search"),defaultMessage:"Search channels"},inputComponent:ke.a,onInput:this.doSearch})),E.a.createElement("div",{className:"create_button"},this.props.createChannelButton))),E.a.createElement("div",{className:"filtered-user-list"},s,E.a.createElement("div",{role:"application",ref:"channelList",className:"more-modal__list"},E.a.createElement("div",{ref:"channelListScroll"},e)),E.a.createElement("div",{className:"filter-controls"},n,t))}}])&&vC(n.prototype,r),a&&vC(n,a),t}();function SC(e){return(SC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PC(e){return(PC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jC(e,t){return(jC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}OC.defaultProps={channels:[],isSearch:!1},OC.propTypes={channels:v.a.arrayOf(v.a.object),channelsPerPage:v.a.number,nextPage:v.a.func.isRequired,isSearch:v.a.bool,search:v.a.func.isRequired,handleJoin:v.a.func.isRequired,noResultsText:v.a.object,loading:v.a.bool,createChannelButton:v.a.element};var MC=50,NC=100,RC=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=PC(t).call(this,e),n=!a||"object"!==SC(a)&&"function"!=typeof a?TC(r):a,kC(TC(n),"handleHide",function(){n.setState({show:!1}),n.props.bodyOnly&&n.handleExit()}),kC(TC(n),"handleExit",function(){n.props.onModalDismissed&&n.props.onModalDismissed()}),kC(TC(n),"onChange",function(e){n.state.search&&!e||n.setState({searchedChannels:[],serverError:null})}),kC(TC(n),"nextPage",function(e){n.props.actions.getChannels(n.props.teamId,e+1,MC)}),kC(TC(n),"handleJoin",function(e,t){var r=n.props,a=r.actions,o=r.currentUserId,i=r.teamId,s=r.teamName;a.joinChannel(o,i,e.id).then(function(r){r.error?n.setState({serverError:r.error.message}):(Q.a.push(Object(ss.b)(s,e.name)),n.handleHide()),t&&t()})}),kC(TC(n),"search",function(e){if(clearTimeout(n.searchTimeoutId),""===e)return n.onChange(!0),n.setState({search:!1,searchedChannels:[],searching:!1}),void(n.searchTimeoutId="");n.setState({search:!0,searching:!0});var t=setTimeout(function(){n.props.actions.searchMoreChannels(e).then(function(e){t===n.searchTimeoutId&&(e.data?n.setSearchResults(e.data):n.setState({searchedChannels:[],searching:!1}))}).catch(function(){n.setState({searchedChannels:[],searching:!1})})},NC);n.searchTimeoutId=t}),kC(TC(n),"setSearchResults",function(e){n.setState({searchedChannels:e.filter(function(e){return 0===e.delete_at}),searching:!1})}),n.searchTimeoutId=0,n.state={show:!0,search:!1,searchedChannels:[],serverError:null,searching:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jC(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.props.actions.getChannels(this.props.teamId,0,100)}},{key:"render",value:function(){var e,t=this.props,n=t.channels,r=t.teamId,a=t.channelsRequestStarted,o=t.bodyOnly,i=this.state,s=i.search,l=i.searchedChannels,c=i.serverError,u=i.show,p=i.searching;c&&(e=E.a.createElement("div",{className:"form-group has-error"},E.a.createElement("label",{className:"control-label"},c)));var d=E.a.createElement(OE.a,{teamId:r,permissions:[jp.a.CREATE_PUBLIC_CHANNEL,jp.a.CREATE_PRIVATE_CHANNEL]},E.a.createElement("button",{id:"createNewChannel",type:"button",className:"btn btn-primary channel-create-btn",onClick:this.props.handleNewChannel},E.a.createElement(Y.c,{id:"more_channels.create",defaultMessage:"Create New Channel"}))),m=E.a.createElement(OE.a,{teamId:r,permissions:[jp.a.CREATE_PUBLIC_CHANNEL,jp.a.CREATE_PRIVATE_CHANNEL]},E.a.createElement("p",{className:"secondary-message"},E.a.createElement(Y.c,{id:"more_channels.createClick",defaultMessage:"Click 'Create New Channel' to make a new one"}))),f=E.a.createElement(E.a.Fragment,null,E.a.createElement(OC,{channels:s?l:n,channelsPerPage:MC,nextPage:this.nextPage,isSearch:s,search:this.search,handleJoin:this.handleJoin,noResultsText:m,loading:s?p:a,createChannelButton:o&&d}),e);return o?f:E.a.createElement(K.a,{dialogClassName:"a11y__modal more-modal more-modal--action",show:u,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"moreChannelsModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"moreChannelsModalLabel"},E.a.createElement(Y.c,{id:"more_channels.title",defaultMessage:"More Channels"})),d),E.a.createElement(K.a.Body,null,f))}}])&&CC(n.prototype,r),a&&CC(n,a),t}();kC(RC,"propTypes",{channels:v.a.array.isRequired,currentUserId:v.a.string.isRequired,teamId:v.a.string.isRequired,teamName:v.a.string.isRequired,onModalDismissed:v.a.func,handleNewChannel:v.a.func,channelsRequestStarted:v.a.bool,bodyOnly:v.a.bool,actions:v.a.shape({getChannels:v.a.func.isRequired,joinChannel:v.a.func.isRequired,searchMoreChannels:v.a.func.isRequired}).isRequired});var IC=Object(Kl.a)(m.getOtherChannels,function(e){return e&&e.filter(function(e){return 0===e.delete_at})});var AC=Object(r.connect)(function(e){var t=Object(d.getCurrentTeam)(e)||{};return{channels:IC(e)||[],currentUserId:Object(p.getCurrentUserId)(e),teamId:t.id,teamName:t.name,channelsRequestStarted:e.requests.channels.getChannels.status===L.RequestStatus.STARTED}},function(e){return{actions:Object(a.bindActionCreators)({getChannels:s.getChannels,joinChannel:s.joinChannel,searchMoreChannels:Yo.g},e)}})(RC);function xC(e){return(xC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DC(e){return(DC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qC(e,t){return(qC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var HC=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=DC(t).call(this,e))||"object"!==xC(a)&&"function"!=typeof a?UC(r):a).addValue=n.addValue.bind(UC(n)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qC(e,t)}(t,E.a.Component),n=t,(r=[{key:"getStyle",value:function(){var e="mentions__name";return this.props.isSelected&&(e+=" suggestion--selected"),e}},{key:"displayName",value:function(){return this.props.channel.profiles.map(function(e){return"@"+e.username}).join(", ")}},{key:"addValue",value:function(){this.props.onAdd(this.props.channel.profiles)}},{key:"render",value:function(){return E.a.createElement("div",{key:this.props.channel.id,className:"more-modal__row clickable "+this.getStyle(),onClick:this.addValue},E.a.createElement("div",{className:"more-modal__gm-icon bg-text-200"},this.props.channel.profiles.length),E.a.createElement("div",{className:"more-modal__details"},E.a.createElement("div",{className:"more-modal__name"},this.displayName())),E.a.createElement("div",{className:"more-modal__actions"},E.a.createElement("div",{className:"more-modal__actions--round"},E.a.createElement(OO.a,null))))}}])&&LC(n.prototype,r),a&&LC(n,a),t}();function FC(e){return(FC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BC(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function GC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function VC(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function WC(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){VC(o,r,a,i,s,"next",e)}function s(e){VC(o,r,a,i,s,"throw",e)}i(void 0)})}}function zC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KC(e){return(KC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QC(e,t){return(QC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function JC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(HC,"propTypes",{channel:v.a.object.isRequired,isSelected:v.a.bool.isRequired,onAdd:v.a.func.isRequired});var ZC=50,XC=P.Q.MAX_USERS_IN_GM-1,$C=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=KC(t).call(this,e),n=!a||"object"!==FC(a)&&"function"!=typeof a?YC(r):a,JC(YC(n),"loadProfilesMissingStatus",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.filter(function(e){return!t[e.id]}).map(function(e){return e.id});r.length>0&&n.props.actions.getStatusesByIds(r)}),JC(YC(n),"handleHide",function(){n.props.actions.setModalSearchTerm(""),n.setState({show:!1}),n.props.bodyOnly&&n.handleExit()}),JC(YC(n),"setUsersLoadingState",function(e){n.setState({loadingUsers:e})}),JC(YC(n),"handleExit",function(){n.exitToChannel&&Q.a.push(n.exitToChannel),n.props.onModalDismissed&&n.props.onModalDismissed(),n.props.onHide&&n.props.onHide()}),JC(YC(n),"handleSubmit",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.values,t=n.props.actions;if(!n.state.saving){var r=e.map(function(e){return e.id});if(0!==r.length){n.setState({saving:!0});var a=function(e){var t=e.data,r=e.error;n.setState({saving:!1}),r||(n.exitToChannel="/"+n.props.currentTeamName+"/channels/"+t.name,n.handleHide())};1===r.length?t.openDirectChannelToUserId(r[0]).then(a):t.openGroupChannelToUserIds(r).then(a)}}}),JC(YC(n),"addValue",function(e){if(Array.isArray(e))n.addUsers(e);else if("profiles"in e)n.addUsers(e.profiles);else{var t=Object.assign([],n.state.values);-1===t.indexOf(e)&&t.push(e),n.setState({values:t})}}),JC(YC(n),"addUsers",function(e){var t=Object.assign([],n.state.values),r=t.map(function(e){return e.id}),a=!0,o=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;-1===r.indexOf(c.id)&&t.push(c)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}n.setState({values:t})}),JC(YC(n),"getUserProfiles",function(e){var t=e?e+1:0;"any"===n.props.restrictDirectMessage?n.props.actions.getProfiles(t,2*ZC).then(function(){n.setUsersLoadingState(!1)}):n.props.actions.getProfilesInTeam(n.props.currentTeamId,t,2*ZC).then(function(){n.setUsersLoadingState(!1)})}),JC(YC(n),"handlePageChange",function(e,t){e>t&&(n.setUsersLoadingState(!0),n.getUserProfiles(e))}),JC(YC(n),"resetPaging",function(){n.refs.multiselect&&n.refs.multiselect.resetPaging()}),JC(YC(n),"search",function(e){n.props.actions.setModalSearchTerm(e)}),JC(YC(n),"handleDelete",function(e){n.setState({values:e})}),JC(YC(n),"renderAriaLabel",function(e){return e?e.username:null}),JC(YC(n),"renderOption",function(e,t,r){if(e.type&&"G"===e.type)return E.a.createElement(HC,{key:e.id,channel:e,isSelected:t,onAdd:r});var a=Object(j.m)(e),o=a;e.id===n.props.currentUserId?o=E.a.createElement(Y.c,{id:"more_direct_channels.directchannel.you",defaultMessage:"{displayname} (you)",values:{displayname:a}}):e.delete_at&&(o=E.a.createElement(Y.c,{id:"more_direct_channels.directchannel.deactivated",defaultMessage:"{displayname} - Deactivated",values:{displayname:a}}));var i="";t&&(i="more-modal__row--selected");var s=e.delete_at||e.is_bot?null:n.props.statuses[e.id],l=e.is_bot?null:e.email;return E.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+i,onClick:function(){return r(e)}},E.a.createElement(hm.a,{src:ii.Client4.getProfilePictureUrl(e.id,e.last_picture_update),status:s,width:"32",height:"32"}),E.a.createElement("div",{className:"more-modal__details"},E.a.createElement("div",{className:"more-modal__name"},o,E.a.createElement(ko.a,{show:Boolean(e.is_bot),className:"badge-popoverlist"})),E.a.createElement("div",{className:"more-modal__description"},l)),E.a.createElement("div",{className:"more-modal__actions"},E.a.createElement("div",{className:"more-modal__actions--round"},E.a.createElement(OO.a,null))))}),JC(YC(n),"handleSubmitImmediatelyOn",function(e){return e.id===n.props.currentUserId||Boolean(e.delete_at)}),n.searchTimeoutId=0;var o=[];if(e.currentChannelMembers)for(var i=0;i<e.currentChannelMembers.length;i++){var s=Object.assign({},e.currentChannelMembers[i]);s.id!==e.currentUserId&&o.push(s)}return n.state={values:o,show:!0,search:!1,saving:!1,loadingUsers:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QC(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.getUserProfiles(),this.props.actions.getTotalUsersStats(),this.loadProfilesMissingStatus(this.props.users,this.props.statuses)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);var n=e.searchTerm;if(""===n)this.resetPaging();else{var r="any"===e.restrictDirectMessage?"":e.currentTeamId;this.searchTimeoutId=setTimeout(WC(regeneratorRuntime.mark(function e(){var a,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setUsersLoadingState(!0),e.next=3,Promise.all([t.props.actions.searchProfiles(n,{team_id:r}),t.props.actions.searchGroupChannels(n)]);case 3:a=e.sent,o=GC(a,2),i=o[0].data,s=o[1].data,i&&t.props.actions.loadStatusesForProfilesList(i),s&&t.props.actions.loadProfilesForGroupChannels(s),t.resetPaging(),t.setUsersLoadingState(!1);case 11:case"end":return e.stop()}},e)})),P.Q.SEARCH_TIMEOUT_MILLISECONDS)}}this.props.users.length===e.users.length&&Object.keys(this.props.statuses).length===Object.keys(e.statuses).length||this.loadProfilesMissingStatus(e.users,e.statuses)}},{key:"renderValue",value:function(e){return e.data.username}},{key:"render",value:function(){var e,t=this;this.props.currentChannelMembers&&(this.state.values&&this.state.values.length>=XC?e=E.a.createElement(Y.c,{id:"more_direct_channels.new_convo_note.full",defaultMessage:"You've reached the maximum number of people for this conversation. Consider creating a private channel instead."}):this.props.isExistingChannel&&(e=E.a.createElement(Y.c,{id:"more_direct_channels.new_convo_note",defaultMessage:"This will start a new conversation. If you're adding a lot of people, consider creating a private channel instead."})));var n=Object(j.ab)("multiselect.go","Go"),r=Object(j.ab)("multiselect.loading","Loading.."),a=E.a.createElement(Y.c,{id:"multiselect.numPeopleRemaining",defaultMessage:"Use  to browse,  to select. You can add {num, number} more {num, plural, one {person} other {people}}. ",values:{num:XC-this.state.values.length}}),o=this.props.users||[];if(this.state.values.length)o=o.filter(function(e){return 0===e.delete_at&&e.id!==t.props.currentUserId});else{var i=[],s=[],l=!0,c=!1,u=void 0;try{for(var p,d=o[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var m=p.value;(m.delete_at?s:i).push(m)}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}o=i.concat(s)}var f=this.props.groupChannels||[],h=[].concat(BC(o),BC(f)),b=E.a.createElement(wO.a,{key:"moreDirectChannelsList",ref:"multiselect",options:h,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,ariaLabelRenderer:this.renderAriaLabel,perPage:ZC,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,noteText:e,maxValues:XC,numRemainingText:a,buttonSubmitText:n,buttonSubmitLoadingText:r,submitImmediatelyOn:this.handleSubmitImmediatelyOn,saving:this.state.saving,loading:this.state.loadingUsers,users:this.props.users,totalCount:this.props.totalCount,placeholderText:Object(j.ab)("multiselect.placeholder","Search and add members")});return this.props.bodyOnly?b:E.a.createElement(K.a,{dialogClassName:"a11y__modal more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"moreDmModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"moreDmModalLabel"},E.a.createElement(Y.c,{id:"more_direct_channels.title",defaultMessage:"Direct Messages"}))),E.a.createElement(K.a.Body,{role:"application"},b),E.a.createElement(K.a.Footer,{className:"modal-footer--invisible"},E.a.createElement("button",{id:"closeModalButton",type:"button",className:"btn btn-link"},E.a.createElement(Y.c,{id:"general_button.close",defaultMessage:"Close"}))))}}])&&zC(n.prototype,r),a&&zC(n,a),t}();JC($C,"propTypes",{currentUserId:v.a.string.isRequired,currentTeamId:v.a.string.isRequired,currentTeamName:v.a.string.isRequired,searchTerm:v.a.string.isRequired,users:v.a.arrayOf(v.a.object).isRequired,groupChannels:v.a.arrayOf(v.a.object).isRequired,statuses:v.a.object.isRequired,totalCount:v.a.number,currentChannelMembers:v.a.arrayOf(v.a.object),isExistingChannel:v.a.bool.isRequired,restrictDirectMessage:v.a.string,onModalDismissed:v.a.func,onHide:v.a.func,bodyOnly:v.a.bool,actions:v.a.shape({getProfiles:v.a.func.isRequired,getProfilesInTeam:v.a.func.isRequired,getStatusesByIds:v.a.func.isRequired,getTotalUsersStats:v.a.func.isRequired,loadStatusesForProfilesList:v.a.func.isRequired,loadProfilesForGroupChannels:v.a.func.isRequired,openDirectChannelToUserId:v.a.func.isRequired,openGroupChannelToUserIds:v.a.func.isRequired,searchProfiles:v.a.func.isRequired,searchGroupChannels:v.a.func.isRequired,setModalSearchTerm:v.a.func.isRequired}).isRequired});var eP=Object(lE.memoizeResult)(function(e,t){return e.filter(function(e){return Object(To.filterProfilesMatchingTerm)(e.profiles,t).length>0})});var tP=Object(r.connect)(function(e,t){var n=Object(p.getCurrentUserId)(e),r=[];t.isExistingChannel&&(r=Object(p.getProfilesInCurrentChannel)(e));var a,o=Object(u.getConfig)(e).RestrictDirectMessage,i=e.views.search.modalSearch;a=i?"any"===o?Object(p.searchProfiles)(e,i,!1):Object(p.searchProfilesInCurrentTeam)(e,i,!1):"any"===o?Object(p.getProfiles)(e):Object(p.getProfilesInCurrentTeam)(e);var s=eP(Object(m.getChannelsWithUserProfiles)(e),i),l=Object(d.getCurrentTeam)(e),c=Object(p.getTotalUsersStats)(e)||{total_users_count:0};return{currentTeamId:l.id,currentTeamName:l.name,searchTerm:i,users:a,groupChannels:s,statuses:e.entities.users.statuses,currentChannelMembers:r,currentUserId:n,restrictDirectMessage:o,totalCount:c.total_users_count}},function(e){return{actions:Object(a.bindActionCreators)({getProfiles:i.getProfiles,getProfilesInTeam:i.getProfilesInTeam,getStatusesByIds:i.getStatusesByIds,getTotalUsersStats:i.getTotalUsersStats,loadStatusesForProfilesList:f.b,loadProfilesForGroupChannels:cl.i,openDirectChannelToUserId:Yo.e,openGroupChannelToUserIds:Yo.f,searchProfiles:i.searchProfiles,searchGroupChannels:s.searchGroupChannels,setModalSearchTerm:BE.a},e)}})($C);n(313),n(952);function nP(e){return(nP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aP(e,t){return!t||"object"!==nP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oP(e){return(oP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iP(e,t){return(iP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sP=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),aP(this,oP(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iP(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",Object.assign({},this.props,{id:"draftIcon"}),E.a.createElement(Y.c,{id:"generic_icons.channel.draft",defaultMessage:"Channel Draft Icon"},function(e){return E.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 50 51",role:"icon","aria-label":e},E.a.createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},E.a.createElement("path",{d:"M11.980198,46.7136356 L14.9834983,43.7103353 L7.22772277,35.9545597 L4.22442244,38.95786 L4.22442244,42.4892132 L8.44884488,42.4892132 L8.44884488,46.7136356 L11.980198,46.7136356 Z M29.2409241,16.0865729 C29.2409241,15.6025221 28.9989023,15.3605003 28.5148515,15.3605003 C28.2948284,15.3605003 28.1078116,15.4375072 27.9537954,15.5915234 L10.0660066,33.4793122 C9.91199043,33.6333283 9.8349835,33.8203452 9.8349835,34.0403683 C9.8349835,34.5244191 10.0770053,34.7664409 10.5610561,34.7664409 C10.7810792,34.7664409 10.968096,34.6894339 11.1221122,34.5354178 L29.009901,16.647629 C29.1639172,16.4936128 29.2409241,16.306596 29.2409241,16.0865729 Z M27.4587459,9.74993922 L41.1881188,23.4793122 L13.7293729,50.938058 L0,50.938058 L0,37.2086851 L27.4587459,9.74993922 Z M50,12.9182561 C50,14.0843785 49.5929634,15.0744676 48.7788779,15.8885531 L43.30033,21.3671009 L29.5709571,7.637728 L35.049505,2.19218345 C35.8415881,1.35609566 36.8316772,0.938058036 38.019802,0.938058036 C39.1859244,0.938058036 40.1870145,1.35609566 41.0231023,2.19218345 L48.7788779,9.91495573 C49.5929634,10.7730458 50,11.7741359 50,12.9182561 Z"})))}))}}])&&rP(n.prototype,r),a&&rP(n,a),t}(),lP=n(1553),cP=n(1554);function uP(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function pP(e){return(pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hP(e,t,n){return t&&fP(e.prototype,t),n&&fP(e,n),e}function bP(e,t){return!t||"object"!==pP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yP(e,t,n){return(yP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gP(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function gP(e){return(gP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_P(e,t)}function _P(e,t){return(_P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var EP=Qo.a.getState,wP=function(e){function t(){return mP(this,t),bP(this,gP(t).apply(this,arguments))}return vP(t,Mo["a"]),hP(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.isSelection,r=t.channel,a=r.delete_at&&0!==r.delete_at,o=this.props.channelMember,i=null;o&&o.notify_props&&o.mention_count>0&&(i=E.a.createElement("span",{className:"badge"},o.mention_count));var s="mentions__name";n&&(s+=" suggestion--selected");var l=r.display_name,c=null;c=a?E.a.createElement(Dv.a,{className:"icon icon__archive"}):this.props.hasDraft?E.a.createElement(sP,{className:"icon icon__draft icon--body"}):r.type===P.i.OPEN_CHANNEL?E.a.createElement(lP.a,{className:"icon icon__globe icon--body"}):r.type===P.i.PRIVATE_CHANNEL?E.a.createElement(cP.a,{className:"icon icon__lock icon--body"}):r.type===P.i.GM_CHANNEL?E.a.createElement("div",{className:"status status--group"},"G"):E.a.createElement("div",{className:"pull-left"},E.a.createElement("img",{alt:"",className:"mention__image",src:j.J(r.userId)}));var u=null;if(r.type===P.i.DM_CHANNEL){var d=j.u(r.id);j.O(d)&&(d=Object(p.getUser)(EP(),r.userId)),u=E.a.createElement(ko.a,{show:Boolean(d&&d.is_bot),className:"badge-autocomplete"})}return E.a.createElement("div",Object.assign({onClick:this.handleClick,className:s,id:"switchChannel_".concat(r.name)},Mo.a.baseProps),c,E.a.createElement("span",null,l),u,i)}}],[{key:"propTypes",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){dP(e,t,n[t])})}return e}({},yP(gP(t),"propTypes",this),{channelMember:v.a.object,hasDraft:v.a.bool})}}]),t}();var OP=Object(r.connect)(function(e,t){var n=t.item&&t.item.channel?t.item.channel.id:"",r=!!n&&Object(Ml.i)(e,P.G.DRAFT,n);return{channelMember:Object(m.getMyChannelMemberships)(e)[n],hasDraft:r&&Boolean(r.message.trim()||r.fileInfos.length||r.uploadsInProgress.length)}})(wP),SP="";function CP(e,t){var n=!!e.channel.delete_at&&0!==e.channel.delete_at,r=!!t.channel.delete_at&&0!==t.channel.delete_at;if(n&&!r)return 1;if(!n&&r)return-1;if(e.type===P.i.MENTION_CHANNELS&&t.type===P.i.MENTION_MORE_CHANNELS)return-1;if(t.type===P.i.MENTION_CHANNELS&&e.type===P.i.MENTION_MORE_CHANNELS)return 1;if(e.deactivated&&!t.deactivated)return 1;if(t.deactivated&&!e.deactivated)return-1;var a=e.channel,o=t.channel,i=a.display_name.toLowerCase(),s=o.display_name.toLowerCase();a.type===P.i.DM_CHANNEL&&(i=i.substring(1)),o.type===P.i.DM_CHANNEL&&(s=s.substring(1));var l=i.startsWith(SP),c=s.startsWith(SP);return l&&c||!l&&!c?Object(zo.sortChannelsByTypeAndDisplayName)("en",a,o):l?-1:1}var PP=function(e){function t(){return mP(this,t),bP(this,gP(t).apply(this,arguments))}return vP(t,jo["a"]),hP(t,[{key:"handlePretextChanged",value:function(e,t){if(e){SP=e,this.startNewRequest(e);var n=Object(m.getChannelsInCurrentTeam)(EP()).concat(Object(m.getDirectAndGroupChannels)(EP())),r=Object.assign([],Object(p.searchProfiles)(EP(),e,!1));this.formatChannelsAndDispatch(e,t,n,r,!0),this.fetchUsersAndChannels(e,t)}else this.formatUnreadChannelsAndDispatch(t);return!0}},{key:"fetchUsersAndChannels",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t,n){var r,a,o,i,l,c,f,h,b,y,g,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=EP(),a=Object(d.getCurrentTeamId)(r)){e.next=4;break}return e.abrupt("return");case 4:return o=Object(u.getConfig)(r),i="team"===o.RestrictDirectMessage?ii.Client4.autocompleteUsers(t,a,""):ii.Client4.autocompleteUsers(t,"",""),l=s.searchChannels(a,t)(Qo.a.dispatch,Qo.a.getState),c=[],f=[],e.prev=9,e.next=12,i;case 12:return c=e.sent,e.next=15,l;case 15:h=e.sent,b=h.data,f=b,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),Qo.a.dispatch(Object(H.logError)(e.t0));case 23:if(!this.shouldCancelDispatch(t)){e.next=25;break}return e.abrupt("return");case 25:y=Object.assign([],Object(p.searchProfiles)(r,t,!1)).concat(c.users),g=Object(p.getCurrentUserId)(r),Qo.a.dispatch({type:Ko.UserTypes.RECEIVED_PROFILES_LIST,data:y.filter(function(e){return e.id!==g})}),v=Object(m.getChannelsInCurrentTeam)(r).concat(Object(m.getDirectAndGroupChannels)(r)).concat(f),this.formatChannelsAndDispatch(t,n,v,y);case 30:case"end":return e.stop()}},e,this,[[9,20]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){uP(o,r,a,i,s,"next",e)}function s(e){uP(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e,n){return t.apply(this,arguments)}}()},{key:"userWrappedChannel",value:function(e,t){var n="@".concat(e.username);return(e.first_name||e.last_name)&&e.nickname?n+=" - ".concat(j.z(e)," (").concat(e.nickname,")"):e.nickname?n+=" - (".concat(e.nickname,")"):(e.first_name||e.last_name)&&(n+=" - ".concat(j.z(e))),e.delete_at&&(n+=" - "+j.ab("channel_switch_modal.deactivated","Deactivated")),{channel:{display_name:n,name:e.username,id:t?t.id:e.id,userId:e.id,update_at:e.update_at,type:P.i.DM_CHANNEL,last_picture_update:e.last_picture_update||0},name:e.username,deactivated:e.delete_at}}},{key:"formatChannelsAndDispatch",value:function(e,t,n,r){var a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=[],s=Object(m.getMyChannelMemberships)(EP());if(!this.shouldCancelDispatch(e)){for(var l={},d=function(e){var t=e.toLowerCase(),n=EP(),r=Object(p.getUserIdsInChannels)(n),a={};return function(e){var o=e.display_name;if(e.type===P.i.GM_CHANNEL||e.type===P.i.DM_CHANNEL){var i=r[e.id]||new Set([]);if(!i.size&&e.type===P.i.DM_CHANNEL){var s=j.E(e.name);Object(p.getUser)(n,s)&&i.add(s)}var l=!0,c=!1,u=void 0;try{for(var d,m=i[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var f=d.value,h=a[f];if(!h){var b=Object(p.getUser)(n,f);if(!b)continue;var y=b.nickname,g=b.username;h="".concat(y).concat(g).concat(j.z(b)),a[f]=h}o+=h}}catch(e){c=!0,u=e}finally{try{l||null==m.return||m.return()}finally{if(c)throw u}}}return o.toLowerCase().includes(t)}}(e),f=EP(),h=Object(u.getConfig)(f),b="true"===h.ExperimentalViewArchivedChannels,y=0,g=Object.keys(n);y<g.length;y++){var v=n[g[y]];if(!l[v.id]&&d(v)){var _=Object.assign({},v),E=0!==v.delete_at,w={channel:_,name:_.name,deactivated:!1};if(!b&&E)continue;if(E&&s[v.id])w.type=P.i.ARCHIVED_CHANNEL;else{if(E&&!s[v.id])continue;if(_.type===P.i.GM_CHANNEL){if(_.name=_.display_name,w.name=_.name,Object(zo.isGroupChannelVisible)(h,Object(c.getMyPreferences)(f),v,Object($a.getLastPostPerChannel)(f)[v.id],Object(zo.isUnreadChannel)(Object(m.getMyChannelMemberships)(f),v)))w.type=P.i.MENTION_CHANNELS;else if(w.type=P.i.MENTION_MORE_CHANNELS,o)continue}else if(_.type===P.i.DM_CHANNEL){if("continue"===function(){var e=j.E(_.name),t=r.find(function(t){return t.id===e});if(!t)return"continue";if(l[t.id]=!0,w=a.userWrappedChannel(t,_),Object(zo.isDirectChannelVisible)(t.id,h,Object(c.getMyPreferences)(f),v,Object($a.getLastPostPerChannel)(f)[v.id],Object(zo.isUnreadChannel)(Object(m.getMyChannelMemberships)(f),v)))w.type=P.i.MENTION_CHANNELS;else if(w.type=P.i.MENTION_MORE_CHANNELS,o)return"continue"}())continue}else if(s[v.id])w.type=P.i.MENTION_CHANNELS;else if(w.type=P.i.MENTION_MORE_CHANNELS,o||!_.display_name.toLowerCase().startsWith(e))continue}l[v.id]=!0,i.push(w)}}for(var O=0;O<r.length;O++){var S=r[O];if(!l[S.id]){var C=Object(c.getBool)(EP(),L.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW,S.id,!1),T=this.userWrappedChannel(S);if(C)T.type=P.i.MENTION_CHANNELS;else if(T.type=P.i.MENTION_MORE_CHANNELS,o)continue;l[S.id]=!0,i.push(T)}}var k=i.sort(CP).map(function(e){return e.channel.name});o&&i.push({type:P.i.MENTION_MORE_CHANNELS,loading:!0}),t({matchedPretext:e,terms:k,items:i,component:OP})}}},{key:"formatUnreadChannelsAndDispatch",value:function(e){for(var t=Object(m.makeGetChannel)(),n=Object(m.getSortedUnreadChannelIds)(EP(),!1),r=[],a=0;a<n.length;a++){var o=t(EP(),{id:n[a]})||{},i={channel:o,name:o.name,deactivated:!1};if(o.type===P.i.GM_CHANNEL)i.name=o.display_name;else if(o.type===P.i.DM_CHANNEL){var s=Object(p.getUser)(EP(),j.E(o.name));if(!s)continue;i=this.userWrappedChannel(s,o)}i.type=P.i.MENTION_UNREAD_CHANNELS,r.push(i)}e({matchedPretext:"",terms:r.map(function(e){return e.channel.name}),items:r,component:OP})}}]),t}();function TP(e){return(TP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MP(e,t,n){return t&&kP(e.prototype,t),n&&kP(e,n),e}function NP(e,t){return!t||"object"!==TP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RP(e){return(RP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AP(e,t)}function AP(e,t){return(AP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xP=Qo.a.getState,LP=function(e){function t(){return jP(this,t),NP(this,RP(t).apply(this,arguments))}return IP(t,Mo["a"]),MP(t,[{key:"render",value:function(){var e=this.props,t=e.item,n="mentions__name";return e.isSelection&&(n+=" suggestion--selected"),E.a.createElement("div",Object.assign({onClick:this.handleClick,className:n},Mo.a.baseProps),E.a.createElement("div",{className:"status"},E.a.createElement(Y.c,{id:"general_tab.teamIcon",defaultMessage:"Team Icon"},function(e){return E.a.createElement("i",{className:"fa fa-group",title:e})})),t.display_name)}}]),t}(),DP="";function UP(e,t){var n=e.display_name.toLowerCase(),r=t.display_name.toLowerCase(),a=n.startsWith(DP),o=r.startsWith(DP);if(a&&o){var i=Object(zl.a)(xP());return n!==r?n.localeCompare(r,i,{numeric:!0}):e.name.localeCompare(t.name,i,{numeric:!0})}return a?-1:1}var qP=function(e){function t(){return jP(this,t),NP(this,RP(t).apply(this,arguments))}return IP(t,jo["a"]),MP(t,[{key:"handlePretextChanged",value:function(e,t){if(e){DP=e,this.startNewRequest(e);var n=d.getMyTeams(xP()).filter(function(t){return-1!==t.display_name.toLowerCase().indexOf(e)||-1!==t.name.indexOf(e)}),r=n.sort(UP).map(function(e){return e.name});return t({matchedPretext:e,terms:r,items:n,component:LP}),!0}return!1}}]),t}();function HP(e){return(HP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FP(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function BP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GP(e){return(GP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WP(e,t){return(WP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var KP="channel",YP="team",QP=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=GP(t).call(this,e),n=!a||"object"!==HP(a)&&"function"!=typeof a?VP(r):a,zP(VP(n),"focusTextbox",function(){if(null!=n.switchBox){var e=n.switchBox.getTextbox();document.activeElement!==e&&(e.focus(),j.eb(e))}}),zP(VP(n),"setSwitchBoxRef",function(e){n.switchBox=e,n.focusTextbox()}),zP(VP(n),"onShow",function(){n.setState({text:""})}),zP(VP(n),"onHide",function(){n.focusPostTextbox(),n.setState({text:""}),n.props.onHide()}),zP(VP(n),"focusPostTextbox",function(){T.m()||setTimeout(function(){var e=document.querySelector("#post_textbox");e&&e.focus()})}),zP(VP(n),"onChange",function(e){n.setState({text:e.target.value})}),zP(VP(n),"handleKeyDown",function(e){j.S(e,P.Q.KeyCodes.TAB)&&(e.preventDefault(),n.switchMode())}),zP(VP(n),"handleSubmit",function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var r,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(n.state.mode!==KP){e.next=11;break}if(r=n.props.actions,a=r.joinChannelById,o=r.switchToChannel,i=t.channel,t.type!==P.Q.MENTION_MORE_CHANNELS||i.type!==P.Q.OPEN_CHANNEL){e.next=8;break}return e.next=8,a(i.id);case 8:o(i).then(function(e){e.data&&n.onHide()}),e.next=13;break;case 11:Q.a.push("/"+t.name),n.onHide();case 13:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){FP(o,r,a,i,s,"next",e)}function s(e){FP(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()),zP(VP(n),"enableChannelProvider",function(){n.channelProviders[0].disableDispatches=!1,n.teamProviders[0].disableDispatches=!0}),zP(VP(n),"enableTeamProvider",function(){n.teamProviders[0].disableDispatches=!1,n.channelProviders[0].disableDispatches=!0}),zP(VP(n),"switchMode",function(){n.state.mode===KP&&n.props.showTeamSwitcher?(n.enableTeamProvider(),n.setState({mode:YP})):n.state.mode===YP&&(n.enableChannelProvider(),n.setState({mode:KP}))}),zP(VP(n),"handleOnClick",function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-mode");n.enableChannelProvider(),n.setState({mode:t}),n.focusTextbox()}),n.channelProviders=[new PP],n.teamProviders=[new qP],n.switchBox=null,n.state={text:"",mode:KP},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WP(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t=this.channelProviders,n=!0,r=Object(Me.b)("quick_switch_modal.channelsShortcut.windows"),a="CTRL+K";j.T()&&(r=Object(Me.b)("quick_switch_modal.channelsShortcut.mac"),a="CMD+K");var o,i=Object(Me.b)("quick_switch_modal.teamsShortcut.windows"),s="CTRL+ALT+K";if(j.T()&&(i=Object(Me.b)("quick_switch_modal.teamsShortcut.mac"),s="CMD+ALT+K"),this.props.showTeamSwitcher){var l="",c="";this.state.mode===YP?(t=this.teamProviders,n=!1,c="active"):l="active",e=E.a.createElement("div",{className:"nav nav-tabs"},E.a.createElement("li",{className:l},E.a.createElement("a",{"data-mode":"channel",href:"#",onClick:this.handleOnClick},E.a.createElement(Y.c,{id:"quick_switch_modal.channels",defaultMessage:"Channels"}),E.a.createElement("span",{className:"small"},E.a.createElement(Y.c,{id:r,defaultMessage:a})))),E.a.createElement("li",{className:c},E.a.createElement("a",{"data-mode":"team",href:"#",onClick:this.handleOnClick},E.a.createElement(Y.c,{id:"quick_switch_modal.teams",defaultMessage:"Teams"}),E.a.createElement("span",{className:"small"},E.a.createElement(Y.c,{id:i,defaultMessage:s})))))}return o=j.U()?E.a.createElement(Y.c,{id:"quick_switch_modal.help_mobile",defaultMessage:"Type to find a channel."}):this.props.showTeamSwitcher?E.a.createElement(Y.c,{id:"quick_switch_modal.help",defaultMessage:"Start typing then use TAB to toggle channels/teams,  to browse,  to select, and ESC to dismiss."}):E.a.createElement(Y.c,{id:"quick_switch_modal.help_no_team",defaultMessage:"Type to find a channel. Use  to browse,  to select, ESC to dismiss."}),E.a.createElement(K.a,{dialogClassName:"a11y__modal channel-switch-modal modal--overflow",ref:"modal",show:!0,onHide:this.onHide,enforceFocus:!1,restoreFocus:!1,role:"dialog","aria-labelledby":"quickSwitchModalLabel"},E.a.createElement(K.a.Header,{id:"quickSwitchModalLabel",closeButton:!0}),E.a.createElement(K.a.Body,null,e,E.a.createElement("div",{id:"quickSwitchHint",className:"modal__hint"},o),E.a.createElement(Ni.a,{id:"quickSwitchInput",ref:this.setSwitchBoxRef,className:"form-control focused",onChange:this.onChange,value:this.state.text,onKeyDown:this.handleKeyDown,onItemSelected:this.handleSubmit,listComponent:Ri.a,maxLength:"64",providers:t,listStyle:"bottom",completeOnTab:!1,spellCheck:"false",renderDividers:n,delayInputUpdate:!0,openWhenEmpty:!0})))}}])&&BP(n.prototype,r),a&&BP(n,a),t}();zP(QP,"propTypes",{onHide:v.a.func.isRequired,showTeamSwitcher:v.a.bool,actions:v.a.shape({joinChannelById:v.a.func.isRequired,switchToChannel:v.a.func.isRequired}).isRequired});var JP=Object(r.connect)(function(){return{showTeamSwitcher:!1}},function(e){return{actions:Object(a.bindActionCreators)({joinChannelById:Ea.d,switchToChannel:Ea.l},e)}})(QP);function ZP(e){return(ZP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $P(e){return($P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tT(e,t){return(tT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rT=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=$P(t).call(this,e),n=!a||"object"!==ZP(a)&&"function"!=typeof a?eT(r):a,nT(eT(n),"onEnterKeyDown",function(e){var t=j.S(e,P.Q.KeyCodes.ENTER),r=n.props.ctrlSend;r&&t&&!e.ctrlKey?e.preventDefault():(r&&t&&e.ctrlKey||!r&&t&&!e.shiftKey&&!e.altKey)&&n.handleSubmit(e)}),nT(eT(n),"handleSubmit",function(e){e.preventDefault(),pu.a.findDOMNode(n.refs.display_name).value.trim().length<P.Q.MIN_CHANNELNAME_LENGTH?n.setState({displayNameError:!0}):n.props.onSubmitChannel()}),nT(eT(n),"handleChange",function(){var e={displayName:n.refs.display_name.value,header:n.refs.channel_header.value,purpose:n.refs.channel_purpose.value};n.props.onDataChanged(e)}),nT(eT(n),"handleOnURLChange",function(e){e.preventDefault(),n.props.onChangeURLPressed&&n.props.onChangeURLPressed()}),nT(eT(n),"handlePublicTypeSelect",function(){n.props.onTypeSwitched("O")}),nT(eT(n),"handlePrivateTypeSelect",function(){n.props.onTypeSwitched("P")}),n.state={displayNameError:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tT(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===e.show&&!1===this.props.show&&this.setState({displayNameError:""})}},{key:"componentDidMount",value:function(){(T.f()||T.d())&&Hl()("body").addClass("browser--ie")}},{key:"render",value:function(){var e=this.props,t=e.canCreatePublicChannel,n=e.canCreatePrivateChannel,r=t&&n,a=null,o=null,i="form-group";this.state.displayNameError&&(a=E.a.createElement("p",{className:"input__help error"},E.a.createElement(Y.c,{id:"channel_modal.displayNameError",defaultMessage:"Channel name must be 2 or more characters"}),this.state.displayNameError),i+=" has-error"),this.props.serverError&&(o=E.a.createElement("div",{className:"form-group has-error"},E.a.createElement("div",{className:"col-sm-12"},E.a.createElement("p",{id:"createChannelError",className:"input__help error"},this.props.serverError))));var s=E.a.createElement("div",{className:"flex-parent"},E.a.createElement(lP.a,{className:"icon icon__globe icon--body type-icon"}),E.a.createElement(Y.c,{id:"channel_modal.publicName",defaultMessage:"Public"}),E.a.createElement(Y.c,{id:"channel_modal.publicHint",defaultMessage:" - Anyone can join this channel."})),l=E.a.createElement("div",{className:"flex-parent"},E.a.createElement(cP.a,{className:"icon icon__lock icon--body type-icon"}),E.a.createElement(Y.c,{id:"channel_modal.privateName",defaultMessage:"Private"}),E.a.createElement(Y.c,{id:"channel_modal.privateHint",defaultMessage:" - Only invited members can join this channel."})),c=null;c=r?E.a.createElement("fieldset",{key:"channelType",className:"multi-select__radio"},E.a.createElement("div",{className:"radio"},E.a.createElement("label",null,E.a.createElement("input",{id:"public",type:"radio",name:"channelType",checked:"O"===this.props.channelType,onChange:this.handlePublicTypeSelect}),s)),E.a.createElement("div",{className:"radio"},E.a.createElement("label",null,E.a.createElement("input",{id:"private",type:"radio",name:"channelType",checked:"P"===this.props.channelType,onChange:this.handlePrivateTypeSelect}),l))):E.a.createElement("div",{className:"type-container multi-select__radio"},E.a.createElement("div",{className:"radio"},t?s:null,n?l:null));var u=Object(ss.d)();return E.a.createElement("span",null,E.a.createElement(K.a,{dialogClassName:"a11y__modal new-channel__modal new-channel",show:this.props.show,bsSize:"large",onHide:this.props.onModalDismissed,onExited:this.props.onModalExited,autoFocus:!0,restoreFocus:!0,role:"dialog","aria-labelledby":"newChannelModalLabel"},E.a.createElement(K.a.Header,null,E.a.createElement("button",{type:"button",className:"close",onClick:this.props.onModalDismissed},E.a.createElement("span",{"aria-hidden":"true"},""),E.a.createElement("span",{className:"sr-only"},"Close")),E.a.createElement(K.a.Title,{componentClass:"h1",id:"newChannelModalLabel"},E.a.createElement(Y.c,{id:"channel_modal.modalTitle",defaultMessage:"New Channel"}))),E.a.createElement("form",{role:"form",className:"form-horizontal"},E.a.createElement(K.a.Body,null,E.a.createElement("div",{className:"form-group"},E.a.createElement("label",{className:"col-sm-3 form__label control-label"},E.a.createElement(Y.c,{id:"channel_modal.type",defaultMessage:"Type"})),E.a.createElement("div",{className:"col-sm-9"},c)),E.a.createElement("div",{className:i},E.a.createElement("label",{className:"col-sm-3 form__label control-label"},E.a.createElement(Y.c,{id:"channel_modal.name",defaultMessage:"Name"})),E.a.createElement("div",{className:"col-sm-9"},E.a.createElement(ke.a,{id:"newChannelName",onChange:this.handleChange,type:"text",ref:"display_name",className:"form-control",placeholder:{id:Object(Me.b)("channel_modal.nameEx"),defaultMessage:'E.g.: "Bugs", "Marketing", ""'},maxLength:P.Q.MAX_CHANNELNAME_LENGTH,value:this.props.channelData.displayName,autoFocus:!0,onKeyDown:this.onEnterKeyDown}),a,E.a.createElement("p",{className:"input__help dark"},"URL: "+u+this.props.channelData.name+" (",E.a.createElement("button",{className:"color--link style--none",onClick:this.handleOnURLChange},E.a.createElement(Y.c,{id:"channel_modal.edit",defaultMessage:"Edit"})),")"))),E.a.createElement("div",{className:"form-group"},E.a.createElement("div",{className:"col-sm-3"},E.a.createElement("label",{className:"form__label control-label"},E.a.createElement(Y.c,{id:"channel_modal.purpose",defaultMessage:"Purpose"})),E.a.createElement("label",{className:"form__label light"},E.a.createElement(Y.c,{id:"channel_modal.optional",defaultMessage:"(optional)"}))),E.a.createElement("div",{className:"col-sm-9"},E.a.createElement("textarea",{id:"newChannelPurpose",className:"form-control no-resize",ref:"channel_purpose",rows:"4",placeholder:j.ab("channel_modal.purposeEx",'E.g.: "A channel to file bugs and improvements"'),maxLength:"250",value:this.props.channelData.purpose,onChange:this.handleChange}),E.a.createElement("p",{className:"input__help"},E.a.createElement(Y.c,{id:"channel_modal.descriptionHelp",defaultMessage:"Describe how this channel should be used."})))),E.a.createElement("div",{className:"form-group less"},E.a.createElement("div",{className:"col-sm-3"},E.a.createElement("label",{className:"form__label control-label"},E.a.createElement(Y.c,{id:"channel_modal.header",defaultMessage:"Header"})),E.a.createElement("label",{className:"form__label light"},E.a.createElement(Y.c,{id:"channel_modal.optional",defaultMessage:"(optional)"}))),E.a.createElement("div",{className:"col-sm-9"},E.a.createElement("textarea",{id:"newChannelHeader",className:"form-control no-resize",ref:"channel_header",rows:"4",placeholder:j.ab("channel_modal.headerEx",'E.g.: "[Link Title](http://example.com)"'),maxLength:"1024",value:this.props.channelData.header,onChange:this.handleChange}),E.a.createElement("p",{className:"input__help"},E.a.createElement(Y.c,{id:"channel_modal.headerHelp",defaultMessage:"Set text that will appear in the header of the channel beside the channel name. For example, include frequently used links by typing [Link Title](http://example.com)."})),o))),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{id:"cancelNewChannel",type:"button",className:"btn btn-link",onClick:this.props.onModalDismissed,onBlur:function(){return document.getElementById("newChannelName").focus()}},E.a.createElement(Y.c,{id:"channel_modal.cancel",defaultMessage:"Cancel"})),E.a.createElement("button",{id:"submitNewChannel",onClick:this.handleSubmit,type:"submit",className:"btn btn-primary"},E.a.createElement(Y.c,{id:"channel_modal.createNew",defaultMessage:"Create New Channel"}))))))}}])&&XP(n.prototype,r),a&&XP(n,a),t}();nT(rT,"propTypes",{show:v.a.bool.isRequired,currentTeamId:v.a.string.isRequired,channelType:v.a.string.isRequired,channelData:v.a.object.isRequired,ctrlSend:v.a.bool,serverError:v.a.node,onSubmitChannel:v.a.func.isRequired,onModalDismissed:v.a.func.isRequired,onModalExited:v.a.func,onTypeSwitched:v.a.func.isRequired,onChangeURLPressed:v.a.func.isRequired,onDataChanged:v.a.func.isRequired,canCreatePublicChannel:v.a.bool.isRequired,canCreatePrivateChannel:v.a.bool.isRequired});var aT=Object(r.connect)(function(e){return{ctrlSend:Object(c.getBool)(e,L.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),currentTeamId:Object(d.getCurrentTeamId)(e)}})(rT);function oT(e){return(oT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sT(e){return(sT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cT(e,t){return(cT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pT=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=sT(t).call(this,e),n=!a||"object"!==oT(a)&&"function"!=typeof a?lT(r):a,uT(lT(n),"onURLChanged",function(e){var t=e.target.value.trim();n.setState({currentURL:t.replace(/[^A-Za-z0-9-_]/g,"").toLowerCase(),userEdit:!0})}),uT(lT(n),"formattedError",function(e,t,n){return E.a.createElement("span",{key:e},E.a.createElement(Y.c,{id:t,defaultMessage:n}),E.a.createElement("br",null))}),uT(lT(n),"getURLError",function(e){var t=[];return e.length<2&&t.push(n.formattedError("error1",Object(Me.b)("change_url.longer"),"URL must be two or more characters.")),"-"!==e.charAt(0)&&"_"!==e.charAt(0)||t.push(n.formattedError("error2",Object(Me.b)("change_url.startWithLetter"),"URL must start with a letter or number.")),e.length>1&&("-"===e.charAt(e.length-1)||"_"===e.charAt(e.length-1))&&t.push(n.formattedError("error3",Object(Me.b)("change_url.endWithLetter"),"URL must end with a letter or number.")),e.indexOf("__")>-1&&t.push(n.formattedError("error4",Object(Me.b)("change_url.noUnderscore"),"URL can not contain two underscores in a row.")),0===t.length&&t.push(n.formattedError("errorlast",Object(Me.b)("change_url.invalidUrl"),"Invalid URL")),t}),uT(lT(n),"onSubmit",function(e){e.preventDefault();var t=n.refs.urlinput.value;Object(ss.a)(t)!==t||t.length<2||t.indexOf("__")>-1?n.setState({urlError:n.getURLError(t)}):(n.setState({urlError:"",userEdit:!1}),n.props.onModalSubmit(t))}),uT(lT(n),"onCancel",function(){n.setState({urlError:"",userEdit:!1}),n.props.onModalDismissed()}),n.state={currentURL:e.currentURL,urlError:"",userEdit:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cT(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.userEdit||this.setState({currentURL:e.currentURL})}},{key:"render",value:function(){var e="input-group input-group--limit",t=null;this.state.urlError&&(e+=" has-error"),(this.props.serverError||this.state.urlError)&&(t=E.a.createElement("div",{className:"has-error"},E.a.createElement("p",{className:"input__help error"},this.state.urlError||this.props.serverError)));var n=this.props.currentTeamURL+"/channels",r=Object(ss.d)(n),a=E.a.createElement(Ec.a,{id:"urlTooltip"},n);return E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.props.show,onHide:this.onCancel,onExited:this.props.onModalExited,role:"dialog","aria-labelledby":"changeUrlModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"changeUrlModalLabel"},this.props.title)),E.a.createElement("form",{role:"form",className:"form-horizontal"},E.a.createElement(K.a.Body,null,E.a.createElement("div",{className:"modal-intro"},E.a.createElement(Y.c,{id:"channel_flow.changeUrlDescription",defaultMessage:"Some characters are now allowed in URLs and may be removed."})),E.a.createElement("div",{className:"form-group"},E.a.createElement("label",{className:"col-sm-3 form__label control-label"},E.a.createElement(Y.c,{id:"change_url.urlLabel",defaultMessage:"Channel URL"})),E.a.createElement("div",{className:"col-sm-9"},E.a.createElement("div",{className:e},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:a},E.a.createElement("span",{className:"input-group-addon"},r)),E.a.createElement("input",{type:"text",ref:"urlinput",className:"form-control",maxLength:P.Q.MAX_CHANNELNAME_LENGTH,onChange:this.onURLChanged,value:this.state.currentURL,autoFocus:!0,tabIndex:"1"})),t))),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onCancel},E.a.createElement(Y.c,{id:"change_url.close",defaultMessage:"Close"})),E.a.createElement("button",{onClick:this.onSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},this.props.submitButtonText))))}}])&&iT(n.prototype,r),a&&iT(n,a),t}();uT(pT,"propTypes",{show:v.a.bool.isRequired,title:v.a.node,submitButtonText:v.a.node,currentURL:v.a.string,currentTeamURL:v.a.string.isRequired,serverError:v.a.node,onModalSubmit:v.a.func.isRequired,onModalExited:v.a.func,onModalDismissed:v.a.func.isRequired}),uT(pT,"defaultProps",{show:!1,title:"Change URL",submitButtonText:"Save",currentURL:"",serverError:null});var dT=Object(r.connect)(function(e){var t=Object(d.getCurrentTeam)(e);return{currentTeamURL:"".concat(Object(ss.e)(),"/").concat(t.name)}})(pT);function mT(e){return(mT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hT(e){return(hT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yT(e,t){return(yT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vT=1,_T=2,ET=3,wT=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=hT(t).call(this,e),n=!a||"object"!==mT(a)&&"function"!=typeof a?bT(r):a,gT(bT(n),"onSubmit",function(){if(n.state.channelDisplayName)if(n.state.channelName.length<2)n.setState({flowState:ET});else{var e=n.props,t=e.actions,r={team_id:e.currentTeamId,name:n.state.channelName,display_name:n.state.channelDisplayName,purpose:n.state.channelPurpose,header:n.state.channelHeader,type:n.state.channelType};t.createChannel(r).then(function(e){e.error?n.onCreateChannelError(e.error):(n.props.onModalDismissed(),t.switchToChannel(e.data))})}else n.setState({serverError:j.ab("channel_flow.invalidName","Invalid Channel Name")})}),gT(bT(n),"onCreateChannelError",function(e){"model.channel.is_valid.2_or_more.app_error"===e.id?n.setState({flowState:ET,serverError:E.a.createElement(Y.c,{id:"channel_flow.handleTooShort",defaultMessage:"Channel URL must be 2 or more lowercase alphanumeric characters"})}):"store.sql_channel.update.exists.app_error"===e.id?n.setState({serverError:j.ab("channel_flow.alreadyExist","A channel with that URL already exists")}):n.setState({serverError:e.message})}),gT(bT(n),"typeSwitched",function(e){n.setState({channelType:e,serverError:""})}),gT(bT(n),"urlChangeRequested",function(e){e&&e.preventDefault(),n.setState({flowState:_T})}),gT(bT(n),"urlChangeSubmitted",function(e){n.state.flowState===ET?n.setState({channelName:e,nameModified:!0},n.onSubmit):n.setState({flowState:vT,serverError:null,channelName:e,nameModified:!0})}),gT(bT(n),"urlChangeDismissed",function(){n.setState({flowState:vT})}),gT(bT(n),"channelDataChanged",function(e){n.setState({channelDisplayName:e.displayName,channelPurpose:e.purpose,channelHeader:e.header}),n.state.nameModified||n.setState({channelName:Object(ss.a)(e.displayName.trim())})}),n.state={serverError:"",channelType:e.channelType||P.Q.OPEN_CHANNEL,flowState:vT,channelDisplayName:"",channelName:"",channelPurpose:"",channelHeader:"",nameModified:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yT(e,t)}(t,E.a.Component),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===e.show&&!1===this.props.show&&this.setState({serverError:"",channelType:e.channelType,flowState:vT,channelDisplayName:"",channelName:"",channelPurpose:"",channelHeader:"",nameModified:!1})}},{key:"render",value:function(){var e={name:this.state.channelName,displayName:this.state.channelDisplayName,purpose:this.state.channelPurpose,header:this.state.channelHeader},t=!1,n=!1,r="",a="";if(this.props.show)switch(this.state.flowState){case vT:t=!0;break;case _T:n=!0,a=r=E.a.createElement(Y.c,{id:"channel_flow.changeUrlTitle",defaultMessage:"Change Channel URL"});break;case ET:n=!0,r=E.a.createElement(Y.c,{id:"channel_flow.set_url_title",defaultMessage:"Set Channel URL"}),a=E.a.createElement(Y.c,{id:"channel_flow.create",defaultMessage:"Create Channel"})}return E.a.createElement("span",null,E.a.createElement(aT,{show:t,channelType:this.state.channelType,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,channelData:e,serverError:this.state.serverError,onSubmitChannel:this.onSubmit,onModalDismissed:this.props.onModalDismissed,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged}),E.a.createElement(dT,{show:n,title:r,submitButtonText:a,currentURL:this.state.channelName,serverError:this.state.serverError,onModalSubmit:this.urlChangeSubmitted,onModalDismissed:this.urlChangeDismissed}))}}])&&fT(n.prototype,r),a&&fT(n,a),t}();gT(wT,"propTypes",{show:v.a.bool.isRequired,channelType:v.a.string.isRequired,onModalDismissed:v.a.func.isRequired,currentTeamId:v.a.string.isRequired,canCreatePublicChannel:v.a.bool.isRequired,canCreatePrivateChannel:v.a.bool.isRequired,actions:v.a.shape({createChannel:v.a.func.isRequired,switchToChannel:v.a.func.isRequired})}),gT(wT,"defaultProps",{show:!1,channelType:P.Q.OPEN_CHANNEL});var OT=Object(r.connect)(function(e){return{currentTeamId:Object(d.getCurrentTeamId)(e)}},function(e){return{actions:Object(a.bindActionCreators)({createChannel:s.createChannel,switchToChannel:Ea.l},e)}})(wT);function ST(e){return(ST="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PT(e,t){return!t||"object"!==ST(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TT(e){return(TT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jT(e,t){return(jT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kT=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),PT(this,TT(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jT(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.arrow.down",defaultMessage:"Down Arrow Icon"},function(e){return E.a.createElement("svg",{width:"10px",height:"10px",viewBox:"0 0 10 10",style:MT,role:"icon","aria-label":e},E.a.createElement("g",{transform:"matrix(1,0,0,1,-20,-18)"},E.a.createElement("g",{transform:"matrix(0.0330723,0,0,0.0322634,15.8132,12.3164)"},E.a.createElement("path",{d:"M245.803,377.493C245.803,377.493 204.794,336.485 179.398,311.088C168.55,300.24 150.962,300.24 140.114,311.088C138.327,312.875 136.517,314.686 134.73,316.473C123.882,327.321 123.882,344.908 134.73,355.756C167.972,388.998 233.949,454.975 256.949,477.975C262.158,483.184 269.223,486.111 276.591,486.111C277.38,486.111 278.176,486.111 278.965,486.111C286.332,486.111 293.397,483.184 298.607,477.975C321.607,454.975 387.584,388.998 420.826,355.756C431.674,344.908 431.674,327.321 420.826,316.473C419.039,314.686 417.228,312.875 415.441,311.088C404.593,300.24 387.005,300.24 376.158,311.088C350.761,336.485 309.753,377.493 309.753,377.493C309.753,377.493 309.753,279.687 309.753,203.94C309.753,196.573 306.826,189.508 301.617,184.298C296.408,179.089 289.342,176.162 281.975,176.162C279.191,176.162 276.364,176.162 273.58,176.162C266.213,176.162 259.148,179.089 253.939,184.298C248.729,189.508 245.803,196.573 245.803,203.94L245.803,377.493Z"}))))}))}}])&&CT(n.prototype,r),a&&CT(n,a),t}(),MT={fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.41421};function NT(e){return(NT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IT(e,t){return!t||"object"!==NT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AT(e){return(AT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xT(e,t){return(xT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DT=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),IT(this,AT(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xT(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e="none";return this.props.show&&(e="block"),E.a.createElement("div",{id:"unreadIndicator"+this.props.name,className:"nav-pills__unread-indicator "+this.props.extraClass,style:{display:e},onClick:this.props.onClick},this.props.content,E.a.createElement(kT,{className:"icon icon__unread"}))}}])&&RT(n.prototype,r),a&&RT(n,a),t}();LT(DT,"propTypes",{onClick:v.a.func.isRequired,show:v.a.bool,extraClass:v.a.string,content:v.a.node,name:v.a.string}),LT(DT,"defaultProps",{show:!1,extraClass:"",content:""});var UT=n(1614);function qT(e){return(qT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FT(e){return(FT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GT(e,t){return(GT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WT=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=FT(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==qT(a)&&"function"!=typeof a?BT(r):a,VT(BT(n),"isUserOutOfOffice",function(){return n.props.status===P.O.OUT_OF_OFFICE}),VT(BT(n),"setStatus",function(e){n.props.actions.setStatus({user_id:n.props.userId,status:e})}),VT(BT(n),"setOnline",function(e){e.preventDefault(),n.setStatus(P.O.ONLINE)}),VT(BT(n),"setOffline",function(e){e.preventDefault(),n.setStatus(P.O.OFFLINE)}),VT(BT(n),"setAway",function(e){e.preventDefault(),n.setStatus(P.O.AWAY)}),VT(BT(n),"setDnd",function(e){e.preventDefault(),n.setStatus(P.O.DND)}),VT(BT(n),"showStatusChangeConfirmation",function(e){var t={ModalId:P.r.RESET_STATUS,dialogType:gl,dialogProps:{newStatus:e}};n.props.actions.openModal(t)}),VT(BT(n),"renderProfilePicture",function(){return n.props.profilePicture?E.a.createElement("img",{alt:"",className:"user__picture",src:n.props.profilePicture}):null}),VT(BT(n),"renderDropdownIcon",function(){return E.a.createElement(Y.c,{id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"},function(e){return E.a.createElement("i",{className:"fa fa-caret-down",title:e})})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GT(e,t)}(t,E.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.isUserOutOfOffice()&&""===this.props.autoResetPref,n=this.renderProfilePicture(),r=this.renderDropdownIcon(),a=t?function(){return e.showStatusChangeConfirmation("online")}:this.setOnline,o=t?function(){return e.showStatusChangeConfirmation("dnd")}:this.setDnd,i=t?function(){return e.showStatusChangeConfirmation("away")}:this.setAway,s=t?function(){return e.showStatusChangeConfirmation("offline")}:this.setOffline;return E.a.createElement(du.a,{onToggle:this.onToggle,style:this.props.style},E.a.createElement("div",{className:"status-wrapper status-selector"},n,E.a.createElement("button",{className:"status style--none","aria-label":Object(j.ab)("status_dropdown.menuAriaLabel","set status")},E.a.createElement(UT.a,{status:this.props.status,button:!0})),E.a.createElement("span",{className:"status status-edit edit"},r)),E.a.createElement(mu.a,{ariaLabel:Object(j.ab)("status_dropdown.menuAriaLabel","set status")},E.a.createElement(LO.a,null,E.a.createElement(Dp.a,{show:this.isUserOutOfOffice(),onClick:function(){return null},ariaLabel:Object(j.ab)("status_dropdown.set_ooo","Out of office").toLowerCase(),text:Object(j.ab)("status_dropdown.set_ooo","Out of office"),extraText:Object(j.ab)("status_dropdown.set_ooo.extra","Automatic Replies are enabled")})),E.a.createElement(LO.a,null,E.a.createElement(Dp.a,{onClick:a,ariaLabel:Object(j.ab)("status_dropdown.set_online","Online").toLowerCase(),text:Object(j.ab)("status_dropdown.set_online","Online")}),E.a.createElement(Dp.a,{onClick:i,ariaLabel:Object(j.ab)("status_dropdown.set_away","Away").toLowerCase(),text:Object(j.ab)("status_dropdown.set_away","Away")}),E.a.createElement(Dp.a,{onClick:o,ariaLabel:"".concat(Object(j.ab)("status_dropdown.set_dnd","Do not disturb").toLowerCase(),". ").concat(Object(j.ab)("status_dropdown.set_dnd.extra","Disables Desktop and Push Notifications").toLowerCase()),text:Object(j.ab)("status_dropdown.set_dnd","Do not disturb"),extraText:Object(j.ab)("status_dropdown.set_dnd.extra","Disables Desktop and Push Notifications")}),E.a.createElement(Dp.a,{onClick:s,ariaLabel:Object(j.ab)("status_dropdown.set_offline","Offline").toLowerCase(),text:Object(j.ab)("status_dropdown.set_offline","Offline")}))))}}])&&HT(n.prototype,r),a&&HT(n,a),t}();VT(WT,"propTypes",{style:v.a.object,status:v.a.string,userId:v.a.string.isRequired,profilePicture:v.a.string,autoResetPref:v.a.string,actions:v.a.shape({openModal:v.a.func.isRequired,setStatus:v.a.func.isRequired}).isRequired}),VT(WT,"defaultProps",{userId:"",profilePicture:"",status:P.O.OFFLINE});var zT=Object(r.connect)(function(e){var t=Object(p.getCurrentUser)(e);if(!t)return{};var n=t.id;return{userId:n,profilePicture:ii.Client4.getProfilePictureUrl(n,t.last_picture_update),autoResetPref:Object(c.get)(e,L.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS,n,""),status:Object(p.getStatusForUserId)(e,n)}},function(e){return{actions:Object(a.bindActionCreators)({openModal:U.b,setStatus:i.setStatus},e)}})(WT),KT=n(1639);function YT(e){return(YT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JT(e,t){return!t||"object"!==YT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZT(e){return(ZT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XT(e,t){return(XT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $T=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),JT(this,ZT(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XT(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=E.a.createElement(Ec.a,{id:"main-menu__tooltip"},E.a.createElement(Y.c,{id:"sidebar.mainMenu",defaultMessage:"Main menu"})),t=null;this.props.showTutorialTip&&(t=E.a.createElement(sE,{onBottom:!1}));var n=E.a.createElement("h1",{id:"headerTeamName",className:"team__name","data-teamid":this.props.teamId},this.props.teamDisplayName);return this.props.teamDescription&&(n=E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"bottom",overlay:E.a.createElement(Ec.a,{id:"team-name__tooltip"},this.props.teamDescription),ref:"descriptionOverlay"},n)),E.a.createElement("div",{className:"SidebarHeaderDropdownButton",id:"sidebarHeaderDropdownButton"},t,E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"right",overlay:e},E.a.createElement("div",{id:"headerInfo",className:"header__info"},n,E.a.createElement("div",{id:"headerUsername",className:"user__name"},"@"+this.props.currentUser.username),E.a.createElement("button",{className:"style--none sidebar-header-dropdown__icon","aria-label":Object(j.ab)("navbar_dropdown.menuAriaLabel","main menu")},E.a.createElement(KT.a,null)))))}}])&&QT(n.prototype,r),a&&QT(n,a),t}();function ej(e){return(ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nj(e){return(nj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aj(e,t){return(aj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($T,"propTypes",{showTutorialTip:v.a.bool.isRequired,teamDescription:v.a.string.isRequired,teamId:v.a.string.isRequired,currentUser:v.a.object.isRequired,teamDisplayName:v.a.string.isRequired});var ij=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=nj(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==ej(a)&&"function"!=typeof a?rj(r):a,oj(rj(n),"toggleShortcutsModal",function(e){e.preventDefault(),C.n()}),oj(rj(n),"showGetTeamInviteLinkModal",function(e){e.preventDefault(),C.l()}),oj(rj(n),"handleKeyDown",function(e){Object(j.e)(e)&&e.shiftKey&&Object(j.S)(e,P.i.KeyCodes.A)&&n.props.actions.openModal({ModalId:P.r.USER_SETTINGS,dialogType:Jl.a})}),oj(rj(n),"handleEmitUserLoggedOutEvent",function(){C.e()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aj(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return this.props.currentUser?E.a.createElement(du.a,null,E.a.createElement($T,{showTutorialTip:this.props.showTutorialTip,teamDescription:this.props.teamDescription,currentUser:this.props.currentUser,teamDisplayName:this.props.teamDisplayName,teamId:this.props.teamId}),E.a.createElement(_S,{id:"sidebarDropdownMenu"})):null}}])&&tj(n.prototype,r),a&&tj(n,a),t}();oj(ij,"propTypes",{teamDescription:v.a.string.isRequired,teamDisplayName:v.a.string.isRequired,teamId:v.a.string.isRequired,currentUser:v.a.object,showTutorialTip:v.a.bool.isRequired,actions:v.a.shape({openModal:v.a.func.isRequred}).isRequired}),oj(ij,"defaultProps",{teamType:"",pluginMenuItems:[]});var sj=Object(r.connect)(function(e){var t=Object(d.getCurrentTeam)(e),n=Object(p.getCurrentUser)(e),r=Object(c.getInt)(e,P.z.TUTORIAL_STEP,n.id)===P.I.MENU_POPOVER&&!j.U();return{currentUser:n,teamDescription:t.description,teamDisplayName:t.display_name,teamId:t.id,showTutorialTip:r}},function(e){return{actions:Object(a.bindActionCreators)({openModal:U.b},e)}})(ij);function lj(e){return(lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uj(e){return(uj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dj(e,t){return(dj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mj=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=uj(t).call(this,e),n=!a||"object"!==lj(a)&&"function"!=typeof a?pj(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pj(n),"handleResize",function(){var e=j.U();n.setState({isMobile:e})}),n.state={isMobile:j.U()},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dj(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=j.ab("accessibility.sections.lhsHeader","team menu region");return E.a.createElement("div",{id:"lhsHeader","aria-label":e,tabIndex:"-1",role:"application",className:"SidebarHeader team__header theme a11y__region","data-a11y-sort-order":"5"},E.a.createElement("div",{className:"d-flex"},!this.state.isMobile&&E.a.createElement(zT,null),E.a.createElement(sj,null)))}}])&&cj(n.prototype,r),a&&cj(n,a),t}();var fj=Object(r.connect)(function(e){var t=Object(u.getConfig)(e),n=Object(p.getCurrentUser)(e);return{enableTutorial:"true"===t.EnableTutorial,showTutorialTip:Object(c.getInt)(e,P.z.TUTORIAL_STEP,n.id)===P.I.MENU_POPOVER&&!j.U()}})(mj),hj=n(212);function bj(e){return(bj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gj(e,t){return!t||"object"!==bj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vj(e){return(vj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _j(e,t){return(_j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ej=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gj(this,vj(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_j(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.bot",defaultMessage:"Bot Icon"},function(e){return E.a.createElement("svg",{width:"16",height:"13",viewBox:"0 0 36 30",role:"icon","aria-label":e},E.a.createElement("path",{d:"M0,15.7391304 L0,23.0434783 C0,24.0535326 0.786888587,24.8695652 1.76086957,24.8695652 L3.52173913,24.8695652 L3.52173913,13.9130435 L1.76086957,13.9130435 C0.786888587,13.9130435 0,14.7290761 0,15.7391304 Z M26.0496894,6.50271739 L19.7888199,6.50271739 L19.7888199,2.83423913 C19.7888199,1.81967561 18.989441,1 18,1 C17.010559,1 16.2111801,1.81967561 16.2111801,2.83423913 L16.2111801,6.50271739 L9.95031056,6.50271739 C7.47950311,6.50271739 5.47826087,8.55477242 5.47826087,11.0883152 L5.47826087,26.6793478 C5.47826087,28.7027429 7.0826087,30.3478261 9.05590062,30.3478261 L26.9440994,30.3478261 C28.9173913,30.3478261 30.5217391,28.7027429 30.5217391,26.6793478 L30.5217391,11.0883152 C30.5217391,8.55477242 28.5204969,6.50271739 26.0496894,6.50271739 Z M14.4782609,24.8695652 L10.9565217,24.8695652 L10.9565217,22.9130435 L14.4782609,22.9130435 L14.4782609,24.8695652 Z M12.5217391,17.826087 C11.2245652,17.826087 10.173913,16.7754348 10.173913,15.4782609 C10.173913,14.181087 11.2245652,13.1304348 12.5217391,13.1304348 C13.818913,13.1304348 14.8695652,14.181087 14.8695652,15.4782609 C14.8695652,16.7754348 13.818913,17.826087 12.5217391,17.826087 Z M19.9565217,24.8695652 L16.4347826,24.8695652 L16.4347826,22.9130435 L19.9565217,22.9130435 L19.9565217,24.8695652 Z M25.0434783,24.8695652 L21.5217391,24.8695652 L21.5217391,22.9130435 L25.0434783,22.9130435 L25.0434783,24.8695652 Z M23.2826087,17.826087 C22.0935326,17.826087 21.1304348,16.7754348 21.1304348,15.4782609 C21.1304348,14.181087 22.0935326,13.1304348 23.2826087,13.1304348 C24.4716848,13.1304348 25.4347826,14.181087 25.4347826,15.4782609 C25.4347826,16.7754348 24.4716848,17.826087 23.2826087,17.826087 Z M34.2391304,13.9130435 L32.4782609,13.9130435 L32.4782609,24.8695652 L34.2391304,24.8695652 C35.2131114,24.8695652 36,24.0535326 36,23.0434783 L36,15.7391304 C36,14.7290761 35.2131114,13.9130435 34.2391304,13.9130435 Z"}))}))}}])&&yj(n.prototype,r),a&&yj(n,a),t}();function wj(e){return(wj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sj(e,t){return!t||"object"!==wj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cj(e){return(Cj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pj(e,t){return(Pj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tj=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Sj(this,Cj(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pj(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=null;return this.props.channelIsArchived?e=E.a.createElement(Dv.a,{className:"icon icon__archive"}):this.props.hasDraft?e=E.a.createElement(sP,{className:"icon icon__draft"}):this.props.channelType===P.i.OPEN_CHANNEL?e=E.a.createElement(lP.a,{className:"icon icon__globe"}):this.props.channelType===P.i.PRIVATE_CHANNEL?e=E.a.createElement(cP.a,{className:"icon icon__lock"}):this.props.channelType===P.i.GM_CHANNEL?e=E.a.createElement("div",{className:"status status--group"},this.props.membersCount):this.props.channelType===P.i.DM_CHANNEL&&(e=this.props.teammateId&&this.props.teammateDeletedAt?E.a.createElement(Dv.a,{className:"icon icon__archive"}):this.props.teammateId&&this.props.teammateIsBot?E.a.createElement(Ej,{className:"icon icon__bot"}):E.a.createElement(UT.a,{type:"avatar",status:this.props.channelStatus})),e}}])&&Oj(n.prototype,r),a&&Oj(n,a),t}();function jj(e){return(jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mj(e){return(Mj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rj(e,t){return(Rj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ij(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Tj,"propTypes",{channelIsArchived:v.a.bool.isRequired,channelType:v.a.string.isRequired,channelStatus:v.a.string,hasDraft:v.a.bool.isRequired,membersCount:v.a.number,teammateId:v.a.string,teammateDeletedAt:v.a.number,teammateIsBot:v.a.bool});var Aj=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Mj(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==jj(a)&&"function"!=typeof a?Nj(r):a,Ij(Nj(n),"handleClose",function(e){e.stopPropagation(),e.preventDefault(),n.props.handleClose()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rj(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=null;if(this.props.handleClose&&!this.props.badge){var t=E.a.createElement(Ec.a,{id:"remove-dm-tooltip"},E.a.createElement(Y.c,{id:"sidebar.removeList",defaultMessage:"Remove from list"}));this.props.channelType!==P.i.OPEN_CHANNEL&&this.props.channelType!==P.i.PRIVATE_CHANNEL||(t=E.a.createElement(Ec.a,{id:"remove-dm-tooltip"},E.a.createElement(Y.c,{id:"sidebar.leave",defaultMessage:"Leave channel"}))),e=E.a.createElement(_c.a,{delayShow:1e3,placement:"top",overlay:t},E.a.createElement("span",{onClick:this.handleClose,className:"btn-close"},""))}return e}}])&&kj(n.prototype,r),a&&kj(n,a),t}();function xj(e){return(xj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lj(e){return(Lj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uj(e,t){return(Uj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ij(Aj,"propTypes",{handleClose:v.a.func,channelId:v.a.string.isRequired,channelType:v.a.string.isRequired,teammateId:v.a.string,badge:v.a.bool});var Hj=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Lj(t).call(this,e),n=!a||"object"!==xj(a)&&"function"!=typeof a?Dj(r):a,qj(Dj(n),"trackChannelSelectedEvent",function(){Object(vt.b)("SidebarChannelLink#click"),Object(vt.d)("ui","ui_channel_selected")}),qj(Dj(n),"handleClick",function(){n.trackChannelSelectedEvent(),Q.a.push(n.props.link)}),qj(Dj(n),"removeTooltipLink",function(){n.gmItemRef.current.removeAttribute("aria-describedby")}),qj(Dj(n),"render",function(){var e=null;n.props.badge&&(e=E.a.createElement("span",{id:"unreadMentions",className:"badge"},n.props.unreadMentions));var t,r=E.a.createElement(E.a.Fragment,null,E.a.createElement(Tj,{channelStatus:n.props.channelStatus,channelType:n.props.channelType,channelIsArchived:n.props.channelIsArchived,hasDraft:n.props.hasDraft,membersCount:n.props.membersCount,teammateId:n.props.teammateId,teammateDeletedAt:n.props.teammateDeletedAt,teammateIsBot:n.props.teammateIsBot}),E.a.createElement("span",{className:"sidebar-item__name"},E.a.createElement("span",null,n.props.displayName)),e,E.a.createElement(Aj,{handleClose:n.props.handleClose,channelId:n.props.channelId,channelType:n.props.channelType,teammateId:n.props.teammateId,badge:n.props.badge})),a=n.props.displayName;if(n.props.channelType===P.Q.OPEN_CHANNEL?a+=" ".concat(Object(j.ab)("accessibility.sidebar.types.public","public channel")):n.props.channelType===P.Q.PRIVATE_CHANNEL&&(a+=" ".concat(Object(j.ab)("accessibility.sidebar.types.private","private channel"))),1===n.props.unreadMentions?a+=" ".concat(n.props.unreadMentions," ").concat(Object(j.ab)("accessibility.sidebar.types.mention","mention")):n.props.unreadMentions>1&&(a+=" ".concat(n.props.unreadMentions," ").concat(Object(j.ab)("accessibility.sidebar.types.mentions","mentions"))),n.props.unreadMsgs>0&&n.props.showUnreadForMsgs&&0===n.props.unreadMentions&&(a+=" ".concat(Object(j.ab)("accessibility.sidebar.types.unread","unread"))),a=a.toLowerCase(),t=Object(T.c)()?E.a.createElement("div",null,E.a.createElement(YS,{link:n.props.link,menuId:n.props.channelId},E.a.createElement("button",{className:"btn btn-link "+n.props.rowClass,"aria-label":a,onClick:n.handleClick},r))):E.a.createElement(Fi.a,{id:"sidebarItem_".concat(n.props.channelName),"aria-label":a,to:n.props.link,className:n.props.rowClass,onClick:n.trackChannelSelectedEvent},r),n.props.channelType===P.Q.GM_CHANNEL){var o=E.a.createElement(Ec.a,{id:"channel-displayname__tooltip",style:Fj.channelTooltip},n.props.displayName);t=E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:o,onEntering:n.removeTooltipLink},E.a.createElement("div",{ref:n.gmItemRef},t))}return t}),n.gmItemRef=E.a.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uj(e,t)}(t,E.a.PureComponent),t}();qj(Hj,"propTypes",{link:v.a.string.isRequired,rowClass:v.a.string.isRequired,channelType:v.a.string.isRequired,channelId:v.a.string.isRequired,channelName:v.a.string.isRequired,displayName:v.a.string.isRequired,channelStatus:v.a.string,handleClose:v.a.func,hasDraft:v.a.bool.isRequired,badge:v.a.bool,membersCount:v.a.number.isRequired,showUnreadForMsgs:v.a.bool.isRequired,unreadMsgs:v.a.number.isRequired,unreadMentions:v.a.number.isRequired,teammateId:v.a.string,teammateDeletedAt:v.a.number,teammateIsBot:v.a.bool,channelIsArchived:v.a.bool.isRequired});var Fj={channelTooltip:{paddingLeft:"8px",maxWidth:"228px"}};function Bj(e){return(Bj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gj(e){return(Gj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wj(e,t){return(Wj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kj=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Gj(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Bj(a)&&"function"!=typeof a?Vj(r):a,zj(Vj(n),"render",function(){var e=[],t=P.i.DEFAULT_CHANNEL_UI_NAME;n.props.townSquareDisplayName&&(t=n.props.townSquareDisplayName);var r=P.i.OFFTOPIC_CHANNEL_UI_NAME;return n.props.offTopicDisplayName&&(r=n.props.offTopicDisplayName),e.push(E.a.createElement("div",null,E.a.createElement("h4",null,E.a.createElement(Y.c,{id:"sidebar.tutorialScreen1.title",defaultMessage:"Channels"})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"sidebar.tutorialScreen1.body",defaultMessage:"**Channels** organize conversations across different topics. They're open to everyone on your team. To send private communications use **Direct Messages** for a single person or **Private Channels** for multiple people."})))),e.push(E.a.createElement("div",null,E.a.createElement("h4",null,E.a.createElement(Y.c,{id:"sidebar.tutorialScreen2.title",defaultMessage:'"{townsquare}" and "{offtopic}" channels',values:{townsquare:t,offtopic:r}})),E.a.createElement("p",null,E.a.createElement(Y.c,{id:"sidebar.tutorialScreen2.body1",defaultMessage:"Here are two public channels to start:"})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"sidebar.tutorialScreen2.body2",defaultMessage:"**{townsquare}** is a place for team-wide communication. Everyone in your team is a member of this channel.",values:{townsquare:t}})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"sidebar.tutorialScreen2.body3",defaultMessage:"**{offtopic}** is a place for fun and humor outside of work-related channels. You and your team can decide what other channels to create.",values:{offtopic:r}})))),e.push(E.a.createElement("div",null,E.a.createElement("h4",null,E.a.createElement(Y.c,{id:"sidebar.tutorialScreen3.title",defaultMessage:"Creating and Joining Channels"})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"sidebar.tutorialScreen3.body1",defaultMessage:'Click **"More..."** to create a new channel or join an existing one.'})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"sidebar.tutorialScreen3.body2",defaultMessage:'You can also create a new channel by clicking the **"+" symbol** next to the public or private channel header.'})))),E.a.createElement(oE,{placement:"right",screens:e,overlayClass:"tip-overlay--sidebar",diagnosticsTag:"tutorial_tip_2_channels"})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wj(e,t)}(t,E.a.PureComponent),t}();function Yj(e){return(Yj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qj(e){return(Qj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zj(e,t){return(Zj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}zj(Kj,"propTypes",{townSquareDisplayName:v.a.string,offTopicDisplayName:v.a.string});var $j=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Qj(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Yj(a)&&"function"!=typeof a?Jj(r):a,Xj(Jj(n),"isLeaving",!1),Xj(Jj(n),"handleLeavePublicChannel",function(){n.props.actions.leaveChannel(n.props.channelId),Object(vt.d)("ui","ui_public_channel_x_button_clicked")}),Xj(Jj(n),"handleLeavePrivateChannel",function(){C.m({id:n.props.channelId,display_name:n.props.channelDisplayName}),Object(vt.d)("ui","ui_private_channel_x_button_clicked")}),Xj(Jj(n),"handleLeaveDirectChannel",function(){if(!n.isLeaving){var e,t;n.isLeaving=!0,n.props.channelType===P.i.DM_CHANNEL?(e=n.props.channelTeammateId,t=P.i.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW):(e=n.props.channelId,t=P.i.Preferences.CATEGORY_GROUP_CHANNEL_SHOW);var r=n.props.currentUserId;n.props.actions.savePreferences(r,[{user_id:r,category:t,name:e,value:"false"}]).then(function(){n.isLeaving=!1}),Object(vt.d)("ui","ui_direct_channel_x_button_clicked")}n.props.active&&Q.a.push("/".concat(n.props.currentTeamName,"/channels/").concat(n.props.redirectChannel))}),Xj(Jj(n),"showChannelAsUnread",function(){return n.props.unreadMentions>0||n.props.unreadMsgs>0&&n.props.showUnreadForMsgs}),Xj(Jj(n),"render",function(){if(n.props.channelIsArchived&&!n.props.active)return null;if(!n.props.channelDisplayName||!n.props.channelType)return E.a.createElement("div",null);var e=null;if(!n.showChannelAsUnread()){if(n.props.shouldHideChannel)return"";n.props.channelType===P.i.DM_CHANNEL||n.props.channelType===P.i.GM_CHANNEL?e=n.handleLeaveDirectChannel:"true"===n.props.config.EnableXToLeaveChannelsFromLHS&&(n.props.channelType===P.i.OPEN_CHANNEL&&n.props.channelName!==P.i.DEFAULT_CHANNEL?e=n.handleLeavePublicChannel:n.props.channelType===P.i.PRIVATE_CHANNEL&&(e=n.handleLeavePrivateChannel))}var t="";n.props.active&&(t="active");var r="sidebar-item",a=!1;n.showChannelAsUnread()&&(r+=" unread-title"),n.props.unreadMentions>0&&(r+=" has-badge",a=!0),n.props.channelMuted&&(r+=" muted"),e&&!a&&(r+=" has-close");var o=null;n.props.showTutorialTip&&n.props.channelName===P.i.DEFAULT_CHANNEL&&(o=E.a.createElement(Kj,{townSquareDisplayName:n.props.townSquareDisplayName,offTopicDisplayName:n.props.offTopicDisplayName}),n.props.actions.openLhs());var i="";i=n.props.channelFake?"/".concat(n.props.currentTeamName,"/channels/").concat(n.props.channelName,"?fakechannel=").concat(encodeURIComponent(n.props.channelStringified)):n.props.channelType===P.i.DM_CHANNEL?"/".concat(n.props.currentTeamName,"/messages/@").concat(n.props.channelTeammateUsername):n.props.channelType===P.i.GM_CHANNEL?"/".concat(n.props.currentTeamName,"/messages/").concat(n.props.channelName):"/".concat(n.props.currentTeamName,"/channels/").concat(n.props.channelName);var s="";return s=n.props.currentUserId===n.props.channelTeammateId?n.context.intl.formatMessage({id:"sidebar.directchannel.you",defaultMessage:"{displayname} (you)"},{displayname:n.props.channelDisplayName}):n.props.channelDisplayName,E.a.createElement("li",{key:n.props.channelName,ref:"channel",className:t},E.a.createElement(Hj,{link:i,rowClass:r,channelId:n.props.channelId,channelName:n.props.channelName,channelStatus:n.props.channelStatus,channelType:n.props.channelType,displayName:s,handleClose:e,hasDraft:n.props.hasDraft,badge:a,showUnreadForMsgs:n.props.showUnreadForMsgs,unreadMentions:n.props.unreadMentions,unreadMsgs:n.props.unreadMsgs,membersCount:n.props.membersCount,teammateId:n.props.channelTeammateId,teammateDeletedAt:n.props.channelTeammateDeletedAt,teammateIsBot:n.props.channelTeammateIsBot,channelIsArchived:n.props.channelIsArchived}),o)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zj(e,t)}(t,E.a.PureComponent),t}();Xj($j,"propTypes",{config:v.a.object.isRequired,channelId:v.a.string.isRequired,channelName:v.a.string.isRequired,channelDisplayName:v.a.string.isRequired,channelMuted:v.a.bool,channelType:v.a.string.isRequired,channelStatus:v.a.string,channelFake:v.a.bool,channelStringified:v.a.string,channelTeammateId:v.a.string,channelTeammateUsername:v.a.string,channelTeammateDeletedAt:v.a.number,channelTeammateIsBot:v.a.bool,hasDraft:v.a.bool.isRequired,showUnreadForMsgs:v.a.bool.isRequired,unreadMsgs:v.a.number.isRequired,unreadMentions:v.a.number.isRequired,active:v.a.bool.isRequired,currentTeamName:v.a.string.isRequired,currentUserId:v.a.string.isRequired,showTutorialTip:v.a.bool.isRequired,townSquareDisplayName:v.a.string,offTopicDisplayName:v.a.string,membersCount:v.a.number.isRequired,shouldHideChannel:v.a.bool.isRequired,channelIsArchived:v.a.bool.isRequired,redirectChannel:v.a.string.isRequired,actions:v.a.shape({savePreferences:v.a.func.isRequired,leaveChannel:v.a.func.isRequired,openLhs:v.a.func.isRequired}).isRequired}),Xj($j,"contextTypes",{intl:Y.i.isRequired});var ek=Object(r.connect)(function(){var e=Object(m.makeGetChannel)();return function(t,n){var r=n.channelId,a=Object(u.getConfig)(t),o=Object(m.getCurrentChannelId)(t),i=e(t,{id:r})||{},s=!!i.id&&Object(Ml.i)(t,P.G.DRAFT,i.id),l="true"===a.EnableTutorial,f=Object(c.getInt)(t,P.i.Preferences.TUTORIAL_STEP,n.currentUserId,P.i.TutorialSteps.FINISHED),h=Object(m.getChannelsNameMapInCurrentTeam)(t),b=Object(p.getUserIdsInChannels)(t),y=0;b&&b[i.id]&&(y=b[i.id].size,b[i.id].has(n.currentUserId)&&y--);var g=Object(hj.getMyChannelMemberships)(t)[r],v=0,_=0,E=!0;g&&(v=g.mention_count,i&&(_=Math.max(i.total_msg_count-g.msg_count,0)),g.notify_props&&(E=g.notify_props.mark_unread!==P.s.MENTION));var w=Object(c.getTeammateNameDisplaySetting)(t),O=null,S="",C=0,T="",j=!1,k=i.display_name;i.type===P.i.DM_CHANNEL&&((O=Object(p.getUser)(t,i.teammate_id))&&(S=O.id,C=O.delete_at,T=O.username,j=O.is_bot),k=Object(To.displayUsername)(O,w,!1));var M=!1;return i.name!==P.i.DEFAULT_CHANNEL||n.active||!Object(m.shouldHideDefaultChannel)(t,i)||Object(zo.isFavoriteChannel)(t.entities.preferences.myPreferences,i.id)||(M=!0),{config:a,channelId:r,channelName:i.name,channelDisplayName:k,channelType:i.type,channelStatus:i.status,channelFake:i.fake,channelMuted:Object(zo.isChannelMuted)(g),channelStringified:i.fake&&JSON.stringify(i),channelTeammateId:S,channelTeammateUsername:T,channelTeammateDeletedAt:C,channelTeammateIsBot:j,hasDraft:s&&Boolean(s.message.trim()||s.fileInfos.length||s.uploadsInProgress.length)&&o!==i.id,showTutorialTip:l&&f===P.i.TutorialSteps.CHANNEL_POPOVER,townSquareDisplayName:h[P.i.DEFAULT_CHANNEL]&&h[P.i.DEFAULT_CHANNEL].display_name,offTopicDisplayName:h[P.i.OFFTOPIC_CHANNEL]&&h[P.i.OFFTOPIC_CHANNEL].display_name,showUnreadForMsgs:E,unreadMsgs:_,unreadMentions:v,membersCount:y,shouldHideChannel:M,channelIsArchived:0!==i.delete_at,redirectChannel:Object(m.getRedirectChannelNameForTeam)(t,Object(d.getCurrentTeamId)(t))}}},function(e){return{actions:Object(a.bindActionCreators)({savePreferences:ll.savePreferences,leaveChannel:Ea.e,openLhs:pC.b},e)}},null,{withRef:!0})($j);function tk(e){return(tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rk(e){return(rk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ak(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ok(e,t){return(ok=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ik(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sk=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=rk(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==tk(a)&&"function"!=typeof a?ak(r):a,ik(ak(n),"renderPublic",function(){if(!n.props.canCreatePublicChannel)return null;var e="".concat(j.ab("sidebar.createChannel","Create new public channel").toLowerCase()),t=E.a.createElement(Ec.a,{id:"new-channel-tooltip"},E.a.createElement(Y.c,{id:"sidebar.createChannel",defaultMessage:"Create new public channel"}));return E.a.createElement("button",{id:"createPublicChannel","aria-label":e,type:"button",className:"add-channel-btn cursor--pointer style--none",onClick:n.props.createPublicChannel},E.a.createElement(_c.a,{delayShow:500,placement:"top",overlay:t},E.a.createElement("span",null,"+")))}),ik(ak(n),"renderPrivate",function(){if(!n.props.canCreatePrivateChannel)return null;var e="".concat(j.ab("sidebar.createGroup","Create new private channel").toLowerCase()),t=E.a.createElement(Ec.a,{id:"new-group-tooltip"},E.a.createElement(Y.c,{id:"sidebar.createGroup",defaultMessage:"Create new private channel"}));return E.a.createElement("button",{id:"createPrivateChannel","aria-label":e,type:"button",className:"add-channel-btn cursor--pointer style--none",onClick:n.props.createPrivateChannel},E.a.createElement(_c.a,{delayShow:500,placement:"top",overlay:t},E.a.createElement("span",null,"+")))}),ik(ak(n),"renderDirect",function(){var e=j.ab("sidebar.createDirectMessage","Create new direct message").toLowerCase(),t=E.a.createElement(Ec.a,{id:"new-group-tooltip",className:"hidden-xs"},E.a.createElement(Y.c,{id:"sidebar.createDirectMessage",defaultMessage:"Create new direct message"}));return E.a.createElement("button",{id:"addDirectChannel","aria-label":e,className:"add-channel-btn cursor--pointer style--none",onClick:n.props.createDirectMessage},E.a.createElement(_c.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:t},E.a.createElement("span",null,"+")))}),ik(ak(n),"renderCombined",function(){var e=n.props,t=e.canCreatePublicChannel,r=e.canCreatePrivateChannel;if(t&&!r)return n.renderPublic();if(r&&!t)return n.renderPrivate();if(!t&&!r)return null;var a=E.a.createElement(Ec.a,{id:"new-group-tooltip",className:"hidden-xs"},E.a.createElement(Y.c,{id:"sidebar.createPublicPrivateChannel",defaultMessage:"Create new public or private channel"}));return E.a.createElement("button",{type:"button",className:"add-channel-btn cursor--pointer style--none",onClick:n.props.createPublicDirectChannel},E.a.createElement(_c.a,{className:"hidden-xs",delayShow:500,placement:"top",overlay:a},E.a.createElement("span",null,"+")))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ok(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){switch(this.props.sectionType){case"public":return this.renderPublic();case"private":return this.renderPrivate();case"direct":return this.renderDirect();case"recent":case"alpha":return this.renderCombined()}return null}}])&&nk(n.prototype,r),a&&nk(n,a),t}();function lk(e){return(lk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ck(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uk(e,t){return!t||"object"!==lk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pk(e){return(pk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dk(e,t){return(dk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ik(sk,"propTypes",{sectionType:g.PropTypes.string.isRequired,createPublicChannel:g.PropTypes.func.isRequired,createPrivateChannel:g.PropTypes.func.isRequired,createDirectMessage:g.PropTypes.func.isRequired,createPublicDirectChannel:g.PropTypes.func.isRequired,canCreatePublicChannel:g.PropTypes.bool.isRequired,canCreatePrivateChannel:g.PropTypes.bool.isRequired});var fk=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),uk(this,pk(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dk(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.sectionType,n=e.moreChannels,r=e.moreDirectMessages,a=e.browsePublicDirectChannels,o=this.context.intl.formatMessage;switch(t){case"public":return E.a.createElement("li",{key:"public-channel-more",id:"morePublicButton"},E.a.createElement("button",{id:"sidebarChannelsMore","aria-label":o({id:"sidebar.morePublicAria",defaultMessage:"more public channels"}),className:"nav-more cursor--pointer style--none btn--block",onClick:n},E.a.createElement(Y.c,{id:"sidebar.moreElips",defaultMessage:"More..."})));case"direct":return E.a.createElement("li",{key:"dm-more",id:"moreDMButton"},E.a.createElement("button",{id:"moreDirectMessage","aria-label":o({id:"sidebar.moreDmAria",defaultMessage:"more direct messages"}),className:"nav-more cursor--pointer style--none btn--block",onClick:r},E.a.createElement(Y.c,{id:"sidebar.moreElips",defaultMessage:"More..."})));case"recent":case"alpha":return E.a.createElement("li",{key:"public-dm-more",id:"moreRecentAlphaButton"},E.a.createElement("button",{id:"morePublicDirectChannels","aria-label":o({id:"sidebar.morePublicDmAria",defaultMessage:"more public channels direct messages"}),className:"nav-more cursor--pointer style--none btn--block",onClick:a},E.a.createElement(Y.c,{id:"sidebar.moreElips",defaultMessage:"More..."})))}return null}}])&&ck(n.prototype,r),a&&ck(n,a),t}();function hk(e){return(hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yk(e){return(yk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vk(e,t){return(vk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}mk(fk,"propTypes",{sectionType:g.PropTypes.string.isRequired,moreChannels:g.PropTypes.func.isRequired,moreDirectMessages:g.PropTypes.func.isRequired,browsePublicDirectChannels:g.PropTypes.func.isRequired}),mk(fk,"contextTypes",{intl:Y.i});var Ek=["recent","alpha"],wk=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,n=!(a=(e=yk(t)).call.apply(e,[this].concat(i)))||"object"!==hk(a)&&"function"!=typeof a?gk(r):a,_k(gk(n),"sectionTypeFormatMessageId",function(e){switch(e){case"public":return Object(Me.b)("sidebar.types.public");case"private":return Object(Me.b)("sidebar.types.private");case"direct":return Object(Me.b)("sidebar.types.direct");case"favorite":return Object(Me.b)("sidebar.types.favorite");case"unreads":return Object(Me.b)("sidebar.types.unreads");case"recent":return Object(Me.b)("sidebar.types.recent");default:return Object(Me.b)("sidebar.types.alpha")}}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vk(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.sectionType,n=e.channelName,r=e.browsePublicDirectChannels,a=["hover","focus"];j.U()&&(a=[]);var o=this.sectionTypeFormatMessageId(t),i=E.a.createElement(Y.c,{id:o,defaultMessage:n});if(-1!==Ek.indexOf(t)){var s=E.a.createElement(Ec.a,{id:"new-group-tooltip",className:"hidden-xs"},E.a.createElement(Y.c,{id:"sidebar.browseChannelDirectChannel",defaultMessage:"Browse Channels and Direct Messages"}));i=E.a.createElement(_c.a,{trigger:a,delayShow:500,placement:"top",overlay:s},E.a.createElement("div",{role:"presentation",className:"public_direct_name",onClick:r},i))}return i}}])&&bk(n.prototype,r),a&&bk(n,a),t}();function Ok(e){return(Ok="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ck(e){return(Ck=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tk(e,t){return(Tk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_k(wk,"propTypes",{sectionType:g.PropTypes.string.isRequired,channelName:g.PropTypes.string.isRequired,browsePublicDirectChannels:g.PropTypes.func.isRequired});var kk=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=Ck(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Ok(a)&&"function"!=typeof a?Pk(r):a,jk(Pk(n),"state",{show:!0,key:"channels"}),jk(Pk(n),"handleHide",function(){n.setState({show:!1})}),jk(Pk(n),"handleExit",function(){n.props.onModalDismissed&&n.props.onModalDismissed()}),jk(Pk(n),"handleSelect",function(e){n.setState({key:e})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tk(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement(K.a,{dialogClassName:"a11y__modal more-modal more-direct-channels more-public-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"morePublicModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"morePublicModalLabel"},E.a.createElement(Y.c,{id:"more_public_direct_channels.title",defaultMessage:"Channels and Direct Messages"}))),E.a.createElement(K.a.Body,null,E.a.createElement(le.a,{id:"morePublicDirectChannelTabs",className:"modal-tabs",defaultActiveKey:"channels",activeKey:this.state.key,onSelect:this.handleSelect,unmountOnExit:!0},E.a.createElement(ce.a,{eventKey:"channels",title:Object(j.ab)("more_public_direct_channels.channels","Channels")},E.a.createElement(AC,{handleNewChannel:this.props.handleNewChannel,onModalDismissed:this.handleHide,bodyOnly:!0})),E.a.createElement(ce.a,{eventKey:"dm",title:Object(j.ab)("more_public_direct_channels.direct_messages","Direct Messages")},E.a.createElement(tP,{onModalDismissed:this.handleHide,isExistingChannel:!1,bodyOnly:!0})))))}}])&&Sk(n.prototype,r),a&&Sk(n,a),t}();function Mk(e){return(Mk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nk(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Rk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ik(e){return(Ik=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ak(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xk(e,t){return(xk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dk(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--view"}))}function Uk(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--horizontal"}))}function qk(e){return E.a.createElement("div",Object.assign({},e,{className:"scrollbar--vertical"}))}jk(kk,"propTypes",{handleNewChannel:v.a.func,onModalDismissed:v.a.func});var Hk=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ik(t).call(this,e),n=!a||"object"!==Mk(a)&&"function"!=typeof a?Ak(r):a,Lk(Ak(n),"handleOpenMoreDirectChannelsModal",function(e){e.preventDefault(),n.state.showDirectChannelsModal?n.hideMoreDirectChannelsModal():n.showMoreDirectChannelsModal()}),Lk(Ak(n),"updateTitle",function(){var e=n.props,t=e.config,r=e.currentChannel,a=e.currentTeam,o=e.currentTeammate,i=e.unreads;if(r&&a){var s="";null!=t.SiteName&&(s=t.SiteName);var l=r.display_name;r.type===P.i.DM_CHANNEL&&null!=o&&(l=o.display_name);var c=i.mentionCount>0?"("+i.mentionCount+") ":"",u=i.messageCount>0?"* ":"";document.title=c+u+l+" - "+n.props.currentTeam.display_name+" "+s}}),Lk(Ak(n),"onScroll",function(){n.updateUnreadIndicators()}),Lk(Ak(n),"handleScrollAnimationUpdate",function(e){var t=n.refs.scrollbar,r=e.getCurrentValue();t.scrollTop(r)}),Lk(Ak(n),"scrollToFirstUnreadChannel",function(){if(n.firstUnreadChannel){var e,t=n.getDisplayedChannels(n.state.orderedChannelIds);if(n.unreadScrollAnimate.setCurrentValue(n.refs.scrollbar.getScrollTop()).setAtRest(),t.length>0&&t[0]===n.firstUnreadChannel)e=dC.MathUtil.mapValueInRange(0,0,1,0,1);else{var r=Hl()(pu.a.findDOMNode(n.refs[n.firstUnreadChannel])).position().top-15;e=dC.MathUtil.mapValueInRange(r,0,1,0,1)}n.unreadScrollAnimate.setEndValue(e)}}),Lk(Ak(n),"scrollToLastUnreadChannel",function(){if(n.lastUnreadChannel){var e=n.refs.scrollbar,t=Hl()(pu.a.findDOMNode(n.refs[n.lastUnreadChannel])),r=t.position().top+t.height()-e.getClientHeight()+15,a=dC.MathUtil.mapValueInRange(r,0,1,0,1);n.unreadScrollAnimate.setCurrentValue(e.getScrollTop()).setAtRest(),n.unreadScrollAnimate.setEndValue(a)}}),Lk(Ak(n),"updateUnreadIndicators",function(){var e=!1,t=!1;if(n.firstUnreadChannel){var r=Hl()(pu.a.findDOMNode(n.refs[n.firstUnreadChannel])),a=r?r.position():null;a&&a.top+r.height()-15<n.refs.scrollbar.getScrollTop()&&(e=!0)}if(n.lastUnreadChannel){var o=Hl()(pu.a.findDOMNode(n.refs[n.lastUnreadChannel])),i=o?o.position():null;i&&i.top+15>n.refs.scrollbar.getScrollTop()+n.refs.scrollbar.getClientHeight()&&(t=!0)}e===n.state.showTopUnread&&t===n.state.showBottomUnread||n.setState({showTopUnread:e,showBottomUnread:t})}),Lk(Ak(n),"updateScrollbarOnChannelChange",function(e){var t=n.refs[e].getWrappedInstance().refs.channel.getBoundingClientRect();(t.top-P.i.CHANNEL_SCROLL_ADJUSTMENT<0||t.top+t.height>n.refs.scrollbar.view.getBoundingClientRect().height)&&n.refs.scrollbar.scrollTop(n.refs.scrollbar.view.scrollTop+(t.top-P.i.CHANNEL_SCROLL_ADJUSTMENT))}),Lk(Ak(n),"navigateChannelShortcut",function(e){if(e.altKey&&!e.shiftKey&&(j.S(e,P.i.KeyCodes.UP)||j.S(e,P.i.KeyCodes.DOWN))){if(e.preventDefault(),n.isSwitchingChannel)return;n.isSwitchingChannel=!0;for(var t=n.getDisplayedChannels(n.state.orderedChannelIds),r=n.props.currentChannel.id,a=-1,o=0;o<t.length;o++)t[o]===r&&(a=o);var i=a;i=j.S(e,P.i.KeyCodes.DOWN)?a+1:a-1;var s=t[j.bb(i,t.length)];n.props.actions.switchToChannelById(s),n.updateScrollbarOnChannelChange(s),n.isSwitchingChannel=!1}else j.e(e)&&e.shiftKey&&j.S(e,P.i.KeyCodes.K)&&n.handleOpenMoreDirectChannelsModal(e)}),Lk(Ak(n),"navigateUnreadChannelShortcut",function(e){if(e.altKey&&e.shiftKey&&(j.S(e,P.i.KeyCodes.UP)||j.S(e,P.i.KeyCodes.DOWN))){if(e.preventDefault(),n.isSwitchingChannel)return;n.isSwitchingChannel=!0;var t=n.getDisplayedChannels(n.state.orderedChannelIds),r=0;r=j.S(e,P.i.KeyCodes.UP)?-1:1;var a=Sa.b(n.props.currentChannel.id,t,n.props.unreadChannelIds,r);if(-1!==a){var o=t[a];n.props.actions.switchToChannelById(o),n.updateScrollbarOnChannelChange(o)}n.isSwitchingChannel=!1}}),Lk(Ak(n),"getDisplayedChannels",function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return e.push.apply(e,Nk(t.items)),e},[])}),Lk(Ak(n),"channelIdIsDisplayedForProps",function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=n.getDisplayedChannels(e),a=0;a<r.length;a++)if(r[a]===t)return!0;return!1}),Lk(Ak(n),"showMorePublicDirectChannelsModal",function(){n.setState({showMorePublicChannelsModal:!0}),Object(vt.d)("ui","ui_channels_more_public_direct")}),Lk(Ak(n),"hideMorePublicDirectChannelsModal",function(){n.setState({showMorePublicChannelsModal:!1})}),Lk(Ak(n),"onHandleNewChannel",function(){n.hideMorePublicDirectChannelsModal(),n.showNewChannelModal(P.i.OPEN_CHANNEL)}),Lk(Ak(n),"showMoreChannelsModal",function(){n.setState({showMoreChannelsModal:!0}),Object(vt.d)("ui","ui_channels_more_public")}),Lk(Ak(n),"hideMoreChannelsModal",function(){n.setState({showMoreChannelsModal:!1})}),Lk(Ak(n),"showNewPublicChannelModal",function(){n.showNewChannelModal(P.i.OPEN_CHANNEL)}),Lk(Ak(n),"showNewPrivateChannelModal",function(){n.showNewChannelModal(P.i.PRIVATE_CHANNEL)}),Lk(Ak(n),"showNewChannelModal",function(e){n.setState({newChannelModalType:e})}),Lk(Ak(n),"hideNewChannelModal",function(){n.setState({newChannelModalType:""})}),Lk(Ak(n),"showMoreDirectChannelsModal",function(){Object(vt.d)("ui","ui_channels_more_direct"),n.setState({showDirectChannelsModal:!0})}),Lk(Ak(n),"hideMoreDirectChannelsModal",function(){n.setState({showDirectChannelsModal:!1})}),Lk(Ak(n),"openQuickSwitcher",function(e){e.preventDefault(),n.props.actions.openModal({modalId:P.r.QUICK_SWITCH,dialogType:JP})}),Lk(Ak(n),"createSidebarChannel",function(e){return E.a.createElement(ek,{key:e,ref:e,channelId:e,active:e===n.props.currentChannel.id,currentTeamName:n.props.currentTeam.name,currentUserId:n.props.currentUser.id})}),Lk(Ak(n),"renderOrderedChannels",function(){var e=n.state.orderedChannelIds,t=[P.D.UNREADS,P.D.FAVORITE];return E.a.createElement(Bl.a,{ref:"scrollbar",autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:Uk,renderThumbVertical:qk,renderView:Dk,onScroll:n.onScroll,style:{position:"absolute"}},E.a.createElement("div",{id:"sidebarChannelContainer",className:"nav-pills__container"},e.map(function(e){var r={type:e.type,name:e.name,items:e.items.map(n.createSidebarChannel)};if(-1!==t.indexOf(r.type)&&0===r.items.length)return null;var a="".concat(r.type,"Channel"),o=r.name.toLowerCase();return E.a.createElement("ul",{key:r.type,"aria-label":o,role:"presentation",className:"nav nav-pills nav-stacked a11y__section",id:a+"List",tabIndex:"-1"},E.a.createElement("li",{className:"sidebar-section__header"},E.a.createElement("h4",{role:"presentation",id:a},E.a.createElement(wk,{sectionType:r.type,channelName:r.name,browsePublicDirectChannels:n.showMorePublicDirectChannelsModal})),E.a.createElement(sk,{sectionType:r.type,canCreatePublicChannel:n.props.canCreatePublicChannel,canCreatePrivateChannel:n.props.canCreatePrivateChannel,createPublicChannel:n.showNewPublicChannelModal,createPrivateChannel:n.showNewPrivateChannelModal,createDirectMessage:n.handleOpenMoreDirectChannelsModal,createPublicDirectChannel:n.showNewPublicChannelModal})),r.items,E.a.createElement(fk,{sectionType:r.type,moreChannels:n.showMoreChannelsModal,moreDirectMessages:n.handleOpenMoreDirectChannelsModal,browsePublicDirectChannels:n.showMorePublicDirectChannelsModal}))})))}),n.badgesActive=!1,n.firstUnreadChannel=null,n.lastUnreadChannel=null,n.isLeaving=new Map,n.isSwitchingChannel=!1,n.closedDirectChannel=!1,n.state={newChannelModalType:"",orderedChannelIds:e.orderedChannelIds,showDirectChannelsModal:!1,showMoreChannelsModal:!1,showMorePublicChannelsModal:!1},n.animate=new dC.SpringSystem,n.unreadScrollAnimate=n.animate.createSpring(),n.unreadScrollAnimate.setOvershootClampingEnabled(!0),n.unreadScrollAnimate.addListener({onSpringUpdate:n.handleScrollAnimationUpdate}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xk(e,t)}(t,E.a.PureComponent),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.orderedChannelIds[0].type===P.D.UNREADS&&t.orderedChannelIds[0].type===P.D.UNREADS&&t.orderedChannelIds[0].items.length===e.orderedChannelIds[0].items.length&&t.orderedChannelIds[0].items.includes(e.currentChannel.id)?null:e.orderedChannelIds!==t.orderedChannelIds?{orderedChannelIds:e.orderedChannelIds}:null}}],(r=[{key:"componentDidMount",value:function(){this.updateUnreadIndicators(),document.addEventListener("keydown",this.navigateChannelShortcut),document.addEventListener("keydown",this.navigateUnreadChannelShortcut)}},{key:"componentDidUpdate",value:function(e){if(this.props.currentTeam===e.currentTeam&&this.props.currentChannel.id===e.currentChannel.id&&!this.channelIdIsDisplayedForProps(this.props.orderedChannelIds,this.props.currentChannel.id)&&this.channelIdIsDisplayedForProps(e.orderedChannelIds,this.props.currentChannel.id))return this.closedDirectChannel=!0,void Object(C.f)();this.props.currentTeam!==e.currentTeam&&this.refs.scrollbar.scrollToTop(),this.props.currentChannel.id!==e.currentChannel.id&&(this.closedDirectChannel?this.closedDirectChannel=!1:this.props.actions.close()),this.updateTitle(),this.setFirstAndLastUnreadChannels(),this.updateUnreadIndicators()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.navigateChannelShortcut),document.removeEventListener("keydown",this.navigateUnreadChannelShortcut),this.animate.deregisterSpring(this.unreadScrollAnimate),this.animate.removeAllListeners(),this.unreadScrollAnimate.destroy()}},{key:"setBadgesActiveAndFavicon",value:function(){if(this.lastBadgesActive=this.badgesActive,this.badgesActive=this.props.unreads.mentionCount,this.lastBadgesActive!==this.badgesActive){var e=document.createElement("link");e.type="image/x-icon",e.rel="shortcut icon",e.id="favicon",this.badgesActive?e.href="string"==typeof bC.a?bC.a:"":e.href="string"==typeof fC.a?fC.a:"";var t=document.getElementsByTagName("head")[0],n=document.getElementById("favicon");n&&t.removeChild(n),t.appendChild(e)}}},{key:"setFirstAndLastUnreadChannels",value:function(){var e=this,t=this.props,n=t.currentChannel,r=t.unreadChannelIds,a=this.state.orderedChannelIds;this.getDisplayedChannels(a).map(function(t){return t!==n.id&&r.includes(t)&&(e.firstUnreadChannel||(e.firstUnreadChannel=t),e.lastUnreadChannel=t),null})}},{key:"render",value:function(){var e=this,t=this.props.channelSwitcherOption,n=j.ab("accessibility.sections.lhsList","channel sidebar region");if(null==this.props.currentTeam||null==this.props.currentUser)return E.a.createElement("div",null);this.badgesActive=!1,this.firstUnreadChannel=null,this.lastUnreadChannel=null;var r=!1;""!==this.state.newChannelModalType&&(r=!0);var a,o,i=E.a.createElement(Y.c,{id:"sidebar.unreads",defaultMessage:"More unreads"}),s=E.a.createElement(Y.c,{id:"sidebar.unreads",defaultMessage:"More unreads"});this.state.showDirectChannelsModal&&(a=E.a.createElement(tP,{onModalDismissed:this.hideMoreDirectChannelsModal,isExistingChannel:!1})),this.state.showMoreChannelsModal&&(o=E.a.createElement(AC,{onModalDismissed:this.hideMoreChannelsModal,handleNewChannel:function(){e.hideMoreChannelsModal(),e.showNewChannelModal(P.i.OPEN_CHANNEL)}}));var l,c=null;if(t){var u=Object(Me.b)("quick_switch_modal.channelsShortcut.windows"),p="- CTRL+K";j.T()&&(u=Object(Me.b)("quick_switch_modal.channelsShortcut.mac"),p="- K");var d=E.a.createElement("span",{className:"switch__shortcut hidden-xs"},E.a.createElement(Y.c,{id:u,defaultMessage:p}));c=E.a.createElement("div",{className:"sidebar__switcher"},E.a.createElement("button",{id:"sidebarSwitcherButton",className:"btn btn-link",onClick:this.openQuickSwitcher},E.a.createElement(Y.c,{id:"channel_switch_modal.title",defaultMessage:"Switch Channels"}),d))}return this.state.showMorePublicChannelsModal&&(l=E.a.createElement(kk,{onModalDismissed:this.hideMorePublicDirectChannelsModal,handleNewChannel:this.onHandleNewChannel,isExistingChannel:!1})),E.a.createElement("div",{className:Rl()("sidebar--left",{"move--right":this.props.isOpen&&j.U()}),id:"sidebar-left",key:"sidebar-left"},E.a.createElement(OT,{show:r,canCreatePublicChannel:this.props.canCreatePublicChannel,canCreatePrivateChannel:this.props.canCreatePrivateChannel,channelType:this.state.newChannelModalType,onModalDismissed:this.hideNewChannelModal}),l,a,o,E.a.createElement(fj,null),E.a.createElement("div",{className:"sidebar--left__icons"},E.a.createElement(I.a,{pluggableName:"LeftSidebarHeader"})),E.a.createElement("div",{id:"lhsList",role:"application","aria-label":n,tabIndex:"-1",className:"sidebar--left__list a11y__region","data-a11y-sort-order":"6"},E.a.createElement(DT,{name:"Top",show:this.state.showTopUnread,onClick:this.scrollToFirstUnreadChannel,extraClass:"nav-pills__unread-indicator-top",content:i}),E.a.createElement(DT,{name:"Bottom",show:this.state.showBottomUnread,onClick:this.scrollToLastUnreadChannel,extraClass:"nav-pills__unread-indicator-bottom",content:s}),this.renderOrderedChannels()),c)}}])&&Rk(n.prototype,r),a&&Rk(n,a),t}();Lk(Hk,"propTypes",{config:g.PropTypes.object.isRequired,isOpen:g.PropTypes.bool.isRequired,unreadChannelIds:g.PropTypes.array,orderedChannelIds:g.PropTypes.arrayOf(g.PropTypes.shape({type:g.PropTypes.string.isRequired,name:g.PropTypes.string.isRequired,items:g.PropTypes.array.isRequired})),currentChannel:g.PropTypes.object,currentTeammate:g.PropTypes.object,currentTeam:g.PropTypes.object,currentUser:g.PropTypes.object,unreads:g.PropTypes.object.isRequired,canCreatePublicChannel:g.PropTypes.bool.isRequired,canCreatePrivateChannel:g.PropTypes.bool.isRequired,channelSwitcherOption:g.PropTypes.bool.isRequired,actions:g.PropTypes.shape({close:g.PropTypes.func.isRequired,switchToChannelById:g.PropTypes.func.isRequired,openModal:g.PropTypes.func.isRequired}).isRequired}),Lk(Hk,"defaultProps",{currentChannel:{}});var Fk=Object(r.connect)(function(e){var t=Object(u.getConfig)(e),n=Object(m.getCurrentChannel)(e),r=n&&n.teammate_id&&Object(m.getCurrentChannel)(e,n.teammate_id),a=Object(d.getCurrentTeam)(e),o=Object(D.haveITeamPermission)(e,{team:a.id,permission:jp.a.CREATE_PUBLIC_CHANNEL}),i=Object(D.haveITeamPermission)(e,{team:a.id,permission:jp.a.CREATE_PRIVATE_CHANNEL}),s=Object(c.getSidebarPreferences)(e),l=e.views.channel.keepChannelIdAsUnread;return{config:t,unreadChannelIds:Object(m.getSortedUnreadChannelIds)(e,l),orderedChannelIds:Object(m.getOrderedChannelIds)(e,l,s.grouping,s.sorting,"true"===s.unreads_at_top,"true"===s.favorite_at_top),channelSwitcherOption:Object(c.getBool)(e,L.Preferences.CATEGORY_SIDEBAR_SETTINGS,"channel_switcher_section","true"),currentChannel:n,currentTeammate:r,currentTeam:a,currentUser:Object(p.getCurrentUser)(e),canCreatePublicChannel:o,canCreatePrivateChannel:i,isOpen:US(e),unreads:Object(m.getUnreads)(e)}},function(e){return{actions:Object(a.bindActionCreators)({close:pC.a,switchToChannelById:Ea.m,openModal:U.b},e)}})(Hk),Bk=n(1661);function Gk(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Vk(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n,r=(n=regeneratorRuntime.mark(function n(r,a){var o,i,l,c,u,m,f,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(Object(x.getPostThread)(e));case 2:if(o=n.sent,i=o.data){n.next=7;break}return Q.a.replace("/error?type=".concat(P.k.PERMALINK_NOT_FOUND,"&returnTo=").concat(t)),n.abrupt("return");case 7:if(l=a(),c=i.posts[i.order[0]].channel_id,u=l.entities.channels.channels[c],m=Object(d.getCurrentTeamId)(l),u){n.next=20;break}return n.next=14,r(Object(s.getChannel)(c));case 14:if(f=n.sent,h=f.data){n.next=19;break}return Q.a.replace("/error?type=".concat(P.k.PERMALINK_NOT_FOUND,"&returnTo=").concat(t)),n.abrupt("return");case 19:u=h;case 20:if(l.entities.channels.myMembers[c]){n.next=27;break}if(u.type!==P.i.DM_CHANNEL&&u.type!==P.i.GM_CHANNEL){n.next=25;break}return Q.a.replace("/error?type=".concat(P.k.PERMALINK_NOT_FOUND,"&returnTo=").concat(t)),n.abrupt("return");case 25:return n.next=27,r(Object(s.joinChannel)(Object(p.getCurrentUserId)(a()),null,c));case 27:if(!u.team_id||u.team_id===m){n.next=30;break}return Q.a.replace("/error?type=".concat(P.k.PERMALINK_NOT_FOUND,"&returnTo=").concat(t)),n.abrupt("return");case 30:u&&u.type===P.i.DM_CHANNEL?Object(cl.d)(u.id):u&&u.type===P.i.GM_CHANNEL&&Object(cl.e)(u.id),r(Object(s.selectChannel)(c)),r({type:P.e.RECEIVED_FOCUSED_POST,data:e,channelId:c}),r(Object(Yo.d)()),r(Object(s.getChannelStats)(c));case 35:case"end":return n.stop()}},n)}),function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){Gk(o,r,a,i,s,"next",e)}function s(e){Gk(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e,t){return r.apply(this,arguments)}}()}n(1795);function Wk(e){return(Wk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kk(e){return(Kk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qk(e,t){return(Qk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zk=P.Q.KeyCodes,Xk=Object(Y.g)({error:{id:Object(Me.b)("edit_channel_header_modal.error"),defaultMessage:"This channel header is too long, please enter a shorter one"}}),$k=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Kk(t).call(this,e),n=!a||"object"!==Wk(a)&&"function"!=typeof a?Yk(r):a,Jk(Yk(n),"updatePreview",function(e){n.setState({preview:e})}),Jk(Yk(n),"handleChange",function(e){n.setState({header:e.target.value})}),Jk(Yk(n),"handleSave",function(){var e=n.props,t=e.channel,r=e.actions.patchChannel,a=n.state.header;r(t.id,{header:a})}),Jk(Yk(n),"onHide",function(){n.setState({show:!1})}),Jk(Yk(n),"focusTextbox",function(){n.refs.editChannelHeaderTextbox&&n.refs.editChannelHeaderTextbox.getWrappedInstance().focus()}),Jk(Yk(n),"blurTextbox",function(){n.refs.editChannelHeaderTextbox&&n.refs.editChannelHeaderTextbox.getWrappedInstance().blur()}),Jk(Yk(n),"handleEntering",function(){n.focusTextbox()}),Jk(Yk(n),"handleKeyDown",function(e){n.props.ctrlSend&&Object(j.S)(e,Zk.ENTER)&&!0===e.ctrlKey&&n.handleKeyPress(e)}),Jk(Yk(n),"handleKeyPress",function(e){var t=n.props.ctrlSend;!Object(T.m)()&&(t&&e.ctrlKey||!t)&&(!Object(j.S)(e,Zk.ENTER)||e.shiftKey||e.altKey||(e.preventDefault(),n.blurTextbox(),n.handleSave(e)))}),n.state={preview:!1,header:e.channel.header,show:!0,showError:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qk(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.requestStatus,n=this.props.requestStatus;n!==t&&t===L.RequestStatus.FAILURE?this.setState({showError:!0}):n!==t&&t===L.RequestStatus.SUCCESS?this.onHide():this.setState({showError:!1})}},{key:"render",value:function(){var e,t=null;this.props.serverError&&this.state.showError&&(e="model.channel.is_valid.header.app_error"===this.props.serverError.server_error_id?this.props.intl.formatMessage(Xk.error):this.props.serverError.message,t=E.a.createElement("div",{className:"form-group has-error"},E.a.createElement("br",null),E.a.createElement("label",{className:"control-label"},e)));var n=null;return n=this.props.channel.type===P.Q.DM_CHANNEL?E.a.createElement(Y.c,{id:"edit_channel_header_modal.title_dm",defaultMessage:"Edit Header"}):E.a.createElement(Y.c,{id:"edit_channel_header_modal.title",defaultMessage:"Edit Header for {channel}",values:{channel:this.props.channel.display_name}}),E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onEntering:this.handleEntering,onExited:this.props.onHide,role:"dialog","aria-labelledby":"editChannelHeaderModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"editChannelHeaderModalLabel"},n)),E.a.createElement(K.a.Body,{bsClass:"modal-body edit-modal-body"},E.a.createElement("div",null,E.a.createElement("p",null,E.a.createElement(Y.c,{id:"edit_channel_header_modal.description",defaultMessage:"Edit the text appearing next to the channel name in the channel header."})),E.a.createElement("div",{className:"textarea-wrapper"},E.a.createElement(Hi,{value:this.state.header,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onKeyDown:this.handleKeyDown,supportsCommands:!1,suggestionListStyle:"bottom",createMessage:Object(j.ab)("edit_channel_header.editHeader","Edit the Channel Header..."),previewMessageLink:Object(j.ab)("edit_channel_header.previewHeader","Edit Header"),handlePostError:this.handlePostError,id:"edit_textbox",ref:"editChannelHeaderTextbox",characterLimit:1024,preview:this.state.preview})),E.a.createElement("div",{className:"post-create-footer"},E.a.createElement(Qi,{characterLimit:1024,showPreview:this.state.preview,ref:this.setTextboxLinksRef,updatePreview:this.updatePreview,message:this.state.header})),E.a.createElement("br",null),t)),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link cancel-button",onClick:this.onHide},E.a.createElement(Y.c,{id:"edit_channel_header_modal.cancel",defaultMessage:"Cancel"})),E.a.createElement("button",{disabled:this.props.requestStatus===L.RequestStatus.STARTED,type:"button",className:"btn btn-primary save-button",onClick:this.handleSave},E.a.createElement(Y.c,{id:"edit_channel_header_modal.save",defaultMessage:"Save"}))))}}])&&zk(n.prototype,r),a&&zk(n,a),t}();Jk($k,"propTypes",{intl:Y.i.isRequired,onHide:v.a.func.isRequired,channel:v.a.object.isRequired,ctrlSend:v.a.bool.isRequired,serverError:v.a.object,requestStatus:v.a.string.isRequired,actions:v.a.shape({patchChannel:v.a.func.isRequired}).isRequired});var eM=Object(Y.h)($k);function tM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nM=Object(Kl.a)(function(e){return Object(c.getBool)(e,P.Q.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")},function(e){var t=e.requests.channels.updateChannel;return{serverError:t.error,requestStatus:t.status}},function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){tM(e,t,n[t])})}return e}({ctrlSend:e},t)});var rM=Object(r.connect)(nM,function(e){return{actions:{patchChannel:Object(a.bindActionCreators)(s.patchChannel,e)}}})(eM);function aM(e){return(aM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oM(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function iM(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){oM(o,r,a,i,s,"next",e)}function s(e){oM(o,r,a,i,s,"throw",e)}i(void 0)})}}function sM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lM(e){return(lM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uM(e,t){return(uM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dM=50,mM=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=lM(t).call(this,e),n=!a||"object"!==aM(a)&&"function"!=typeof a?cM(r):a,pM(cM(n),"addValue",function(e){var t=Object.assign([],n.state.values);-1===t.indexOf(e)&&t.push(e),n.setState({values:t})}),pM(cM(n),"onHide",function(){n.setState({show:!1})}),pM(cM(n),"handleInviteError",function(e){e&&n.setState({saving:!1,inviteError:e.message})}),pM(cM(n),"handleDelete",function(e){n.setState({values:e})}),pM(cM(n),"setUsersLoadingState",function(e){n.setState({loadingUsers:e})}),pM(cM(n),"handlePageChange",function(e,t){e>t&&(n.setUsersLoadingState(!0),n.props.actions.getProfilesNotInChannel(n.props.channel.team_id,n.props.channel.id,n.props.channel.group_constrained,e+1,dM).then(function(){n.setUsersLoadingState(!1)}))}),pM(cM(n),"handleSubmit",function(e){var t=n.props,r=t.actions,a=t.channel;e&&e.preventDefault();var o=n.state.values.map(function(e){return e.id});0!==o.length&&(n.setState({saving:!0}),r.addUsersToChannel(a.id,o).then(function(e){e.error?n.handleInviteError(e.error):(n.setState({saving:!1,inviteError:null}),n.onHide())}))}),pM(cM(n),"search",function(e){var t=e.trim();clearTimeout(n.searchTimeoutId),n.setState({term:t}),n.searchTimeoutId=setTimeout(iM(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setUsersLoadingState(!0),r={team_id:n.props.channel.team_id,not_in_channel_id:n.props.channel.id,group_constrained:n.props.channel.group_constrained},e.next=4,n.props.actions.searchProfiles(t,r);case 4:n.setUsersLoadingState(!1);case 5:case"end":return e.stop()}},e)})),P.Q.SEARCH_TIMEOUT_MILLISECONDS)}),pM(cM(n),"renderAriaLabel",function(e){return e?e.username:null}),pM(cM(n),"renderOption",function(e,t,n){var r="";return t&&(r="more-modal__row--selected"),E.a.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+r,onClick:function(){return n(e)}},E.a.createElement(hm.a,{src:ii.Client4.getProfilePictureUrl(e.id,e.last_picture_update),width:"32",height:"32"}),E.a.createElement("div",{className:"more-modal__details"},E.a.createElement("div",{className:"more-modal__name"},Object(j.m)(e),E.a.createElement(ko.a,{show:Boolean(e.is_bot),className:"badge-popoverlist"}))),E.a.createElement("div",{className:"more-modal__actions"},E.a.createElement("div",{className:"more-modal__actions--round"},E.a.createElement(OO.a,null))))}),n.searchTimeoutId=0,n.state={values:[],term:"",show:!0,saving:!1,loadingUsers:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uM(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getProfilesNotInChannel(this.props.channel.team_id,this.props.channel.id,this.props.channel.group_constrained,0).then(function(){e.setUsersLoadingState(!1)}),this.props.actions.getTeamStats(this.props.channel.team_id)}},{key:"renderValue",value:function(e){return e.data.username}},{key:"render",value:function(){var e=null;this.state.inviteError&&(e=E.a.createElement("label",{className:"has-error control-label"},this.state.inviteError));var t=E.a.createElement(Y.c,{id:"multiselect.numPeopleRemaining",defaultMessage:"Use  to browse,  to select. You can add {num, number} more {num, plural, one {person} other {people}}. ",values:{num:20-this.state.values.length}}),n=Object(j.ab)("multiselect.add","Add"),r=Object(j.ab)("multiselect.adding","Adding..."),a=Object(To.filterProfilesMatchingTerm)(this.props.profilesNotInCurrentChannel,this.state.term);a=a.filter(function(e){return 0===e.delete_at});var o=E.a.createElement(wO.a,{key:"addUsersToChannelKey",options:a,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,ariaLabelRenderer:this.renderAriaLabel,perPage:dM,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,maxValues:20,numRemainingText:t,buttonSubmitText:n,buttonSubmitLoadingText:r,saving:this.state.saving,loading:this.state.loadingUsers,placeholderText:Object(j.ab)("multiselect.placeholder","Search and add members")});return E.a.createElement(K.a,{dialogClassName:"a11y__modal more-modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"channelInviteModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"channelInviteModalLabel"},E.a.createElement(Y.c,{id:"channel_invite.addNewMembers",defaultMessage:"Add New Members to "}),E.a.createElement("span",{className:"name"},this.props.channel.display_name))),E.a.createElement(K.a.Body,{role:"application"},e,o))}}])&&sM(n.prototype,r),a&&sM(n,a),t}();pM(mM,"propTypes",{profilesNotInCurrentChannel:v.a.array.isRequired,onHide:v.a.func.isRequired,channel:v.a.object.isRequired,actions:v.a.shape({addUsersToChannel:v.a.func.isRequired,getProfilesNotInChannel:v.a.func.isRequired,getTeamStats:v.a.func.isRequired,searchProfiles:v.a.func.isRequired}).isRequired});var fM=Object(r.connect)(function(e){return{profilesNotInCurrentChannel:Object(p.getProfilesNotInCurrentChannel)(e)}},function(e){return{actions:Object(a.bindActionCreators)({addUsersToChannel:Yo.a,getProfilesNotInChannel:i.getProfilesNotInChannel,getTeamStats:l.getTeamStats,searchProfiles:i.searchProfiles},e)}})(mM);function hM(e){return(hM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bM(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function yM(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){bM(o,r,a,i,s,"next",e)}function s(e){bM(o,r,a,i,s,"throw",e)}i(void 0)})}}function gM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vM(e){return(vM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EM(e,t){return(EM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var OM=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=vM(t).call(this,e),n=!a||"object"!==hM(a)&&"function"!=typeof a?_M(r):a,wM(_M(n),"handleRemoveFromChannel",function(){if(!n.state.removing){var e=n.props,t=e.actions,r=e.channel,a=e.user;n.setState({removing:!0}),t.removeChannelMember(r.id,a.id).then(function(e){e.error?n.setState({serverError:e.error.message,removing:!1}):(n.setState({removing:!1}),t.getChannelStats(r.id))})}}),wM(_M(n),"handleMakeChannelMember",yM(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.updateChannelMemberSchemeRoles(n.props.channel.id,n.props.user.id,!0,!1);case 2:t=e.sent,(r=t.error)?n.setState({serverError:r.message}):n.props.actions.getChannelStats(n.props.channel.id);case 5:case"end":return e.stop()}},e)}))),wM(_M(n),"handleMakeChannelAdmin",yM(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.updateChannelMemberSchemeRoles(n.props.channel.id,n.props.user.id,!0,!0);case 2:t=e.sent,(r=t.error)?n.setState({serverError:r.message}):n.props.actions.getChannelStats(n.props.channel.id);case 5:case"end":return e.stop()}},e)}))),n.state={serverError:null,removing:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EM(e,t)}(t,E.a.Component),n=t,(r=[{key:"renderRole",value:function(e){return e?E.a.createElement(Y.c,{id:"channel_members_dropdown.channel_admin",defaultMessage:"Channel Admin"}):E.a.createElement(Y.c,{id:"channel_members_dropdown.channel_member",defaultMessage:"Channel Member"})}},{key:"render",value:function(){var e=this.props.isLicensed,t=e&&(j.M(this.props.isLicensed,this.props.channelMember.roles)||this.props.channelMember.scheme_admin),n=null;if(this.state.serverError&&(n=E.a.createElement("div",{className:"has-error"},E.a.createElement("label",{className:"has-error control-label"},this.state.serverError))),this.props.user.id===this.props.currentUserId)return null;var r=this.renderRole(t);if(this.props.canChangeMemberRoles){var a=this.props.canRemoveMember&&this.props.channel.name!==P.i.DEFAULT_CHANNEL&&!this.props.channel.group_constrained,o=t,i=e&&!t;if(o||i){var s=this.props,l=s.index,c=s.totalUsers,u=!1;return c>3&&c-l<=3&&(u=!0),E.a.createElement(du.a,null,E.a.createElement("button",{className:"dropdown-toggle theme color--link style--none",type:"button"},E.a.createElement("span",null,r," "),E.a.createElement("span",{className:"sr-only"},this.props.user.username),E.a.createElement(tw,null)),E.a.createElement(mu.a,{openLeft:!0,openUp:u,ariaLabel:j.ab("channel_members_dropdown.menuAriaLabel","Channel member role change")},E.a.createElement(Dp.a,{show:o,onClick:this.handleMakeChannelMember,text:j.ab("channel_members_dropdown.make_channel_member","Make Channel Member")}),E.a.createElement(Dp.a,{show:i,onClick:this.handleMakeChannelAdmin,text:j.ab("channel_members_dropdown.make_channel_admin","Make Channel Admin")}),E.a.createElement(Dp.a,{show:a,onClick:this.handleRemoveFromChannel,text:j.ab("channel_members_dropdown.remove_from_channel","Remove From Channel")}),n))}}return this.props.canRemoveMember&&this.props.channel.name!==P.i.DEFAULT_CHANNEL&&!this.props.channel.group_constrained?E.a.createElement("button",{id:"removeMember",type:"button",className:"btn btn-danger btn-message",onClick:this.handleRemoveFromChannel,disabled:this.state.removing},E.a.createElement("span",{className:"sr-only"},r),E.a.createElement("span",{className:"sr-only"},this.props.user.username),E.a.createElement(Y.c,{id:"channel_members_dropdown.remove_member",defaultMessage:"Remove Member"})):this.props.channel.name===P.i.DEFAULT_CHANNEL?E.a.createElement("div",null):E.a.createElement("div",null,this.renderRole(t))}}])&&gM(n.prototype,r),a&&gM(n,a),t}();wM(OM,"propTypes",{channel:v.a.object.isRequired,user:v.a.object.isRequired,currentUserId:v.a.string.isRequired,channelMember:v.a.object.isRequired,isLicensed:v.a.bool.isRequired,canChangeMemberRoles:v.a.bool.isRequired,canRemoveMember:v.a.bool.isRequired,index:v.a.number.isRequired,totalUsers:v.a.number.isRequired,actions:v.a.shape({getChannelStats:v.a.func.isRequired,updateChannelMemberSchemeRoles:v.a.func.isRequired,removeChannelMember:v.a.func.isRequired}).isRequired});var SM=Object(r.connect)(function(e,t){var n=t.channel,r=Object(D.haveIChannelPermission)(e,{channel:n.id,team:n.team_id,permission:L.Permissions.MANAGE_CHANNEL_ROLES}),a="true"===Object(u.getLicense)(e).IsLicensed,o=Object(Sa.a)(n);return{currentUserId:Object(p.getCurrentUserId)(e),isLicensed:a,canChangeMemberRoles:r,canRemoveMember:o}},function(e){return{actions:Object(a.bindActionCreators)({getChannelStats:s.getChannelStats,updateChannelMemberSchemeRoles:s.updateChannelMemberSchemeRoles,removeChannelMember:s.removeChannelMember},e)}})(OM);function CM(e){return(CM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PM(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function TM(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){PM(o,r,a,i,s,"next",e)}function s(e){PM(o,r,a,i,s,"throw",e)}i(void 0)})}}function jM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kM(e){return(kM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NM(e,t){return(NM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function RM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var IM=50,AM=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=kM(t).call(this,e),n=!a||"object"!==CM(a)&&"function"!=typeof a?MM(r):a,RM(MM(n),"loadComplete",function(){n.setState({loading:!1})}),RM(MM(n),"nextPage",function(e){n.props.actions.loadProfilesAndTeamMembersAndChannelMembers(e+1,IM)}),RM(MM(n),"handleSearch",function(e){n.props.actions.setModalSearchTerm(e)}),n.searchTimeoutId=0,n.state={loading:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NM(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.actions,r=t.currentChannelId,a=t.currentTeamId;n.loadProfilesAndTeamMembersAndChannelMembers(0,P.Q.PROFILE_CHUNK_SIZE,a,r).then(function(t){t.data&&e.loadComplete()}),n.getChannelStats(r)}},{key:"componentWillUnmount",value:function(){this.props.actions.setModalSearchTerm("")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.props.searchTerm!==e.searchTerm){clearTimeout(this.searchTimeoutId);var n=e.searchTerm;if(""===n)return this.loadComplete(),void(this.searchTimeoutId="");var r=setTimeout(TM(regeneratorRuntime.mark(function a(){var o,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.props.actions.searchProfiles(n,{team_id:e.currentTeamId,in_channel_id:e.currentChannelId});case 2:if(o=a.sent,i=o.data,r===t.searchTimeoutId){a.next=6;break}return a.abrupt("return");case 6:t.setState({loading:!0}),e.actions.loadStatusesForProfilesList(i),e.actions.loadTeamMembersAndChannelMembersForProfilesList(i,e.currentTeamId,e.currentChannelId).then(function(e){e.data&&t.loadComplete()});case 9:case"end":return a.stop()}},a)})),P.Q.SEARCH_TIMEOUT_MILLISECONDS);this.searchTimeoutId=r}}},{key:"render",value:function(){var e=0!==this.props.channel.delete_at;return E.a.createElement(QE,{users:this.props.usersToDisplay,usersPerPage:IM,total:this.props.totalChannelMembers,nextPage:this.nextPage,search:this.handleSearch,actions:e?[]:[SM],actionUserProps:this.props.actionUserProps,focusOnMount:!T.m()})}}])&&jM(n.prototype,r),a&&jM(n,a),t}();function xM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}RM(AM,"propTypes",{currentTeamId:v.a.string.isRequired,currentChannelId:v.a.string.isRequired,searchTerm:v.a.string.isRequired,usersToDisplay:v.a.arrayOf(v.a.object).isRequired,actionUserProps:v.a.object.isRequired,totalChannelMembers:v.a.number.isRequired,channel:v.a.object.isRequired,actions:v.a.shape({searchProfiles:v.a.func.isRequired,getChannelStats:v.a.func.isRequired,setModalSearchTerm:v.a.func.isRequired,loadProfilesAndTeamMembersAndChannelMembers:v.a.func.isRequired,loadStatusesForProfilesList:v.a.func.isRequired,loadTeamMembersAndChannelMembersForProfilesList:v.a.func.isRequired}).isRequired});var LM=Object(Kl.a)(function(e,t){return t},d.getMembersInCurrentTeam,m.getMembersInCurrentChannel,m.getCurrentChannel,function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={},o=[],i=0;i<e.length;i++){var s=e[i];t[s.id]&&n[s.id]&&0===s.delete_at&&(o.push(s),a[s.id]={channel:r,teamMember:t[s.id],channelMember:n[s.id]})}return{usersToDisplay:o.sort(To.sortByUsername),actionUserProps:a}});var DM=Object(r.connect)(function(e){var t,n=e.views.search.modalSearch;t=n?Object(p.searchProfilesInCurrentChannel)(e,n):Object(p.getProfilesInCurrentChannel)(e);var r=Object(m.getCurrentChannelStats)(e)||{member_count:0};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){xM(e,t,n[t])})}return e}({},LM(e,t),{currentTeamId:e.entities.teams.currentTeamId,currentChannelId:e.entities.channels.currentChannelId,searchTerm:n,totalChannelMembers:r.member_count})},function(e){return{actions:Object(a.bindActionCreators)({searchProfiles:i.searchProfiles,getChannelStats:s.getChannelStats,setModalSearchTerm:BE.a,loadProfilesAndTeamMembersAndChannelMembers:cl.h,loadStatusesForProfilesList:f.b,loadTeamMembersAndChannelMembersForProfilesList:cl.l},e)}})(AM);function UM(e){return(UM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HM(e){return(HM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BM(e,t){return(BM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VM=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=HM(t).call(this,e),n=!a||"object"!==UM(a)&&"function"!=typeof a?FM(r):a,GM(FM(n),"handleHide",function(){n.setState({show:!1})}),GM(FM(n),"handleExit",function(){n.props.onHide()}),GM(FM(n),"onAddNewMembersButton",function(){var e=n.props,t=e.channel;e.actions.openModal({modalId:P.r.CHANNEL_INVITE,dialogType:fM,dialogProps:{channel:t}}),n.handleExit()}),n.state={show:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BM(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=0!==this.props.channel.delete_at;return E.a.createElement("div",null,E.a.createElement(K.a,{dialogClassName:"a11y__modal more-modal more-modal--action",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"channelMembersModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"channelMembersModalLabel"},E.a.createElement("span",{className:"name"},this.props.channel.display_name),E.a.createElement(Y.c,{id:"channel_members_modal.members",defaultMessage:" Members"})),this.props.canManageChannelMembers&&!e&&E.a.createElement("a",{id:"showInviteModal",className:"btn btn-md btn-primary",href:"#",onClick:this.onAddNewMembersButton},E.a.createElement(Y.c,{id:"channel_members_modal.addNew",defaultMessage:" Add New Members"}))),E.a.createElement(K.a.Body,null,E.a.createElement(DM,{channel:this.props.channel}))))}}])&&qM(n.prototype,r),a&&qM(n,a),t}();GM(VM,"propTypes",{canManageChannelMembers:v.a.bool.isRequired,channel:v.a.object.isRequired,onHide:v.a.func.isRequired,actions:v.a.shape({openModal:v.a.func.isRequired}).isRequired});var WM=Object(r.connect)(function(e){return{canManageChannelMembers:Object(m.canManageChannelMembers)(e)}},function(e){return{actions:Object(a.bindActionCreators)({openModal:U.b},e)}})(VM);function zM(e){return(zM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YM(e,t){return!t||"object"!==zM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function QM(e){return(QM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JM(e,t){return(JM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ZM=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),YM(this,QM(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JM(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.member",defaultMessage:"Member Icon"},function(e){return E.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 16 16",role:"icon","aria-label":e},E.a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{id:"Channel-Header/Web-HD",transform:"translate(-725.000000, -32.000000)",fillRule:"nonzero",fill:"inherit"},E.a.createElement("g",{id:"Channel-Header"},E.a.createElement("g",{id:"user-count",transform:"translate(676.000000, 22.000000)"},E.a.createElement("path",{d:"M64.9481342,24 C64.6981342,20.955 63.2551342,19.076 60.6731342,18.354 C61.4831342,17.466 61.9881342,16.296 61.9881342,15 C61.9881342,12.238 59.7501342,10 56.9881342,10 C54.2261342,10 51.9881342,12.238 51.9881342,15 C51.9881342,16.297 52.4941342,17.467 53.3031342,18.354 C50.7221342,19.076 49.2771342,20.955 49.0271342,24 C49.0161342,24.146 49.0061342,24.577 49.0001342,25.001 C48.9911342,25.553 49.4361342,26 49.9881342,26 L63.9881342,26 C64.5411342,26 64.9851342,25.553 64.9761342,25.001 C64.9701342,24.577 64.9601342,24.146 64.9481342,24 Z M56.9881342,12 C58.6421342,12 59.9881342,13.346 59.9881342,15 C59.9881342,16.654 58.6421342,18 56.9881342,18 C55.3341342,18 53.9881342,16.654 53.9881342,15 C53.9881342,13.346 55.3341342,12 56.9881342,12 Z M51.0321342,24 C51.2981342,21.174 52.7911342,20 55.9881342,20 L57.9881342,20 C61.1851342,20 62.6781342,21.174 62.9441342,24 L51.0321342,24 Z",id:"User_4_x2C__Profile_5-Copy-9"}))))))}))}}])&&KM(n.prototype,r),a&&KM(n,a),t}();function XM(e){return(XM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eN(e,t){return!t||"object"!==XM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tN(e){return(tN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nN(e,t){return(nN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rN=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),eN(this,tN(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nN(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("button",Object.assign({},this.props,{"aria-label":Object(j.ab)("members_popover.button.message","message"),className:"style--none icon icon__message"}),E.a.createElement(Y.c,{id:"generic_icons.message",defaultMessage:"Message Icon"},function(e){return E.a.createElement("svg",{width:"18px",height:"16px",viewBox:"0 0 18 16",role:"icon","aria-label":e},E.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-200.000000, -174.000000)",fill:"inherit"},E.a.createElement("g",{transform:"translate(200.000000, 174.000000)"},E.a.createElement("path",{d:"M7.2546625,1.42801356 C10.458475,1.42801356 12.999475,3.24528136 12.999475,5.52023729 C12.9895,8.04188475 10.6062625,9.89326102 7.40245,9.89326102 C7.40245,9.89326102 6.9134125,9.91229831 6.4115125,9.83747119 L5.82535,9.79622373 L5.15335,10.3586169 C4.997425,10.5397356 4.3199125,11.1095322 3.736375,11.4794373 C4.0915375,10.4598847 4.07605,10.1370441 4.07605,10.1370441 L4.1251375,9.49004068 L3.55315,9.19549153 C2.0986375,8.44616271 1.4444875,6.88616271 1.4444875,5.52023729 C1.4444875,3.24528136 4.05085,1.42801356 7.2546625,1.42801356 M7.2546625,0.370386441 C3.465475,0.370386441 0.3944875,2.65829831 0.3944875,5.52023729 C0.3944875,7.3028678 1.2623125,9.20342373 3.0751375,10.1370441 C3.0751375,10.1478847 3.07225,10.1560814 3.07225,10.1679797 C3.07225,10.9426915 2.43175,12.0048136 2.1794875,12.4429356 L2.1805375,12.4429356 C2.1605875,12.4902644 2.148775,12.5420881 2.148775,12.5973492 C2.148775,12.8141627 2.322025,12.9881424 2.5375375,12.9881424 C2.5693,12.9881424 2.6210125,12.9815322 2.6393875,12.9815322 C2.6446375,12.9815322 2.6467375,12.9815322 2.6462125,12.9831186 C3.986275,12.762339 5.9642125,11.2435864 6.2576875,10.8837288 C6.5585125,10.928678 6.761425,10.9358169 7.0136875,10.9358169 C7.120525,10.9358169 7.2347125,10.9342305 7.3696375,10.9342305 C11.1583,10.9342305 14.094625,8.75446102 14.049475,5.52023729 C14.049475,2.65829831 11.0435875,0.370386441 7.2546625,0.370386441"}),E.a.createElement("path",{d:"M17.2055125,9.79172881 C17.2055125,8.35811525 16.6498,7.26532203 15.2624875,6.4451322 C15.228625,6.82614237 15.120475,7.23517966 15.0031375,7.59477288 C15.8998375,8.21903729 16.1555125,8.85995932 16.1555125,9.79172881 C16.1555125,10.9323797 15.62815,11.7597085 14.40175,12.3919051 L13.879375,12.653139 C13.879375,12.653139 13.9337125,14.0082237 14.0140375,14.3511593 C12.9895,13.5946915 12.6374875,12.9630237 12.6374875,12.9630237 L12.08545,13.0486915 C11.86705,13.0809492 11.276425,13.0812136 11.276425,13.0812136 C9.85,13.0812136 8.7929125,12.7388068 7.8909625,12.0278169 C8.135875,12.0124814 6.42805,12.0132746 6.3899875,12.0468542 C7.4326375,13.3297559 9.1373125,14.1388407 11.276425,14.1388407 C11.3927125,14.1388407 11.49115,14.1398983 11.58355,14.1398983 C11.801425,14.1398983 11.9773,14.1338169 12.237175,14.095478 C12.491275,14.4058915 13.914025,15.7728746 15.0724375,15.9629831 C15.0719125,15.9619254 15.073225,15.9619254 15.078475,15.9619254 C15.0939625,15.9619254 15.13885,15.967478 15.16615,15.967478 C15.3522625,15.967478 15.5024125,15.8167661 15.5024125,15.6293017 C15.5024125,15.5817085 15.49165,15.5367593 15.47485,15.4960407 L15.4759,15.4960407 C15.258025,15.117939 14.9159875,14.0129831 14.9159875,13.3435051 C14.9159875,13.3331932 14.9128375,13.3260542 14.9128375,13.3168 C16.4797,12.5095661 17.2055125,11.3321627 17.2055125,9.79172881"})))))}))}}])&&$M(n.prototype,r),a&&$M(n,a),t}();function aN(e){return(aN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iN(e){return(iN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lN(e,t){return(lN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uN=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=iN(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==aN(a)&&"function"!=typeof a?sN(r):a,cN(sN(n),"handleClick",function(){n.props.onItemClick(n.props.user)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lN(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){if(!this.props.user)return null;var e,t=j.v(this.props.user);if(!t)return null;this.props.showMessageIcon&&(e=E.a.createElement(rN,{"aria-hidden":"true"}));var n=this.props.user.is_bot?" more-modal__row--bot":"",r=this.props.user.is_bot?null:this.props.status;return E.a.createElement("div",{tabIndex:"0","aria-label":t.toLowerCase(),className:"more-modal__row"+n,onClick:this.handleClick},E.a.createElement(hm.a,{src:ii.Client4.getProfilePictureUrl(this.props.user.id,this.props.user.last_picture_update),status:r,width:"32",height:"32"}),E.a.createElement("div",{className:"more-modal__details d-flex whitespace--nowrap"},E.a.createElement("div",{className:"more-modal__name"},t),E.a.createElement(ko.a,{show:Boolean(this.props.user.is_bot),className:"badge-popoverlist"})),E.a.createElement("div",{className:"more-modal__actions"},e))}}])&&oN(n.prototype,r),a&&oN(n,a),t}();function pN(e){return(pN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mN(e){return(mN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hN(e,t){return(hN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cN(uN,"propTypes",{showMessageIcon:v.a.bool.isRequired,onItemClick:v.a.func.isRequired,status:v.a.string.isRequired,user:v.a.object.isRequired}),cN(uN,"defaultProps",{status:P.O.OFFLINE});var yN=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=mN(t).call(this,e),n=!a||"object"!==pN(a)&&"function"!=typeof a?fN(r):a,bN(fN(n),"sortUsers",function(e,t){return j.jb(e,t)}),bN(fN(n),"handleShowDirectChannel",function(e){var t=n.props.actions,r=e.id;r&&t.openDirectChannelToUserId(r).then(function(e){var t=e.data;t&&Q.a.push(n.props.teamUrl+"/channels/"+t.name),n.closePopover()})}),bN(fN(n),"closePopover",function(){n.setState({showPopover:!1})}),bN(fN(n),"showMembersModal",function(e){e.preventDefault(),n.setState({showPopover:!1,showChannelMembersModal:!0})}),bN(fN(n),"hideChannelMembersModal",function(){n.setState({showChannelMembersModal:!1})}),bN(fN(n),"showChannelInviteModal",function(){n.setState({showChannelInviteModal:!0})}),bN(fN(n),"hideChannelInviteModal",function(){n.setState({showChannelInviteModal:!1})}),bN(fN(n),"hideTeamMembersModal",function(){n.setState({showTeamMembersModal:!1})}),bN(fN(n),"handleGetProfilesInChannel",function(e){n.setState({popoverTarget:e.target,showPopover:!n.state.showPopover}),n.props.actions.loadProfilesAndStatusesInChannel(n.props.channel.id,0,void 0,"status")}),bN(fN(n),"getTargetPopover",function(){return n.membersList.current.focus(),n.state.popoverTarget}),n.membersList=E.a.createRef(),n.state={showPopover:!1,showTeamMembersModal:!1,showChannelMembersModal:!1,showChannelInviteModal:!1,sortedUsers:n.sortUsers(e.users,e.statuses)},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hN(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidUpdate",value:function(){Hl()(".member-list__popover .popover-content .more-modal__body").perfectScrollbar()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.props.users!==e.users||this.props.statuses!==e.statuses){var t=this.sortUsers(e.users,e.statuses);this.setState({sortedUsers:t})}}},{key:"render",value:function(){var e,t=this,n=this.props.channel.type===P.i.DM_CHANNEL,r=this.state.sortedUsers.map(function(e){return E.a.createElement(uN,{key:e.id,onItemClick:t.handleShowDirectChannel,showMessageIcon:t.props.currentUserId!==e.id&&!n,status:t.props.statuses[e.id],user:e})}),a=0!==this.props.channel.delete_at;if(this.props.channel.type!==P.i.GM_CHANNEL&&!a){var o=E.a.createElement(Y.c,{id:"members_popover.manageMembers",defaultMessage:"Manage Members"}),i=Object(Sa.a)(this.props.channel);!(this.props.channel.name===P.i.DEFAULT_CHANNEL)&&i||(o=E.a.createElement(Y.c,{id:"members_popover.viewMembers",defaultMessage:"View Members"})),e=E.a.createElement("div",{className:"more-modal__button",key:"popover-member-more"},E.a.createElement("button",{className:"btn btn-link",onClick:this.showMembersModal},o))}var s=this.props.memberCount,l="-";s>0&&(l=s.toString());var c,u,p,d=E.a.createElement(Y.c,{id:"members_popover.title",defaultMessage:"Channel Members"});this.state.showChannelMembersModal&&(c=E.a.createElement(WM,{onHide:this.hideChannelMembersModal,showInviteModal:this.showChannelInviteModal,channel:this.props.channel})),this.state.showTeamMembersModal&&(u=E.a.createElement(Mw,{onHide:this.hideTeamMembersModal})),this.state.showChannelInviteModal&&(p=E.a.createElement(fM,{onHide:this.hideChannelInviteModal,channel:this.props.channel}));var m=E.a.createElement(Ec.a,{id:"channelMembersTooltip"},E.a.createElement(Y.c,{id:"channel_header.channelMembers",defaultMessage:"Members"})),f="".concat(j.ab("channel_header.channelMembers","Members")).toLowerCase();return E.a.createElement("div",{id:"channelMember"},E.a.createElement("button",{id:"member_popover","aria-label":f,className:"style--none member-popover__trigger channel-header__icon wide "+(this.state.showPopover?"active":""),ref:"member_popover_target",onClick:this.handleGetProfilesInChannel},E.a.createElement(_c.a,{delayShow:P.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:m},E.a.createElement("div",null,E.a.createElement("span",{id:"channelMemberCountText",className:"icon__text"},l),E.a.createElement(ZM,{id:"channelMemberIcon",className:"icon icon__members","aria-hidden":"true"})))),E.a.createElement(ie.a,{rootClose:!0,onHide:this.closePopover,show:this.state.showPopover,target:this.getTargetPopover,placement:"bottom"},E.a.createElement(Gy.a,{className:"member-list__popover",id:"member-list-popover"},E.a.createElement("div",{className:"more-modal__header"},d,this.props.channel.group_constrained&&E.a.createElement("div",{className:"subhead"},E.a.createElement(Y.c,{id:"channel_header.groupConstrained",defaultMessage:"Members managed by linked groups."}))),E.a.createElement("div",{className:"more-modal__body"},E.a.createElement("div",{tabIndex:"-1",role:"presentation",ref:this.membersList,className:"more-modal__list"},r)),e)),c,u,p)}}])&&dN(n.prototype,r),a&&dN(n,a),t}();bN(yN,"propTypes",{channel:v.a.object.isRequired,statuses:v.a.object.isRequired,users:v.a.array.isRequired,memberCount:v.a.number,currentUserId:v.a.string.isRequired,teamUrl:v.a.string,actions:v.a.shape({openModal:v.a.func.isRequired,loadProfilesAndStatusesInChannel:v.a.func.isRequired,openDirectChannelToUserId:v.a.func.isRequired}).isRequired});var gN=Object(r.connect)(function(){var e=Object(p.makeGetProfilesInChannel)();return function(t,n){var r=Object(m.getAllChannelStats)(t)[n.channel.id]||{},a=e(t,n.channel.id,!0);return{currentUserId:Object(p.getCurrentUserId)(t),memberCount:r.member_count,users:a,statuses:Object(p.getUserStatuses)(t),teamUrl:Object(d.getCurrentRelativeTeamUrl)(t)}}},function(e){return{actions:Object(a.bindActionCreators)({openModal:U.b,loadProfilesAndStatusesInChannel:cl.f,openDirectChannelToUserId:Yo.e},e)}})(yN);function vN(e){return(vN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EN(e,t){return!t||"object"!==vN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wN(e){return(wN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ON(e,t){return(ON=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var SN=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),EN(this,wN(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ON(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.pin",defaultMessage:"Pin Icon"},function(e){return E.a.createElement("svg",{width:"14px",height:"14px",viewBox:"0 0 16 16",version:"1.1",role:"icon","aria-label":e},E.a.createElement("g",{id:"Symbols",stroke:"inherit",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-775.000000, -32.000000)",fillRule:"nonzero",fill:"inherit"},E.a.createElement("g",null,E.a.createElement("g",{transform:"translate(764.000000, 22.000000)"},E.a.createElement("g",{transform:"translate(10.000000, 10.000000)"},E.a.createElement("path",{d:"M16.456,7.291 L9.483,0.25 C9.31,0.078 9.178,0 9.08,0 C8.896,0 8.831,0.276 8.831,0.732 L8.831,3.044 L5.831,5.96 L2.578,6.268 C1.887,6.405 1.668,6.917 2.167,7.41 L4.781,10.011 L3.83,10.961 L1.05,15.511 C0.93,15.761 1.03,15.862 1.28,15.74 L5.83,12.961 L6.786,12.005 L9.359,14.565 C9.556,14.76 9.754,14.854 9.929,14.854 C10.197,14.854 10.413,14.634 10.497,14.219 L10.83,10.961 L13.746,7.961 L16.082,7.961 C16.788,7.961 16.955,7.785 16.456,7.291 Z M12.312,6.567 L9.396,9.567 L8.911,10.065 L8.84,10.757 L8.797,11.184 L5.589,7.992 L6.018,7.952 L6.72,7.886 L7.225,7.396 L10.225,4.48 L10.547,4.167 L12.616,6.256 L12.312,6.567 Z"})))))))}))}}])&&_N(n.prototype,r),a&&_N(n,a),t}();function CN(e){return(CN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TN(e,t){return!t||"object"!==CN(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jN(e){return(jN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kN(e,t){return(kN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var MN=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),TN(this,jN(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kN(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement(mu.a,{id:"channelHeaderDropdownMenu",ariaLabel:Object(j.ab)("channel_header.menuAriaLabel","Channel Menu").toLowerCase()},E.a.createElement(gA,{isMobile:!1}))}}])&&PN(n.prototype,r),a&&PN(n,a),t}();function NN(e){return(NN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IN(e){return(IN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xN(e,t){return(xN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var DN=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=IN(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==NN(a)&&"function"!=typeof a?AN(r):a,LN(AN(n),"createButton",function(e){var t=function(){return n.fireAction(e)};return n.props.isDropdown?E.a.createElement("li",{key:"mobileChannelHeaderItem"+e.id,role:"presentation",className:"MenuItem"},E.a.createElement("a",{role:"menuitem",href:"#",onClick:t},e.dropdownText)):E.a.createElement("li",{className:"flex-parent--center"},E.a.createElement("button",{className:"navbar-toggle navbar-right__icon",onClick:t},E.a.createElement("span",{className:"icon navbar-plugin-button"},e.icon)))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xN(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"createList",value:function(e){return e.map(this.createButton)}},{key:"fireAction",value:function(e){return e.action(this.props.channel,this.props.channelMember)}},{key:"render",value:function(){var e=this.props.components||[];return 0===e.length?null:1===e.length?this.createButton(e[0]):this.props.isDropdown?this.createList(e):null}}])&&RN(n.prototype,r),a&&RN(n,a),t}();LN(DN,"propTypes",{components:v.a.array,isDropdown:v.a.bool.isRequired,channel:v.a.object.isRequired,channelMember:v.a.object.isRequired,theme:v.a.object.isRequired});var UN=Object(r.connect)(function(e){return{channelMember:Object(m.getMyCurrentChannelMembership)(e),components:e.plugins.components.MobileChannelHeaderButton,theme:Object(c.getTheme)(e)}})(DN);function qN(e){var t=e.section,n=e.isCollapsed,r=e.memberNotifyLevel,a=e.globalNotifyLevel,o=e.ignoreChannelMentions;if(r===P.s.DEFAULT&&a){Object(Me.b)("channel_notifications.levels.default"),Object(Me.b)("channel_notifications.levels.all"),Object(Me.b)("channel_notifications.levels.mention"),Object(Me.b)("channel_notifications.levels.none");var i="channel_notifications.levels."+a;return E.a.createElement(E.a.Fragment,null,E.a.createElement(Y.c,{id:"channel_notifications.globalDefault",defaultMessage:"Global default"}),E.a.createElement("span",null," ("),E.a.createElement(Y.c,{id:i,defaultMessage:a}),E.a.createElement("span",null,")"))}return r===P.s.MENTION&&t===P.t.MARK_UNREAD?n?E.a.createElement(Y.c,{id:"channel_notifications.muteChannel.on.title.collapse",defaultMessage:"Mute is enabled. Desktop, email and push notifications will not be sent for this channel."}):E.a.createElement(Y.c,{id:"channel_notifications.muteChannel.on.title",defaultMessage:"On"}):t===P.t.IGNORE_CHANNEL_MENTIONS&&o===P.n.ON?E.a.createElement(Y.c,{id:"channel_notifications.ignoreChannelMentions.on.title",defaultMessage:"On"}):t===P.t.IGNORE_CHANNEL_MENTIONS&&o===P.n.OFF?E.a.createElement(Y.c,{id:"channel_notifications.ignoreChannelMentions.off.title",defaultMessage:"Off"}):r===P.s.MENTION?E.a.createElement(Y.c,{id:"channel_notifications.onlyMentions",defaultMessage:"Only for mentions"}):t!==P.t.DESKTOP&&t!==P.t.PUSH||r!==P.s.ALL?t===P.t.MARK_UNREAD&&r===P.s.ALL?E.a.createElement(Y.c,{id:"channel_notifications.muteChannel.off.title",defaultMessage:"Off"}):E.a.createElement(Y.c,{id:"channel_notifications.never",defaultMessage:"Never"}):E.a.createElement(Y.c,{id:"channel_notifications.allActivity",defaultMessage:"For all activity"})}function HN(e){var t=e.section;return t===P.t.DESKTOP?E.a.createElement(Y.c,{id:"channel_notifications.sendDesktop",defaultMessage:"Send desktop notifications"}):t===P.t.PUSH?E.a.createElement(Y.c,{id:"channel_notifications.push",defaultMessage:"Send mobile push notifications"}):t===P.t.MARK_UNREAD?E.a.createElement(Y.c,{id:"channel_notifications.muteChannel.settings",defaultMessage:"Mute Channel"}):t===P.t.IGNORE_CHANNEL_MENTIONS?E.a.createElement(Y.c,{id:"channel_notifications.ignoreChannelMentions",defaultMessage:"Ignore mentions for @channel, @here and @all"}):null}function FN(e){var t=e.onExpandSection,n=e.globalNotifyLevel,r=e.memberNotifyLevel,a=e.section,o=e.ignoreChannelMentions;return E.a.createElement(Aw.a,{title:E.a.createElement(HN,{section:a}),describe:E.a.createElement(qN,{section:a,ignoreChannelMentions:o,memberNotifyLevel:r,globalNotifyLevel:n,isCollapsed:!0}),updateSection:t,section:a})}function BN(e){switch(e.section){case P.t.DESKTOP:return E.a.createElement("span",null,E.a.createElement(Y.c,{id:"channel_notifications.override",defaultMessage:'Selecting an option other than "Default" will override the global notification settings. Desktop notifications are available on Firefox, Safari, and Chrome.'}));case P.t.PUSH:return E.a.createElement("span",null,E.a.createElement(Y.c,{id:"channel_notifications.overridePush",defaultMessage:'Selecting an option other than "Global default" will override the global notification settings for mobile push notifications in account settings. Push notifications must be enabled by the System Admin.'}));case P.t.MARK_UNREAD:return E.a.createElement("span",null,E.a.createElement(Y.c,{id:"channel_notifications.muteChannel.help",defaultMessage:"Muting turns off desktop, email and push notifications for this channel. The channel will not be marked as unread unless you are mentioned."}));case P.t.IGNORE_CHANNEL_MENTIONS:return E.a.createElement("span",null,E.a.createElement(Y.c,{id:"channel_notifications.ignoreChannelMentions.help",defaultMessage:"When enabled, @channel, @here and @all will not trigger mentions or mention notifications in this channel."}));default:return null}}function GN(e){var t=e.section,n=e.memberNotifyLevel,r=e.globalNotifyLevel,a=e.onChange,o=e.onSubmit,i=e.serverError,s=e.onCollapseSection,l=e.ignoreChannelMentions,c=[E.a.createElement("div",{key:"channel-notification-level-radio"},(t===P.t.DESKTOP||t===P.t.PUSH)&&E.a.createElement("fieldset",null,E.a.createElement("div",{className:"radio"},E.a.createElement("label",{className:""},E.a.createElement("input",{id:"channelNotificationGlobalDefault",name:"channelDesktopNotifications",type:"radio",value:P.s.DEFAULT,checked:n===P.s.DEFAULT,onChange:a}),E.a.createElement(qN,{section:t,memberNotifyLevel:P.s.DEFAULT,globalNotifyLevel:r}))),E.a.createElement("div",{className:"radio"},E.a.createElement("label",{className:""},E.a.createElement("input",{id:"channelNotificationAllActivity",name:"channelDesktopNotifications",type:"radio",value:P.s.ALL,checked:n===P.s.ALL,onChange:a}),E.a.createElement(qN,{section:t,memberNotifyLevel:P.s.ALL}))),E.a.createElement("div",{className:"radio"},E.a.createElement("label",{className:""},E.a.createElement("input",{id:"channelNotificationMentions",name:"channelDesktopNotifications",type:"radio",value:P.s.MENTION,checked:n===P.s.MENTION,onChange:a}),E.a.createElement(qN,{section:t,memberNotifyLevel:P.s.MENTION}))),E.a.createElement("div",{className:"radio"},E.a.createElement("label",null,E.a.createElement("input",{id:"channelNotificationNever",name:"channelDesktopNotifications",type:"radio",value:P.s.NONE,checked:n===P.s.NONE,onChange:a}),E.a.createElement(qN,{section:t,memberNotifyLevel:P.s.NONE})))),t===P.t.IGNORE_CHANNEL_MENTIONS&&E.a.createElement("fieldset",null,E.a.createElement("div",{className:"radio"},E.a.createElement("label",null,E.a.createElement("input",{id:"ignoreChannelMentionsOn",name:"ignoreChannelMentions",type:"radio",value:P.n.ON,checked:l===P.n.ON,onChange:a}),E.a.createElement(qN,{section:t,ignoreChannelMentions:P.n.ON,memberNotifyLevel:n,globalNotifyLevel:r}))),E.a.createElement("div",{className:"radio"},E.a.createElement("label",null,E.a.createElement("input",{id:"ignoreChannelMentionsOff",name:"ignoreChannelMentions",type:"radio",value:P.n.OFF,checked:l===P.n.OFF,onChange:a}),E.a.createElement(qN,{section:t,ignoreChannelMentions:P.n.OFF,memberNotifyLevel:n,globalNotifyLevel:r})))),t===P.t.MARK_UNREAD&&E.a.createElement("fieldset",null,E.a.createElement("div",{className:"radio"},E.a.createElement("label",{className:""},E.a.createElement("input",{id:"channelNotificationUnmute",name:"channelNotificationMute",type:"radio",value:P.s.MENTION,checked:n===P.s.MENTION,onChange:a}),E.a.createElement(qN,{section:t,memberNotifyLevel:P.s.MENTION}))),E.a.createElement("div",{className:"radio"},E.a.createElement("label",{className:""},E.a.createElement("input",{id:"channelNotificationMute",name:"channelNotificationMute",type:"radio",value:P.s.ALL,checked:n===P.s.ALL,onChange:a}),E.a.createElement(qN,{section:t,memberNotifyLevel:P.s.ALL})))))];return E.a.createElement(Iw.a,{title:E.a.createElement(HN,{section:t}),inputs:c,submit:o,server_error:i,updateSection:s,extraInfo:E.a.createElement(BN,{section:t})})}function VN(e){return(VN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zN(e){return(zN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YN(e,t){return(YN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function QN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}qN.propTypes={globalNotifyLevel:v.a.string,ignoreChannelMentions:v.a.string,memberNotifyLevel:v.a.string.isRequired,section:v.a.string.isRequired,isCollapsed:v.a.bool},HN.propTypes={section:v.a.string.isRequired},FN.propTypes={ignoreChannelMentions:v.a.string,onExpandSection:v.a.func.isRequired,globalNotifyLevel:v.a.string,memberNotifyLevel:v.a.string.isRequired,section:v.a.string.isRequired},BN.propTypes={section:v.a.string.isRequired},GN.propTypes={ignoreChannelMentions:v.a.string,onChange:v.a.func.isRequired,onCollapseSection:v.a.func.isRequired,onSubmit:v.a.func.isRequired,globalNotifyLevel:v.a.string,memberNotifyLevel:v.a.string.isRequired,section:v.a.string.isRequired,serverError:v.a.string};var JN=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=zN(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==VN(a)&&"function"!=typeof a?KN(r):a,QN(KN(n),"handleOnChange",function(e){n.props.onChange(e.target.value)}),QN(KN(n),"handleExpandSection",function(){n.props.onUpdateSection(n.props.section)}),QN(KN(n),"handleCollapseSection",function(){n.props.onUpdateSection(P.t.NONE)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YN(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.expand,n=e.globalNotificationLevel,r=e.memberNotificationLevel,a=e.ignoreChannelMentions,o=e.onSubmit,i=e.section,s=e.serverError;return t?E.a.createElement(GN,{section:i,memberNotifyLevel:r,globalNotifyLevel:n,ignoreChannelMentions:a,onChange:this.handleOnChange,onSubmit:o,serverError:s,onCollapseSection:this.handleCollapseSection}):E.a.createElement(FN,{section:i,onExpandSection:this.handleExpandSection,memberNotifyLevel:r,globalNotifyLevel:n,ignoreChannelMentions:a})}}])&&WN(n.prototype,r),a&&WN(n,a),t}();function ZN(e){return(ZN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XN(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function $N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eR(e){return(eR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nR(e,t){return(nR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}QN(JN,"propTypes",{section:v.a.string.isRequired,expand:v.a.bool.isRequired,memberNotificationLevel:v.a.string.isRequired,ignoreChannelMentions:v.a.string,globalNotificationLevel:v.a.string,onChange:v.a.func.isRequired,onSubmit:v.a.func.isRequired,onUpdateSection:v.a.func.isRequired,serverError:v.a.string});var aR=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=eR(t).call(this,e),n=!a||"object"!==ZN(a)&&"function"!=typeof a?tR(r):a,rR(tR(n),"handleHide",function(){n.setState({show:!1})}),rR(tR(n),"handleExit",function(){n.updateSection(P.t.NONE),n.props.onHide()}),rR(tR(n),"updateSection",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P.t.NONE;if(Hl()(".section-max").length&&Hl()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update"),n.setState({activeSection:e}),e===P.t.NONE){var t=n.props.channelMember&&n.props.channelMember.notify_props;n.resetStateFromNotifyProps(t,n.props.currentUser.notify_props)}}),rR(tR(n),"handleUpdateChannelNotifyProps",function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var r,a,o,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.actions,o=r.channel,i=r.currentUser,e.next=3,a.updateChannelNotifyProps(i.id,o.id,t);case 3:s=e.sent,(l=s.error)?n.setState({serverError:l.message}):n.updateSection(P.t.NONE);case 6:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){XN(o,r,a,i,s,"next",e)}function s(e){XN(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()),rR(tR(n),"handleSubmitDesktopNotifyLevel",function(){var e=n.props.channelMember&&n.props.channelMember.notify_props,t=n.state.desktopNotifyLevel;if(e.desktop!==t){var r={desktop:t};n.handleUpdateChannelNotifyProps(r)}else n.updateSection(P.t.NONE)}),rR(tR(n),"handleUpdateDesktopNotifyLevel",function(e){n.setState({desktopNotifyLevel:e})}),rR(tR(n),"handleSubmitMarkUnreadLevel",function(){var e=n.props.channelMember&&n.props.channelMember.notify_props,t=n.state.markUnreadNotifyLevel;if(e.mark_unread!==t){var r={mark_unread:t};n.handleUpdateChannelNotifyProps(r)}else n.updateSection(P.t.NONE)}),rR(tR(n),"handleUpdateMarkUnreadLevel",function(e){n.setState({markUnreadNotifyLevel:e})}),rR(tR(n),"handleSubmitPushNotificationLevel",function(){var e=n.props.channelMember&&n.props.channelMember.notify_props,t=n.state.pushNotifyLevel;if(e.push!==t){var r={push:t};n.handleUpdateChannelNotifyProps(r)}else n.updateSection(P.t.NONE)}),rR(tR(n),"handleUpdatePushNotificationLevel",function(e){n.setState({pushNotifyLevel:e})}),rR(tR(n),"handleUpdateIgnoreChannelMentions",function(e){n.setState({ignoreChannelMentions:e})}),rR(tR(n),"handleSubmitIgnoreChannelMentions",function(){var e=n.props.channelMember&&n.props.channelMember.notify_props,t=n.state.ignoreChannelMentions;if(e.ignore_channel_mentions!==t){var r={ignore_channel_mentions:t};n.handleUpdateChannelNotifyProps(r)}else n.updateSection("")});var o=e.channelMember&&e.channelMember.notify_props;return n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){rR(e,t,n[t])})}return e}({show:!0,activeSection:P.t.NONE,serverError:null},n.getStateFromNotifyProps(o,e.currentUser.notify_props)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nR(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidUpdate",value:function(e){var t=e.channelMember&&e.channelMember.notify_props,n=this.props.channelMember&&this.props.channelMember.notify_props;j.c(n,t)||this.resetStateFromNotifyProps(n,this.props.currentUser.notify_props)}},{key:"resetStateFromNotifyProps",value:function(e,t){this.setState(this.getStateFromNotifyProps(e,t))}},{key:"getStateFromNotifyProps",value:function(e,t){var n=P.n.OFF;t.channel&&"false"===t.channel&&(n=P.n.ON);var r=e.ignore_channel_mentions;return r&&r!==P.n.DEFAULT||(r=n),{desktopNotifyLevel:e.desktop||P.s.DEFAULT,markUnreadNotifyLevel:e.mark_unread||P.s.ALL,pushNotifyLevel:e.push||P.s.DEFAULT,ignoreChannelMentions:r}}},{key:"render",value:function(){var e=this.state,t=e.activeSection,n=e.desktopNotifyLevel,r=e.markUnreadNotifyLevel,a=e.pushNotifyLevel,o=e.ignoreChannelMentions,i=e.serverError,s=this.props,l=s.channel,c=s.channelMember,u=s.currentUser,p=s.sendPushNotifications,d=null;return i&&(d=E.a.createElement("div",{className:"form-group has-error"},E.a.createElement("label",{className:"control-label"},i))),E.a.createElement(K.a,{dialogClassName:"a11y__modal settings-modal settings-modal--tabless",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit,role:"dialog","aria-labelledby":"channelNotificationModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"channelNotificationModalLabel"},E.a.createElement(Y.c,{id:"channel_notifications.preferences",defaultMessage:"Notification Preferences for "}),E.a.createElement("span",{className:"name"},l.display_name))),E.a.createElement(K.a.Body,null,E.a.createElement("div",{className:"settings-table"},E.a.createElement("div",{className:"settings-content"},E.a.createElement("div",{ref:"wrapper",className:"user-settings"},E.a.createElement("br",null),E.a.createElement("div",{className:"divider-dark first"}),E.a.createElement(JN,{section:P.t.MARK_UNREAD,expand:t===P.t.MARK_UNREAD,memberNotificationLevel:r,onChange:this.handleUpdateMarkUnreadLevel,onSubmit:this.handleSubmitMarkUnreadLevel,onUpdateSection:this.updateSection,serverError:i}),E.a.createElement("div",{className:"divider-light"}),E.a.createElement(JN,{section:P.t.IGNORE_CHANNEL_MENTIONS,expand:t===P.t.IGNORE_CHANNEL_MENTIONS,memberNotificationLevel:r,ignoreChannelMentions:o,onChange:this.handleUpdateIgnoreChannelMentions,onSubmit:this.handleSubmitIgnoreChannelMentions,onUpdateSection:this.updateSection,serverError:i}),!Object(zo.isChannelMuted)(c)&&E.a.createElement("div",null,E.a.createElement("div",{className:"divider-light"}),E.a.createElement(JN,{section:P.t.DESKTOP,expand:t===P.t.DESKTOP,memberNotificationLevel:n,globalNotificationLevel:u.notify_props?u.notify_props.desktop:P.s.ALL,onChange:this.handleUpdateDesktopNotifyLevel,onSubmit:this.handleSubmitDesktopNotifyLevel,onUpdateSection:this.updateSection,serverError:i}),E.a.createElement("div",{className:"divider-light"}),p&&E.a.createElement(JN,{section:P.t.PUSH,expand:t===P.t.PUSH,memberNotificationLevel:a,globalNotificationLevel:u.notify_props?u.notify_props.push:P.s.ALL,onChange:this.handleUpdatePushNotificationLevel,onSubmit:this.handleSubmitPushNotificationLevel,onUpdateSection:this.updateSection,serverError:i})),E.a.createElement("div",{className:"divider-dark"})))),d))}}])&&$N(n.prototype,r),a&&$N(n,a),t}();rR(aR,"propTypes",{onHide:v.a.func.isRequired,channel:v.a.object.isRequired,channelMember:v.a.object.isRequired,currentUser:v.a.object.isRequired,sendPushNotifications:v.a.bool.isRequired,actions:v.a.shape({updateChannelNotifyProps:v.a.func.isRequired})});var oR=Object(r.connect)(function(e){return{channelMember:Object(m.getMyCurrentChannelMembership)(e),sendPushNotifications:"true"===Object(u.getConfig)(e).SendPushNotifications}},function(e){return{actions:Object(a.bindActionCreators)({updateChannelNotifyProps:s.updateChannelNotifyProps},e)}})(aR);function iR(e){return(iR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lR(e){return(lR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uR(e,t){return(uR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dR={singleline:!1,mentionHighlight:!1},mR=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=lR(t).call(this,e),n=!a||"object"!==iR(a)&&"function"!=typeof a?cR(r):a,pR(cR(n),"onHide",function(){n.setState({show:!1})}),n.state={show:!0},n.getHeaderMarkdownOptions=Object(lE.memoizeResult)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){pR(e,t,n[t])})}return e}({},dR,{channelNamesMap:e})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uR(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t=this.props.channel,n=0!==t.delete_at;if(!t){var r=j.ab("channel_info.notFound","No Channel Found");t={display_name:r,name:r,purpose:r,header:r,id:r}}var a=this.props.channel.props&&this.props.channel.props.channel_mentions;n?e=E.a.createElement(Dv.a,{className:"icon icon__archive"}):"O"===t.type?e=E.a.createElement(lP.a,{className:"icon icon__globe icon--body"}):"P"===t.type&&(e=E.a.createElement(cP.a,{className:"icon icon__globe icon--body"}));var o,i,s=Object(ss.e)()+"/"+this.props.currentTeam.name+"/channels/"+t.name;t.purpose?o=t.purpose:t.name===P.Q.DEFAULT_CHANNEL&&(o=E.a.createElement(Y.c,{id:"default_channel.purpose",defaultMessage:"Post messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team."})),o&&(i=E.a.createElement("div",{className:"form-group"},E.a.createElement("div",{className:"info__label"},E.a.createElement(Y.c,{id:"channel_info.purpose",defaultMessage:"Purpose:"})),E.a.createElement("div",{className:"info__value"},o)));var l=null;return t.header&&(l=E.a.createElement("div",{className:"form-group"},E.a.createElement("div",{className:"info__label"},E.a.createElement(Y.c,{id:"channel_info.header",defaultMessage:"Header:"})),E.a.createElement("div",{className:"info__value"},E.a.createElement(Oa.a,{message:t.header,options:this.getHeaderMarkdownOptions(a)})))),E.a.createElement(K.a,{dialogClassName:"a11y__modal about-modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"channelInfoModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"channelInfoModalLabel"},E.a.createElement(Y.c,{id:"channel_info.about",defaultMessage:"About"}),E.a.createElement("strong",null,e,t.display_name))),E.a.createElement(K.a.Body,{ref:"modalBody"},i,l,E.a.createElement("div",{className:"form-group"},E.a.createElement("div",{className:"info__label"},E.a.createElement(Y.c,{id:"channel_info.url",defaultMessage:"URL:"})),E.a.createElement("div",{className:"info__value"},s)),E.a.createElement("div",{className:"about-modal__hash form-group padding-top x2"},E.a.createElement("p",null,E.a.createElement(Y.c,{id:"channel_info.id",defaultMessage:"ID: "}),t.id))))}}])&&sR(n.prototype,r),a&&sR(n,a),t}();pR(mR,"propTypes",{onHide:v.a.func.isRequired,channel:v.a.object.isRequired,currentTeam:v.a.object.isRequired});var fR=Object(r.connect)(function(e){return{currentTeam:Object(d.getCurrentTeam)(e)}})(mR);function hR(e){return(hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yR(e){return(yR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vR(e,t){return(vR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ER=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=yR(t).call(this,e),n=!a||"object"!==hR(a)&&"function"!=typeof a?gR(r):a,_R(gR(n),"setError",function(e){"api.context.invalid_param.app_error"===e.id?n.setState({serverError:j.ab("edit_channel_purpose_modal.error","This channel purpose is too long, please enter a shorter one")}):n.setState({serverError:e.message})}),_R(gR(n),"unsetError",function(){n.setState({serverError:""})}),_R(gR(n),"handleEntering",function(){j.eb(n.purpose)}),_R(gR(n),"onHide",function(){n.setState({show:!1})}),_R(gR(n),"handleKeyDown",function(e){var t=n.props.ctrlSend;t&&j.S(e,P.Q.KeyCodes.ENTER)&&e.ctrlKey?(e.preventDefault(),n.handleSave(e)):t||!j.S(e,P.Q.KeyCodes.ENTER)||e.shiftKey||e.altKey||(e.preventDefault(),n.handleSave(e))}),_R(gR(n),"handleSave",function(){var e=n.props,t=e.channel,r=e.actions.patchChannel,a=n.state.purpose;t&&r(t.id,{purpose:a})}),_R(gR(n),"handleChange",function(e){e.preventDefault(),n.setState({purpose:e.target.value})}),_R(gR(n),"getPurpose",function(e){n.purpose=e}),n.state={purpose:e.channel.purpose||"",serverError:"",show:!0,submitted:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vR(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.requestStatus,n=e.serverError,r=this.props.requestStatus;r!==t&&t===L.RequestStatus.SUCCESS&&this.onHide(),r!==t&&t===L.RequestStatus.FAILURE?this.setError(n):this.unsetError()}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=E.a.createElement("div",{className:"form-group has-error"},E.a.createElement("br",null),E.a.createElement("label",{className:"control-label"},this.state.serverError)));var t=E.a.createElement("span",null,E.a.createElement(Y.c,{id:"edit_channel_purpose_modal.title1",defaultMessage:"Edit Purpose"}));this.props.channel.display_name&&(t=E.a.createElement("span",null,E.a.createElement(Y.c,{id:"edit_channel_purpose_modal.title2",defaultMessage:"Edit Purpose for "}),E.a.createElement("span",{className:"name"},this.props.channel.display_name)));var n=E.a.createElement(Y.c,{id:"edit_channel_purpose_modal.body",defaultMessage:'Describe how this channel should be used. This text appears in the channel list in the "More..." menu and helps others decide whether to join.'});return"P"===this.props.channel.type&&(n=E.a.createElement(Y.c,{id:"edit_channel_private_purpose_modal.body",defaultMessage:'This text appears in the \\"View Info\\" modal of the private channel.'})),E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onEntering:this.handleEntering,onExited:this.props.onHide,role:"dialog","aria-labelledby":"editChannelPurposeModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"editChannelPurposeModalLabel"},t)),E.a.createElement(K.a.Body,null,E.a.createElement("p",null,n),E.a.createElement("textarea",{ref:this.getPurpose,className:"form-control no-resize",rows:"6",maxLength:"250",value:this.state.purpose,onKeyDown:this.handleKeyDown,onChange:this.handleChange}),e),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link cancel-button",onClick:this.onHide},E.a.createElement(Y.c,{id:"edit_channel_purpose_modal.cancel",defaultMessage:"Cancel"})),E.a.createElement("button",{type:"button",className:"btn btn-primary save-button",disabled:this.props.requestStatus===L.RequestStatus.STARTED,onClick:this.handleSave},E.a.createElement(Y.c,{id:"edit_channel_purpose_modal.save",defaultMessage:"Save"}))))}}])&&bR(n.prototype,r),a&&bR(n,a),t}();function wR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_R(ER,"propTypes",{onHide:v.a.func.isRequired,channel:v.a.object,ctrlSend:v.a.bool.isRequired,serverError:v.a.object,requestStatus:v.a.string.isRequired,actions:v.a.shape({patchChannel:v.a.func.isRequired}).isRequired});var OR=Object(Kl.a)(function(e){return Object(c.getBool)(e,P.Q.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")},function(e){var t=e.requests.channels.updateChannel;return{serverError:t.error,requestStatus:t.status}},function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){wR(e,t,n[t])})}return e}({ctrlSend:e},t)});var SR=Object(r.connect)(OR,function(e){return{actions:{patchChannel:Object(a.bindActionCreators)(s.patchChannel,e)}}})(ER);function CR(e){return(CR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PR(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function TR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jR(e){return(jR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MR(e,t){return(MR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RR=Object(Y.g)({required:{id:Object(Me.b)("rename_channel.required"),defaultMessage:"This field is required"},maxLength:{id:Object(Me.b)("rename_channel.maxLength"),defaultMessage:"This field must be less than {maxLength, number} characters"},lowercase:{id:Object(Me.b)("rename_channel.lowercase"),defaultMessage:"Must be lowercase alphanumeric characters"},url:{id:Object(Me.b)("rename_channel.url"),defaultMessage:"URL"},defaultError:{id:Object(Me.b)("rename_channel.defaultError"),defaultMessage:" - Cannot be changed for the default channel"},displayNameHolder:{id:Object(Me.b)("rename_channel.displayNameHolder"),defaultMessage:"Enter display name"},handleHolder:{id:Object(Me.b)("rename_channel.handleHolder"),defaultMessage:"lowercase alphanumeric characters"}}),IR=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=jR(t).call(this,e),n=!a||"object"!==CR(a)&&"function"!=typeof a?kR(r):a,NR(kR(n),"setError",function(e){n.setState({serverError:e.message})}),NR(kR(n),"unsetError",function(){n.setState({serverError:""})}),NR(kR(n),"handleEntering",function(){j.eb(n.textbox)}),NR(kR(n),"handleHide",function(e){e&&e.preventDefault(),n.setState({serverError:"",nameError:"",displayNameError:"",invalid:!1,show:!1})}),NR(kR(n),"handleSubmit",function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var r,a,o,i,s,l,c,u,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),r=Object.assign({},n.props.channel),a=r.name,o=r.display_name,i={serverError:""},s=n.props.intl.formatMessage,l=n.props.actions.patchChannel,r.display_name=n.state.displayName.trim(),r.display_name?r.display_name.length>P.Q.MAX_CHANNELNAME_LENGTH?(i.displayNameError=s(RR.maxLength,{maxLength:P.Q.MAX_CHANNELNAME_LENGTH}),i.invalid=!0):r.display_name.length<P.Q.MIN_CHANNELNAME_LENGTH?(i.displayNameError=E.a.createElement(Y.c,{id:"rename_channel.minLength",defaultMessage:"Channel name must be {minLength, number} or more characters",values:{minLength:P.Q.MIN_CHANNELNAME_LENGTH}}),i.invalid=!0):i.displayNameError="":(i.displayNameError=s(RR.required),i.invalid=!0),r.name=n.state.channelName.trim(),r.name?r.name.length>P.Q.MAX_CHANNELNAME_LENGTH?(i.nameError=s(RR.maxLength,{maxLength:P.Q.MAX_CHANNELNAME_LENGTH}),i.invalid=!0):Object(ss.a)(r.name)===r.name?i.nameError="":(i.nameError=s(RR.lowercase),i.invalid=!0):(i.nameError=s(RR.required),i.invalid=!0),n.setState(i),!i.invalid){e.next=14;break}return e.abrupt("return");case 14:if(a!==r.name||o!==r.display_name){e.next=17;break}return n.onSaveSuccess(),e.abrupt("return");case 17:return e.next=19,l(r.id,r);case 19:c=e.sent,u=c.data,p=c.error,u?n.onSaveSuccess():p&&n.setError(p);case 23:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){PR(o,r,a,i,s,"next",e)}function s(e){PR(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()),NR(kR(n),"onSaveSuccess",function(){n.handleHide(),n.unsetError(),Q.a.push("/"+n.props.team.name+"/channels/"+n.state.channelName)}),NR(kR(n),"handleCancel",function(e){n.setState({displayName:n.props.channel.display_name,channelName:n.props.channel.name}),n.handleHide(e)}),NR(kR(n),"onNameChange",function(e){n.setState({channelName:e.target.value})}),NR(kR(n),"onDisplayNameChange",function(e){n.setState({displayName:e.target.value})}),NR(kR(n),"getTextbox",function(e){n.textbox=e}),n.state={displayName:e.channel.display_name,channelName:e.channel.name,serverError:"",nameError:"",displayNameError:"",invalid:!1,show:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MR(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){j.c(e.channel,this.props.channel)||this.setState({displayName:e.channel.display_name,channelName:e.channel.name})}},{key:"render",value:function(){var e=null,t="form-group";this.state.displayNameError&&(e=E.a.createElement("label",{className:"control-label"},this.state.displayNameError),t+=" has-error");var n=null,r="form-group";this.state.nameError&&(n=E.a.createElement("label",{className:"control-label"},this.state.nameError),r+=" has-error");var a=null;this.state.serverError&&(a=E.a.createElement("div",{className:"form-group has-error"},E.a.createElement("label",{className:"control-label"},this.state.serverError)));var o=this.props.intl.formatMessage,i=o(RR.url),s=!1;this.props.channel.name===P.Q.DEFAULT_CHANNEL&&(i+=o(RR.defaultError),s=!0);var l=this.props.currentTeamUrl+"/channels",c=Object(ss.d)(l,35),u=E.a.createElement(Ec.a,{id:"urlTooltip"},l);return E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.handleCancel,onEntering:this.handleEntering,onExited:this.props.onHide,role:"dialog","aria-labelledby":"renameChannelModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"renameChannelModalLabel"},E.a.createElement(Y.c,{id:"rename_channel.title",defaultMessage:"Rename Channel"}))),E.a.createElement("form",{role:"form"},E.a.createElement(K.a.Body,null,E.a.createElement("div",{className:t},E.a.createElement("label",{className:"control-label"},E.a.createElement(Y.c,{id:"rename_channel.displayName",defaultMessage:"Display Name"})),E.a.createElement(ke.a,{onChange:this.onDisplayNameChange,type:"text",ref:this.getTextbox,id:"display_name",className:"form-control",placeholder:RR.displayNameHolder,value:this.state.displayName,maxLength:P.Q.MAX_CHANNELNAME_LENGTH}),e),E.a.createElement("div",{className:r},E.a.createElement("label",{className:"control-label"},i),E.a.createElement("div",{className:"input-group input-group--limit"},E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:u},E.a.createElement("span",{className:"input-group-addon"},c)),E.a.createElement(ke.a,{onChange:this.onNameChange,type:"text",className:"form-control",id:"channel_name",placeholder:RR.handleHolder,value:this.state.channelName,maxLength:P.Q.MAX_CHANNELNAME_LENGTH,readOnly:s})),n),a),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.handleCancel},E.a.createElement(Y.c,{id:"rename_channel.cancel",defaultMessage:"Cancel"})),E.a.createElement("button",{onClick:this.handleSubmit,type:"submit",id:"save-button",className:"btn btn-primary"},E.a.createElement(Y.c,{id:"rename_channel.save",defaultMessage:"Save"})))))}}])&&TR(n.prototype,r),a&&TR(n,a),t}();NR(IR,"propTypes",{intl:Y.i.isRequired,onHide:v.a.func.isRequired,channel:v.a.object.isRequired,team:v.a.object.isRequired,currentTeamUrl:v.a.string.isRequired,actions:v.a.shape({patchChannel:v.a.func.isRequired}).isRequired});var AR=Object(Y.h)(IR);function xR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var LR=Object(Kl.a)(function(e){var t=e.entities.teams.currentTeamId,n=Object(d.getTeam)(e,t);return{currentTeamUrl:"".concat(Object(ss.e)(),"/").concat(n.name),team:n}},function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){xR(e,t,n[t])})}return e}({},e)});var DR=Object(r.connect)(LR,function(e){return{actions:{patchChannel:Object(a.bindActionCreators)(s.patchChannel,e)}}})(AR);function UR(e){return(UR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HR(e){return(HR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BR(e,t){return(BR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function GR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VR=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=HR(t).call(this,e),n=!a||"object"!==UR(a)&&"function"!=typeof a?FR(r):a,GR(FR(n),"handleConvert",function(){var e=n.props,t=e.actions,r=e.channelId;r.length===P.Q.CHANNEL_ID_LENGTH&&(t.convertChannelToPrivate(r),Object(vt.d)("actions","convert_to_private_channel",{channel_id:r}),n.onHide())}),GR(FR(n),"onHide",function(){n.setState({show:!1})}),n.state={show:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BR(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.channelDisplayName,n=e.onHide;return E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:n,role:"dialog","aria-labelledby":"convertChannelModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"convertChannelModalLabel"},E.a.createElement(Y.c,{id:"convert_channel.title",defaultMessage:"Convert {display_name} to a private channel?",values:{display_name:t}}))),E.a.createElement(K.a.Body,null,E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"convert_channel.question1",defaultMessage:"When you convert **{display_name}** to a private channel, history and membership are preserved. Publicly shared files remain accessible to anyone with the link. Membership in a private channel is by invitation only.",values:{display_name:t}})),E.a.createElement("p",null,E.a.createElement(Y.b,{id:"convert_channel.question2",defaultMessage:"The change is permanent and cannot be undone."})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"convert_channel.question3",defaultMessage:"Are you sure you want to convert **{display_name}** to a private channel?",values:{display_name:t}}))),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide,tabIndex:"2"},E.a.createElement(Y.c,{id:"convert_channel.cancel",defaultMessage:"No, cancel"})),E.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:this.handleConvert,autoFocus:!0,tabIndex:"1"},E.a.createElement(Y.c,{id:"convert_channel.confirm",defaultMessage:"Yes, convert to private channel"}))))}}])&&qR(n.prototype,r),a&&qR(n,a),t}();GR(VR,"propTypes",{onHide:v.a.func.isRequired,channelId:v.a.string.isRequired,channelDisplayName:v.a.string.isRequired,actions:v.a.shape({convertChannelToPrivate:v.a.func.isRequired})});var WR=Object(r.connect)(function(e){return{currentTeamDetails:Object(d.getCurrentTeam)(e)}},function(e){return{actions:Object(a.bindActionCreators)({convertChannelToPrivate:s.convertChannelToPrivate},e)}})(VR);function zR(e){return(zR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YR(e){return(YR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JR(e,t){return(JR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ZR=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=YR(t).call(this,e))||"object"!==zR(a)&&"function"!=typeof a?QR(r):a).handleDelete=n.handleDelete.bind(QR(n)),n.onHide=n.onHide.bind(QR(n)),n.state={show:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JR(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"handleDelete",value:function(){if(this.props.channel.id.length===P.Q.CHANNEL_ID_LENGTH){if(!this.props.canViewArchivedChannels){var e=this.props.penultimateViewedChannelName;Q.a.push("/"+this.props.currentTeamDetails.name+"/channels/"+e)}this.props.actions.deleteChannel(this.props.channel.id),this.onHide()}}},{key:"onHide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this.props.canViewArchivedChannels;return E.a.createElement(K.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"deleteChannelModalLabel"},E.a.createElement(K.a.Header,{closeButton:!0},E.a.createElement(K.a.Title,{componentClass:"h1",id:"deleteChannelModalLabel"},E.a.createElement(Y.c,{id:"delete_channel.confirm",defaultMessage:"Confirm ARCHIVE Channel"}))),E.a.createElement(K.a.Body,null,E.a.createElement("div",{className:"alert alert-danger"},!e&&E.a.createElement(Bu.b,{id:"delete_channel.question",defaultMessage:"This will archive the channel from the team and make its contents inaccessible for all users. \\n \\nAre you sure you wish to archive the **{display_name}** channel?",values:{display_name:this.props.channel.display_name}}),e&&E.a.createElement(Bu.b,{id:"delete_channel.viewArchived.question",defaultMessage:"This will archive the channel from the team. Channel contents will still be accessible by channel members.\n \nAre you sure you wish to archive the **{display_name}** channel?",values:{display_name:this.props.channel.display_name}}))),E.a.createElement(K.a.Footer,null,E.a.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onHide},E.a.createElement(Y.c,{id:"delete_channel.cancel",defaultMessage:"Cancel"})),E.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:this.handleDelete,autoFocus:!0},E.a.createElement(Y.c,{id:"delete_channel.del",defaultMessage:"Archive"}))))}}])&&KR(n.prototype,r),a&&KR(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ZR,"propTypes",{onHide:v.a.func.isRequired,channel:v.a.object.isRequired,currentTeamDetails:v.a.object.isRequired,canViewArchivedChannels:v.a.bool,penultimateViewedChannelName:v.a.string.isRequired,actions:v.a.shape({deleteChannel:v.a.func.isRequired})});var XR=Object(r.connect)(function(e){return{canViewArchivedChannels:"true"===Object(u.getConfig)(e).ExperimentalViewArchivedChannels,currentTeamDetails:Object(d.getCurrentTeam)(e)}},function(e){return{actions:Object(a.bindActionCreators)({deleteChannel:s.deleteChannel},e)}})(ZR),$R=n(1659);function eI(e){return(eI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tI(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function nI(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){tI(o,r,a,i,s,"next",e)}function s(e){tI(o,r,a,i,s,"throw",e)}i(void 0)})}}function rI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aI(e){return(aI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iI(e,t){return(iI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lI=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=aI(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==eI(a)&&"function"!=typeof a?oI(r):a,sI(oI(n),"loadItems",function(){var e=nI(regeneratorRuntime.mark(function e(t,r){var a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.getGroupsAssociatedToChannel(n.props.channel.id,r,t,$O);case 2:return a=e.sent,o=a.data,e.abrupt("return",{items:o.groups,totalCount:o.totalGroupCount});case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),sI(oI(n),"onClickRemoveGroup",function(e,t){return n.props.actions.unlinkGroupSyncable(e.id,n.props.channel.id,L.Groups.SYNCABLE_TYPE_CHANNEL).then(nI(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,t.props.loadItems(t.setState.page,t.state.searchTerm);case 3:n=e.sent,r=n.items,t.setState({loading:!1,items:r});case 6:case"end":return e.stop()}},e)})))}),sI(oI(n),"onHide",function(){n.props.actions.closeModal(P.r.MANAGE_CHANNEL_GROUPS)}),sI(oI(n),"titleButtonOnClick",function(){n.onHide(),n.props.actions.openModal({modalId:P.r.ADD_GROUPS_TO_TEAM,dialogType:$R.a})}),sI(oI(n),"renderRow",function(e,t){return E.a.createElement("div",{key:e.id,className:"more-modal__row"},E.a.createElement("img",{className:"more-modal__image",src:nS.a,alt:"group picture",width:"32",height:"32"}),E.a.createElement("div",{className:"more-modal__details"},E.a.createElement("div",{className:"more-modal__name"},e.display_name," ","-"," ",E.a.createElement("span",null,E.a.createElement(Y.c,{id:"numMembers",defaultMessage:"{num, number} {num, plural, one {member} other {members}}",values:{num:e.member_count}})))),E.a.createElement("div",{className:"more-modal__actions"},E.a.createElement("button",{id:"removeMember",type:"button",className:"btn btn-danger btn-message",onClick:function(){return n.onClickRemoveGroup(e,t)}},E.a.createElement(Y.c,{id:"group_list_modal.removeGroupButton",defaultMessage:"Remove Group"}))))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iI(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.context.intl.formatMessage;return E.a.createElement(eS,{titleText:e({id:"groups",defaultMessage:"{channel} Groups"},{channel:this.props.channel.display_name}),searchPlaceholderText:e({id:"manage_channel_groups_modal.search_placeholder",defaultMessage:"Search groups"}),renderRow:this.renderRow,loadItems:this.loadItems,onHide:this.onHide,titleBarButtonText:e({id:"group_list_modal.addGroupButton",defaultMessage:"Add Groups"}),titleBarButtonOnClick:this.titleButtonOnClick})}}])&&rI(n.prototype,r),a&&rI(n,a),t}();sI(lI,"propTypes",{channel:v.a.object.isRequired,actions:v.a.shape({getGroupsAssociatedToChannel:v.a.func.isRequired,unlinkGroupSyncable:v.a.func.isRequired,closeModal:v.a.func.isRequired,openModal:v.a.func.isRequired}).isRequired}),sI(lI,"contextTypes",{intl:Y.i});var cI=Object(r.connect)(function(e,t){return{channel:e.entities.channels.channels[t.channelID]}},function(e){return{actions:Object(a.bindActionCreators)({getGroupsAssociatedToChannel:GO.getGroupsAssociatedToChannel,closeModal:U.a,openModal:U.b,unlinkGroupSyncable:GO.unlinkGroupSyncable},e)}})(lI);function uI(e){return(uI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dI(e){return(dI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fI(e,t){return(fI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bI=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=dI(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==uI(a)&&"function"!=typeof a?mI(r):a,hI(mI(n),"handleLeave",function(e){e.preventDefault();var t=n.props,r=t.channel,a=t.actions.leaveChannel;r.type===P.i.PRIVATE_CHANNEL?Object(C.m)(r):a(r.id)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fI(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.channel,n=e.isDefault,r=e.id;return E.a.createElement(Dp.a,{id:r,show:!n&&t.type!==P.i.DM_CHANNEL&&t.type!==P.i.GM_CHANNEL,onClick:this.handleLeave,text:Object(j.ab)("channel_header.leave","Leave Channel")})}}])&&pI(n.prototype,r),a&&pI(n,a),t}();hI(bI,"propTypes",{channel:v.a.object.isRequired,isDefault:v.a.bool.isRequired,id:v.a.string,actions:v.a.shape({leaveChannel:v.a.func.isRequired}).isRequired});var yI=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({leaveChannel:Ea.e},e)}})(bI);function gI(e){return(gI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _I(e){return(_I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wI(e,t){return(wI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function OI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SI=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=_I(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==gI(a)&&"function"!=typeof a?EI(r):a,OI(EI(n),"handleClose",function(){n.props.actions.goToLastViewedChannel()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wI(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement(Dp.a,{show:this.props.isArchived,onClick:this.handleClose,text:Object(j.ab)("center_panel.archived.closeChannel","Close Channel")})}}])&&vI(n.prototype,r),a&&vI(n,a),t}();OI(SI,"propTypes",{isArchived:v.a.bool.isRequired,actions:v.a.shape({goToLastViewedChannel:v.a.func.isRequired}).isRequired});var CI=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({goToLastViewedChannel:Ea.c},e)}})(SI);function PI(e){return(PI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jI(e){return(jI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MI(e,t){return(MI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RI=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=jI(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==PI(a)&&"function"!=typeof a?kI(r):a,NI(kI(n),"handleClick",function(){var e=n.props,t=e.user,r=e.channel,a=e.isMuted;(0,e.actions.updateChannelNotifyProps)(t.id,r.id,{mark_unread:a?P.s.ALL:P.s.MENTION})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MI(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t=this.props,n=t.channel,r=t.id;return e=t.isMuted?Object(j.ab)("channel_header.unmute","Unmute Channel"):Object(j.ab)("channel_header.mute","Mute Channel"),E.a.createElement(Dp.a,{id:r,show:n.type!==P.i.DM_CHANNEL,onClick:this.handleClick,text:e})}}])&&TI(n.prototype,r),a&&TI(n,a),t}();NI(RI,"propTypes",{user:v.a.object.isRequired,channel:v.a.object.isRequired,isMuted:v.a.bool.isRequired,id:v.a.string,actions:v.a.shape({updateChannelNotifyProps:v.a.func.isRequired}).isRequired});var II=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({updateChannelNotifyProps:s.updateChannelNotifyProps},e)}})(RI);function AI(e){return(AI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LI(e){return(LI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UI(e,t){return(UI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HI=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=LI(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==AI(a)&&"function"!=typeof a?DI(r):a,qI(DI(n),"toggleFavoriteChannel",function(e){var t=n.props,r=t.isFavorite,a=t.actions,o=a.favoriteChannel,i=a.unfavoriteChannel;return r?i(e):o(e)}),qI(DI(n),"handleClick",function(e){e.preventDefault(),n.toggleFavoriteChannel(n.props.channel.id)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UI(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e;return e=this.props.isFavorite?Object(j.ab)("channelHeader.removeFromFavorites","Remove from Favorites"):Object(j.ab)("channelHeader.addToFavorites","Add to Favorites"),E.a.createElement(Dp.a,{show:this.props.show,onClick:this.handleClick,text:e})}}])&&xI(n.prototype,r),a&&xI(n,a),t}();qI(HI,"propTypes",{show:v.a.bool.isRequired,channel:v.a.object.isRequired,isFavorite:v.a.bool.isRequired,actions:v.a.shape({favoriteChannel:v.a.func.isRequired,unfavoriteChannel:v.a.func.isRequired}).isRequired}),qI(HI,"defaultProps",{show:!0});var FI=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({favoriteChannel:s.favoriteChannel,unfavoriteChannel:s.unfavoriteChannel},e)}})(HI);function BI(e){return(BI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VI(e){return(VI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zI(e,t){return(zI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YI=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=VI(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==BI(a)&&"function"!=typeof a?WI(r):a,KI(WI(n),"handleClick",function(e){e.preventDefault();var t=n.props,r=t.channel,a=t.hasPinnedPosts,o=t.actions,i=o.closeRightHandSide,s=o.showPinnedPosts;a?i():s(r.id)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zI(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement(Dp.a,{show:this.props.show,onClick:this.handleClick,text:Object(j.ab)("navbar.viewPinnedPosts","View Pinned Posts")})}}])&&GI(n.prototype,r),a&&GI(n,a),t}();KI(YI,"propTypes",{show:v.a.bool,channel:v.a.object.isRequired,hasPinnedPosts:v.a.bool.isRequired,actions:v.a.shape({closeRightHandSide:v.a.func.isRequired,showPinnedPosts:v.a.func.isRequired}).isRequired});var QI=Object(r.connect)(function(e){return{hasPinnedPosts:Object(Ml.k)(e)===P.A.PIN}},function(e){return{actions:Object(a.bindActionCreators)({closeRightHandSide:kl.b,showPinnedPosts:kl.l},e)}})(YI);function JI(e){return(JI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XI(e,t){return!t||"object"!==JI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $I(e){return($I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eA(e,t){return(eA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tA=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),XI(this,$I(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eA(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t=this.props,n=t.user,r=t.channel,a=t.isDefault,o=t.isFavorite,i=t.isMuted,s=t.isReadonly,l=t.isArchived,c=t.isMobile,u=t.penultimateViewedChannelName,p=r.type===P.i.PRIVATE_CHANNEL,d=!0===r.group_constrained,m=p?L.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS:L.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS,f=p?L.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:L.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES,h=p?L.Permissions.DELETE_PRIVATE_CHANNEL:L.Permissions.DELETE_PUBLIC_CHANNEL;return c&&(e=E.a.createElement("li",{className:"MenuGroup mobile-menu-divider"},E.a.createElement("hr",null))),E.a.createElement(E.a.Fragment,null,E.a.createElement(LO.a,{divider:e},E.a.createElement(BO.a,{id:"channelViewInfo",show:r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL,modalId:P.r.CHANNEL_INFO,dialogType:fR,dialogProps:{channel:r},text:Object(j.ab)("navbar.viewInfo","View Info")}),E.a.createElement(FI,{id:"channelToggleFavorite",show:c,channel:r,isFavorite:o}),E.a.createElement(QI,{id:"channelViewPinnedPosts",show:c,channel:r}),E.a.createElement(BO.a,{id:"channelNotificationPreferences",show:r.type!==P.i.DM_CHANNEL&&!l,modalId:P.r.CHANNEL_NOTIFICATIONS,dialogType:oR,dialogProps:{channel:r,currentUser:n},text:Object(j.ab)("navbar.preferences","Notification Preferences")}),E.a.createElement(II,{id:"channelToggleMuteChannel",user:n,channel:r,isMuted:i,isArchived:l})),E.a.createElement(LO.a,{divider:e},E.a.createElement(Lp,{channelId:r.id,teamId:r.team_id,permissions:[m]},E.a.createElement(BO.a,{id:"channelAddMembers",show:r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL&&!l&&!a&&!d,modalId:P.r.CHANNEL_INVITE,dialogType:fM,dialogProps:{channel:r},text:Object(j.ab)("navbar.addMembers","Add Members")}),E.a.createElement(BO.a,{id:"channelAddMembers",show:r.type===P.i.GM_CHANNEL&&!l&&!d,modalId:P.r.CREATE_DM_CHANNEL,dialogType:tP,dialogProps:{isExistingChannel:!0},text:Object(j.ab)("navbar.addMembers","Add Members")})),E.a.createElement(BO.a,{id:"channelViewMembers",show:r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL&&(l||a),modalId:P.r.CHANNEL_MEMBERS,dialogType:WM,dialogProps:{channel:r},text:Object(j.ab)("channel_header.viewMembers","View Members")}),E.a.createElement(Lp,{channelId:r.id,teamId:r.team_id,permissions:[m]},E.a.createElement(BO.a,{id:"channelAddGroups",show:r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL&&!l&&!a&&d,modalId:P.r.ADD_GROUPS_TO_CHANNEL,dialogType:$R.a,dialogProps:{},text:Object(j.ab)("navbar.addGroups","Add Groups")}),E.a.createElement(BO.a,{id:"channelManageGroups",show:r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL&&!l&&!a&&d,modalId:P.r.MANAGE_CHANNEL_GROUPS,dialogType:cI,dialogProps:{channelID:r.id},text:Object(j.ab)("navbar_dropdown.manageGroups","Manage Groups")}),E.a.createElement(BO.a,{id:"channelManageMembers",show:r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL&&!l&&!a,modalId:P.r.CHANNEL_MEMBERS,dialogType:WM,dialogProps:{channel:r},text:Object(j.ab)("channel_header.manageMembers","Manage Members")})),E.a.createElement(Lp,{channelId:r.id,teamId:r.team_id,permissions:[m],invert:!0},E.a.createElement(BO.a,{id:"channelViewMembers",show:r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL&&!l&&!a,modalId:P.r.CHANNEL_MEMBERS,dialogType:WM,dialogProps:{channel:r},text:Object(j.ab)("channel_header.viewMembers","View Members")}))),E.a.createElement(LO.a,{divider:e},E.a.createElement(BO.a,{id:"channelEditHeader",show:!(r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL||l||s),modalId:P.r.EDIT_CHANNEL_HEADER,dialogType:rM,dialogProps:{channel:r},text:Object(j.ab)("channel_header.setHeader","Edit Channel Header")}),E.a.createElement(Lp,{channelId:r.id,teamId:r.team_id,permissions:[f]},E.a.createElement(BO.a,{id:"channelEditHeader",show:r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL&&!l&&!s,modalId:P.r.EDIT_CHANNEL_HEADER,dialogType:rM,dialogProps:{channel:r},text:Object(j.ab)("channel_header.setHeader","Edit Channel Header")}),E.a.createElement(BO.a,{id:"channelEditPurpose",show:!l&&!s&&r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL,modalId:P.r.EDIT_CHANNEL_PURPOSE,dialogType:SR,dialogProps:{channel:r},text:Object(j.ab)("channel_header.setPurpose","Edit Channel Purpose")}),E.a.createElement(BO.a,{id:"channelRename",show:!l&&r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL,modalId:P.r.RENAME_CHANNEL,dialogType:DR,dialogProps:{channel:r},text:Object(j.ab)("channel_header.rename","Rename Channel")})),E.a.createElement(OE.a,{teamId:r.team_id,permissions:[L.Permissions.MANAGE_TEAM]},E.a.createElement(BO.a,{id:"channelCovertToPrivate",show:!l&&!a&&r.type===P.i.OPEN_CHANNEL,modalId:P.r.CONVERT_CHANNEL,dialogType:WR,dialogProps:{channelId:r.id,channelDisplayName:r.display_name},text:Object(j.ab)("channel_header.convert","Convert to Private Channel")})),E.a.createElement(Lp,{channelId:r.id,teamId:r.team_id,permissions:[h]},E.a.createElement(BO.a,{id:"channelArchiveChannel",show:!l&&!a&&r.type!==P.i.DM_CHANNEL&&r.type!==P.i.GM_CHANNEL,modalId:P.r.DELETE_CHANNEL,dialogType:XR,dialogProps:{channel:r,penultimateViewedChannelName:u},text:Object(j.ab)("channel_header.delete","Archive Channel")}))),E.a.createElement(LO.a,{divider:e},c&&E.a.createElement(UN,{channel:r,isDropdown:!0}),E.a.createElement(yI,{id:"channelLeaveChannel",channel:r,isDefault:a}),E.a.createElement(CI,{id:"channelCloseChannel",isArchived:l})))}}])&&ZI(n.prototype,r),a&&ZI(n,a),t}();function nA(e){return(nA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aA(e,t){return!t||"object"!==nA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oA(e){return(oA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iA(e,t){return(iA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(tA,"propTypes",{user:v.a.object.isRequired,channel:v.a.object.isRequired,isDefault:v.a.bool.isRequired,isFavorite:v.a.bool.isRequired,isReadonly:v.a.bool.isRequired,isMuted:v.a.bool.isRequired,isArchived:v.a.bool.isRequired,isMobile:v.a.bool.isRequired,penultimateViewedChannelName:v.a.string.isRequired});var sA=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),aA(this,oA(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iA(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement(W_.a,{in:this.props.show,classNames:"mobile-channel-header-dropdown",enter:!0,exit:!0,mountOnEnter:!0,unmountOnExit:!0,timeout:{enter:350,exit:350}},this.props.children)}}])&&rA(n.prototype,r),a&&rA(n,a),t}();function lA(e){return(lA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uA(e){return(uA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dA(e,t){return(dA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(sA,"propTypes",{children:v.a.node,show:v.a.bool.isRequired});var fA=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=uA(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==lA(a)&&"function"!=typeof a?pA(r):a,mA(pA(n),"getChannelTitle",function(){var e=n.props,t=e.user,r=e.channel,a=e.teammateId;if(r.type===P.i.DM_CHANNEL){var o=Object(j.w)(a);return t.id===a?E.a.createElement(Y.c,{id:"channel_header.directchannel.you",defaultMessage:"{displayname} (you)",values:{displayname:o}}):o}return r.display_name}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dA(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t=this.props,n=t.teammateIsBot,r=t.teammateStatus;return n||(e=E.a.createElement(UT.a,{status:r})),E.a.createElement(du.a,{animationComponent:sA},E.a.createElement("a",null,E.a.createElement("span",{className:"heading"},e,this.getChannelTitle()),E.a.createElement(Y.c,{id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"},function(e){return E.a.createElement("span",{className:"fa fa-angle-down header-dropdown__icon",title:e})})),E.a.createElement(Y.c,{id:"channel_header.menuAriaLabel",defaultMessage:"Channel Menu"},function(e){return E.a.createElement(mu.a,{ariaLabel:e},E.a.createElement(gA,{isMobile:!0}),E.a.createElement("div",{className:"close visible-xs-block"},""))}))}}])&&cA(n.prototype,r),a&&cA(n,a),t}();mA(fA,"propTypes",{user:v.a.object.isRequired,channel:v.a.object.isRequired,teammateId:v.a.string,teammateIsBot:v.a.bool,teammateStatus:v.a.string});var hA=Object(Kl.a)(m.getCurrentChannel,function(e){return e.type!==P.i.DM_CHANNEL?null:j.F(e)}),bA=Object(Kl.a)(p.getUserStatuses,hA,function(e,t){return t?e[t]:null}),yA=MN,gA=Object(r.connect)(function(e){return{user:Object(p.getCurrentUser)(e),channel:Object(m.getCurrentChannel)(e),isDefault:Object(m.isCurrentChannelDefault)(e),isFavorite:Object(m.isCurrentChannelFavorite)(e),isMuted:Object(m.isCurrentChannelMuted)(e),isReadonly:Object(m.isCurrentChannelReadOnly)(e),isArchived:Object(m.isCurrentChannelArchived)(e),penultimateViewedChannelName:Object(Bk.c)(e)||Object(m.getRedirectChannelNameForTeam)(e,Object(d.getCurrentTeamId)(e))}})(tA),vA=Object(r.connect)(function(e){var t=Object(p.getCurrentUser)(e),n=Object(m.getCurrentChannel)(e),r=hA(e),a=!1;if(r){var o=Object(p.getUser)(e,r);a=o&&o.is_bot}return{user:t,channel:n,teammateId:r,teammateIsBot:a,teammateStatus:bA(e)}})(fA),_A=n(1615),EA=n(2357);function wA(e){return(wA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CA(e,t,n){return t&&SA(e.prototype,t),n&&SA(e,n),e}function PA(e,t){return!t||"object"!==wA(t)&&"function"!=typeof t?jA(e):t}function TA(e){return(TA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kA(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MA(e,t)}function MA(e,t){return(MA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RA=function(e){function t(){var e,n;OA(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return NA(jA(n=PA(this,(e=TA(t)).call.apply(e,[this].concat(a)))),"handleRootClose",function(){n.props.onClose()}),n}return kA(t,E.a.PureComponent),CA(t,[{key:"render",value:function(){var e=this.props,t=e.open,n=e.rootCloseEvent,r=e.children;return E.a.createElement(EA.a,{disabled:!t,onRootClose:this.handleRootClose,event:n},E.a.createElement("ul",{role:"menu",className:"dropdown-menu channel-header_plugin-dropdown"},r))}}]),t}();NA(RA,"propTypes",{open:v.a.bool,children:v.a.node,onClose:v.a.func.isRequired,rootCloseEvent:v.a.oneOf(["click","mousedown"])});var IA=function(e){function t(){var e,n;OA(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return NA(jA(n=PA(this,(e=TA(t)).call.apply(e,[this].concat(a)))),"handleClick",function(e){n.props.onClick(e)}),n}return kA(t,E.a.PureComponent),CA(t,[{key:"render",value:function(){var e=this.props.children,t="";return this.props.dropdownOpen&&(t=" active"),E.a.createElement("button",{id:"pluginChannelHeaderButtonDropdown",className:"channel-header__icon style--none"+t,type:"button",onClick:this.handleClick},e)}}]),t}();NA(IA,"propTypes",{children:v.a.element,dropdownOpen:v.a.bool,onClick:v.a.func});var AA=function(e){function t(e){var n;return OA(this,t),NA(jA(n=PA(this,TA(t).call(this,e))),"toggleDropdown",function(e){n.setState({dropdownOpen:e})}),NA(jA(n),"onClose",function(){n.toggleDropdown(!1)}),NA(jA(n),"fireActionAndClose",function(e){e(n.props.channel,n.props.channelMember),n.onClose()}),NA(jA(n),"createButton",function(e){return E.a.createElement(Gg,{buttonClass:"channel-header__icon style--none",iconComponent:e.icon,onClick:function(){return e.action(n.props.channel,n.props.channelMember)},buttonId:e.id,tooltipKey:"plugin",tooltipText:e.tooltipText?e.tooltipText:e.dropdownText})}),NA(jA(n),"createDropdown",function(e){var t=e.map(function(e){return E.a.createElement("li",{key:"channelHeaderPlug"+e.id},E.a.createElement("a",{href:"#",className:"d-flex align-items-center",onClick:function(){return n.fireActionAndClose(e.action)}},E.a.createElement("span",{className:"d-flex align-items-center overflow--ellipsis"},e.icon),E.a.createElement("span",null,e.dropdownText)))});return E.a.createElement("div",{className:"flex-child"},E.a.createElement(_A.a,{ref:"dropdown",id:"channelHeaderPlugDropdown",onToggle:n.toggleDropdown,onSelect:n.onSelect,open:n.state.dropdownOpen},E.a.createElement(IA,{dropdownOpen:n.state.dropdownOpen,bsRole:"toggle"},E.a.createElement("span",{className:"fa fa-ellipsis-h icon__ellipsis"})),E.a.createElement(RA,{bsRole:"menu",open:n.state.dropdownOpen,onClose:n.onClose},t)))}),n.state={dropdownOpen:!1},n}return kA(t,E.a.PureComponent),CA(t,[{key:"render",value:function(){var e=this.props.components||[];return 0===e.length?null:1===e.length?this.createButton(e[0]):this.createDropdown(e)}}]),t}();NA(AA,"propTypes",{components:v.a.array,channel:v.a.object.isRequired,channelMember:v.a.object.isRequired,theme:v.a.object.isRequired});var xA=Object(r.connect)(function(e){return{components:e.plugins.components.ChannelHeaderButton,theme:Object(c.getTheme)(e)}})(AA);function LA(e){return(LA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){BA(e,t,n[t])})}return e}function UA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qA(e){return(qA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FA(e,t){return(FA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GA={singleline:!0,mentionHighlight:!1,atMentions:!0},VA={singleline:!1,mentionHighlight:!1,atMentions:!0},WA=1140,zA=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=qA(t).call(this,e),n=!a||"object"!==LA(a)&&"function"!=typeof a?HA(r):a,BA(HA(n),"handleResize",function(){var e=j.mb();n.setState({showSearchBar:e>WA})}),BA(HA(n),"handleClose",function(){n.props.actions.goToLastViewedChannel()}),BA(HA(n),"toggleFavorite",function(e){e.stopPropagation(),n.props.isFavorite?n.props.actions.unfavoriteChannel(n.props.channel.id):n.props.actions.favoriteChannel(n.props.channel.id)}),BA(HA(n),"unmute",function(){var e=n.props,t=e.actions,r=e.channel,a=e.channelMember,o=e.currentUser;if(a&&o&&r){var i={mark_unread:P.s.ALL};t.updateChannelNotifyProps(o.id,r.id,i)}}),BA(HA(n),"mute",function(){var e=n.props,t=e.actions,r=e.channel,a=e.channelMember,o=e.currentUser;if(a&&o&&r){var i={mark_unread:P.s.MENTION};t.updateChannelNotifyProps(o.id,r.id,i)}}),BA(HA(n),"searchMentions",function(e){e.preventDefault(),n.props.rhsState===P.A.MENTION?n.props.actions.closeRightHandSide():n.props.actions.showMentions()}),BA(HA(n),"showPinnedPosts",function(e){e.preventDefault(),n.props.rhsState===P.A.PIN?n.props.actions.closeRightHandSide():n.props.actions.showPinnedPosts()}),BA(HA(n),"getFlagged",function(e){e.preventDefault(),n.props.rhsState===P.A.FLAG?n.props.actions.closeRightHandSide():n.props.actions.showFlaggedPosts()}),BA(HA(n),"searchButtonClick",function(e){e.preventDefault(),n.props.actions.updateRhsState(P.A.SEARCH)}),BA(HA(n),"handleShortcut",function(e){j.e(e)&&e.shiftKey&&j.S(e,P.i.KeyCodes.M)&&(e.preventDefault(),n.searchMentions(e))}),BA(HA(n),"handleOnMouseOver",function(){n.refs.headerOverlay&&n.refs.headerOverlay.show()}),BA(HA(n),"handleOnMouseOut",function(){n.refs.headerOverlay&&n.refs.headerOverlay.hide()}),BA(HA(n),"handleQuickSwitchKeyPress",function(e){j.e(e)&&!e.shiftKey&&j.S(e,P.i.KeyCodes.K)&&(e.altKey||(e.preventDefault(),n.toggleQuickSwitchModal()))}),BA(HA(n),"toggleQuickSwitchModal",function(){n.props.isQuickSwitcherOpen?n.props.actions.closeModal(P.r.QUICK_SWITCH):n.props.actions.openModal({modalId:P.r.QUICK_SWITCH,dialogType:JP})}),BA(HA(n),"removeTooltipLink",function(){n.toggleFavoriteRef.current.removeAttribute("aria-describedby")}),BA(HA(n),"showEditChannelHeaderModal",function(){n.refs.headerOverlay&&n.refs.headerOverlay.hide();var e=n.props,t=e.actions,r=e.channel,a={modalId:P.r.EDIT_CHANNEL_HEADER,dialogType:rM,dialogProps:{channel:r}};t.openModal(a)}),n.toggleFavoriteRef=E.a.createRef();var o=j.mb()>WA;return n.state={showSearchBar:o},n.getHeaderMarkdownOptions=Object(lE.memoizeResult)(function(e){return DA({},GA,{channelNamesMap:e})}),n.getPopoverMarkdownOptions=Object(lE.memoizeResult)(function(e){return DA({},VA,{channelNamesMap:e})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FA(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.props.actions.getCustomEmojisInText(this.props.channel?this.props.channel.header:""),document.addEventListener("keydown",this.handleShortcut),document.addEventListener("keydown",this.handleQuickSwitchKeyPress),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleShortcut),document.removeEventListener("keydown",this.handleQuickSwitchKeyPress),window.removeEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){var t=this.props.channel?this.props.channel.header:"";t!==(e.channel?e.channel.header:"")&&this.props.actions.getCustomEmojisInText(t)}},{key:"render",value:function(){var e=this.props,t=e.teamId,n=e.currentUser,r=e.channel,a=e.channelMember,o=e.isMuted,i=e.isReadOnly,s=e.isFavorite,l=e.dmUser,c=e.rhsState,u=this.context.intl.formatMessage,p=j.ab("accessibility.sections.channelHeader","channel header region"),d=0!==r.delete_at;if(j.O(r)||j.O(a)||j.O(n)||!l&&r.type===P.i.DM_CHANNEL)return E.a.createElement("div",{className:"channel-header"});var m=r.props&&r.props.channel_mentions,f=r.display_name,h=null;d&&(h=E.a.createElement(Dv.a,{className:"icon icon__archive icon channel-header-archived-icon svg-text-color"}));var b,y,g,v,_=r.type===P.i.DM_CHANNEL,w=r.type===P.i.GM_CHANNEL,O=r.type===P.i.PRIVATE_CHANNEL;if(_){var S=l.id;f=n.id===S?E.a.createElement(Y.c,{id:"channel_header.directchannel.you",defaultMessage:"{displayname} (you) ",values:{displayname:j.w(S)}}):j.w(S)+" "}_||(b=E.a.createElement(gN,{channel:r})),!_||l.delete_at||l.is_bot||(y=E.a.createElement(UT.a,{type:"avatar",status:r.status}),g=E.a.createElement("span",{className:"header-status__text"},E.a.createElement(Y.c,{id:"status_dropdown.set_".concat(r.status),defaultMessage:j.kb(r.status)})));var C,T=_&&l.is_bot?l.bot_description:r.header;if(T){var k=E.a.createElement(Gy.a,{id:"header-popover",bStyle:"info",bSize:"large",placement:"bottom",className:"channel-header__popover",onMouseOver:this.handleOnMouseOver,onMouseOut:this.handleOnMouseOut},E.a.createElement(Oa.a,{message:T,options:this.getPopoverMarkdownOptions(m)}));v=E.a.createElement(_c.a,{trigger:"click",placement:"bottom",rootClose:!0,overlay:k,ref:"headerOverlay"},E.a.createElement("div",{id:"channelHeaderDescription",className:"channel-header__description"},y,g,E.a.createElement("span",{className:"header-description__text",onClick:j.G},E.a.createElement(Oa.a,{message:T,options:this.getHeaderMarkdownOptions(m)}))))}else{var M;i||d||(_||w?_&&l.is_bot||(M=E.a.createElement("button",{className:"style--none",onClick:this.showEditChannelHeaderModal},E.a.createElement(Y.c,{id:"channel_header.addChannelHeader",defaultMessage:"Add a channel description"}))):M=E.a.createElement(Lp,{channelId:r.id,teamId:t,permissions:[O?L.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:L.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},E.a.createElement("button",{className:"style--none",onClick:this.showEditChannelHeaderModal},E.a.createElement(Y.c,{id:"channel_header.addChannelHeader",defaultMessage:"Add a channel description"})))),v=E.a.createElement("div",{id:"channelHeaderDescription",className:"channel-header__description light"},y,g,M)}var N=null,R="";d||(s?(C=E.a.createElement(Ec.a,{id:"favoriteTooltip"},E.a.createElement(Y.c,{id:"channelHeader.removeFromFavorites",defaultMessage:"Remove from Favorites"})),R=u({id:"channelHeader.removeFromFavorites",defaultMessage:"Remove from Favorites"}).toLowerCase()):(C=E.a.createElement(Ec.a,{id:"favoriteTooltip"},E.a.createElement(Y.c,{id:"channelHeader.addToFavorites",defaultMessage:"Add to Favorites"})),R=u({id:"channelHeader.addToFavorites",defaultMessage:"Add to Favorites"}).toLowerCase()),N=E.a.createElement(_c.a,{delayShow:P.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:C,onEntering:this.removeTooltipLink},E.a.createElement("button",{id:"toggleFavorite",ref:this.toggleFavoriteRef,onClick:this.toggleFavorite,className:"style--none color--link channel-header__favorites "+(this.props.isFavorite?"active":"inactive"),"aria-label":R},E.a.createElement("i",{className:"icon fa "+(this.props.isFavorite?"fa-star":"fa-star-o")}))));var I,A=E.a.createElement(Ec.a,{id:"channelMutedTooltip"},E.a.createElement(Y.c,{id:"channelHeader.unmute",defaultMessage:"Unmute"}));o&&(I=E.a.createElement(_c.a,{delayShow:P.i.OVERLAY_TIME_DELAY,placement:"bottom",overlay:A},E.a.createElement("button",{id:"toggleMute",onClick:this.unmute,className:"style--none color--link channel-header__mute inactive","aria-label":u({id:"generic_icons.muted",defaultMessage:"Muted Icon"})},E.a.createElement("i",{className:"icon fa fa-bell-slash-o"}))));var x="channel-header__icon";c===P.A.PIN&&(x+=" active");var D=E.a.createElement(E.a.Fragment,null,N,E.a.createElement(du.a,null,E.a.createElement("div",{id:"channelHeaderDropdownButton",className:"channel-header__top"},E.a.createElement("button",{className:"channel-header__trigger style--none","aria-label":u({id:"channel_header.menuAriaLabel",defaultMessage:"Channel Menu"}).toLowerCase()},E.a.createElement("strong",{role:"heading","aria-level":"2",id:"channelHeaderTitle",className:"heading"},E.a.createElement("span",null,h,f)),E.a.createElement("span",{id:"channelHeaderDropdownIcon",className:"fa fa-angle-down header-dropdown__icon","aria-label":u({id:"generic_icons.dropdown",defaultMessage:"Dropdown Icon"}).toLowerCase()}))),E.a.createElement(yA,null)));return _&&l.is_bot&&(D=E.a.createElement("div",{id:"channelHeaderDropdownButton",className:"channel-header__top"},N,E.a.createElement("strong",{role:"heading","aria-level":"2",id:"channelHeaderTitle",className:"heading"},E.a.createElement("span",null,h,f)),E.a.createElement(ko.a,{className:"badge-popoverlist"}))),E.a.createElement("div",{id:"channel-header","aria-label":p,role:"application",tabIndex:"-1","data-channelid":"".concat(r.id),className:"channel-header alt a11y__region","data-a11y-sort-order":"7"},E.a.createElement("div",{className:"flex-parent"},E.a.createElement("div",{className:"flex-child"},E.a.createElement("div",{id:"channelHeaderInfo",className:"channel-header__info"},E.a.createElement("div",{className:"channel-header__title dropdown"},E.a.createElement("div",null,D),I),v)),E.a.createElement("div",{className:"flex-child"},b),E.a.createElement(xA,{channel:r,channelMember:a}),E.a.createElement(Gg,{iconComponent:E.a.createElement(SN,{className:"icon icon__pin","aria-hidden":"true"}),ariaLabel:!0,buttonClass:"style--none "+x,buttonId:"channelHeaderPinButton",onClick:this.showPinnedPosts,tooltipKey:"pinnedPosts"}),this.state.showSearchBar?E.a.createElement("div",{className:"flex-child search-bar__container"},E.a.createElement(mv,{showMentionFlagBtns:!1,isFocus:j.U()})):E.a.createElement(Gg,{iconComponent:E.a.createElement(nv.a,{className:"icon icon__search icon--stroke","aria-hidden":"true"}),buttonId:"channelHeaderSearchButton",onClick:this.searchButtonClick,tooltipKey:"search"}),E.a.createElement(Gg,{iconComponent:E.a.createElement(tv,{className:"icon icon__mentions","aria-hidden":"true"}),ariaLabel:!0,buttonId:"channelHeaderMentionButton",onClick:this.searchMentions,tooltipKey:"recentMentions"}),E.a.createElement(Gg,{iconComponent:E.a.createElement(Um,{className:"icon icon__flag"}),ariaLabel:!0,buttonId:"channelHeaderFlagButton",onClick:this.getFlagged,tooltipKey:"flaggedPosts"})))}}])&&UA(n.prototype,r),a&&UA(n,a),t}();BA(zA,"propTypes",{teamId:v.a.string.isRequired,currentUser:v.a.object.isRequired,channel:v.a.object,channelMember:v.a.object,dmUser:v.a.object,isFavorite:v.a.bool,isReadOnly:v.a.bool,isMuted:v.a.bool,rhsState:v.a.oneOf(Object.values(P.A)),isQuickSwitcherOpen:v.a.bool,actions:v.a.shape({favoriteChannel:v.a.func.isRequired,unfavoriteChannel:v.a.func.isRequired,showFlaggedPosts:v.a.func.isRequired,showPinnedPosts:v.a.func.isRequired,showMentions:v.a.func.isRequired,closeRightHandSide:v.a.func.isRequired,updateRhsState:v.a.func.isRequired,getCustomEmojisInText:v.a.func.isRequired,updateChannelNotifyProps:v.a.func.isRequired,goToLastViewedChannel:v.a.func.isRequired,openModal:v.a.func.isRequired,closeModal:v.a.func.isRequired}).isRequired}),BA(zA,"contextTypes",{intl:Y.i.isRequired});var KA=Object(o.f)(Object(r.connect)(function(e){var t,n=Object(m.getCurrentChannel)(e)||{},r=Object(p.getCurrentUser)(e);if(n&&n.type===L.General.DM_CHANNEL){var a=Object(zo.getUserIdFromChannelName)(r.id,n.name);t=Object(p.getUser)(e,a)}return{teamId:Object(d.getCurrentTeamId)(e),channel:n,channelMember:Object(m.getMyCurrentChannelMembership)(e),currentUser:r,dmUser:t,rhsState:Object(Ml.k)(e),isFavorite:Object(m.isCurrentChannelFavorite)(e),isReadOnly:Object(m.isCurrentChannelReadOnly)(e),isMuted:Object(m.isCurrentChannelMuted)(e),isQuickSwitcherOpen:Object(RE.a)(e,P.r.QUICK_SWITCH)}},function(e){return{actions:Object(a.bindActionCreators)({favoriteChannel:s.favoriteChannel,unfavoriteChannel:s.unfavoriteChannel,showFlaggedPosts:kl.j,showPinnedPosts:kl.l,showMentions:kl.k,closeRightHandSide:kl.b,updateRhsState:kl.q,getCustomEmojisInText:rr.getCustomEmojisInText,updateChannelNotifyProps:s.updateChannelNotifyProps,goToLastViewedChannel:Ea.c,openModal:U.b,closeModal:U.a},e)}})(zA)),YA=(n(2079),n(426)),QA=n.n(YA);function JA(e){return(JA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XA(e,t){return!t||"object"!==JA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $A(e){return($A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ex(e,t){return(ex=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=XA(this,$A(t).call(this,e))).state={visible:!1,rendered:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ex(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;e.newMessages>0&&!e.atBottom?this.setState({rendered:!0},function(){t.setState({visible:!0})}):this.setState({visible:!1})}},{key:"render",value:function(){var e="new-messages__button";return this.state.visible&&(e+=" visible"),this.state.rendered||(e+=" disabled"),E.a.createElement("div",{className:e,onTransitionEnd:this.setRendered.bind(this),ref:"indicator"},E.a.createElement("div",{onClick:this.props.onClick},E.a.createElement(Y.c,{id:"posts_view.newMsgBelow",defaultMessage:"New {count, plural, one {message} other {messages}}",values:{count:this.props.newMessages}}),E.a.createElement(kT,{className:"icon icon__unread"})))}},{key:"setRendered",value:function(){this.setState({rendered:this.state.visible})}}])&&ZA(n.prototype,r),a&&ZA(n,a),t}();tx(nx,"propTypes",{atBottom:v.a.bool,onClick:v.a.func.isRequired,newMessages:v.a.number}),tx(nx,"defaultProps",{newMessages:0});var rx=Object(r.connect)(function(){var e=Object(Kl.a)($a.getAllPosts,p.getCurrentUserId,function(e,t){return t},function(e,t,n){return n},function(e,t,n,r){return n?n.map(function(t){return e[t]}).filter(function(e){return e&&e.user_id!==t&&e.state!==L.Posts.POST_DELETED&&e.create_at>r}).length:0}),t=Object(vp.makePreparePostIdsForPostList)();return function(n,r){var a=Object($a.getPostIdsInChannel)(n,r.channelId);return a&&(a=t(n,{postIds:a,lastViewedAt:r.lastViewedBottom})),{newMessages:e(n,a,r.lastViewedBottom)}}})(nx),ax=n(149);function ox(e){return(ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ix(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sx(e,t){return!t||"object"!==ox(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lx(e){return(lx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cx(e,t){return(cx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ux=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sx(this,lx(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cx(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){if(!this.props.fileInfos||0===this.props.fileInfos.length)return null;var e=null;return this.props.fileInfos.length>1&&(e=E.a.createElement(Y.c,{id:"post_body.plusMore",defaultMessage:" plus {count, number} other {count, plural, one {file} other {files}}",values:{count:this.props.fileInfos.length-1}})),E.a.createElement("span",null,this.props.fileInfos[0].name,e)}}])&&ix(n.prototype,r),a&&ix(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ux,"propTypes",{parentPostId:v.a.string.isRequired,fileInfos:v.a.arrayOf(v.a.object)});var px=Object(r.connect)(function(){var e=Object(Gs.makeGetFilesForPost)();return function(t,n){var r;return n.parentPostId&&(r=e(t,n.parentPostId)),{fileInfos:r}}})(ux);function dx(e){return(dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fx(e){return(fx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bx(e,t){return(bx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gx=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=fx(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==dx(a)&&"function"!=typeof a?hx(r):a,yx(hx(n),"handleOnClick",function(){var e=n.props.actions,t=n.makeUsername();e.updateSearchTerms(t),e.showSearchResults()}),yx(hx(n),"makeUsername",function(){var e=n.props.post.props,t=n.props.displayName;return n.props.enablePostUsernameOverride&&e&&"true"===e.from_webhook&&e.override_username&&(t=e.override_username),t}),yx(hx(n),"makeCommentedOnMessage",function(){var e=n.props.post,t="";if(e.message)t=j.gb(e.message);else if(e.file_ids&&e.file_ids.length>0)t=E.a.createElement(px,{parentPostId:e.id});else if(e.props&&e.props.attachments&&e.props.attachments.length>0){var r=e.props.attachments[0],a=r.pretext||r.title||r.text||r.fallback||"";t=j.gb(a)}return t}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bx(e,t)}(t,_["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.makeUsername(),t=this.makeCommentedOnMessage(),n=E.a.createElement("a",{className:"theme",onClick:this.handleOnClick},e);return E.a.createElement("div",{className:"post__link"},E.a.createElement("span",null,E.a.createElement(Y.c,{id:"post_body.commentedOn",defaultMessage:"Commented on {name}'s message: ",values:{name:n}}),E.a.createElement("a",{className:"theme",onClick:this.props.onCommentClick},Object(ax.c)(t))))}}])&&mx(n.prototype,r),a&&mx(n,a),t}();yx(gx,"propTypes",{displayName:v.a.string,enablePostUsernameOverride:v.a.bool,onCommentClick:v.a.func.isRequired,post:v.a.object.isRequired,actions:v.a.shape({showSearchResults:v.a.func.isRequired,updateSearchTerms:v.a.func.isRequired}).isRequired});var vx=Object(r.connect)(function(e,t){var n="";if(t.post){var r=Object(p.getUser)(e,t.post.user_id);n=Object(j.v)(r)}return{displayName:n,enablePostUsernameOverride:"true"===Object(u.getConfig)(e).EnablePostUsernameOverride}},function(e){return{actions:Object(a.bindActionCreators)({showSearchResults:kl.n,updateSearchTerms:kl.r},e)}})(gx);function _x(e){return(_x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ex(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wx(e,t){return!t||"object"!==_x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ox(e){return(Ox=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sx(e,t){return(Sx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Px=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wx(this,Ox(t).call(this,e))).sendingAction=new Vl(function(){var e=n.props.post;e&&e.id===e.pending_post_id&&n.setState({sending:!0})}),n.state={sending:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sx(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.post;e&&e.id===e.pending_post_id&&this.sendingAction.fireAfter(3e3)}},{key:"componentWillUnmount",value:function(){this.sendingAction.cancel()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.post;t&&t.id!==t.pending_post_id&&(this.sendingAction.cancel(),this.setState({sending:!1}))}},{key:"render",value:function(){var e,t,n=this.props.post,r=this.props.parentPost,a="",o=j.V(n);this.props.isFirstReply&&r&&!o&&(e=E.a.createElement(vx,{post:r,onCommentClick:this.props.handleCommentClick})),this.props.post.failed&&(a+=" post--fail",t=E.a.createElement(Rm,{post:this.props.post})),_t.j(this.props.post)&&(a+=" post--edited");var i=null;(n.file_ids&&n.file_ids.length>0||n.filenames&&n.filenames.length>0)&&this.props.post.state!==L.Posts.POST_DELETED&&(i=E.a.createElement(fm,{post:n,compactDisplay:this.props.compactDisplay})),this.state.sending&&(a+=" post-waiting");var s,l=E.a.createElement(E.a.Fragment,null,t,this.state.sending&&E.a.createElement(Od.a,null),E.a.createElement(Sb,{post:this.props.post,compactDisplay:this.props.compactDisplay,hasMention:!0})),c=n.type&&this.props.pluginPostTypes.hasOwnProperty(n.type)||n.props&&n.props.type&&this.props.pluginPostTypes.hasOwnProperty(n.props.type);s=this.props.post.state===L.Posts.POST_DELETED||c?l:E.a.createElement(bb,{post:this.props.post,isEmbedVisible:this.props.isEmbedVisible},l);var u="";this.props.isCommentMention&&(u="mention-comment");var p="";return o&&(p="post--ephemeral"),E.a.createElement("div",null,e,E.a.createElement("div",{id:"".concat(n.id,"_message"),className:"post__body ".concat(u," ").concat(p," ").concat(a)},s,i,E.a.createElement(xf,{post:n,isReadOnly:this.props.isReadOnly})))}}])&&Ex(n.prototype,r),a&&Ex(n,a),t}();Cx(Px,"propTypes",{post:v.a.object.isRequired,parentPost:v.a.object,parentPostUser:v.a.object,handleCommentClick:v.a.func.isRequired,compactDisplay:v.a.bool,isCommentMention:v.a.bool,isFirstReply:v.a.bool,pluginPostTypes:v.a.object,isEmbedVisible:v.a.bool,enablePostUsernameOverride:v.a.bool.isRequired,isReadOnly:v.a.bool}),Cx(Px,"defaultProps",{isReadOnly:!1});var Tx=Object(r.connect)(function(e,t){var n,r;t.post.root_id&&(r=(n=Object($a.getPost)(e,t.post.root_id))?Object(p.getUser)(e,n.user_id):null);var a="true"===Object(u.getConfig)(e).EnablePostUsernameOverride,o=0!==Object(m.getCurrentChannel)(e).delete_at;return{parentPost:n,parentPostUser:r,pluginPostTypes:e.plugins.postTypes,enablePostUsernameOverride:a,isReadOnly:Object(m.isCurrentChannelReadOnly)(e)||o}})(Px);function jx(e){return(jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mx(e){return(Mx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rx(e,t){return(Rx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ix(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ax=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Mx(t).call(this,e),n=!a||"object"!==jx(a)&&"function"!=typeof a?Nx(r):a,Ix(Nx(n),"toggleEmojiPicker",function(){var e=!n.state.showEmojiPicker;n.setState({showEmojiPicker:e}),n.props.handleDropdownOpened(e||n.state.showDotMenu)}),Ix(Nx(n),"removePost",function(){n.props.actions.removePost(n.props.post)}),Ix(Nx(n),"createRemovePostButton",function(){return E.a.createElement("button",{className:"post__remove theme color--link style--none",type:"button",onClick:n.removePost},"")}),Ix(Nx(n),"handleDotMenuOpened",function(e){n.setState({showDotMenu:e}),n.props.handleDropdownOpened(e||n.state.showEmojiPicker)}),Ix(Nx(n),"getDotMenu",function(){return n.refs.dotMenu}),Ix(Nx(n),"buildOptions",function(e,t,r){if(!_t.q(e))return null;var a,o,i,s=n.props,l=s.isMobile,c=s.isReadOnly,u=n.props.hover||n.state.showEmojiPicker||n.state.showDotMenu,p=l?"":"pull-right";return(r||!t&&(l||u||!e.root_id&&Boolean(n.props.replyCount)||n.props.isFirstReply))&&(a=E.a.createElement(Lv,{handleCommentClick:n.props.handleCommentClick,commentCount:n.props.replyCount,postId:e.id,extraClass:p})),!t&&u&&!c&&n.props.enableEmojiPicker&&(o=E.a.createElement(bf,{channelId:e.channel_id,postId:e.id,teamId:n.props.teamId,getDotMenuRef:n.getDotMenu,showEmojiPicker:n.state.showEmojiPicker,toggleEmojiPicker:n.toggleEmojiPicker})),(l||u)&&(i=E.a.createElement(zp,{post:e,commentCount:n.props.replyCount,isFlagged:n.props.isFlagged,handleCommentClick:n.props.handleCommentClick,handleDropdownOpened:n.handleDotMenuOpened,handleAddReactionClick:n.toggleEmojiPicker,isReadOnly:c,enableEmojiPicker:n.props.enableEmojiPicker})),E.a.createElement("div",{ref:"dotMenu",className:"col col__reply"},i,o,a)}),n.state={showEmojiPicker:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rx(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t,n,r,a,o,i=this,s=this.props.post,l=j.V(s),c=_t.m(s),u=_t.e(s);if(!l&&!s.failed&&!c&&(this.props.hover||this.props.isFlagged)&&(e=E.a.createElement(Xm,{postId:s.id,isFlagged:this.props.isFlagged,isEphemeral:l})),s.props&&s.props.card&&(t=E.a.createElement(_c.a,{delayShow:P.Q.OVERLAY_TIME_DELAY,placement:"top",overlay:E.a.createElement(Ec.a,null,E.a.createElement(Y.c,{id:"post_info.info.view_additional_info",defaultMessage:"View additional info"}))},E.a.createElement("button",{className:"card-icon__container icon--show style--none "+(this.props.isCardOpen?"active":""),onClick:function(e){e.preventDefault(),i.props.handleCardClick(i.props.post)}},E.a.createElement(Rb,{className:"icon icon__info","aria-hidden":"true"})))),l?n=E.a.createElement("div",{className:"col col__remove"},this.createRemovePostButton()):s.failed||(n=this.buildOptions(s,c,u)),l&&!this.props.compactDisplay&&s.state!==L.Posts.POST_DELETED&&(r=E.a.createElement("span",{className:"post__visibility"},E.a.createElement(Y.c,{id:"post_info.message.visible",defaultMessage:"(Only visible to you)"}))),s.is_pinned&&(a=E.a.createElement("span",{className:"post__pinned-badge"},E.a.createElement(Y.c,{id:"post_info.pinned",defaultMessage:"Pinned"}))),this.props.hover||this.props.showTimeWithoutHover){var p=!(l||L.Posts.POST_DELETED===s.state||Ql.isPostPendingOrFailed(s)||s.type===L.Posts.POST_TYPES.COMBINED_USER_ACTIVITY);o=E.a.createElement(lf,{isPermalink:p,eventTime:s.create_at,postId:s.id})}return E.a.createElement("div",{className:"post__header--info"},E.a.createElement("div",{className:"col"},o,a,t,e,r),n)}}])&&kx(n.prototype,r),a&&kx(n,a),t}();Ix(Ax,"propTypes",{post:v.a.object.isRequired,teamId:v.a.string,handleCommentClick:v.a.func.isRequired,handleCardClick:v.a.func.isRequired,handleDropdownOpened:v.a.func.isRequired,isFlagged:v.a.bool,isCardOpen:v.a.bool,replyCount:v.a.number,isFirstReply:v.a.bool,isMobile:v.a.bool,compactDisplay:v.a.bool,hover:v.a.bool.isRequired,showTimeWithoutHover:v.a.bool.isRequired,enableEmojiPicker:v.a.bool.isRequired,isReadOnly:v.a.bool,actions:v.a.shape({removePost:v.a.func.isRequired}).isRequired});var xx=Object(r.connect)(function(e,t){var n=Object(Ml.p)(e),r=Object(u.getConfig)(e),a=e.entities.channels.channels[t.post.channel_id],o=a?0!==a.delete_at:null,i="true"===r.EnableEmojiPicker&&!o;return{teamId:Object(d.getCurrentTeamId)(e),isFlagged:null!=Object(c.get)(e,P.z.CATEGORY_FLAGGED_POST,t.post.id,null),isMobile:e.views.channel.mobileView,isCardOpen:n&&n.id===t.post.id,enableEmojiPicker:i,isReadOnly:Object(m.isCurrentChannelReadOnly)(e)||o}},function(e){return{actions:Object(a.bindActionCreators)({removePost:x.removePost},e)}})(Ax);function Lx(e){return(Lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ux(e,t){return!t||"object"!==Lx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qx(e){return(qx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hx(e,t){return(Hx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fx=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ux(this,qx(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hx(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e,t,n=this.props.post,r=_t.m(n),a=_t.e(n),o=n&&n.props&&"true"===n.props.from_webhook,i=E.a.createElement(Fb,{userId:n.user_id,hasMention:!0});return o&&!this.props.isBot?(i=n.props.override_username&&this.props.enablePostUsernameOverride?E.a.createElement(Fb,{userId:n.user_id,hideStatus:!0,overwriteName:n.props.override_username}):E.a.createElement(Fb,{userId:n.user_id,hideStatus:!0}),e=E.a.createElement(ko.a,null)):a?(i=E.a.createElement(Fb,{userId:n.user_id,hideStatus:!0,hasMention:!0}),e=E.a.createElement(Pb.a,null,E.a.createElement(Y.c,{id:"post_info.auto_responder",defaultMessage:"AUTOMATIC REPLY"}))):r&&this.props.isBot?i=E.a.createElement(Fb,{userId:n.user_id,hideStatus:!0}):r&&(i=E.a.createElement(Fb,{overwriteName:E.a.createElement(Y.c,{id:"post_info.system",defaultMessage:"System"}),overwriteImage:P.Q.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0})),this.props.compactDisplay&&(t=E.a.createElement("strong",{className:"colon"},":")),E.a.createElement("div",{className:"post__header"},E.a.createElement("div",{className:"col col__name"},i,t,e),E.a.createElement("div",{className:"col"},E.a.createElement(xx,{post:n,handleCommentClick:this.props.handleCommentClick,handleCardClick:this.props.handleCardClick,handleDropdownOpened:this.props.handleDropdownOpened,compactDisplay:this.props.compactDisplay,replyCount:this.props.replyCount,isFirstReply:this.props.isFirstReply,showTimeWithoutHover:this.props.showTimeWithoutHover,hover:this.props.hover})))}}])&&Dx(n.prototype,r),a&&Dx(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fx,"propTypes",{post:v.a.object.isRequired,handleCommentClick:v.a.func.isRequired,handleCardClick:v.a.func.isRequired,handleDropdownOpened:v.a.func.isRequired,compactDisplay:v.a.bool,replyCount:v.a.number,isFirstReply:v.a.bool,hover:v.a.bool.isRequired,showTimeWithoutHover:v.a.bool,enablePostUsernameOverride:v.a.bool.isRequired,isBot:v.a.bool.isRequired});var Bx=Object(r.connect)(function(e,t){var n="true"===Object(u.getConfig)(e).EnablePostUsernameOverride,r=Object(p.getUser)(e,t.post.user_id);return{enablePostUsernameOverride:n,isBot:Boolean(r&&r.is_bot)}})(Fx);function Gx(e){return(Gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wx(e){return(Wx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kx(e,t){return(Kx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qx=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Wx(t).call(this,e),n=!a||"object"!==Gx(a)&&"function"!=typeof a?zx(r):a,Yx(zx(n),"handleCommentClick",function(e){e.preventDefault();var t=n.props.post;t&&n.props.actions.selectPost(t)}),Yx(zx(n),"handleCardClick",function(e){e&&n.props.actions.selectPostCard(e)}),Yx(zx(n),"handleDropdownOpened",function(e){n.props.togglePostMenu&&n.props.togglePostMenu(e),n.setState({dropdownOpened:e})}),Yx(zx(n),"hasSameRoot",function(e){var t=e.post;return!e.isFirstReply&&(!(t.root_id||e.previousPostIsComment||!e.consecutivePostByUser)||!!t.root_id)}),Yx(zx(n),"getClassName",function(e,t,r,a,o,i){var s="post";(e.failed||e.state===L.Posts.POST_DELETED)&&(s+=" post--hide-controls"),n.props.shouldHighlight&&(s+=" post--highlight");var l="";l=n.state.sameRoot&&!i?"same--root":"other--root";var c="";n.props.currentUserId!==e.user_id||a||t||(c="current--user");var u="";n.props.consecutivePostByUser&&(u="same--user");var p="";return e.root_id&&e.root_id.length>0?p="post--comment":n.props.replyCount>0&&(p="post--root",u="",l=""),(t||r)&&(s+=" post--system",t&&(c="",p="",l="")),o&&(p="post--comment same--root"),n.props.compactDisplay&&(s+=" post--compact"),(n.state.dropdownOpened||n.state.a11yActive)&&(s+=" post--hovered"),e.is_pinned&&(s+=" post--pinned"),s+" "+u+" "+l+" "+p+" "+c}),Yx(zx(n),"setHover",function(){n.setState({hover:!0})}),Yx(zx(n),"unsetHover",function(){n.setState({hover:!1})}),Yx(zx(n),"handleA11yActivateEvent",function(){n.setState({a11yActive:!0,ariaHidden:!1})}),Yx(zx(n),"handleA11yDeactivateEvent",function(){n.setState({a11yActive:!1,ariaHidden:!0})}),Yx(zx(n),"handlePostFocus",function(){n.setState({currentAriaLabel:n.props.createAriaLabel(n.context.intl)})}),n.postRef=E.a.createRef(),n.state={dropdownOpened:!1,hover:!1,a11yActive:!1,sameRoot:n.hasSameRoot(e),currentAriaLabel:"",ariaHidden:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kx(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({sameRoot:this.hasSameRoot(e)})}},{key:"componentDidMount",value:function(){this.postRef.current.addEventListener(P.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.addEventListener(P.c.DEACTIVATE,this.handleA11yDeactivateEvent)}},{key:"componentWillUnmount",value:function(){this.postRef.current.removeEventListener(P.c.ACTIVATE,this.handleA11yActivateEvent),this.postRef.current.removeEventListener(P.c.DEACTIVATE,this.handleA11yDeactivateEvent)}},{key:"componentDidUpdate",value:function(){this.state.a11yActive&&this.postRef.current.dispatchEvent(new Event(P.c.UPDATE))}},{key:"render",value:function(){var e=this.props.post;if(!e.id)return null;var t,n=_t.m(e),r=Object(Ql.isMeMessage)(e),a=_t.e(e),o=e&&e.props&&"true"===e.props.from_webhook,i=e&&e.props&&"true"===e.props.from_bot,s=this.state.sameRoot&&this.props.consecutivePostByUser&&!e.root_id&&0===this.props.replyCount&&!i;s||(t=E.a.createElement(Sm,{compactDisplay:this.props.compactDisplay,post:e,userId:e.user_id}),a&&(t=E.a.createElement("span",{className:"auto-responder"},t)));var l="";return this.props.center&&(l="center"),E.a.createElement("div",{ref:this.postRef,id:"post_"+e.id,role:"listitem",className:"a11y__section ".concat(this.getClassName(e,n,r,o,a,i)),tabIndex:"0",onFocus:this.handlePostFocus,onBlur:this.removeFocus,onMouseOver:this.setHover,onMouseLeave:this.unsetHover,onTouchStart:this.setHover,"aria-label":this.state.currentAriaLabel,"aria-atomic":!0},E.a.createElement("div",{role:"application",id:"postContent",className:"post__content "+l,"aria-hidden":this.state.ariaHidden},E.a.createElement("div",{className:"post__img"},t),E.a.createElement("div",null,E.a.createElement(Bx,{post:e,handleCommentClick:this.handleCommentClick,handleCardClick:this.handleCardClick,handleDropdownOpened:this.handleDropdownOpened,compactDisplay:this.props.compactDisplay,isFirstReply:this.props.isFirstReply,replyCount:this.props.replyCount,showTimeWithoutHover:!s,hover:this.state.hover||this.state.a11yActive}),E.a.createElement(Tx,{post:e,handleCommentClick:this.handleCommentClick,compactDisplay:this.props.compactDisplay,isCommentMention:this.props.isCommentMention,isFirstReply:this.props.isFirstReply}))))}}])&&Vx(n.prototype,r),a&&Vx(n,a),t}();function Jx(e,t){return!!e.root_id&&(!t||e.root_id!==t.id&&e.root_id!==t.root_id)}Yx(Qx,"propTypes",{post:v.a.object.isRequired,createAriaLabel:v.a.func.isRequired,currentUserId:v.a.string.isRequired,center:v.a.bool,compactDisplay:v.a.bool,isFirstReply:v.a.bool,shouldHighlight:v.a.bool,consecutivePostByUser:v.a.bool,previousPostIsComment:v.a.bool,togglePostMenu:v.a.func,isCommentMention:v.a.bool,replyCount:v.a.number,actions:v.a.shape({selectPost:v.a.func.isRequired,selectPostCard:v.a.func.isRequired}).isRequired}),Yx(Qx,"contextTypes",{intl:Y.i.isRequired}),Yx(Qx,"defaultProps",{post:{}});var Zx=Object(r.connect)(function(){var e=Object(Kl.a)(function(e){return e.entities.posts.posts},function(e,t){return e.entities.posts.postsInThread[t.root_id||t.id]},function(e,t){return t?t.map(function(t){return e[t]}).filter(function(e){return e&&!Object(Ql.isPostEphemeral)(e)}).length:0}),t=Object($a.makeIsPostCommentMention)(),n=Object(_t.n)();return function(r,a){var o=a.post||Object($a.getPost)(r,a.postId),i=null;a.previousPostId&&(i=Object($a.getPost)(r,a.previousPostId));var s=!1,l=!1;return i&&(s=!(!(o.user_id===i.user_id&&o.create_at-i.create_at<=L.Posts.POST_COLLAPSE_TIMEOUT)||o.props&&o.props.from_webhook||i.props&&i.props.from_webhook||Object(Ql.isSystemMessage)(o)||Object(Ql.isSystemMessage)(i)),l=Boolean(i.root_id)),{post:o,createAriaLabel:n(r,o),currentUserId:Object(p.getCurrentUserId)(r),isFirstReply:Jx(o,i),consecutivePostByUser:s,previousPostIsComment:l,replyCount:e(r,o),isCommentMention:t(r,o.id),center:Object(c.get)(r,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.CHANNEL_DISPLAY_MODE,P.z.CHANNEL_DISPLAY_MODE_DEFAULT)===P.z.CHANNEL_DISPLAY_MODE_CENTERED,compactDisplay:Object(c.get)(r,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.MESSAGE_DISPLAY,P.z.MESSAGE_DISPLAY_DEFAULT)===P.z.MESSAGE_DISPLAY_COMPACT}}},function(e){return{actions:Object(a.bindActionCreators)({selectPost:kl.d,selectPostCard:kl.e},e)}})(Qx);var Xx=Object(r.connect)(function(){var e=Object(vp.makeGenerateCombinedPost)();return function(t,n){return{post:e(t,n.combinedId),postId:n.combinedId}}})(Zx);function $x(e){return($x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tL(e,t){return!t||"object"!==$x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nL(e){return(nL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rL(e,t){return(rL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var aL=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tL(this,nL(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rL(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.arrow.down",defaultMessage:"Down Arrow Icon"},function(e){return E.a.createElement("svg",{id:"Layer_1",x:"0px",y:"0px",viewBox:"-239 239 21 23",style:oL,role:"icon","aria-label":e},E.a.createElement("path",{d:"M-239,241.4l2.4-2.4l8.1,8.2l8.1-8.2l2.4,2.4l-10.5,10.6L-239,241.4z M-228.5,257.2l8.1-8.2l2.4,2.4l-10.5,10.6l-10.5-10.6 l2.4-2.4L-228.5,257.2z"}))}))}}])&&eL(n.prototype,r),a&&eL(n,a),t}(),oL={enableBackground:"new -239 239 21 23"};function iL(e){return(iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lL(e,t){return!t||"object"!==iL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cL(e){return(cL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uL(e,t){return(uL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pL=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lL(this,cL(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uL(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){if(Hl()(window).width()>768)return null;var e="post-list__arrows";return this.props.isScrolling&&!this.props.atBottom&&(e+=" scrolling"),E.a.createElement("div",{className:e,onClick:this.props.onClick},E.a.createElement(aL,null))}}])&&sL(n.prototype,r),a&&sL(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pL,"propTypes",{isScrolling:v.a.bool.isRequired,atBottom:v.a.bool.isRequired,onClick:v.a.func.isRequired});var dL=n(1656),mL=n(1602),fL=n(1789);function hL(e){return(hL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yL(e,t){return!t||"object"!==hL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gL(e){return(gL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vL(e,t){return(vL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yL(this,gL(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vL(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.currentUserId,n=e.channel,r=e.fullWidth,a=e.locale,o=e.enableUserCreation,i=e.isReadOnly,s=e.channelProfiles,l=e.teamIsGroupConstrained,c="";return r||(c="channel-intro--centered"),n.type===P.i.DM_CHANNEL?function(e,t){var n=j.u(e.id);if(n){var r=n.username;return n.nickname.length>0&&(r=n.nickname),E.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},E.a.createElement("div",{className:"post-profile-img__container channel-intro-img"},E.a.createElement(hm.a,{src:j.J(n),width:"50",height:"50",userId:n.id,username:n.username,hasMention:!0})),E.a.createElement("div",{className:"channel-intro-profile d-flex"},E.a.createElement(Fb,{userId:n.id,disablePopover:!1,hasMention:!0})),E.a.createElement("p",{className:"channel-intro-text"},E.a.createElement(Bu.b,{id:"intro_messages.DM",defaultMessage:"This is the start of your direct message history with {teammate}.\\nDirect messages and files shared here are not shown to people outside this area.",values:{teammate:r}})),n.is_bot?null:wL(e))}return E.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},E.a.createElement("p",{className:"channel-intro-text"},E.a.createElement(Y.c,{id:"intro_messages.teammate",defaultMessage:"This is the start of your direct message history with this teammate. Direct messages and files shared here are not shown to people outside this area."})))}(n,c):n.type===P.i.GM_CHANNEL?function(e,t,n,r){if(n.length>0){var a=n.filter(function(e){return e.id!==r}).map(function(e){return E.a.createElement(hm.a,{key:"introprofilepicture"+e.id,src:j.J(e),width:"50",height:"50",userId:e.id,username:e.username})});return E.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},E.a.createElement("div",{className:"post-profile-img__container channel-intro-img"},a),E.a.createElement("p",{className:"channel-intro-text"},E.a.createElement(Bu.b,{id:"intro_messages.GM",defaultMessage:"This is the start of your group message history with {names}.\\nMessages and files shared here are not shown to people outside this area.",values:{names:e.display_name}})),wL(e))}return E.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},E.a.createElement("p",{className:"channel-intro-text"},E.a.createElement(Y.c,{id:"intro_messages.group_message",defaultMessage:"This is the start of your group message history with these teammates. Messages and files shared here are not shown to people outside this area."})))}(n,c,s,t):n.name===P.i.DEFAULT_CHANNEL?function(e,t,n,r,a){var o=null;!r&&n&&(o=E.a.createElement(OE.a,{teamId:e.team_id,permissions:[L.Permissions.INVITE_USER]},E.a.createElement(OE.a,{teamId:e.team_id,permissions:[L.Permissions.ADD_USER_TO_TEAM]},!a&&E.a.createElement("span",{className:"intro-links color--link cursor--pointer",onClick:C.l},E.a.createElement(Y.c,{id:"generic_icons.add",defaultMessage:"Add Icon"},function(e){return E.a.createElement("i",{className:"fa fa-user-plus",title:e})}),E.a.createElement(Y.c,{id:"intro_messages.inviteOthers",defaultMessage:"Invite others to this team"})),a&&E.a.createElement(mL.a,{className:"intro-links color--link",dialogType:xO.a,dialogProps:{channel:e}},E.a.createElement(Y.c,{id:"generic_icons.add",defaultMessage:"Add Icon"},function(e){return E.a.createElement("i",{className:"fa fa-user-plus",title:e})}),E.a.createElement(Y.c,{id:"intro_messages.addGroupsToTeam",defaultMessage:"Add other groups to this team"})))));var i=e.type===P.i.PRIVATE_CHANNEL,s=null;if(!r){var l=wL(e);l&&(s=E.a.createElement(Lp,{teamId:e.team_id,channelId:e.id,permissions:[i?L.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:L.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},l))}return E.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},E.a.createElement("h4",{className:"channel-intro__title"},E.a.createElement(Y.c,{id:"intro_messages.beginning",defaultMessage:"Beginning of {name}",values:{name:e.display_name}})),E.a.createElement("p",{className:"channel-intro__content"},!r&&E.a.createElement(Bu.b,{id:"intro_messages.default",defaultMessage:"**Welcome to {display_name}!**\\n \\nPost messages here that you want everyone to see. Everyone automatically becomes a permanent member of this channel when they join the team.",values:{display_name:e.display_name}}),r&&E.a.createElement(Bu.b,{id:"intro_messages.readonly.default",defaultMessage:"**Welcome to {display_name}!**\\n \\nMessages can only be posted by system admins. Everyone automatically becomes a permanent member of this channel when they join the team.",values:{display_name:e.display_name}})),o,s,E.a.createElement("br",null))}(n,c,o,i,l):n.name===P.i.OFFTOPIC_CHANNEL?function(e,t){var n=e.type===P.i.PRIVATE_CHANNEL,r=wL(e),a=null;r&&(a=E.a.createElement(Lp,{teamId:e.team_id,channelId:e.id,permissions:[n?L.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:L.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},r));var o=EL(e);return E.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},E.a.createElement("h4",{className:"channel-intro__title"},E.a.createElement(Y.c,{id:"intro_messages.beginning",defaultMessage:"Beginning of {name}",values:{name:e.display_name}})),E.a.createElement("p",{className:"channel-intro__content"},E.a.createElement(Y.c,{id:"intro_messages.offTopic",defaultMessage:"This is the start of {display_name}, a channel for non-work-related conversations.",values:{display_name:e.display_name}})),o,a)}(n,c):n.type===P.i.OPEN_CHANNEL||n.type===P.i.PRIVATE_CHANNEL?function(e,t,n){var r,a=e.display_name,o=j.w(e.creator_id);r=0!==e.delete_at?"":e.type===P.i.PRIVATE_CHANNEL?E.a.createElement(Y.c,{id:"intro_messages.onlyInvited",defaultMessage:" Only invited members can see this private channel."}):E.a.createElement(Y.c,{id:"intro_messages.anyMember",defaultMessage:" Any member can join and read this channel."});var i,s=E.a.createElement(Y.a,{value:e.create_at,month:Object(Me.a)(n),day:"2-digit",year:"numeric"});""===o?e.type===P.i.PRIVATE_CHANNEL?i=E.a.createElement(Y.c,{id:"intro_messages.noCreatorPrivate",defaultMessage:"This is the start of the {name} private channel, created on {date}.",values:{name:a,date:s}}):e.type===P.i.OPEN_CHANNEL&&(i=E.a.createElement(Y.c,{id:"intro_messages.noCreator",defaultMessage:"This is the start of the {name} channel, created on {date}.",values:{name:a,date:s}})):e.type===P.i.PRIVATE_CHANNEL?i=E.a.createElement("span",null,E.a.createElement(Y.c,{id:"intro_messages.creatorPrivate",defaultMessage:"This is the start of the {name} private channel, created by {creator} on {date}.",values:{name:a,creator:o,date:s}})):e.type===P.i.OPEN_CHANNEL&&(i=E.a.createElement("span",null,E.a.createElement(Y.c,{id:"intro_messages.creator",defaultMessage:"This is the start of the {name} channel, created by {creator} on {date}.",values:{name:a,creator:o,date:s}})));var l="";e.purpose&&""!==e.purpose&&(e.type===P.i.PRIVATE_CHANNEL?l=E.a.createElement("span",null,E.a.createElement(Y.c,{id:"intro_messages.purposePrivate",defaultMessage:" This private channel's purpose is: {purpose}",values:{purpose:e.purpose}})):e.type===P.i.OPEN_CHANNEL&&(l=E.a.createElement("span",null,E.a.createElement(Y.c,{id:"intro_messages.purpose",defaultMessage:" This channel's purpose is: {purpose}",values:{purpose:e.purpose}}))));var c=e.type===P.i.PRIVATE_CHANNEL,u=null,p=wL(e);p&&(u=E.a.createElement(Lp,{teamId:e.team_id,channelId:e.id,permissions:[c?L.Permissions.MANAGE_PRIVATE_CHANNEL_PROPERTIES:L.Permissions.MANAGE_PUBLIC_CHANNEL_PROPERTIES]},p));var d=EL(e);return E.a.createElement("div",{id:"channelIntro",className:"channel-intro "+t},E.a.createElement("h4",{className:"channel-intro__title"},E.a.createElement(Y.c,{id:"intro_messages.beginning",defaultMessage:"Beginning of {name}",values:{name:a}})),E.a.createElement("p",{className:"channel-intro__content"},i,r,l,E.a.createElement("br",null)),d,u)}(n,c,a):null}}])&&bL(n.prototype,r),a&&bL(n,a),t}();function EL(e){var t=e.group_constrained?$R.a:fM;if(0!==e.delete_at)return null;var n=e.type===P.i.PRIVATE_CHANNEL;return E.a.createElement(Lp,{channelId:e.id,teamId:e.team_id,permissions:[n?L.Permissions.MANAGE_PRIVATE_CHANNEL_MEMBERS:L.Permissions.MANAGE_PUBLIC_CHANNEL_MEMBERS]},E.a.createElement(mL.a,{className:"intro-links color--link",dialogType:t,dialogProps:{channel:e}},E.a.createElement(Y.c,{id:"generic_icons.add",defaultMessage:"Add Icon"},function(e){return E.a.createElement("i",{className:"fa fa-user-plus",title:e})}),n&&e.group_constrained&&E.a.createElement(Y.c,{id:"intro_messages.addGroups",defaultMessage:"Add groups to this private channel"}),n&&!e.group_constrained&&E.a.createElement(Y.c,{id:"intro_messages.invitePrivate",defaultMessage:"Invite others to this private channel"}),!n&&E.a.createElement(Y.c,{id:"intro_messages.invite",defaultMessage:"Invite others to this channel"})))}function wL(e){return 0!==e.delete_at?null:E.a.createElement(Y.c,{id:"intro_messages.setHeader",defaultMessage:"Set a Header"},function(t){return E.a.createElement(dL.a,{modalId:"editChannelHeaderModal",accessibilityLabel:t,className:"intro-links color--link",dialogType:rM,dialogProps:{channel:e}},E.a.createElement(fL.a,null),t)})}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_L,"propTypes",{currentUserId:v.a.string.isRequired,channel:v.a.object.isRequired,fullWidth:v.a.bool.isRequired,locale:v.a.string.isRequired,channelProfiles:v.a.array.isRequired,enableUserCreation:v.a.bool,isReadOnly:v.a.bool,teamIsGroupConstrained:v.a.bool});var OL=Object(r.connect)(function(e){var t="true"===Object(u.getConfig)(e).EnableUserCreation,n=Object(m.isCurrentChannelReadOnly)(e),r=Object(d.getCurrentTeam)(e);return{currentUserId:Object(p.getCurrentUserId)(e),channel:Object(m.getCurrentChannel)(e),locale:Object(zl.a)(e),channelProfiles:Object(p.getProfilesInCurrentChannel)(e),enableUserCreation:t,isReadOnly:n,fullWidth:Object(c.get)(e,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.CHANNEL_DISPLAY_MODE,P.z.CHANNEL_DISPLAY_MODE_DEFAULT)===P.z.CHANNEL_DISPLAY_MODE_FULL_SCREEN,teamIsGroupConstrained:Boolean(r.group_constrained)}})(_L);function SL(e){return(SL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CL(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function PL(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){CL(o,r,a,i,s,"next",e)}function s(e){CL(o,r,a,i,s,"throw",e)}i(void 0)})}}function TL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jL(e){return(jL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ML(e,t){return(ML=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function NL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RL=10,IL=P.Q.POST_CHUNK_SIZE/2,AL=10,xL=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=jL(t).call(this,e),n=!a||"object"!==SL(a)&&"function"!=typeof a?kL(r):a,NL(kL(n),"loadPostsToFillScreenIfNecessary",function(){n.props.focusedPostId||n.state.isDoingInitialLoad||!n.state.atEnd&&n.refs.postListContent&&n.refs.postlist&&(n.refs.postListContent.scrollHeight>=n.refs.postlist.clientHeight||n.extraPagesLoaded>AL||n.doLoadPostsToFillScreen())}),NL(kL(n),"doLoadPostsToFillScreen",Object(iu.debounce)(function(){n.extraPagesLoaded+=1,n.loadMorePosts()},100)),NL(kL(n),"initialScroll",function(){if(n.hasScrolledToNewMessageSeparator)return!1;var e=n.refs.postlist,t=n.props.posts;if(!e||!t)return!1;var r=n.refs.newMessageSeparator;return r&&e.scrollHeight-r.offsetTop>e.clientHeight?(r.scrollIntoView(),n.setUnreadsBelow(t,n.props.currentUserId),!0):(e.scrollTop=e.scrollHeight,n.atBottom=!0,!0)}),NL(kL(n),"setUnreadsBelow",function(e,t){var r=e.reduce(function(e,r){return r.create_at>n.state.lastViewed&&r.user_id!==t&&r.state!==P.Q.POST_DELETED?e+1:e},0);n.mounted&&n.setState({unViewedCount:r})}),NL(kL(n),"handleScrollStop",function(){n.mounted&&n.setState({isScrolling:!1})}),NL(kL(n),"checkBottom",function(){return!n.refs.postlist||(n.refs.postlist.scrollHeight<=n.refs.postlist.clientHeight||n.refs.postlist.clientHeight+n.refs.postlist.scrollTop>=n.refs.postlist.scrollHeight-RL)}),NL(kL(n),"handleWindowResize",function(){n.handleResize()}),NL(kL(n),"handleResize",function(e){var t=n.refs.postlist,r=n.refs.newMessageSeparator,a=n.atBottom||e;if(t){if(a)t.scrollTop=t.scrollHeight;else if(!n.hasScrolled&&r){pu.a.findDOMNode(r).scrollIntoView()}n.previousScrollHeight=t.scrollHeight,n.previousScrollTop=t.scrollTop,n.previousClientHeight=t.clientHeight,n.atBottom=n.checkBottom()}n.props.actions.checkAndSetMobileView()}),NL(kL(n),"loadPosts",function(){var e=PL(regeneratorRuntime.mark(function e(t,r){var a,o,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!r){e.next=9;break}return e.next=5,n.props.actions.loadPostsAround(t,r);case 5:o=e.sent,a=o.atOldestmessage,e.next=13;break;case 9:return e.next=11,n.props.actions.loadLatestPosts(t);case 11:i=e.sent,a=i.atOldestmessage;case 13:n.mounted&&n.setState({isDoingInitialLoad:!1,atEnd:a}),r?n.hasScrolledToFocusedPost=!0:(n.checkBottom()||(s=(void 0).order.map(function(e){return(void 0).posts[e]}),n.setUnreadsBelow(s,n.props.currentUserId)),n.hasScrolledToNewMessageSeparator=!0);case 15:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),NL(kL(n),"loadMorePosts",function(){var e=PL(regeneratorRuntime.mark(function e(t){var r,a,o,i,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),r=n.props,a=r.posts,o=r.channel,i=a.length,a){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n.props.actions.loadPosts({channelId:o.id,postId:a[i-1].id,type:P.x.BEFORE_ID});case 7:s=e.sent,l=s.moreToLoad,n.setState({atEnd:!l});case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),NL(kL(n),"handleScroll",function(){n.hasScrolled=n.hasScrolledToNewMessageSeparator||n.hasScrolledToFocusedPost,n.refs.postlist&&(n.updateFloatingTimestamp(),n.previousScrollTop=n.refs.postlist.scrollTop,n.refs.postlist.scrollHeight===n.previousScrollHeight&&(n.atBottom=n.checkBottom()),n.state.isScrolling||n.setState({isScrolling:!0}),n.checkBottom()&&n.setState({lastViewed:(new Date).getTime(),unViewedCount:0,isScrolling:!1}),n.scrollStopAction.fireAfter(P.Q.SCROLL_DELAY))}),NL(kL(n),"updateFloatingTimestamp",function(){if(j.U()&&n.props.posts)for(var e=0;e<n.props.posts.length;e++){var t=n.props.posts[e],r=n.refs[t.id],a=pu.a.findDOMNode(r);if(!r||!a||a.offsetTop+a.clientHeight<=n.refs.postlist.scrollTop){var o=void 0;o=e>0?n.props.posts[e-1]:t,n.state.topPost&&o.id===n.state.topPost.id||n.setState({topPost:o});break}}}),NL(kL(n),"scrollToBottom",function(){n.refs.postlist&&(n.refs.postlist.scrollTop=n.refs.postlist.scrollHeight)}),NL(kL(n),"createPosts",function(e){for(var t=[],r=new Date(0),a="",o=n.props.currentUserId,i=n.props.lastViewedAt||0,s=!1,l=e.length-1;l>=0;l--){var c=e[l],u=void 0;if(null!=c&&c.type!==P.y.EPHEMERAL_ADD_TO_CHANNEL){u=Object(vp.isCombinedUserActivityPost)(c.id)?E.a.createElement(Xx,{combinedId:c.id,previousPostId:a}):E.a.createElement(Zx,{ref:c.id,key:"post "+(c.id||c.pending_post_id),post:c,shouldHighlight:n.props.focusedPostId===c.id,previousPostId:a});var p=j.s(c.create_at);if(p.toDateString()!==r.toDateString()&&t.push(E.a.createElement(gp,{key:p,date:p})),(c.user_id!==o||Object(_t.l)(c))&&0!==i&&c.create_at>i&&!j.V(c)&&!s){s=!0;var d="";T.f()||(d="new_message_"+c.id),t.push(E.a.createElement("div",{id:d,key:"unviewed",ref:"newMessageSeparator",className:"new-separator"},E.a.createElement("hr",{className:"separator__hr"}),E.a.createElement("div",{className:"separator__text"},E.a.createElement(Y.c,{id:"posts_view.newMsg",defaultMessage:"New Messages"}))))}t.push(u),r=p,a=c.id}}return t}),n.scrollStopAction=new Vl(n.handleScrollStop),n.previousScrollTop=Number.MAX_SAFE_INTEGER,n.previousScrollHeight=0,n.previousClientHeight=0,n.atBottom=!1,n.extraPagesLoaded=0,n.loadingPosts=!1,n.state={atEnd:!1,unViewedCount:0,isDoingInitialLoad:!0,isScrolling:!1,lastViewed:e.lastViewedAt},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ML(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.mounted=!0,this.loadPosts(this.props.channel.id,this.props.focusedPostId),this.props.actions.checkAndSetMobileView(),QA.a.addListener(P.l.POST_LIST_SCROLL_CHANGE,this.handleResize),window.addEventListener("resize",this.handleWindowResize),this.initialScroll()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,QA.a.removeListener(P.l.POST_LIST_SCROLL_CHANGE,this.handleResize),window.removeEventListener("resize",this.handleWindowResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.focusedPostId&&this.props.focusedPostId!==e.focusedPostId)return this.hasScrolledToFocusedPost=!1,this.hasScrolledToNewMessageSeparator=!1,this.setState({atEnd:!1,isDoingInitialLoad:!e.posts}),void this.loadPosts(e.channel.id,e.focusedPostId);var t=this.props.channel||{},n=e.channel||{};null==e.focusedPostId&&t.id!==n.id&&(this.hasScrolled=!1,this.hasScrolledToFocusedPost=!1,this.hasScrolledToNewMessageSeparator=!1,this.atBottom=!1,this.extraPagesLoaded=0,this.setState({atEnd:!1,lastViewed:e.lastViewedAt,isDoingInitialLoad:!e.posts,unViewedCount:0}),n.id&&this.loadPosts(n.id))}},{key:"UNSAFE_componentWillUpdate",value:function(){this.refs.postlist&&(this.previousScrollTop=this.refs.postlist.scrollTop,this.previousScrollHeight=this.refs.postlist.scrollHeight,this.previousClientHeight=this.refs.postlist.clientHeight)}},{key:"componentDidUpdate",value:function(e,t){if(this.props.focusedPostId&&this.props.focusedPostId!==e.focusedPostId?(this.hasScrolledToFocusedPost=!1,this.hasScrolledToNewMessageSeparator=!1,this.loadPosts(this.props.channel.id,this.props.focusedPostId)):!this.props.channel||e.channel&&this.props.channel.id===e.channel.id||(this.hasScrolled=!1,this.hasScrolledToFocusedPost=!1,this.hasScrolledToNewMessageSeparator=!1,this.extraPagesLoaded=0,this.setState({atEnd:!1,isDoingInitialLoad:!this.props.posts,unViewedCount:0}),this.loadPosts(this.props.channel.id)),this.loadPostsToFillScreenIfNecessary(),this.props.posts!==e.posts||this.props.postVisibility!==e.postVisibility||this.state.atEnd!==t.atEnd){var n=e.posts||[],r=this.props.posts||[];if(null==this.props.focusedPostId){var a=0===n.length&&r.length>0||n.length>0&&r.length>0&&n[0].id!==r[0].id;!this.checkBottom()&&a&&this.setUnreadsBelow(r,this.props.currentUserId)}var o=this.refs.postlist;if(o){var i=this.refs[this.props.focusedPostId];if(i&&this.props.posts)if(this.hasScrolledToFocusedPost)this.previousScrollHeight!==o.scrollHeight&&r[0].id===n[0].id&&(o.scrollTop=this.previousScrollTop+(o.scrollHeight-this.previousScrollHeight));else{var s=pu.a.findDOMNode(i).getBoundingClientRect(),l=o.clientHeight/2;o.scrollTop+=s.top-l,this.atBottom=this.checkBottom()}else{var c=this.initialScroll();if(r.length>=IL&&(this.hasScrolledToNewMessageSeparator=!0),!c&&o&&n&&r&&r[0]&&n[0]){var u=!1,p=r[0].id,d=n[0].id,m=r[0].pending_post_id;if(p!==d&&m!==d&&(this.atBottom&&(u=!0),j.V(r[0])&&(u=!0)),u)return this.atBottom=!0,void(o.scrollTop=o.scrollHeight);this.previousScrollHeight!==o.scrollHeight&&r[0].id===n[0].id&&(o.scrollTop=this.previousScrollTop+(o.scrollHeight-this.previousScrollHeight))}}}}}},{key:"render",value:function(){var e,t=this.props.posts||[],n=this.props.channel;if(0===t.length&&this.state.isDoingInitialLoad||null==n)return E.a.createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0,"data-a11y-loop-navigation":!1},E.a.createElement(VO.a,{position:"absolute",key:"loading"}));e=this.state.atEnd?E.a.createElement(OL,{channel:n}):this.props.postVisibility>=P.Q.MAX_POST_VISIBILITY?E.a.createElement("div",{className:"post-list__loading post-list__loading-search"},E.a.createElement(Y.c,{id:"posts_view.maxLoaded",defaultMessage:"Looking for a specific message? Try searching for it"})):E.a.createElement("button",{ref:"loadmoretop",className:"more-messages-text theme style--none color--link",onClick:this.loadMorePosts},E.a.createElement(Y.c,{id:"posts_view.loadMore",defaultMessage:"Load more messages"}));var r=this.state.topPost?this.state.topPost.create_at:0,a=this.props.postVisibility;return this.props.focusedPostId&&(a+=P.Q.POST_CHUNK_SIZE/2),E.a.createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0,"data-a11y-loop-navigation":!1},E.a.createElement(Pp,{isScrolling:this.state.isScrolling,isMobile:j.U(),createAt:r}),E.a.createElement(pL,{isScrolling:this.state.isScrolling,atBottom:this.atBottom,onClick:this.scrollToBottom}),!this.props.focusedPostId&&E.a.createElement(rx,{atBottom:this.atBottom,lastViewedBottom:this.state.lastViewed,onClick:this.scrollToBottom,channelId:this.props.channel.id}),E.a.createElement("div",{ref:"postlist",className:"post-list-holder-by-time normal_post_list",key:"postlist-"+n.id,onScroll:this.handleScroll},E.a.createElement("div",{className:"post-list__table"},E.a.createElement("div",{id:"postListContent",ref:"postListContent",className:"post-list__content"},e,this.createPosts(t.slice(0,a))))))}}])&&TL(n.prototype,r),a&&TL(n,a),t}();NL(xL,"propTypes",{posts:v.a.array,postVisibility:v.a.number,channel:v.a.object.isRequired,lastViewedAt:v.a.number,currentUserId:v.a.string,focusedPostId:v.a.string,actions:v.a.shape({loadLatestPosts:v.a.func.isRequired,loadPosts:v.a.func.isRequired,checkAndSetMobileView:v.a.func.isRequired,loadPostsAround:v.a.func.isRequired}).isRequired});var LL=Object(r.connect)(function(){var e=Object($a.makeGetPostsInChannel)(),t=Object($a.makeGetPostsAroundPost)(),n=Object(z.c)();return function(r,a){var o,i=r.views.channel.postVisibility[a.channelId];return o=a.focusedPostId?t(r,a.focusedPostId,a.channelId):e(r,a.channelId,i),{posts:n(o||[]),currentUserId:Object(p.getCurrentUserId)(r),lastViewedAt:r.views.channel.lastChannelViewTime[a.channelId],channel:Object(m.getCurrentChannel)(r),postVisibility:i}}})(xL),DL=n(2080),UL=n(2383);function qL(e){return(qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FL(e,t){return!t||"object"!==qL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BL(e){return(BL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GL(e,t){return(GL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var VL=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),FL(this,BL(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GL(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("div",{id:this.props.separatorId,className:"new-separator"},E.a.createElement("hr",{className:"separator__hr"}),E.a.createElement("div",{className:"separator__text"},E.a.createElement(Y.c,{id:"posts_view.newMsg",defaultMessage:"New Messages"})))}}])&&HL(n.prototype,r),a&&HL(n,a),t}();function WL(e){return(WL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KL(e,t){return!t||"object"!==WL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function YL(e){return(YL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QL(e,t){return(QL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(VL,"propTypes",{separatorId:v.a.string.isRequired});var JL=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),KL(this,YL(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QL(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.listId,n=e.previousListId;if(vp.isDateLine(t)){var r=vp.getDateForDateLine(t);return E.a.createElement(gp,{key:r,date:r})}if(vp.isStartOfNewMessages(t))return E.a.createElement(VL,{separatorId:t});if(t===P.w.CHANNEL_INTRO_MESSAGE)return E.a.createElement(OL,null);if(t===P.w.LOAD_OLDER_MESSAGES_TRIGGER||t===P.w.LOAD_NEWER_MESSAGES_TRIGGER)return E.a.createElement("button",{className:"more-messages-text theme style--none color--link",onClick:t===P.w.LOAD_OLDER_MESSAGES_TRIGGER?this.props.loadOlderPosts:this.props.loadNewerPosts},E.a.createElement(Y.c,{id:"posts_view.loadMore",defaultMessage:"Load more messages"}));if(t===P.w.OLDER_MESSAGES_LOADER||t===P.w.NEWER_MESSAGES_LOADER)return E.a.createElement("div",{className:"loading-screen"},E.a.createElement("div",{className:"loading__content"},E.a.createElement("div",{className:"round round-1"}),E.a.createElement("div",{className:"round round-2"}),E.a.createElement("div",{className:"round round-3"})));var a={previousPostId:n,shouldHighlight:this.props.shouldHighlight,togglePostMenu:this.props.togglePostMenu};return vp.isCombinedUserActivityPost(t)?E.a.createElement(Xx,Object.assign({combinedId:t},a)):E.a.createElement(Zx,Object.assign({postId:t},a))}}])&&zL(n.prototype,r),a&&zL(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(JL,"propTypes",{listId:v.a.string.isRequired,previousListId:v.a.string,fullWidth:v.a.bool,shouldHighlight:v.a.bool,loadOlderPosts:v.a.func,loadNewerPosts:v.a.func,togglePostMenu:v.a.func});var ZL=Object(r.connect)(function(e,t){return{post:t.post,channel:t.channel}})(JL);function XL(e){return(XL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $L(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function eD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){oD(e,t,n[t])})}return e}function tD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nD(e){return(nD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aD(e,t){return(aD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iD=window.OVERSCAN_COUNT_BACKWARD||80,sD=window.OVERSCAN_COUNT_FORWARD||80,lD=window.HEIGHT_TRIGGER_FOR_MORE_POSTS||1e3,cD=10,uD={channel:50,permalink:100},pD={padding:"14px 0px 7px"},dD={position:"absolute",bottom:"0",maxHeight:"100%"},mD=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=nD(t).call(this,e),n=!a||"object"!==XL(a)&&"function"!=typeof a?rD(r):a,oD(rD(n),"getNewMessagesSeparatorIndex",function(e){return e.findIndex(function(e){return 0===e.indexOf(P.w.START_OF_NEW_MESSAGES)})}),oD(rD(n),"scrollChange",function(e){e&&n.scrollToLatestMessages()}),oD(rD(n),"handleWindowResize",function(){n.props.actions.checkAndSetMobileView();var e=j.U();if(e!==n.state.isMobile){var t=n.state.dynamicListStyle;n.state.postMenuOpened&&(e||"unset"!==t.willChange?e&&"transform"===t.willChange&&(t.willChange="unset"):t.willChange="transform"),n.setState({isMobile:e,dynamicListStyle:t}),n.scrollStopAction=new Vl(n.handleScrollStop)}}),oD(rD(n),"togglePostMenu",function(e){var t=n.state.dynamicListStyle;n.state.isMobile&&(t.willChange=e?"unset":"transform"),n.setState({postMenuOpened:e,dynamicListStyle:t})}),oD(rD(n),"renderRow",function(e){var t=e.data,r=e.itemId,a=e.style,o=t.indexOf(r),i="",s=-1!==o&&o<t.length-1?t[o+1]:"",l=o>0&&o<t.length?t[o-1]:"";return(Object(vp.isDateLine)(l)||Object(vp.isStartOfNewMessages)(l))&&(i+="post-row__padding bottom"),(Object(vp.isDateLine)(s)||Object(vp.isStartOfNewMessages)(s))&&(i.includes("post-row__padding")?i+=" top":i+="post-row__padding top"),E.a.createElement("div",{style:a,className:i},E.a.createElement(ZL,{listId:r,previousListId:Object(_t.i)(t,o),shouldHighlight:r===n.props.focusedPostId,loadOlderPosts:n.props.actions.loadOlderPosts,loadNewerPosts:n.props.actions.loadNewerPosts,togglePostMenu:n.togglePostMenu}))}),oD(rD(n),"itemKey",function(e){var t=n.state.postListIds;return t[e]?t[e]:e}),oD(rD(n),"onScroll",function(e){var t=e.scrollDirection,r=e.scrollOffset,a=e.scrollUpdateWasRequested,o=e.clientHeight,i=e.scrollHeight,s="forward"===t&&!a,l=i-o-r<lD;("backward"===t&&!a&&r<lD&&!n.props.atOldestPost?n.props.actions.loadOlderPosts():s&&l&&!n.props.atLatestPost&&n.props.actions.loadNewerPosts(),n.state.isMobile&&(n.state.isScrolling||n.setState({isScrolling:!0}),n.scrollStopAction&&n.scrollStopAction.fireAfter(P.Q.SCROLL_DELAY)),a)&&(n.listRef.current._getRangeToRender()[3]<=1&&!n.props.atLatestPost&&n.props.actions.canLoadMorePosts(P.x.AFTER_ID));n.checkBottom(r,i,o)}),oD(rD(n),"checkBottom",function(e,t,r){n.updateAtBottom(n.isAtBottom(e,t,r))}),oD(rD(n),"isAtBottom",function(e,t,n){return t-n-e<=cD&&t>0}),oD(rD(n),"updateAtBottom",function(e){if(e!==n.state.atBottom){var t=Date.now();n.props.latestPostTimeStamp>t&&(t=n.props.latestPostTimeStamp),n.setState({atBottom:e,lastViewedBottom:t})}}),oD(rD(n),"handleScrollStop",function(){n.mounted&&n.setState({isScrolling:!1})}),oD(rD(n),"updateFloatingTimestamp",function(e){n.state.isMobile&&n.props.postListIds&&n.setState({topPostId:Object(_t.g)(n.props.postListIds.slice(e))})}),oD(rD(n),"onItemsRendered",function(e){var t=e.visibleStartIndex;n.updateFloatingTimestamp(t)}),oD(rD(n),"initScrollToIndex",function(){if(n.props.focusedPostId)return{index:n.state.postListIds.findIndex(function(e){return e===n.props.focusedPostId}),position:"center"};var e=n.state.postListIds.findIndex(function(e){return 0===e.indexOf(P.w.START_OF_NEW_MESSAGES)});return e>0?Object(vp.isDateLine)(n.state.postListIds[e+1])?{index:e+1,position:"start"}:{index:e,position:"start"}:(n.setState({atBottom:!0}),{index:0,position:"end"})}),oD(rD(n),"scrollToLatestMessages",function(){n.props.atLatestPost?n.scrollToBottom():n.props.actions.changeUnreadChunkTimeStamp("")}),oD(rD(n),"scrollToBottom",function(){n.listRef.current.scrollToItem(0,"end")});var o=P.w.CHANNEL_INTRO_MESSAGE,i=j.U();n.state={isScrolling:!1,isMobile:i,atBottom:!1,lastViewedBottom:Date.now(),postListIds:[o],topPostId:"",postMenuOpened:!1,dynamicListStyle:{willChange:"transform"}},n.listRef=E.a.createRef(),n.postListRef=E.a.createRef(),i&&(n.scrollStopAction=new Vl(n.handleScrollStop)),n.initRangeToRender=n.props.focusedPostId?[0,uD.permalink]:[0,uD.channel];var s=0;s=e.focusedPostId?n.props.postListIds.findIndex(function(e){return e===n.props.focusedPostId}):n.getNewMessagesSeparatorIndex(e.postListIds);var l=e.focusedPostId?uD.permalink:uD.channel;return n.initRangeToRender=[Math.max(s-30,0),Math.max(s+30,Math.min(e.postListIds.length-1,l))],n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aD(e,t)}(t,E.a.PureComponent),n=t,a=[{key:"getDerivedStateFromProps",value:function(e){var t,n=e.postListIds;return t=e.atOldestPost?[].concat($L(n),[P.w.CHANNEL_INTRO_MESSAGE]):e.autoRetryEnable?[].concat($L(n),[P.w.OLDER_MESSAGES_LOADER]):[].concat($L(n),[P.w.LOAD_OLDER_MESSAGES_TRIGGER]),e.atLatestPost||(t=e.autoRetryEnable?[P.w.NEWER_MESSAGES_LOADER].concat($L(t)):[P.w.LOAD_NEWER_MESSAGES_TRIGGER].concat($L(t))),{postListIds:t}}}],(r=[{key:"componentDidMount",value:function(){this.mounted=!0,this.props.actions.checkAndSetMobileView(),window.addEventListener("resize",this.handleWindowResize),QA.a.addListener(P.l.POST_LIST_SCROLL_CHANGE,this.scrollChange)}},{key:"getSnapshotBeforeUpdate",value:function(e){if(this.postListRef&&this.postListRef.current){var t=this.props.postListIds.length!==e.postListIds.length&&this.props.postListIds[0]===e.postListIds[0],n=this.props.atOldestPost!==e.atOldestPost;if((t||n)&&!this.state.atBottom){var r=this.postListRef.current;return{previousScrollTop:r.parentElement.scrollTop,previousScrollHeight:r.scrollHeight}}}return null}},{key:"componentDidUpdate",value:function(e,t,n){if(this.postListRef.current&&n){var r=this.postListRef.current.scrollHeight,a=this.props.postListIds.length!==e.postListIds.length&&this.props.postListIds[0]===e.postListIds[0],o=this.props.atOldestPost!==e.atOldestPost;if((a||o)&&!this.state.atBottom){var i=n.previousScrollTop+(r-n.previousScrollHeight);0!==i&&i-n.previousScrollTop!=0&&this.listRef.current.scrollTo(i,i-n.previousScrollTop,!0)}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,window.removeEventListener("resize",this.handleWindowResize),QA.a.removeListener(P.l.POST_LIST_SCROLL_CHANGE,this.scrollChange)}},{key:"render",value:function(){var e,t=this,n=this.props.channelId;this.props.latestAriaLabelFunc&&this.props.postListIds.indexOf(P.w.START_OF_NEW_MESSAGES)>=0&&(e=this.props.latestAriaLabelFunc(this.context.intl));var r=this.state.dynamicListStyle,a=null;return this.props.focusedPostId||(a=E.a.createElement(rx,{atBottom:this.state.atBottom,lastViewedBottom:this.state.lastViewedBottom,postIds:this.state.postListIds,onClick:this.scrollToLatestMessages,channelId:n})),E.a.createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0,"data-a11y-loop-navigation":!1,"aria-label":j.ab("accessibility.sections.centerContent","message list main region")},this.state.isMobile&&E.a.createElement(E.a.Fragment,null,E.a.createElement(Pp,{isScrolling:this.state.isScrolling,isMobile:!0,postId:this.state.topPostId}),E.a.createElement(pL,{isScrolling:this.state.isScrolling,atBottom:this.state.atBottom,onClick:this.scrollToBottom})),a,E.a.createElement("div",{role:"presentation",className:"post-list-holder-by-time",key:"postlist-"+n},E.a.createElement("div",{role:"presentation",className:"post-list__table"},E.a.createElement("div",{id:"postListContent",className:"post-list__content"},E.a.createElement("span",{className:"sr-only","aria-live":"polite"},e),E.a.createElement(DL.a,null,function(e){var n=e.height,a=e.width;return E.a.createElement(UL.a,{role:"listbox",ref:t.listRef,height:n,width:a,className:"post-list__dynamic",itemCount:t.state.postListIds.length,itemData:t.state.postListIds,itemKey:t.itemKey,overscanCountForward:sD,overscanCountBackward:iD,onScroll:t.onScroll,onItemsRendered:t.onItemsRendered,initScrollToIndex:t.initScrollToIndex,canLoadMorePosts:t.props.actions.canLoadMorePosts,skipResizeClass:"col__reply",innerRef:t.postListRef,style:eD({},dD,r),innerListStyle:pD,initRangeToRender:t.initRangeToRender,loaderId:P.w.OLDER_MESSAGES_LOADER,correctScrollToBottom:t.props.atLatestPost},t.renderRow)})))))}}])&&tD(n.prototype,r),a&&tD(n,a),t}();function fD(e){return(fD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hD(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function bD(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){hD(o,r,a,i,s,"next",e)}function s(e){hD(o,r,a,i,s,"throw",e)}i(void 0)})}}function yD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gD(e){return(gD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _D(e,t){return(_D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ED(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}oD(mD,"propTypes",{postListIds:v.a.array.isRequired,focusedPostId:v.a.string,channelId:v.a.string.isRequired,autoRetryEnable:v.a.bool,atOldestPost:v.a.bool,atLatestPost:v.a.bool,latestPostTimeStamp:v.a.number,latestAriaLabelFunc:v.a.func,actions:v.a.shape({loadOlderPosts:v.a.func.isRequired,loadNewerPosts:v.a.func.isRequired,canLoadMorePosts:v.a.func.isRequired,checkAndSetMobileView:v.a.func.isRequired,changeUnreadChunkTimeStamp:v.a.func.isRequired}).isRequired}),oD(mD,"contextTypes",{intl:Y.i.isRequired});var wD=3,OD=10,SD=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=gD(t).call(this,e),n=!a||"object"!==fD(a)&&"function"!=typeof a?vD(r):a,ED(vD(n),"postsOnLoad",function(){var e=bD(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.props.focusedPostId){e.next=5;break}return e.next=3,n.props.actions.loadPostsAround(t,n.props.focusedPostId);case 3:e.next=17;break;case 5:if(!n.props.isFirstLoad){e.next=10;break}return e.next=8,n.props.actions.loadUnreads(t);case 8:e.next=17;break;case 10:if(!n.props.latestPostTimeStamp){e.next=15;break}return e.next=13,n.props.actions.syncPostsInChannel(t,n.props.latestPostTimeStamp);case 13:e.next=17;break;case 15:return e.next=17,n.props.actions.loadLatestPosts(t);case 17:n.setState({loadingOlderPosts:!1,loadingNewerPosts:!1});case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),ED(vD(n),"callLoadPosts",function(){var e=bD(regeneratorRuntime.mark(function e(t,r,a){var o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.loadPosts({channelId:t,postId:r,type:a});case 2:if(o=e.sent,i=o.error,a===P.x.BEFORE_ID?n.setState({loadingOlderPosts:!1}):n.setState({loadingNewerPosts:!1}),!i){e.next=15;break}if(!(n.autoRetriesCount<wD)){e.next=12;break}return n.autoRetriesCount++,e.next=10,n.callLoadPosts(t,r,a);case 10:e.next=13;break;case 12:n.mounted&&n.setState({autoRetryEnable:!1});case 13:e.next=17;break;case 15:n.mounted&&n.setState({autoRetryEnable:!0}),n.state.autoRetryEnable||(n.autoRetriesCount=0);case 17:return e.abrupt("return",{error:i});case 18:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),ED(vD(n),"getOldestVisiblePostId",function(){return Object(_t.h)(n.props.postListIds)}),ED(vD(n),"getLatestVisiblePostId",function(){return Object(_t.g)(n.props.postListIds)}),ED(vD(n),"canLoadMorePosts",bD(regeneratorRuntime.mark(function e(){var t,r,a,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:P.x.BEFORE_ID,n.props.postListIds){e.next=3;break}return e.abrupt("return");case 3:if(!n.state.loadingOlderPosts&&!n.state.loadingNewerPosts){e.next=5;break}return e.abrupt("return");case 5:if(!(n.extraPagesLoaded>OD)){e.next=8;break}return n.state.autoRetryEnable&&n.setState({autoRetryEnable:!1}),e.abrupt("return");case 8:if(n.props.atOldestPost||t!==P.x.BEFORE_ID){e.next=14;break}return r=n.getOldestVisiblePostId(),e.next=12,n.getPostsBefore(r);case 12:e.next=18;break;case 14:if(n.props.atLatestPost){e.next=18;break}return a=n.getLatestVisiblePostId(),e.next=18,n.getPostsAfter(a);case 18:n.extraPagesLoaded+=1;case 19:case"end":return e.stop()}},e)}))),ED(vD(n),"getPostsBefore",bD(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.loadingOlderPosts){e.next=2;break}return e.abrupt("return");case 2:return t=n.getOldestVisiblePostId(),n.setState({loadingOlderPosts:!0}),e.next=6,n.callLoadPosts(n.props.channelId,t,P.x.BEFORE_ID);case 6:case"end":return e.stop()}},e)}))),ED(vD(n),"getPostsAfter",bD(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.loadingNewerPosts){e.next=2;break}return e.abrupt("return");case 2:return t=n.getLatestVisiblePostId(),n.setState({loadingNewerPosts:!0}),e.next=6,n.callLoadPosts(n.props.channelId,t,P.x.AFTER_ID);case 6:case"end":return e.stop()}},e)}))),n.state={loadingNewerPosts:!1,loadingOlderPosts:!1,autoRetryEnable:!0},n.autoRetriesCount=0,n.loadingMorePosts=null,n.actionsForPostList={loadOlderPosts:n.getPostsBefore,loadNewerPosts:n.getPostsAfter,checkAndSetMobileView:e.actions.checkAndSetMobileView,canLoadMorePosts:n.canLoadMorePosts,changeUnreadChunkTimeStamp:e.changeUnreadChunkTimeStamp},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_D(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.mounted=!0,this.props.channelId&&this.postsOnLoad(this.props.channelId)}},{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&this.postsOnLoad(this.props.channelId)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){return this.props.postListIds?E.a.createElement("div",{id:"post-list"},E.a.createElement("div",{ref:"postlist",className:"post-list-holder-by-time",key:"postlist-"+this.props.channelId},E.a.createElement("div",{className:"post-list__table"},E.a.createElement("div",{id:"virtualizedPostListContent",ref:"postListContent",className:"post-list__content"},E.a.createElement(mD,{loadingNewerPosts:this.state.loadingNewerPosts,loadingOlderPosts:this.state.loadingOlderPosts,atOldestPost:this.props.atOldestPost,atLatestPost:this.props.atLatestPost,focusedPostId:this.props.focusedPostId,channelId:this.props.channelId,autoRetryEnable:this.state.autoRetryEnable,actions:this.actionsForPostList,postListIds:this.props.formattedPostIds,latestPostTimeStamp:this.props.latestPostTimeStamp,latestAriaLabelFunc:this.props.latestAriaLabelFunc}))))):E.a.createElement("div",{id:"post-list"},E.a.createElement(VO.a,{position:"absolute",key:"loading"}))}}])&&yD(n.prototype,r),a&&yD(n,a),t}();ED(SD,"propTypes",{formattedPostIds:v.a.array,postListIds:v.a.array,channelId:v.a.string,focusedPostId:v.a.string,atLatestPost:v.a.bool,atOldestPost:v.a.bool,isFirstLoad:v.a.bool,latestPostTimeStamp:v.a.number,latestAriaLabelFunc:v.a.func,changeUnreadChunkTimeStamp:v.a.func.isRequired,actions:v.a.shape({loadPostsAround:v.a.func.isRequired,loadUnreads:v.a.func.isRequired,loadPosts:v.a.func.isRequired,checkAndSetMobileView:v.a.func.isRequired,syncPostsInChannel:v.a.func.isRequired,loadLatestPosts:v.a.func.isRequired}).isRequired});var CD=SD;Object(j.k)()&&(CD=LL);var PD=function(e,t){return!e.entities.posts.postsInChannel[t]},TD=Object(lE.memoizeResult)(function(e){return Object(_t.g)(e)});var jD=Object(o.f)(Object(r.connect)(function(){var e=Object($a.makeGetPostsChunkAroundPost)(),t=Object(vp.makePreparePostIdsForPostList)(),n=Object(_t.n)();return function(r,a){var o,i,s,l,c=0,u=!1,p=!1,d=r.views.channel.lastChannelViewTime[a.channelId];if((i=a.match.params.postid?e(r,a.match.params.postid,a.channelId):a.unreadChunkTimeStamp?Object($a.getUnreadPostsChunk)(r,a.channelId,a.unreadChunkTimeStamp):Object($a.getRecentPostsChunkInChannel)(r,a.channelId))&&(o=i.order,u=i.recent,p=i.oldest),o&&(s=t(r,{postIds:o,lastViewedAt:d,indicateNewMessages:!0}),o.length)){var m=TD(o),f=Object($a.getPost)(r,m);c=f.create_at,l=n(r,f)}return{lastViewedAt:d,isFirstLoad:PD(r,a.channelId),formattedPostIds:s,atLatestPost:u,atOldestPost:p,focusedPostId:a.match.params.postid,latestPostTimeStamp:c,postListIds:o,latestAriaLabelFunc:l}}},function(e){return{actions:Object(a.bindActionCreators)({loadUnreads:Ea.i,loadPosts:Ea.g,loadLatestPosts:Ea.f,loadPostsAround:Ea.h,checkAndSetMobileView:Ea.b,syncPostsInChannel:Ea.n},e)}})(CD));function kD(e){return(kD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ND(e){return(ND=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ID(e,t){return(ID=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xD=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ND(t).call(this,e),n=!a||"object"!==kD(a)&&"function"!=typeof a?RD(r):a,AD(RD(n),"changeUnreadChunkTimeStamp",function(e){n.setState({unreadChunkTimeStamp:e,loaderForChangeOfPostsChunk:!0},function(){window.requestAnimationFrame(function(){n.setState({loaderForChangeOfPostsChunk:!1})})})}),n.state={unreadChunkTimeStamp:e.lastViewedAt,loaderForChangeOfPostsChunk:!1,channelLoading:e.channelLoading},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ID(e,t)}(t,E.a.PureComponent),n=t,a=[{key:"getDerivedStateFromProps",value:function(e,t){return null===t.unreadChunkTimeStamp&&e.lastViewedAt?{unreadChunkTimeStamp:e.lastViewedAt}:e.channelLoading!==t.channelLoading?{unreadChunkTimeStamp:e.lastViewedAt,channelLoading:e.channelLoading}:null}}],(r=[{key:"render",value:function(){return this.props.channelLoading||this.state.loaderForChangeOfPostsChunk?E.a.createElement("div",{id:"post-list"},E.a.createElement(VO.a,{position:"absolute",key:"loading"})):E.a.createElement(jD,{unreadChunkTimeStamp:this.state.unreadChunkTimeStamp,channelId:this.props.channelId,changeUnreadChunkTimeStamp:this.changeUnreadChunkTimeStamp,focusedPostId:this.props.focusedPostId})}}])&&MD(n.prototype,r),a&&MD(n,a),t}();AD(xD,"propTypes",{lastViewedAt:v.a.number,channelLoading:v.a.bool,channelId:v.a.string,focusedPostId:v.a.string});var LD=function(e,t,n,r,a){if(e.postid)return!1;if(t&&n){if(t.type!==P.i.DM_CHANNEL&&t.name!==e.identifier)return!0;if(t.type===P.i.DM_CHANNEL&&r&&e.identifier!=="@".concat(r.username))return!0;var o=n.id;return!!(t.team_id&&t.team_id!==o||a&&!a[o])}return!0};var DD=Object(o.f)(Object(r.connect)(function(){return function(e,t){var n,r=Object(d.getTeamByName)(e,t.match.params.team),a=Object(m.getChannel)(e,t.channelId),o=e.views.channel.lastChannelViewTime[t.channelId];a&&(a.type===P.i.DM_CHANNEL&&a.teammate_id&&(n=Object(p.getUser)(e,a.teammate_id)),o=a.last_post_at?o:a.last_post_at);var i=Object(d.getTeamMemberships)(e);return{lastViewedAt:o,channelLoading:LD(t.match.params,a,r,n,i),channel:a}}})(xD));function UD(e){return(UD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qD(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function HD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FD(e){return(FD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GD(e,t){return(GD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WD=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=FD(t).call(this,e),n=!a||"object"!==UD(a)&&"function"!=typeof a?BD(r):a,VD(BD(n),"doPermalinkEvent",function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({valid:!1}),r=t.match.params.postid,e.next=4,n.props.actions.focusPost(r,n.props.returnTo);case 4:n.setState({valid:!0});case 5:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){qD(o,r,a,i,s,"next",e)}function s(e){qD(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()),VD(BD(n),"isStateValid",function(){return n.state.valid&&n.props.channelId&&n.props.teamName}),n.state={valid:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GD(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.doPermalinkEvent(this.props),document.body.classList.add("app__body")}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("app__body")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.match.params.postid!==e.match.params.postid&&this.doPermalinkEvent(e)}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.channelName,r=e.channelIsArchived,a=e.match,o=e.teamName,i=this.context.intl.formatMessage;return this.isStateValid()?E.a.createElement("div",{id:"app-content",className:"app__content"},E.a.createElement(KA,{channelId:t}),E.a.createElement(DD,{channelId:t,focusedPostId:a.params.postid}),E.a.createElement("div",{id:"archive-link-home"},E.a.createElement(Fi.a,{to:"/"+o+"/channels/"+n},r&&E.a.createElement(Bu.b,{id:"center_panel.permalink.archivedChannel",defaultMessage:"You are viewing an **archived channel**. "}),E.a.createElement(Y.c,{id:"center_panel.recent",defaultMessage:"Click here to jump to recent messages. "}),E.a.createElement("i",{className:"fa fa-arrow-down",title:i({id:"center_panel.recent.icon",defaultMessage:"Jump to recent messages Icon"})})))):E.a.createElement("div",{id:"app-content",className:"app__content"})}}])&&HD(n.prototype,r),a&&HD(n,a),t}();VD(WD,"propTypes",{channelId:v.a.string,channelName:v.a.string,channelIsArchived:v.a.bool,match:v.a.shape({params:v.a.shape({postid:v.a.string.isRequired}).isRequired}).isRequired,returnTo:v.a.string.isRequired,teamName:v.a.string,actions:v.a.shape({focusPost:v.a.func.isRequired}).isRequired}),VD(WD,"contextTypes",{intl:Y.i.isRequired});var zD=Object(r.connect)(function(e){var t,n=Object(d.getCurrentTeam)(e),r=Object(m.getCurrentChannel)(e),a="",o="";r&&(a=r.id,o=r.name,t=0!==r.delete_at);var i="";return n&&(i=n.name),{channelId:a,channelName:o,teamName:i,channelIsArchived:t}},function(e){return{actions:Object(a.bindActionCreators)({focusPost:Vk},e)}})(WD);function KD(e){return(KD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function QD(e,t){return!t||"object"!==KD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JD(e){return(JD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZD(e,t){return(ZD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var XD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),QD(this,JD(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZD(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return this.props.mentionCount?E.a.createElement("span",{className:"badge badge-notify"},this.props.mentionCount):this.props.messageCount?E.a.createElement("span",{className:"badge badge-notify"},""):null}}])&&YD(n.prototype,r),a&&YD(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(XD,"propTypes",{mentionCount:v.a.number.isRequired,messageCount:v.a.number.isRequired});var $D=Object(r.connect)(function(e){var t=Object(m.getUnreadsInCurrentTeam)(e);return{mentionCount:t.mentionCount,messageCount:t.messageCount}})(XD),eU=function(e){var t=e.actions.toggleLhs;return E.a.createElement("button",{key:"navbar-toggle-sidebar",type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:t},E.a.createElement("span",{className:"sr-only"},E.a.createElement(Y.c,{id:"navbar.toggle2",defaultMessage:"Toggle sidebar"})),E.a.createElement(KT.a,{className:"style--none icon icon__menu icon--sidebarHeaderTextColor"}),E.a.createElement($D,null))};eU.propTypes={actions:v.a.shape({toggleLhs:v.a.func.isRequired}).isRequired};var tU=eU,nU=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({toggleLhs:pC.c},e)}})(tU),rU=function(e){var t=e.actions.toggleRhsMenu;return E.a.createElement("button",{key:"navbar-toggle-menu",type:"button",className:"navbar-toggle navbar-right__icon menu-toggle pull-right","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:t},E.a.createElement(KT.a,null))};rU.propTypes={actions:v.a.shape({toggleRhsMenu:v.a.func.isRequired}).isRequired};var aU=rU,oU=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({toggleRhsMenu:kl.o},e)}})(aU);function iU(e){return(iU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lU(e,t){return!t||"object"!==iU(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cU(e){return(cU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uU(e,t){return(uU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pU=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lU(this,cU(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uU(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("span",this.props,E.a.createElement(Y.c,{id:"generic_icons.info",defaultMessage:"Info Icon"},function(e){return E.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 22 22",role:"icon","aria-label":e},E.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"inherit",fillRule:"evenodd"},E.a.createElement("g",{transform:"translate(-388.000000, -18.000000)",fill:"inherit"},E.a.createElement("g",null,E.a.createElement("g",{transform:"translate(381.000000, 11.000000)"},E.a.createElement("g",{transform:"translate(7.000000, 7.000000)"},E.a.createElement("path",{d:"M11,22 C4.92486775,22 0,17.0751322 0,11 C0,4.92486775 4.92486775,0 11,0 C17.0751322,0 22,4.92486775 22,11 C22,17.0751322 17.0751322,22 11,22 Z M11,20.7924685 C16.408231,20.7924685 20.7924685,16.408231 20.7924685,11 C20.7924685,5.59176898 16.408231,1.20753149 11,1.20753149 C5.59176898,1.20753149 1.20753149,5.59176898 1.20753149,11 C1.20753149,16.408231 5.59176898,20.7924685 11,20.7924685 Z M10.1572266,16.0625 L10.1572266,8.69335938 L11.3466797,8.69335938 L11.3466797,16.0625 L10.1572266,16.0625 Z M10.7519531,7.50390625 C10.3417969,7.50390625 10,7.16210938 10,6.75195312 C10,6.33496094 10.3417969,6 10.7519531,6 C11.1689453,6 11.5039062,6.33496094 11.5039062,6.75195312 C11.5039062,7.16210938 11.1689453,7.50390625 10.7519531,7.50390625 Z"})))))))}))}}])&&sU(n.prototype,r),a&&sU(n,a),t}();function dU(e){return(dU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fU(e){return(fU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bU(e,t){return(bU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gU={mentionHighlight:!1},vU=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=fU(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==dU(a)&&"function"!=typeof a?hU(r):a,yU(hU(n),"showEditChannelHeaderModal",function(){n.refs.headerOverlay&&n.refs.headerOverlay.hide();var e=n.props,t=e.actions,r=e.channel,a={modalId:P.r.EDIT_CHANNEL_HEADER,dialogType:rM,dialogProps:{channel:r}};t.openModal(a)}),yU(hU(n),"hide",function(){n.refs.headerOverlay&&n.refs.headerOverlay.hide()}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bU(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.channel,n=e.isReadOnly,r=null;if(t.header)r=E.a.createElement(Oa.a,{message:t.header,options:gU});else{var a;if(!n){var o=E.a.createElement("a",{href:"#",onClick:this.showEditChannelHeaderModal},E.a.createElement(Y.c,{id:"navbar.click",defaultMessage:"Click here"}));a=E.a.createElement(E.a.Fragment,null,E.a.createElement("br",null),E.a.createElement(Y.c,{id:"navbar.clickToAddHeader",defaultMessage:"{clickHere} to add one.",values:{clickHere:o}}))}r=E.a.createElement("div",null,E.a.createElement(Y.c,{id:"navbar.noHeader",defaultMessage:"No channel header yet."}),a)}var i=E.a.createElement(Gy.a,{bsStyle:"info",placement:"bottom",className:"navbar__popover",id:"header-popover"},r,E.a.createElement("div",{className:"close visible-xs-block",onClick:this.hide},""));return E.a.createElement(_c.a,{ref:"headerOverlay",trigger:"click",placement:"bottom",overlay:i,className:"description",rootClose:!0},E.a.createElement("button",{className:"navbar-toggle navbar-right__icon navbar-info-button pull-right"},E.a.createElement(pU,{className:"icon icon__info","aria-hidden":"true"})))}}])&&mU(n.prototype,r),a&&mU(n,a),t}();yU(vU,"propTypes",{channel:v.a.object.isRequired,isReadOnly:v.a.bool.isRequired,actions:v.a.shape({openModal:v.a.func.isRequired}).isRequired});var _U=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({openModal:U.b},e)}})(vU);function EU(e){return(EU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OU(e){return(OU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CU(e,t){return(CU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function PU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TU=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=OU(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==EU(a)&&"function"!=typeof a?SU(r):a,PU(SU(n),"handleClick",function(){n.props.actions.updateRhsState(P.A.SEARCH)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CU(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("button",{type:"button",className:"navbar-toggle navbar-right__icon navbar-search pull-right",onClick:this.handleClick},E.a.createElement(nv.a,{className:"icon icon__search","aria-hidden":"true"}))}}])&&wU(n.prototype,r),a&&wU(n,a),t}();PU(TU,"propTypes",{actions:v.a.shape({updateRhsState:v.a.func.isRequired}).isRequired});var jU=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({updateRhsState:kl.q},e)}})(TU);function kU(e){return(kU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function NU(e){return(NU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IU(e,t){return(IU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xU=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=NU(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==kU(a)&&"function"!=typeof a?RU(r):a,AU(RU(n),"handleClick",function(){var e=n.props,t=e.user,r=e.channel;(0,e.actions.updateChannelNotifyProps)(t.id,r.id,{mark_unread:P.s.ALL})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&IU(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"render",value:function(){return E.a.createElement("button",{type:"button",className:"navbar-toggle icon icon__mute",onClick:this.handleClick},E.a.createElement("span",{className:"fa fa-bell-slash-o icon"}))}}])&&MU(n.prototype,r),a&&MU(n,a),t}();AU(xU,"propTypes",{user:v.a.shape({id:v.a.string.isRequired}).isRequired,channel:v.a.shape({id:v.a.string.isRequired}).isRequired,actions:v.a.shape({updateChannelNotifyProps:v.a.func.isRequired}).isRequired});var LU=Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({updateChannelNotifyProps:s.updateChannelNotifyProps},e)}})(xU);function DU(e){return(DU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qU(e){return(qU=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HU(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FU(e,t){return(FU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var GU=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=qU(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==DU(a)&&"function"!=typeof a?HU(r):a,BU(HU(n),"hideSidebars",function(e){j.U()&&(n.props.actions.closeRhs(),"navbar-toggle"!==e.target.className&&"icon-bar"!==e.target.className&&(n.props.actions.closeLhs(),n.props.actions.closeRhsMenu()))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FU(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){document.querySelector(".inner-wrap").addEventListener("click",this.hideSidebars)}},{key:"componentWillUnmount",value:function(){document.querySelector(".inner-wrap").removeEventListener("click",this.hideSidebars)}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.channel,r=e.isMuted;return E.a.createElement("nav",{id:"navbar",className:"navbar navbar-default navbar-fixed-top",role:"navigation"},E.a.createElement("div",{className:"container-fluid theme"},E.a.createElement("div",{className:"navbar-header"},E.a.createElement(nU,null),n&&E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"navbar-brand"},E.a.createElement(vA,null),r&&E.a.createElement(LU,{user:t,channel:n})),E.a.createElement(_U,{ref:"headerOverlay",channel:n,isReadOnly:this.props.isReadOnly}),E.a.createElement(jU,null),E.a.createElement(UN,{channel:n,isDropdown:!1})),E.a.createElement(oU,null))))}}])&&UU(n.prototype,r),a&&UU(n,a),t}();BU(GU,"propTypes",{user:v.a.object.isRequired,channel:v.a.object,isReadOnly:v.a.bool,isMuted:v.a.bool,actions:v.a.shape({closeLhs:v.a.func.isRequired,closeRhs:v.a.func.isRequired,closeRhsMenu:v.a.func.isRequired}).isRequired});var VU=Object(Kl.a)(m.getMyCurrentChannelMembership,function(e){return Object(zo.isChannelMuted)(e)}),WU=Object(r.connect)(function(e){return{user:Object(p.getCurrentUser)(e),channel:Object(m.getCurrentChannel)(e),isMuted:VU(e),isReadOnly:Object(m.isCurrentChannelReadOnly)(e)}},function(e){return{actions:Object(a.bindActionCreators)({closeLhs:pC.a,closeRhs:kl.b,closeRhsMenu:kl.a},e)}})(GU);function zU(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function KU(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){zU(o,r,a,i,s,"next",e)}function s(e){zU(o,r,a,i,s,"throw",e)}i(void 0)})}}var YU=26,QU=40,JU=54;function ZU(e){var t=e.match,n=e.history;return function(e,r){var a=r(),o=t.params,l=o.path,c=o.identifier,u=o.team;if(c){var f=Object(d.getTeamByName)(a,u);if(f)if("channels"===l)if(c.length===YU){var h=Object(m.getChannelByName)(a,c),b=Object(m.getOtherChannels)(a).find(function(e){return e.name===c});e(h||b?XU(t,n):function(e,t){return n=KU(regeneratorRuntime.mark(function n(r,a){var o,i,l,c,u,f,h,b,y,g;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),i=e.params,l=i.team,c=i.identifier,u=c.toLowerCase(),f=Object(m.getChannel)(o,u),h=o.entities.channels.myMembers[u],b=Object(d.getTeamByName)(o,l),f&&h){n.next=16;break}return n.next=9,r(Object(s.joinChannel)(Object(p.getCurrentUserId)(o),b.id,u,null));case 9:if(y=n.sent,g=y.data,!y.error){n.next=15;break}return aq(e,t,Object(m.getRedirectChannelNameForTeam)(o,b.id)),n.abrupt("return");case 15:f=g.channel;case 16:f.type===P.i.DM_CHANNEL?r($U(e,t,j.E(f.name))):f.type===P.i.GM_CHANNEL?t.replace("/".concat(l,"/messages/").concat(f.name)):t.replace("/".concat(l,"/channels/").concat(f.name));case 17:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)};var n}(t,n))}else c.length===QU?e(tq(t,n)):c.length===JU?e(eq(t,n)):e(XU(t,n));else"messages"===l&&(0===c.indexOf("@")?e(function(e,t){return n=KU(regeneratorRuntime.mark(function n(r,a){var o,s,l,c,u,f,h,b,y,g,v,_;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),s=e.params,l=s.team,c=s.identifier,u=c.slice(1,c.length).toLowerCase(),f=Object(d.getTeamByName)(o,l),h=Object(p.getUserByUsername)(o,u)){n.next=15;break}return n.next=8,r(Object(i.getUserByUsername)(u));case 8:if(b=n.sent,y=b.data,!b.error){n.next=14;break}return rq(e,t,Object(m.getRedirectChannelNameForTeam)(o,f.id)),n.abrupt("return");case 14:h=y;case 15:return n.next=17,r(Object(Yo.e)(h.id));case 17:if(g=n.sent,v=g.error,_=g.data,!v){n.next=23;break}return rq(e,t,Object(m.getRedirectChannelNameForTeam)(o,f.id)),n.abrupt("return");case 23:nq(_);case 24:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)};var n}(t,n)):c.indexOf("@")>0?e(function(e,t){return n=KU(regeneratorRuntime.mark(function n(r,a){var o,s,l,c,u,f,h,b,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),s=e.params,l=s.team,c=s.identifier,u=c.toLowerCase(),f=Object(d.getTeamByName)(o,l),h=Object(p.getUserByEmail)(o,u)){n.next=15;break}return n.next=8,r(Object(i.getUserByEmail)(u));case 8:if(b=n.sent,y=b.data,!b.error){n.next=14;break}return rq(e,t,Object(m.getRedirectChannelNameForTeam)(o,f.id)),n.abrupt("return");case 14:h=y;case 15:t.replace("/".concat(l,"/messages/@").concat(h.username));case 16:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)};var n}(t,n)):c.length===YU?e($U(t,n,c)):c.length===QU?e(tq(t,n)):rq(t,n,Object(m.getRedirectChannelNameForTeam)(a,f.id)))}}}function XU(e,t){return function(){var n=KU(regeneratorRuntime.mark(function n(r,a){var o,i,l,c,u,f,h,b,y,g,v,_;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),i=e.params,l=i.team,c=i.identifier,u=c.toLowerCase(),f=Object(d.getTeamByName)(o,l)){n.next=6;break}return n.abrupt("return");case 6:if((h=Object(m.getChannelsNameMapInTeam)(o,f.id)[u])&&(b=o.entities.channels.myMembers[h.id]),h&&b){n.next=27;break}return n.next=11,r(Object(s.joinChannel)(Object(p.getCurrentUserId)(o),f.id,null,u));case 11:if(y=n.sent,g=y.data,!y.error){n.next=26;break}return n.next=17,r(Object(s.getChannelByNameAndTeamName)(l,u,!0));case 17:if(v=n.sent,_=v.data,!v.error&&0!==_.delete_at){n.next=23;break}return aq(e,t,Object(m.getRedirectChannelNameForTeam)(o,f.id)),n.abrupt("return");case 23:h=_,n.next=27;break;case 26:h=g.channel;case 27:h.type===P.i.DM_CHANNEL?r(eq(e,t)):h.type===P.i.GM_CHANNEL?t.replace("/".concat(l,"/messages/").concat(h.name)):nq(h);case 28:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()}function $U(e,t,n){return function(){var r=KU(regeneratorRuntime.mark(function r(a,o){var s,l,c,u,f,h;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s=o(),l=e.params.team,c=Object(d.getTeamByName)(s,l),u=Object(p.getUser)(s,n)){r.next=14;break}return r.next=7,a(Object(i.getUser)(n));case 7:if(f=r.sent,h=f.data,!f.error){r.next=13;break}return rq(e,t,Object(m.getRedirectChannelNameForTeam)(s,c.id)),r.abrupt("return");case 13:u=h;case 14:t.replace("/".concat(l,"/messages/@").concat(u.username));case 15:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}()}function eq(e,t){return function(){var n=KU(regeneratorRuntime.mark(function n(r,a){var o,s,l,c,u,f,h,b,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),s=e.params,l=s.team,c=s.identifier,u=j.E(c.toLowerCase(),Object(p.getCurrentUserId)(a())),f=Object(d.getTeamByName)(o,l),h=Object(p.getUser)(o,u)){n.next=15;break}return n.next=8,r(Object(i.getUser)(u));case 8:if(b=n.sent,y=b.data,!b.error){n.next=14;break}return rq(e,t,Object(m.getRedirectChannelNameForTeam)(o,f.id)),n.abrupt("return");case 14:h=y;case 15:t.replace("/".concat(l,"/messages/@").concat(h.username));case 16:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()}function tq(e,t){return function(){var n=KU(regeneratorRuntime.mark(function n(r,a){var o,i,l,c,u,f,h,b,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),i=e.params,l=i.identifier,c=i.team,u=l.toLowerCase(),t.replace(e.url.replace("/channels/","/messages/")),f=Object(m.getChannelByName)(o,u),h=Object(d.getTeamByName)(o,c),f){n.next=16;break}return n.next=9,r(Object(s.joinChannel)(Object(p.getCurrentUserId)(o),h.id,null,u));case 9:if(b=n.sent,y=b.data,!b.error){n.next=15;break}return rq(e,t,Object(m.getRedirectChannelNameForTeam)(o,h.id)),n.abrupt("return");case 15:f=y.channel;case 16:r(Object(s.markGroupChannelOpen)(f.id)),nq(f);case 18:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()}function nq(e){C.b(e)}function rq(e,t,n){var r=e.params.team;t.push(r?"/".concat(r,"/channels/").concat(n):"/")}function aq(e,t,n){var r=e.params.team;t.push(r?"/error?type=channel_not_found&returnTo=/".concat(r,"/channels/").concat(n):"/")}var oq=n(207),iq=n.n(oq);function sq(e){return(sq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cq(e,t){return!t||"object"!==sq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uq(e){return(uq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pq(e,t){return(pq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=function(n){function r(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=cq(this,uq(r).call(this,e,t))).state={shouldRender:!1},n}var a,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pq(e,t)}(r,E.a.Component),a=r,(o=[{key:"componentDidMount",value:function(){var e=this;window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){return e.setState({shouldRender:!0})})})}},{key:"render",value:function(){return this.state.shouldRender?E.a.createElement(e,this.props):t}}])&&lq(a.prototype,o),i&&lq(a,i),r}();return iq()(n,e)}n(2081);function mq(e){return(mq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fq(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){wq(e,t,n[t])})}return e}function bq(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function yq(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){bq(o,r,a,i,s,"next",e)}function s(e){bq(o,r,a,i,s,"throw",e)}i(void 0)})}}function gq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vq(e){return(vq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eq(e,t){return(Eq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oq=P.Q.KeyCodes;function Sq(e){return String.prototype.trimRight?e.trimRight():e.replace(/\s*$/,"")}var Cq=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=vq(t).call(this,e),n=!a||"object"!==mq(a)&&"function"!=typeof a?_q(r):a,wq(_q(n),"updatePreview",function(e){n.setState({showPreview:e})}),wq(_q(n),"setOrientationListeners",function(){window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.addEventListener("change",n.onOrientationChange):"onorientationchange"in window&&window.addEventListener("orientationchange",n.onOrientationChange)}),wq(_q(n),"removeOrientationListeners",function(){window.screen.orientation&&"onchange"in window.screen.orientation?window.screen.orientation.removeEventListener("change",n.onOrientationChange):"onorientationchange"in window&&window.removeEventListener("orientationchange",n.onOrientationChange)}),wq(_q(n),"onOrientationChange",function(){if(T.k()){var e=n.state.orientation,t="portrait";window.orientation&&(t=90===Math.abs(window.orientation)?"landscape":"portrait"),window.screen.orientation&&(t=window.screen.orientation.type.split("-")[0]),n.setState({orientation:t}),e&&t!==e&&"post_textbox"===(document.activeElement||{}).id&&n.refs.textbox.getWrappedInstance().blur()}}),wq(_q(n),"handlePostError",function(e){n.setState({postError:e})}),wq(_q(n),"toggleEmojiPicker",function(){n.setState({showEmojiPicker:!n.state.showEmojiPicker})}),wq(_q(n),"hideEmojiPicker",function(){n.handleEmojiClose()}),wq(_q(n),"doSubmit",function(){var e=yq(regeneratorRuntime.mark(function e(t){var r,a,o,i,s,l,c,u,p,d,m,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props.currentChannel.id,t&&t.preventDefault(),!(n.props.draft.uploadsInProgress.length>0||n.state.submitting)){e.next=4;break}return e.abrupt("return");case 4:if(a=n.state.message,o=!1,(i=n.state.serverError)&&Object(_t.k)(i)&&i.submittedMessage===a&&(a=i.submittedMessage,o=!0),(s={}).file_ids=[],s.message=a,0!==s.message.trim().length||0!==n.props.draft.fileInfos.length){e.next=13;break}return e.abrupt("return");case 13:if(!n.state.postError){e.next=17;break}return n.setState({errorClass:"animation--highlight"}),setTimeout(function(){n.setState({errorClass:null})},P.Q.ANIMATION_TIMEOUT),e.abrupt("return");case 17:if(n.props.actions.addMessageIntoHistory(n.state.message),n.setState({submitting:!0,serverError:null}),l=j.a.exec(s.message),0!==s.message.indexOf("/")||o){e.next=50;break}return n.setState({message:"",postError:null,enableSendButton:!1}),(c={}).channel_id=r,c.team_id=n.props.currentTeamId,e.next=27,n.props.actions.runSlashCommandWillBePostedHooks(s.message,c);case 27:if(!(u=e.sent).error){e.next=32;break}n.setState({serverError:hq({},u.error,{submittedMessage:s.message}),message:s.message}),e.next=48;break;case 32:if(u.data.message||u.data.args){e.next=35;break}e.next=48;break;case 35:return s.message=u.data.message,c=u.data.args,e.next=39,n.props.actions.executeCommand(s.message,c);case 39:if(p=e.sent,!(d=p.error)){e.next=48;break}if(!d.sendMessage){e.next=47;break}return e.next=45,n.sendMessage(s);case 45:e.next=48;break;case 47:n.setState({serverError:hq({},d,{submittedMessage:s.message}),message:s.message});case 48:e.next=60;break;case 50:if(!l||!n.props.emojiMap.has(l[2])){e.next=55;break}n.sendReaction(l),n.setState({message:""}),e.next=60;break;case 55:return e.next=57,n.sendMessage(s);case 57:m=e.sent,m.error||n.setState({message:""});case 60:n.setState({submitting:!1,postError:null,enableSendButton:!1}),n.props.actions.setDraft(P.G.DRAFT+r,null),n.draftsForChannel[r]=null,150,f=Date.now()-n.lastBlurAt<150,n.focusTextbox(f);case 66:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),wq(_q(n),"handleNotifyAllConfirmation",function(e){n.hideNotifyAllModal(),n.doSubmit(e)}),wq(_q(n),"hideNotifyAllModal",function(){n.setState({showConfirmModal:!1})}),wq(_q(n),"showNotifyAllModal",function(){n.setState({showConfirmModal:!0})}),wq(_q(n),"getStatusFromSlashCommand",function(){var e=n.state.message.split(" ");return e.length>0?e[0].substring(1):""}),wq(_q(n),"isStatusSlashCommand",function(e){return"online"===e||"away"===e||"dnd"===e||"offline"===e}),wq(_q(n),"handleSubmit",function(){var e=yq(regeneratorRuntime.mark(function e(t){var r,a,o,i,s,l,c,u,p,d,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.currentChannel,o=r.userIsOutOfOffice,i=n.props.currentChannelMembersCount,!(n.props.enableConfirmNotificationsToChannel&&i>P.Q.NOTIFY_ALL_MEMBERS&&Object(_t.c)(n.state.message))){e.next=12;break}if(!n.props.isTimezoneEnabled){e.next=10;break}return e.next=7,n.props.actions.getChannelTimezones(n.props.currentChannel.id);case 7:s=e.sent,(l=s.data)?n.setState({channelTimezoneCount:l.length}):n.setState({channelTimezoneCount:0});case 10:return n.showNotifyAllModal(),e.abrupt("return");case 12:if(c=n.getStatusFromSlashCommand(),!o||!n.isStatusSlashCommand(c)){e.next=18;break}return u={ModalId:P.r.RESET_STATUS,dialogType:gl,dialogProps:{newStatus:c}},n.props.actions.openModal(u),n.setState({message:""}),e.abrupt("return");case 18:if("/header"!==Sq(n.state.message)){e.next=23;break}return p={modalId:P.r.EDIT_CHANNEL_HEADER,dialogType:rM,dialogProps:{channel:a}},n.props.actions.openModal(p),n.setState({message:""}),e.abrupt("return");case 23:if((d=a.type===P.Q.DM_CHANNEL||a.type===P.Q.GM_CHANNEL)||"/purpose"!==Sq(n.state.message)){e.next=29;break}return m={modalId:P.r.EDIT_CHANNEL_PURPOSE,dialogType:SR,dialogProps:{channel:a}},n.props.actions.openModal(m),n.setState({message:""}),e.abrupt("return");case 29:if(d||"/rename"!==Sq(n.state.message)){e.next=33;break}return C.i(a),n.setState({message:""}),e.abrupt("return");case 33:return e.next=35,n.doSubmit(t);case 35:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),wq(_q(n),"sendMessage",function(){var e=yq(regeneratorRuntime.mark(function e(t){var r,a,o,i,s,l,c,u,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props,a=r.actions,o=r.currentChannel,i=r.currentUserId,s=r.draft,(l=t).channel_id=o.id,c=j.D(),u=i,l.pending_post_id="".concat(u,":").concat(c),l.user_id=u,l.create_at=c,l.parent_id=n.state.parentId,l.metadata={},l.props={},e.next=13,a.runMessageWillBePostedHooks(l);case 13:if(!(p=e.sent).error){e.next=17;break}return n.setState({serverError:p.error,submitting:!1}),e.abrupt("return",p);case 17:return l=p.data,a.onSubmitPost(l,s.fileInfos),a.scrollPostListToBottom(),n.setState({submitting:!1}),e.abrupt("return",{data:!0});case 22:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),wq(_q(n),"focusTextbox",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!n.refs.textbox||!e&&T.m()||n.refs.textbox.getWrappedInstance().focus()}),wq(_q(n),"postMsgKeyPress",function(e){var t=n.props,r=t.ctrlSend,a=t.codeBlockOnCtrlEnter,o=Object(_t.o)(e,n.state.message,r,a,Date.now(),n.lastChannelSwitchAt),i=o.allowSending,s=o.withClosedCodeBlock,l=o.ignoreKeyPress,c=o.message;if(l)return e.preventDefault(),void e.stopPropagation();i&&(e.persist(),n.refs.textbox&&n.refs.textbox.getWrappedInstance().blur(),s&&c?n.setState({message:c},function(){return n.handleSubmit(e)}):n.handleSubmit(e),n.updatePreview(!1)),n.emitTypingEvent()}),wq(_q(n),"emitTypingEvent",function(){var e=n.props.currentChannel.id;C.d(e,"")}),wq(_q(n),"handleChange",function(e){var t=e.target.value,r=n.props.currentChannel.id,a=n.handleEnableSendButton(t,n.props.draft.fileInfos),o=n.state.serverError;Object(_t.k)(o)&&(o=null),n.setState({message:t,enableSendButton:a,serverError:o});var i=hq({},n.props.draft,{message:t});n.props.actions.setDraft(P.G.DRAFT+r,i),n.draftsForChannel[r]=i}),wq(_q(n),"pasteHandler",function(e){if(e.clipboardData&&e.clipboardData.items&&"post_textbox"===e.target.id){var t=yc(e.clipboardData);if(t){e.preventDefault();var r=vc(t,n.state.message.trim());n.setState({message:r})}}}),wq(_q(n),"handleFileUploadChange",function(){n.focusTextbox()}),wq(_q(n),"handleUploadStart",function(e,t){var r=[].concat(fq(n.props.draft.uploadsInProgress),fq(e)),a=hq({},n.props.draft,{uploadsInProgress:r});n.props.actions.setDraft(P.G.DRAFT+t,a),n.draftsForChannel[t]=a,n.focusTextbox()}),wq(_q(n),"handleUploadProgress",function(e){var t=e.clientId,r=e.name,a=e.percent,o=e.type,i=hq({},n.state.uploadsProgressPercent,wq({},t,{percent:a,name:r,type:o}));n.setState({uploadsProgressPercent:i})}),wq(_q(n),"handleFileUploadComplete",function(e,t,r){for(var a=hq({},n.draftsForChannel[r]),o=0;o<t.length;o++)a.uploadsInProgress&&function(){var e=a.uploadsInProgress.indexOf(t[o]);-1!==e&&(a.uploadsInProgress=a.uploadsInProgress.filter(function(t,n){return e!==n}))}();a.fileInfos&&(a.fileInfos=Object(bc.sortFileInfos)(a.fileInfos.concat(e),n.props.locale)),n.draftsForChannel[r]=a,n.props.actions.setDraft(P.G.DRAFT+r,a);var i=n.handleEnableSendButton(n.state.message,a.fileInfos);n.setState({enableSendButton:i})}),wq(_q(n),"handleUploadError",function(e,t,r){var a=hq({},n.draftsForChannel[r]),o=e;if("string"==typeof e&&(o=new Error(e)),-1!==t&&a.uploadsInProgress){var i=a.uploadsInProgress.indexOf(t);if(-1!==i){var s=a.uploadsInProgress.filter(function(e,t){return i!==t}),l=hq({},a,{uploadsInProgress:s});n.props.actions.setDraft(P.G.DRAFT+r,l),n.draftsForChannel[r]=l}}n.setState({serverError:o})}),wq(_q(n),"removePreview",function(e){var t={},r=hq({},n.props.draft),a=n.props.currentChannel.id;n.setState({serverError:null});var o=r.fileInfos.findIndex(function(t){return t.id===e});if(-1===o){if(-1!==(o=r.uploadsInProgress.indexOf(e))){var i=r.uploadsInProgress.filter(function(e,t){return o!==t});t=hq({},r,{uploadsInProgress:i}),n.refs.fileUpload&&n.refs.fileUpload.getWrappedInstance()&&n.refs.fileUpload.getWrappedInstance().cancelUpload(e)}}else{var s=r.fileInfos.filter(function(e,t){return o!==t});t=hq({},r,{fileInfos:s})}n.props.actions.setDraft(P.G.DRAFT+a,t),n.draftsForChannel[a]=t;var l=n.handleEnableSendButton(n.state.message,t.fileInfos);n.setState({enableSendButton:l}),n.handleFileUploadChange()}),wq(_q(n),"focusTextboxIfNecessary",function(e){n.props.rhsExpanded||document.getElementsByClassName("channel-switch-modal").length||Object(_t.p)(e,document.activeElement)&&n.focusTextbox()}),wq(_q(n),"documentKeyHandler",function(e){if((e.ctrlKey||e.metaKey)&&j.S(e,Oq.FORWARD_SLASH))return e.preventDefault(),void C.n();n.focusTextboxIfNecessary(e)}),wq(_q(n),"getFileCount",function(){var e=n.props.draft;return e.fileInfos.length+e.uploadsInProgress.length}),wq(_q(n),"getFileUploadTarget",function(){return n.refs.textbox?n.refs.textbox.getWrappedInstance():null}),wq(_q(n),"getCreatePostControls",function(){return n.refs.createPostControls}),wq(_q(n),"handleKeyDown",function(e){var t=e.ctrlKey||e.metaKey,r=0===n.state.message.length,a=0===n.props.draft.message.length,o=(n.props.ctrlSend||n.props.codeBlockOnCtrlEnter)&&j.S(e,Oq.ENTER)&&t,i=!t&&!e.altKey&&!e.shiftKey&&j.S(e,Oq.UP),s=!t&&!e.altKey&&e.shiftKey&&j.S(e,Oq.UP),l=t&&!e.altKey&&!e.shiftKey;o?n.postMsgKeyPress(e):i&&r?n.editLastPost(e):s&&r?n.replyToLastPost(e):l&&a&&j.S(e,Oq.UP)?n.loadPrevMessage(e):l&&a&&j.S(e,Oq.DOWN)&&n.loadNextMessage(e)}),wq(_q(n),"editLastPost",function(e){e.preventDefault();var t,r=n.props.currentUsersLatestPost;r&&(t=r.root_id&&r.root_id.length>0?j.ab("create_post.comment",L.Posts.MESSAGE_TYPES.COMMENT):j.ab("create_post.post",L.Posts.MESSAGE_TYPES.POST),n.refs.textbox&&n.refs.textbox.getWrappedInstance().blur(),n.props.actions.setEditingPost(r.id,n.props.commentCountForPost,"post_textbox",t))}),wq(_q(n),"replyToLastPost",function(e){e.preventDefault();var t=n.props.latestReplyablePostId,r=document.getElementById("reply_textbox");r&&r.focus(),t&&n.props.actions.selectPostFromRightHandSideSearchByPostId(t)}),wq(_q(n),"loadPrevMessage",function(e){e.preventDefault(),n.props.actions.moveHistoryIndexBack(L.Posts.MESSAGE_TYPES.POST).then(function(){return n.fillMessageFromHistory()})}),wq(_q(n),"loadNextMessage",function(e){e.preventDefault(),n.props.actions.moveHistoryIndexForward(L.Posts.MESSAGE_TYPES.POST).then(function(){return n.fillMessageFromHistory()})}),wq(_q(n),"handleBlur",function(){n.lastBlurAt=Date.now()}),wq(_q(n),"showPostDeletedModal",function(){n.setState({showPostDeletedModal:!0})}),wq(_q(n),"hidePostDeletedModal",function(){n.setState({showPostDeletedModal:!1})}),wq(_q(n),"handleEmojiClose",function(){n.setState({showEmojiPicker:!1})}),wq(_q(n),"handleEmojiClick",function(e){var t=e.name||e.aliases[0];if(t){if(""===n.state.message)n.setState({message:":"+t+": "});else{var r=/\s+$/.test(n.state.message)?n.state.message+":"+t+": ":n.state.message+" :"+t+": ";n.setState({message:r})}n.handleEmojiClose()}}),wq(_q(n),"handleGifClick",function(e){if(""===n.state.message)n.setState({message:e});else{var t=/\s+$/.test(n.state.message)?n.state.message+e:n.state.message+" "+e;n.setState({message:t})}n.handleEmojiClose()}),wq(_q(n),"handleHeightChange",function(e,t){n.setState({renderScrollbar:e>t})}),n.state={message:n.props.draft.message,submitting:!1,showPostDeletedModal:!1,enableSendButton:!1,showEmojiPicker:!1,showConfirmModal:!1,channelTimezoneCount:0,showPreview:!1,uploadsProgressPercent:{},renderScrollbar:!1,orientation:null},n.lastBlurAt=0,n.lastChannelSwitchAt=0,n.draftsForChannel={},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eq(e,t)}(t,E.a.Component),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this.handleEnableSendButton(this.state.message,this.props.draft.fileInfos);this.props.actions.clearDraftUploads(P.G.DRAFT,function(e,t){return t?hq({},t,{uploadsInProgress:[]}):t}),this.onOrientationChange(),this.setState({enableSendButton:e})}},{key:"componentDidMount",value:function(){this.focusTextbox(),document.addEventListener("paste",this.pasteHandler),document.addEventListener("keydown",this.documentKeyHandler),this.setOrientationListeners()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.currentChannel.id!==this.props.currentChannel.id){var t=e.draft;this.setState({message:t.message,submitting:!1,serverError:null,showPreview:!1})}}},{key:"componentDidUpdate",value:function(e,t){e.currentChannel.id!==this.props.currentChannel.id&&(this.lastChannelSwitchAt=Date.now(),this.focusTextbox()),t.showEmojiPicker&&!this.state.showEmojiPicker&&this.focusTextbox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("paste",this.pasteHandler),document.removeEventListener("keydown",this.documentKeyHandler),this.removeOrientationListeners()}},{key:"sendReaction",value:function(e){var t=this.props.currentChannel.id,n=e[1],r=e[2],a=this.props.latestReplyablePostId;a&&"+"===n?this.props.actions.addReaction(a,r):a&&"-"===n&&this.props.actions.removeReaction(a,r),this.props.actions.setDraft(P.G.DRAFT+t,null),this.draftsForChannel[t]=null}},{key:"fillMessageFromHistory",value:function(){var e=this.props.messageInHistoryItem;e&&this.setState({message:e})}},{key:"createTutorialTip",value:function(){var e=[];return e.push(E.a.createElement("div",null,E.a.createElement("h4",null,E.a.createElement(Y.c,{id:"create_post.tutorialTip.title",defaultMessage:"Sending Messages"})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"create_post.tutorialTip1",defaultMessage:"Type here to write a message and press **Enter** to post it."})),E.a.createElement("p",null,E.a.createElement(Bu.b,{id:"create_post.tutorialTip2",defaultMessage:"Click the **Attachment** button to upload an image or a file."})))),E.a.createElement(oE,{id:"postTextboxTipMessage",placement:"top",screens:e,overlayClass:"tip-overlay--chat",diagnosticsTag:"tutorial_tip_1_sending_messages"})}},{key:"handleEnableSendButton",value:function(e,t){return 0!==e.trim().length||0!==t.length}},{key:"render",value:function(){var e=this.props,t=e.currentChannel,n=e.currentChannelMembersCount,r=e.draft,a=e.fullWidthTextBox,o=e.showTutorialTip,i=e.readOnlyChannel,s=this.context.intl.formatMessage,l=n-1,c=this.state.renderScrollbar,u=j.ab("accessibility.sections.centerFooter","message input complimentary region"),p=E.a.createElement(Y.c,{id:"notify_all.title.confirm",defaultMessage:"Confirm sending notifications to entire channel"}),d=E.a.createElement(Y.c,{id:"notify_all.confirm",defaultMessage:"Confirm"}),m="";m=this.state.channelTimezoneCount&&this.props.isTimezoneEnabled?E.a.createElement(Bu.b,{id:"notify_all.question_timezone",defaultMessage:"By using @all or @channel you are about to send notifications to **{totalMembers} people** in **{timezones, number} {timezones, plural, one {timezone} other {timezones}}**. Are you sure you want to do this?",values:{totalMembers:l,timezones:this.state.channelTimezoneCount}}):E.a.createElement(Y.c,{id:"notify_all.question",defaultMessage:"By using @all or @channel you are about to send notifications to {totalMembers} people. Are you sure you want to do this?",values:{totalMembers:l}});var f=null;this.state.serverError&&(f=E.a.createElement(Ju,{id:"postServerError",error:this.state.serverError,submittedMessage:this.state.serverError.submittedMessage,handleSubmit:this.handleSubmit}));var h=null;if(this.state.postError){var b="post-error"+(this.state.errorClass?" "+this.state.errorClass:"");h=E.a.createElement("label",{className:b},this.state.postError)}var y=null;!i&&(r.fileInfos.length>0||r.uploadsInProgress.length>0)&&(y=E.a.createElement(nu,{fileInfos:r.fileInfos,onRemove:this.removePreview,uploadsInProgress:r.uploadsInProgress,uploadsProgressPercent:this.state.uploadsProgressPercent}));var g="post-create-footer";h&&(g+=" has-error");var v=null;o&&(v=this.createTutorialTip());var _="";a||(_="center");var w="send-button theme";this.state.enableSendButton||(w+=" disabled");var O,S="";this.props.canUploadFiles||(S=" post-create--attachment-disabled"),i||this.state.showPreview||(O=E.a.createElement(Cu,{ref:"fileUpload",fileCount:this.getFileCount(),getTarget:this.getFileUploadTarget,onFileUploadChange:this.handleFileUploadChange,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,onUploadProgress:this.handleUploadProgress,postType:"post"}));var C,P=null,T=s({id:"emoji_picker.emojiPicker",defaultMessage:"Emoji Picker"}).toLowerCase();!this.props.enableEmojiPicker||i||this.state.showPreview||(P=E.a.createElement("div",null,E.a.createElement(va,{show:this.state.showEmojiPicker,target:this.getCreatePostControls,onHide:this.hideEmojiPicker,onEmojiClose:this.handleEmojiClose,onEmojiClick:this.handleEmojiClick,onGifClick:this.handleGifClick,enableGifPicker:this.props.enableGifPicker,topOffset:-7}),E.a.createElement("button",{type:"button","aria-label":T,onClick:this.toggleEmojiPicker,className:"style--none emoji-picker__container post-action"},E.a.createElement(Vn,{id:"emojiPickerButton",className:"icon icon--emoji "+(this.state.showEmojiPicker?"active":"")})))),C=i?j.ab("create_post.read_only","This channel is read-only. Only members with permission can post here."):s({id:"create_post.write",defaultMessage:"Write to {channelDisplayName}"},{channelDisplayName:t.display_name});var k="";return c&&(k=" scroll"),E.a.createElement("form",{id:"create_post",ref:"topDiv",className:_,onSubmit:this.handleSubmit},E.a.createElement("div",{className:"post-create"+S+k},E.a.createElement("div",{className:"post-create-body"},E.a.createElement("div",{role:"application",id:"centerChannelFooter","aria-label":u,tabIndex:"-1",className:"post-body__cell a11y__region","data-a11y-sort-order":"2"},E.a.createElement(Hi,{onChange:this.handleChange,onKeyPress:this.postMsgKeyPress,onKeyDown:this.handleKeyDown,onComposition:this.emitTypingEvent,onHeightChange:this.handleHeightChange,handlePostError:this.handlePostError,value:i?"":this.state.message,onBlur:this.handleBlur,emojiEnabled:this.props.enableEmojiPicker,createMessage:C,channelId:t.id,id:"post_textbox",ref:"textbox",disabled:i,characterLimit:this.props.maxPostSize,preview:this.state.showPreview,badConnection:this.props.badConnection,listenForMentionKeyClick:!0}),E.a.createElement("span",{ref:"createPostControls",className:"post-body__actions"},O,P,E.a.createElement("a",{role:"button",tabIndex:"0","aria-label":s({id:"create_post.send_message",defaultMessage:"Send a message"}),className:w,onClick:this.handleSubmit},E.a.createElement("i",{className:"fa fa-paper-plane",title:s({id:"create_post.icon",defaultMessage:"Send Post Icon"})})))),v),E.a.createElement("div",{id:"postCreateFooter",className:g},E.a.createElement("div",{className:"d-flex justify-content-between"},E.a.createElement(xu,{channelId:t.id,postId:""}),E.a.createElement(Qi,{characterLimit:this.props.maxPostSize,showPreview:this.state.showPreview,updatePreview:this.updatePreview,message:i?"":this.state.message})),E.a.createElement("div",null,h,y,f))),E.a.createElement(Fu,{show:this.state.showPostDeletedModal,onHide:this.hidePostDeletedModal}),E.a.createElement(Xs.a,{title:p,message:m,confirmButtonText:d,show:this.state.showConfirmModal,onConfirm:this.handleNotifyAllConfirmation,onCancel:this.hideNotifyAllModal}))}}])&&gq(n.prototype,r),a&&gq(n,a),t}();function Pq(e,t){return function(n){n(Object(q.b)(e,t))}}wq(Cq,"propTypes",{getChannelView:v.a.func,currentChannelMembersCount:v.a.number,currentChannel:v.a.object,currentTeamId:v.a.string,currentUserId:v.a.string,codeBlockOnCtrlEnter:v.a.bool,ctrlSend:v.a.bool,fullWidthTextBox:v.a.bool,showTutorialTip:v.a.bool.isRequired,messageInHistoryItem:v.a.string,draft:v.a.shape({message:v.a.string.isRequired,uploadsInProgress:v.a.array.isRequired,fileInfos:v.a.array.isRequired}).isRequired,commentCountForPost:v.a.number,latestReplyablePostId:v.a.string,locale:v.a.string.isRequired,currentUsersLatestPost:v.a.object,readOnlyChannel:v.a.bool,canUploadFiles:v.a.bool.isRequired,enableEmojiPicker:v.a.bool.isRequired,enableGifPicker:v.a.bool.isRequired,enableConfirmNotificationsToChannel:v.a.bool.isRequired,maxPostSize:v.a.number.isRequired,emojiMap:v.a.object.isRequired,badConnection:v.a.bool.isRequired,userIsOutOfOffice:v.a.bool.isRequired,rhsExpanded:v.a.bool.isRequired,isTimezoneEnabled:v.a.bool.isRequired,actions:v.a.shape({addMessageIntoHistory:v.a.func.isRequired,moveHistoryIndexBack:v.a.func.isRequired,moveHistoryIndexForward:v.a.func.isRequired,addReaction:v.a.func.isRequired,onSubmitPost:v.a.func.isRequired,removeReaction:v.a.func.isRequired,clearDraftUploads:v.a.func.isRequired,runMessageWillBePostedHooks:v.a.func.isRequired,runSlashCommandWillBePostedHooks:v.a.func.isRequired,setDraft:v.a.func.isRequired,setEditingPost:v.a.func.isRequired,selectPostFromRightHandSideSearchByPostId:v.a.func.isRequired,openModal:v.a.func.isRequired,executeCommand:v.a.func.isRequired,getChannelTimezones:v.a.func.isRequired,scrollPostListToBottom:v.a.func.isRequired}).isRequired}),wq(Cq,"contextTypes",{intl:Y.i.isRequired}),wq(Cq,"defaultProps",{latestReplyablePostId:""});var Tq=Object(r.connect)(function(){var e=Object($a.makeGetCommentCountForPost)(),t=Object($a.makeGetMessageInHistoryItem)(L.Posts.MESSAGE_TYPES.POST);return function(n,r){var a=Object(u.getConfig)(n),o=Object(m.getCurrentChannel)(n)||{},i=Object(Ml.i)(n,P.G.DRAFT,o.id),s=Object($a.getMostRecentPostIdInChannel)(n,o.id),l=Object($a.getPost)(n,s),f=Object($a.getLatestReplyablePostId)(n),h=Object(m.getCurrentChannelStats)(n)?Object(m.getCurrentChannelStats)(n).member_count:1,b="true"===a.EnableTutorial,y=Object(c.getInt)(n,P.z.TUTORIAL_STEP,Object(p.getCurrentUserId)(n),P.I.FINISHED),g="true"===a.EnableEmojiPicker,v="true"===a.EnableGifPicker,_="true"===a.EnableConfirmNotificationsToChannel,E=Object(p.getCurrentUserId)(n),w=Object(p.getStatusForUserId)(n,E)===P.O.OUT_OF_OFFICE,O=Wl(n)>1,S="true"===a.ExperimentalTimezone;return{currentTeamId:Object(d.getCurrentTeamId)(n),currentChannel:o,currentChannelMembersCount:h,currentUserId:E,codeBlockOnCtrlEnter:Object(c.getBool)(n,L.Preferences.CATEGORY_ADVANCED_SETTINGS,"code_block_ctrl_enter",!0),ctrlSend:Object(c.getBool)(n,P.z.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),fullWidthTextBox:Object(c.get)(n,P.z.CATEGORY_DISPLAY_SETTINGS,P.z.CHANNEL_DISPLAY_MODE,P.z.CHANNEL_DISPLAY_MODE_DEFAULT)===P.z.CHANNEL_DISPLAY_MODE_FULL_SCREEN,showTutorialTip:b&&y===P.I.POST_POPOVER,messageInHistoryItem:t(n),draft:i,commentCountForPost:e(n,{post:l}),latestReplyablePostId:f,locale:Object(zl.a)(n),currentUsersLatestPost:Object($a.getCurrentUsersLatestPost)(n),readOnlyChannel:r.readOnlyChannel||!Object(p.isCurrentUserSystemAdmin)(n)&&"true"===a.ExperimentalTownSquareIsReadOnly&&o.name===P.i.DEFAULT_CHANNEL,canUploadFiles:Object(jc.b)(a),enableEmojiPicker:g,enableGifPicker:v,enableConfirmNotificationsToChannel:_,maxPostSize:parseInt(a.MaxPostSize,10)||P.i.DEFAULT_CHARACTER_LIMIT,userIsOutOfOffice:w,rhsExpanded:Object(Ml.a)(n),emojiMap:Object(or.a)(n),badConnection:O,isTimezoneEnabled:S}}},function(e){return{actions:Object(a.bindActionCreators)({addMessageIntoHistory:x.addMessageIntoHistory,onSubmitPost:Pq,moveHistoryIndexBack:x.moveHistoryIndexBack,moveHistoryIndexForward:x.moveHistoryIndexForward,addReaction:q.a,removeReaction:x.removeReaction,setDraft:rc.e,clearDraftUploads:rc.a,selectPostFromRightHandSideSearchByPostId:kl.h,setEditingPost:q.j,openModal:U.b,executeCommand:Xl,getChannelTimezones:s.getChannelTimezones,runMessageWillBePostedHooks:tc,runSlashCommandWillBePostedHooks:nc,scrollPostListToBottom:Ea.k},e)}})(Cq),jq=n(2082),kq=n.n(jq);function Mq(e){return(Mq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rq(e){return(Rq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aq(e,t){return(Aq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lq=3,Dq=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Rq(t).call(this,e),n=!a||"object"!==Mq(a)&&"function"!=typeof a?Iq(r):a,xq(Iq(n),"handleNext",function(){switch(n.state.currentScreen){case 0:Object(vt.d)("tutorial","tutorial_screen_1_welcome_to_mattermost_next");break;case 1:Object(vt.d)("tutorial","tutorial_screen_2_how_mattermost_works_next");break;case 2:Object(vt.d)("tutorial","tutorial_screen_3_youre_all_set_next")}if(n.state.currentScreen<2)n.setState({currentScreen:n.state.currentScreen+1});else{var e=n.props.currentUserId,t=[{user_id:e,category:P.z.TUTORIAL_STEP,name:e,value:(n.props.step+1).toString()}];n.props.actions.savePreferences(e,t)}}),xq(Iq(n),"skipTutorial",function(e){switch(e.preventDefault(),n.state.currentScreen){case 0:Object(vt.d)("tutorial","tutorial_screen_1_welcome_to_mattermost_skip");break;case 1:Object(vt.d)("tutorial","tutorial_screen_2_how_mattermost_works_skip");break;case 2:Object(vt.d)("tutorial","tutorial_screen_3_youre_all_set_skip")}var t=n.props.currentUserId,r=[{user_id:t,category:P.z.TUTORIAL_STEP,name:t,value:P.i.TutorialSteps.FINISHED.toString()}];n.props.actions.savePreferences(t,r)}),xq(Iq(n),"createScreen",function(){switch(n.state.currentScreen){case 0:return n.createScreenOne();case 1:return n.createScreenTwo();case 2:return n.createScreenThree()}return null}),xq(Iq(n),"handleCircleClick",function(e,t){e.preventDefault(),n.setState({currentScreen:t})}),xq(Iq(n),"createCircles",function(){for(var e=[],t=function(t){var r="circle";t===n.state.currentScreen&&(r+=" active"),e.push(E.a.createElement("a",{id:"tutorialIntroCircle"+t,href:"#",key:"circle"+t,className:r,"data-screen":t,onClick:function(e){return n.handleCircleClick(e,t)}}))},r=0;r<Lq;r++)t(r);return E.a.createElement("div",{className:"tutorial__circles"},e)}),n.state={currentScreen:0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aq(e,t)}(t,E.a.Component),n=t,(r=[{key:"createScreenOne",value:function(){var e=this.createCircles();return E.a.createElement("div",{id:"tutorialIntroOne"},E.a.createElement("h3",null,E.a.createElement(Y.c,{id:"tutorial_intro.screenOne.title1",defaultMessage:"Welcome to:"})),E.a.createElement("h1",null,E.a.createElement(Y.c,{id:"tutorial_intro.screenOne.title2",defaultMessage:"Mattermost"})),E.a.createElement("p",null,E.a.createElement(Y.c,{id:"tutorial_intro.screenOne.body1",defaultMessage:"Your team communication all in one place, instantly searchable and available anywhere."})),E.a.createElement("p",null,E.a.createElement(Y.c,{id:"tutorial_intro.screenOne.body2",defaultMessage:"Keep your team connected to help them achieve what matters most."})),e)}},{key:"createScreenTwo",value:function(){var e=this.createCircles(),t=null,n=null;if(this.props.appDownloadLink){var r=Object(ss.g)(this.props.appDownloadLink);t=E.a.createElement(Y.c,{id:"tutorial_intro.mobileApps",defaultMessage:"Install the apps for {link} for easy access and notifications on the go.",values:{link:E.a.createElement("a",{id:"appDownloadLink",href:r,target:"_blank",rel:"noopener noreferrer"},E.a.createElement(Y.c,{id:"tutorial_intro.mobileAppsLinkText",defaultMessage:"PC, Mac, iOS and Android"}))}}),n=E.a.createElement("a",{id:"appDownloadImage",href:r,target:"_blank",rel:"noopener noreferrer"},E.a.createElement("img",{alt:"tutorial icons",className:"tutorial__app-icons",src:kq.a}))}return E.a.createElement("div",{id:"tutorialIntroTwo"},E.a.createElement("h3",null,E.a.createElement(Y.c,{id:"tutorial_intro.screenTwo.title",defaultMessage:"How Mattermost works:"})),E.a.createElement("p",null,E.a.createElement(Y.c,{id:"tutorial_intro.screenTwo.body1",defaultMessage:"Communication happens in public discussion channels, private channels and direct messages."})),E.a.createElement("p",null,E.a.createElement(Y.c,{id:"tutorial_intro.screenTwo.body2",defaultMessage:"Everything is archived and searchable from any web-enabled desktop, laptop or phone."})),t,n,e)}},{key:"createScreenThree",value:function(){var e,t,n=this.props.teamType,r=this.context.intl.formatMessage;if(!this.props.isLicensed||!this.props.restrictTeamInvite){if(n===P.i.INVITE_TEAM){var a=r({id:"tutorial_intro.invite",defaultMessage:"Invite teammates"});e=E.a.createElement(dL.a,{accessibilityLabel:a,id:"tutorialIntroInvite",className:"intro-links color--link style--none",modalId:P.r.EMAIL_INVITE,dialogType:wE,dialogProps:{}},a)}else e=E.a.createElement("button",{id:"tutorialIntroInvite",className:"intro-links color--link style--none",onClick:C.l},E.a.createElement(Y.c,{id:"tutorial_intro.teamInvite",defaultMessage:"Invite teammates"}));t=E.a.createElement("p",null,e,E.a.createElement(Y.c,{id:"tutorial_intro.whenReady",defaultMessage:" when you're ready."}))}var o=this.createCircles(),i=null;return this.props.supportEmail&&(i=E.a.createElement("p",{id:"supportInfo"},E.a.createElement(Y.c,{id:"tutorial_intro.support",defaultMessage:"Need anything, just email us at "}),E.a.createElement("a",{href:"mailto:"+this.props.supportEmail,target:"_blank",rel:"noopener noreferrer"},this.props.supportEmail),".")),E.a.createElement("div",{id:"tutorialIntroThree"},E.a.createElement("h3",null,E.a.createElement(Y.c,{id:"tutorial_intro.allSet",defaultMessage:"You're all set"})),t,i,E.a.createElement(Y.c,{id:"tutorial_intro.end",defaultMessage:'Click "Next" to enter {channel}. This is the first channel teammates see when they sign up. Use it for posting updates everyone needs to know.',values:{channel:this.props.townSquareDisplayName}}),o)}},{key:"render",value:function(){var e=this.createScreen();return E.a.createElement("div",{className:"tutorial-steps__container"},E.a.createElement("div",{id:"tutorialIntroContent",className:"tutorial__content"},E.a.createElement("div",{className:"tutorial__steps"},e,E.a.createElement("div",{className:"tutorial__footer"},E.a.createElement("button",{id:"tutorialNextButton",className:"btn btn-primary",tabIndex:"1",onClick:this.handleNext},E.a.createElement(Y.c,{id:"tutorial_intro.next",defaultMessage:"Next"})),E.a.createElement("a",{id:"tutorialSkipLink",className:"tutorial-skip",href:"#",onClick:this.skipTutorial},E.a.createElement(Y.c,{id:"tutorial_intro.skip",defaultMessage:"Skip tutorial"}))))))}}])&&Nq(n.prototype,r),a&&Nq(n,a),t}();xq(Dq,"propTypes",{currentUserId:v.a.string.isRequired,teamType:v.a.string,step:v.a.number,townSquareDisplayName:v.a.string.isRequired,appDownloadLink:v.a.string,isLicensed:v.a.bool.isRequired,restrictTeamInvite:v.a.bool.isRequired,supportEmail:v.a.string.isRequired,actions:v.a.shape({savePreferences:v.a.func.isRequired}).isRequired}),xq(Dq,"contextTypes",{intl:Y.i.isRequired});var Uq=Object(r.connect)(function(e){var t=Object(p.getCurrentUserId)(e);return{currentUserId:t,teamType:(Object(d.getCurrentTeam)(e)||{}).type,step:Object(c.getInt)(e,P.z.TUTORIAL_STEP,t,0)}},function(e){return{actions:Object(a.bindActionCreators)({savePreferences:ll.savePreferences},e)}})(Dq);function qq(e){return(qq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fq(e,t){return!t||"object"!==qq(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bq(e){return(Bq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gq(e,t){return(Gq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vq=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fq(this,Bq(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gq(e,t)}(t,E.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.props.isRoot&&Hl()("body").addClass("app__body")}},{key:"componentWillUnmount",value:function(){this.props.isRoot&&Hl()("body").removeClass("app__body")}},{key:"render",value:function(){return E.a.createElement("div",{id:"app-content",className:"app__content"},E.a.createElement(Uq,{townSquareDisplayName:this.props.townSquareDisplayName,appDownloadLink:this.props.appDownloadLink,isLicensed:this.props.isLicensed,restrictTeamInvite:this.props.restrictTeamInvite,supportEmail:this.props.supportEmail}))}}])&&Hq(n.prototype,r),a&&Hq(n,a),t}();Vq.propTypes={isRoot:v.a.bool,townSquareDisplayName:v.a.string.isRequired,appDownloadLink:v.a.string,isLicensed:v.a.bool.isRequired,restrictTeamInvite:v.a.bool.isRequired,supportEmail:v.a.string.isRequired},Vq.defaultProps={isRoot:!0};var Wq=Object(r.connect)(function(e){var t=Object(u.getLicense)(e),n=Object(u.getConfig)(e),r=Object(d.getCurrentTeam)(e),a=Object(m.getChannelsNameMapInCurrentTeam)(e)[P.Q.DEFAULT_CHANNEL];return{townSquareDisplayName:a?a.display_name:P.Q.DEFAULT_CHANNEL_UI_NAME,appDownloadLink:n.AppDownloadLink,isLicensed:"true"===t.IsLicensed,restrictTeamInvite:!Object(D.haveITeamPermission)(e,{team:r.id,permission:L.Permissions.INVITE_USER}),supportEmail:n.SupportEmail}})(Vq);function zq(e){return(zq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Yq(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qq(e){return(Qq=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zq(e,t){return(Zq=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $q=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Qq(t).call(this,e),n=!a||"object"!==zq(a)&&"function"!=typeof a?Jq(r):a,Xq(Jq(n),"createDeferredPostView",function(){n.deferredPostView=dq(DD,E.a.createElement("div",{id:"post-list",className:"a11y__region","data-a11y-sort-order":"1","data-a11y-focus-child":!0,"data-a11y-order-reversed":!0}))}),Xq(Jq(n),"getChannelView",function(){return n.refs.channelView}),Xq(Jq(n),"onClickCloseChannel",function(){n.props.actions.goToLastViewedChannel()}),n.createDeferredPostView(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zq(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){var e=window.navigator.platform;Hl()("body").addClass("app__body"),(T.f()||T.d())&&Hl()("body").addClass("browser--ie"),"Win32"===e||"Win64"===e?Hl()("body").addClass("os--windows"):"MacIntel"!==e&&"MacPPC"!==e||Hl()("body").addClass("os--mac")}},{key:"componentWillUnmount",value:function(){Hl()("body").removeClass("app__body")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.match.url!==e.match.url&&this.createDeferredPostView()}},{key:"componentDidUpdate",value:function(e){if(e.channelId!==this.props.channelId||e.channelIsArchived!==this.props.channelIsArchived){Object(vt.b)("ChannelView#componentDidUpdate");var t=Kq(Object(vt.c)("SidebarChannelLink#click","ChannelView#componentDidUpdate"),1)[0],n=Kq(Object(vt.c)("TeamLink#click","ChannelView#componentDidUpdate"),1)[0];Object(vt.a)(["SidebarChannelLink#click","ChannelView#componentDidUpdate","TeamLink#click"]),-1!==t&&Object(vt.d)("performance","channel_switch",{duration:Math.round(t)}),-1!==n&&Object(vt.d)("performance","team_switch",{duration:Math.round(n)}),this.props.channelIsArchived&&!this.props.viewArchivedChannels&&this.props.actions.goToLastViewedChannel()}}},{key:"render",value:function(){var e,t=this.props.channelIsArchived;if(this.props.showTutorial)return E.a.createElement(Wq,{isRoot:!1});e=this.props.deactivatedChannel?E.a.createElement("div",{className:"post-create-message"},E.a.createElement(Y.c,{id:"create_post.deactivated",defaultMessage:"You are viewing an archived channel with a deactivated user."})):E.a.createElement("div",{className:"post-create__container",id:"post-create"},!t&&E.a.createElement(Tq,{getChannelView:this.getChannelView}),t&&E.a.createElement("div",{className:"channel-archived__message"},E.a.createElement(Bu.b,{id:"archivedChannelMessage",defaultMessage:"You are viewing an **archived channel**. New messages cannot be posted."}),E.a.createElement("button",{className:"btn btn-primary channel-archived__close-btn",onClick:this.onClickCloseChannel},E.a.createElement(Y.c,{id:"center_panel.archived.closeChannel",defaultMessage:"Close Channel"}))));var n=this.deferredPostView;return E.a.createElement("div",{ref:"channelView",id:"app-content",className:"app__content"},E.a.createElement(Dl,{overlayType:"center"}),E.a.createElement(KA,{channelId:this.props.channelId}),E.a.createElement(n,{channelId:this.props.channelId}),e)}}])&&Yq(n.prototype,r),a&&Yq(n,a),t}();Xq($q,"propTypes",{channelId:v.a.string.isRequired,deactivatedChannel:v.a.bool.isRequired,match:v.a.shape({url:v.a.string.isRequired}).isRequired,showTutorial:v.a.bool.isRequired,channelIsArchived:v.a.bool.isRequired,viewArchivedChannels:v.a.bool.isRequired,actions:v.a.shape({goToLastViewedChannel:v.a.func.isRequired})});var eH=Object(Kl.a)(function(e){return e.entities.users.profiles},function(e,t){return t},function(e,t){var n=Object(j.u)(t);return Boolean(n&&n.delete_at)});var tH=Object(o.f)(Object(r.connect)(function(e){var t=Object(m.getCurrentChannel)(e),n=Object(u.getConfig)(e),r="true"===n.EnableTutorial,a=Object(c.getInt)(e,P.z.TUTORIAL_STEP,Object(p.getCurrentUserId)(e),P.I.FINISHED),o="true"===n.ExperimentalViewArchivedChannels;return{channelId:t?t.id:"",deactivatedChannel:!!t&&eH(e,t.id),showTutorial:r&&a<=P.I.INTRO_SCREENS,channelIsArchived:!!t&&0!==t.delete_at,viewArchivedChannels:o}},function(e){return{actions:Object(a.bindActionCreators)({goToLastViewedChannel:Ea.c},e)}})($q));function nH(e){return(nH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aH(e,t){return!t||"object"!==nH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oH(e){return(oH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iH(e,t){return(iH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sH=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=aH(this,oH(t).call(this,e))).props.actions.onChannelByIdentifierEnter(e),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iH(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.match.params.team===e.match.params.team&&this.props.match.params.identifier===e.match.params.identifier||this.props.actions.onChannelByIdentifierEnter(e)}},{key:"render",value:function(){return E.a.createElement(tH,null)}}])&&rH(n.prototype,r),a&&rH(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(sH,"propTypes",{match:v.a.shape({params:v.a.shape({identifier:v.a.string.isRequired,team:v.a.string.isRequired}).isRequired}).isRequired,actions:v.a.shape({onChannelByIdentifierEnter:v.a.func.isRequired}).isRequired});var lH=Object(o.f)(Object(r.connect)(null,function(e){return{actions:Object(a.bindActionCreators)({onChannelByIdentifierEnter:ZU},e)}})(sH));function cH(e){return(cH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pH(e,t){return!t||"object"!==cH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dH(e){return(dH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mH(e,t){return(mH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fH=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pH(this,dH(t).call(this,e))).state={returnTo:""},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mH(e,t)}(t,E.a.PureComponent),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.location.pathname!==e.location.pathname&&e.location.pathname.includes("/pl/")&&this.setState({returnTo:this.props.location.pathname})}},{key:"render",value:function(){var e=this,t=this.props.lastChannelPath,n=this.props.match.url;return E.a.createElement("div",{key:"inner-wrap",className:Rl()("inner-wrap","channel__wrap",{"move--right":this.props.lhsOpen,"move--left":this.props.rhsOpen,"move--left-small":this.props.rhsMenuOpen})},E.a.createElement("div",{className:"row header"},E.a.createElement("div",{id:"navbar"},E.a.createElement(WU,null))),E.a.createElement("div",{className:"row main"},E.a.createElement(o.d,null,E.a.createElement(o.b,{path:"".concat(n,"/pl/:postid"),render:function(t){return E.a.createElement(zD,Object.assign({},t,{returnTo:e.state.returnTo}))}}),E.a.createElement(o.b,{path:"/:team/:path(channels|messages)/:identifier",component:lH}),E.a.createElement(o.a,{to:t}))))}}])&&uH(n.prototype,r),a&&uH(n,a),t}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fH,"propTypes",{match:v.a.object.isRequired,location:v.a.object.isRequired,lastChannelPath:v.a.string.isRequired,lhsOpen:v.a.bool.isRequired,rhsOpen:v.a.bool.isRequired,rhsMenuOpen:v.a.bool.isRequired});var hH=Object(r.connect)(function(e,t){var n=Object(Bk.b)(e,t.match.params.team);if(!n){var r=Object(d.getTeamByName)(e,t.match.params.team);n=Object(m.getRedirectChannelNameForTeam)(e,r.id)}return{lastChannelPath:"".concat(t.match.url,"/channels/").concat(n),lhsOpen:US(e),rhsOpen:Object(Ml.c)(e),rhsMenuOpen:Object(Ml.b)(e)}})(fH);function bH(e){return(bH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gH(e,t){return!t||"object"!==bH(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vH(e){return(vH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _H(e,t){return(_H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var EH=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gH(this,vH(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_H(e,t)}(t,E.a.Component),n=t,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.teamType!==e.teamType||this.props.pathName!==e.pathName}},{key:"render",value:function(){return E.a.createElement("div",{id:"channel_view",className:"channel-view"},E.a.createElement(R.a,null),E.a.createElement(A.a,null),E.a.createElement("div",{className:"container-fluid"},E.a.createElement(V_,null),E.a.createElement(jS,{teamType:this.props.teamType}),E.a.createElement(o.b,{component:uC}),E.a.createElement(o.b,{component:Fk}),E.a.createElement(o.b,{component:hH}),E.a.createElement(I.a,{pluggableName:"Root"}),E.a.createElement(Is,null),E.a.createElement(Zs,null),E.a.createElement(Fs,null),E.a.createElement(LS,null),E.a.createElement(is,null),E.a.createElement(gl,null),E.a.createElement(sl,null),E.a.createElement(jl,{isMac:j.T()}),E.a.createElement(DS.a,null)))}}])&&yH(n.prototype,r),a&&yH(n,a),t}();function wH(e){return(wH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OH(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function SH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CH(e,t){return!t||"object"!==wH(t)&&"function"!=typeof t?TH(e):t}function PH(e){return(PH=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jH(e,t){return(jH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(EH,"propTypes",{pathName:v.a.string.isRequired,teamType:v.a.string.isRequired});var MH,NH=Object(k.b)(N.a),RH=Date.now(),IH=3e4,AH=6e4,xH=1e4,LH=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kH(TH(n=CH(this,PH(t).call(this,e))),"handleBlur",function(){window.isActive=!1,n.blurTime=(new Date).getTime(),n.props.currentUser&&n.props.actions.viewChannel("")}),kH(TH(n),"handleFocus",function(){n.props.actions.markChannelAsRead(n.props.currentChannelId),window.isActive=!0,Date.now()-n.blurTime>xH&&(n.props.actions.fetchMyChannelsAndMembers(n.props.currentTeamId),n.props.actions.loadProfilesForDirect())}),kH(TH(n),"joinTeam",function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.getTeamByName(t.match.params.team);case 2:if(r=e.sent,!(a=r.data)){e.next=12;break}return e.next=7,t.actions.addUserToTeam(a.id,t.currentUser&&t.currentUser.id);case 7:o=e.sent,o.error?t.history.push("/error?type=team_not_found"):(n.setState({team:a}),n.initTeam(a)),e.next=13;break;case 12:t.history.push("/error?type=team_not_found");case 13:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){OH(o,r,a,i,s,"next",e)}function s(e){OH(o,r,a,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()),kH(TH(n),"initTeam",function(e){return n.props.actions.getMyTeamUnreads(),n.props.actions.selectTeam(e),n.props.actions.setPreviousTeamId(e.id),C.c(),n.props.actions.fetchMyChannelsAndMembers(e.id).then(function(){n.setState({finishedFetchingChannels:!0})}),n.props.actions.loadStatusesForChannelAndSidebar(),n.props.actions.loadProfilesForDirect(),e}),kH(TH(n),"updateCurrentTeam",function(e){var t=e.teamsList?e.teamsList.find(function(t){return t.name===e.match.params.team}):null;return t?(n.initTeam(t),t):null}),kH(TH(n),"onShortcutKeyDown",function(e){if(e.shiftKey&&j.e(e)&&j.S(e,P.Q.KeyCodes.L)){var t=document.getElementById("sidebar-right");if(t)if(t.className.match("sidebar--right sidebar--right--expanded move--left")){var n=document.getElementById("reply_textbox");n&&n.focus()}else{var r=document.getElementById("post_textbox");r&&r.focus()}}}),n.blurTime=(new Date).getTime(),n.props.mfaRequired)return n.props.history.push("/mfa/setup"),CH(n);clearInterval(MH),MH=setInterval(function(){var e=(new Date).getTime();e>RH+AH&&(console.log("computer woke up - fetching latest"),Object(S.c)(!1)),RH=e},IH);var r=n.updateCurrentTeam(n.props);return n.state={team:r,finishedFetchingChannels:!1},r||n.joinTeam(n.props),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jH(e,t)}(t,E.a.Component),n=t,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(this.props.match.params.team!==e.match.params.team){var t=this.updateCurrentTeam(e);this.setState({team:t}),t||this.joinTeam(e)}}},{key:"componentDidMount",value:function(){Object(f.d)(),Object(S.f)(),window.isActive=!0,j.b(this.props.theme),T.j()&&O.a.enable(),window.addEventListener("focus",this.handleFocus),window.addEventListener("blur",this.handleBlur),window.addEventListener("keydown",this.onShortcutKeyDown)}},{key:"componentDidUpdate",value:function(e){var t=this.props.theme;j.c(e.theme,t)||j.b(t)}},{key:"componentWillUnmount",value:function(){window.isActive=!1,Object(f.e)(),Object(S.g)(),T.j()&&O.a.disable(),clearInterval(MH),window.removeEventListener("focus",this.handleFocus),window.removeEventListener("blur",this.handleBlur),window.removeEventListener("keydown",this.onShortcutKeyDown)}},{key:"render",value:function(){if(null===this.state.team||!1===this.state.finishedFetchingChannels)return E.a.createElement("div",null);var e=this.state.team?this.state.team.type:"";return E.a.createElement(o.d,null,E.a.createElement(o.b,{path:"/:team/integrations",component:NH}),E.a.createElement(o.b,{path:"/:team/emoji",component:NH}),E.a.createElement(o.b,{render:function(t){return E.a.createElement(EH,{pathName:t.location.pathname,teamType:e})}}))}}])&&SH(n.prototype,r),a&&SH(n,a),t}();kH(LH,"propTypes",{params:v.a.object,currentUser:v.a.object,currentChannelId:v.a.string,currentTeamId:v.a.string,actions:v.a.shape({fetchMyChannelsAndMembers:v.a.func.isRequired,getMyTeamUnreads:v.a.func.isRequired,viewChannel:v.a.func.isRequired,markChannelAsRead:v.a.func.isRequired,getTeamByName:v.a.func.isRequired,addUserToTeam:v.a.func.isRequired,selectTeam:v.a.func.isRequired,setPreviousTeamId:v.a.func.isRequired,loadStatusesForChannelAndSidebar:v.a.func.isRequired,loadProfilesForDirect:v.a.func.isRequired}).isRequired,theme:v.a.object.isRequired,mfaRequired:v.a.bool.isRequired,match:v.a.shape({params:v.a.shape({team:v.a.string.isRequired}).isRequired}).isRequired,history:v.a.object.isRequired});t.a=Object(o.f)(Object(r.connect)(function(e,t){var n=Object(u.getLicense)(e),r=Object(u.getConfig)(e),a=Object(p.getCurrentUser)(e);return{theme:Object(c.getTheme)(e),mfaRequired:Object(y.a)(a,n,r,t.match.url),currentUser:a,currentTeamId:Object(d.getCurrentTeamId)(e),teamsList:Object(d.getMyTeams)(e),currentChannelId:Object(m.getCurrentChannelId)(e)}},function(e){return{actions:Object(a.bindActionCreators)({fetchMyChannelsAndMembers:s.fetchMyChannelsAndMembers,getMyTeamUnreads:l.getMyTeamUnreads,viewChannel:s.viewChannel,markChannelAsRead:s.markChannelAsRead,getTeamByName:l.getTeamByName,addUserToTeam:b.a,setPreviousTeamId:h.a,selectTeam:l.selectTeam,loadStatusesForChannelAndSidebar:f.a,loadProfilesForDirect:i.loadProfilesForDirect},e)}})(LH))},2375:function(e,t,n){"use strict";var r=n(20),a=n(418),o=n(12),i=n(1511),s=(n(88),n(43),n(7)),l=n.n(s),c=n(30),u=n.n(c),p=n(1739),d=n(56);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=h(t).call(this,e),n=!a||"object"!==m(a)&&"function"!=typeof a?b(r):a,g(b(n),"onHide",function(){n.setState({show:!1})}),n.state={show:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,l.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){this.props.actions.goToLastViewedChannel()}},{key:"render",value:function(){var e=l.a.createElement(d.c,{id:"removed_channel.channelName",defaultMessage:"the channel"});this.props.channelName&&(e=this.props.channelName);var t=l.a.createElement(d.c,{id:"removed_channel.someone",defaultMessage:"Someone"});return this.props.remover&&(t=this.props.remover),""===this.props.currentUserId?null:l.a.createElement(p.a,{dialogClassName:"a11y__modal",show:this.state.show,onHide:this.onHide,onExited:this.props.onHide,role:"dialog","aria-labelledby":"removeFromChannelModalLabel"},l.a.createElement(p.a.Header,{closeButton:!0},l.a.createElement(p.a.Title,{componentClass:"h1",id:"removeFromChannelModalLabel"},l.a.createElement(d.c,{id:"removed_channel.from",defaultMessage:"Removed from "}),l.a.createElement("span",{className:"name"},e))),l.a.createElement(p.a.Body,{ref:"modalBody"},l.a.createElement("p",null,l.a.createElement(d.c,{id:"removed_channel.remover",defaultMessage:"{remover} removed you from {channel}",values:{remover:t,channel:e}}))),l.a.createElement(p.a.Footer,null,l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.onHide},l.a.createElement(d.c,{id:"removed_channel.okay",defaultMessage:"Okay"}))))}}])&&f(n.prototype,r),a&&f(n,a),t}();g(v,"propTypes",{currentUserId:u.a.string.isRequired,onHide:u.a.func.isRequired,channelName:u.a.string,remover:u.a.string,actions:u.a.shape({goToLastViewedChannel:u.a.func.isRequired})});t.a=Object(a.connect)(function(e){return{currentUserId:Object(o.getCurrentUserId)(e)}},function(e){return{actions:Object(r.bindActionCreators)({goToLastViewedChannel:i.c},e)}})(v)},2379:function(e,t,n){"use strict";var r=n(1655),a=n(87),o=n(6),i=n(1503),s=n(0),l=n(1867),c=n(13);var u="";c.a.subscribe(function(){var e=c.a.getState(),t=e.entities.integrations.dialogTriggerId;t!==u&&(u=t,(e.entities.integrations.dialog||{}).trigger_id===t&&c.a.dispatch(Object(i.b)({modalId:s.r.INTERACTIVE_DIALOG,dialogType:l.a})))}),window.React=n(7),window.ReactDOM=n(419),window.Redux=n(20),window.ReactRedux=n(418),window.ReactBootstrap=n(1485),window.PostUtils={formatText:a.e,messageHtmlToComponent:r.a},window.PropTypes=n(30),window.PDFJS=n(437),window.openInteractiveDialog=function(e){c.a.dispatch({type:o.IntegrationTypes.RECEIVED_DIALOG,data:e}),c.a.dispatch(Object(i.b)({modalId:s.r.INTERACTIVE_DIALOG,dialogType:l.a}))}},2380:function(e,t,n){"use strict";var r=n(418),a=n(20),o=n(1617),i=n(310),s=(n(88),n(43),n(30)),l=n.n(s),c=n(7),u=n.n(c),p=n(56),d=n(36),m=n(954),f=n(319),h=n(23);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return r=this,a=(e=g(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==b(a)&&"function"!=typeof a?v(r):a,E(v(n),"handleLocaleChange",function(e){d.Client4.setAcceptLanguage(e),n.loadTranslationsIfNecessary(e)}),E(v(n),"loadTranslationsIfNecessary",function(e){if(!n.props.translations){var t=f.c(e);t&&n.props.actions.loadTranslations(e,t.url)}}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,u.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){f.a(),Object(m.setLocalizeFunction)(h.ab),this.handleLocaleChange(this.props.locale)}},{key:"componentDidUpdate",value:function(e){e.locale!==this.props.locale&&this.handleLocaleChange(this.props.locale)}},{key:"render",value:function(){return this.props.translations?u.a.createElement(p.e,{key:this.props.locale,locale:this.props.locale,messages:this.props.translations},this.props.children):null}}])&&y(n.prototype,r),a&&y(n,a),t}();E(w,"propTypes",{children:l.a.element.isRequired,locale:l.a.string.isRequired,translations:l.a.object,actions:l.a.shape({loadTranslations:l.a.func.isRequired}).isRequired});t.a=Object(r.connect)(function(e){var t=Object(i.a)(e);return{locale:t,translations:Object(i.b)(e,t)}},function(e){return{actions:Object(a.bindActionCreators)({loadTranslations:o.b},e)}})(w)}}]);
//# sourceMappingURL=5.d2c8d1d50a1a1f06dc57.js.map