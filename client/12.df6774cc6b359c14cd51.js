(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1505:function(e,t,n){"use strict";n.d(t,"a",function(){return y});n(88),n(43);var r=n(30),o=n.n(r),a=n(7),c=n.n(a),i=n(56),u=n(1482);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,c.a.PureComponent),n=t,(r=[{key:"render",value:function(){return c.a.createElement("div",{id:"back_button",className:"signup-header"},c.a.createElement(u.a,{onClick:this.props.onClick,to:this.props.url},c.a.createElement(i.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},function(e){return c.a.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e})}),c.a.createElement(i.c,{id:"web.header.back",defaultMessage:"Back"})))}}])&&l(n.prototype,r),o&&l(n,o),t}();b(y,"propTypes",{url:o.a.string,onClick:o.a.func}),b(y,"defaultProps",{url:"/"})},1510:function(e,t,n){e.exports=n.p+"files/786f906c373b98400b1e6f6c3341ce7d.png"},1613:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(88),n(43);var r=n(7),o=n.n(r),a=n(56);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,s(t).apply(this,arguments))}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:"render",value:function(){return o.a.createElement(a.c,{id:"generic_icons.logout",defaultMessage:"Logout Icon"},function(e){return o.a.createElement("i",{className:"fa fa-1x fa-angle-left",title:e})})}}])&&i(n.prototype,r),c&&i(n,c),t}()},1719:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return i});var r=n(40),o=n(12);function a(e){return function(t,n){var a=Object(o.getCurrentUserId)(n());return t(r.updateUserMfa(a,!0,e))}}function c(){return function(e,t){var n=Object(o.getCurrentUserId)(t());return e(r.updateUserMfa(n,!1))}}function i(){return function(e,t){var n=Object(o.getCurrentUserId)(t());return e(r.generateMfaSecret(n))}}},2365:function(e,t,n){"use strict";n.r(t);var r=n(418),o=n(24),a=(n(88),n(43),n(245),n(247),n(30)),c=n.n(a),i=n(7),u=n.n(i),s=n(56),l=n(435),f=n(1493),p=n(1510),m=n.n(p),b=n(1505),y=n(1613),d=n(20),h=n(12),g=n(1719),v=(n(120),n(23)),E=n(57),O=n(1491),w=n(1499);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=_(t).call(this,e),n=!o||"object"!==j(o)&&"function"!=typeof o?M(r):o,k(M(n),"submit",function(e){e.preventDefault();var t=n.refs.code.value.replace(/\s/g,"");t&&0!==t.length?(n.setState({error:null}),n.props.actions.activateMfa(t).then(function(e){var t=e.error;t?"ent.mfa.activate.authenticate.app_error"===t.server_error_id?n.setState({error:v.ab("mfa.setup.badCode","Invalid code. If this issue persists, contact your System Administrator.")}):n.setState({error:t.message}):n.props.history.push("/mfa/confirm")})):n.setState({error:v.ab("mfa.setup.codeError","Please enter the code from Google Authenticator.")})}),n.state={secret:"",qrCode:""},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,u.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.currentUser;t&&!t.mfa_active?this.props.actions.generateMfaSecret().then(function(t){var n=t.data,r=t.error;r?e.setState({serverError:r.message}):e.setState({secret:n.secret,qrCode:n.qr_code})}):this.props.history.push("/")}},{key:"render",value:function(){var e,t,n="form-group";return this.state.error&&(e=u.a.createElement("div",{className:"form-group has-error"},u.a.createElement("label",{className:"control-label"},this.state.error)),n+=" has-error"),this.props.enforceMultifactorAuthentication&&(t=u.a.createElement("p",null,u.a.createElement(O.b,{id:"mfa.setup.required",defaultMessage:"**Multi-factor authentication is required on {siteName}.**",values:{siteName:this.props.siteName}}))),u.a.createElement("div",null,u.a.createElement("form",{onSubmit:this.submit,className:n},t,u.a.createElement("p",null,u.a.createElement(O.b,{id:"mfa.setup.step1",defaultMessage:"**Step 1: **On your phone, download Google Authenticator from [iTunes](!https://itunes.apple.com/us/app/google-authenticator/id388497605?mt=8') or [Google Play](!https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en)"})),u.a.createElement("p",null,u.a.createElement(O.b,{id:"mfa.setup.step2",defaultMessage:"**Step 2: **Use Google Authenticator to scan this QR code, or manually type in the secret key"})),u.a.createElement("div",{className:"form-group"},u.a.createElement("div",{className:"col-sm-12"},u.a.createElement("img",{alt:"qr code image",style:N.qrCode,src:"data:image/png;base64,"+this.state.qrCode}))),u.a.createElement("br",null),u.a.createElement("div",{className:"form-group"},u.a.createElement("p",{className:"col-sm-12"},u.a.createElement(s.c,{id:"mfa.setup.secret",defaultMessage:"Secret: {secret}",values:{secret:this.state.secret}}))),u.a.createElement("p",null,u.a.createElement(O.b,{id:"mfa.setup.step3",defaultMessage:"**Step 3: **Enter the code generated by Google Authenticator"})),u.a.createElement("p",null,u.a.createElement(w.a,{ref:"code",className:"form-control",placeholder:{id:Object(E.b)("mfa.setup.code"),defaultMessage:"MFA Code"},autoFocus:!0})),e,u.a.createElement("button",{type:"submit",className:"btn btn-primary"},u.a.createElement(s.c,{id:"mfa.setup.save",defaultMessage:"Save"}))))}}])&&S(n.prototype,r),o&&S(n,o),t}();k(C,"propTypes",{currentUser:c.a.object,siteName:c.a.string,enforceMultifactorAuthentication:c.a.bool.isRequired,actions:c.a.shape({activateMfa:c.a.func.isRequired,generateMfaSecret:c.a.func.isRequired}).isRequired});var N={qrCode:{maxHeight:170}};var A=Object(r.connect)(function(e){var t=Object(o.getConfig)(e),n=t.SiteName,r="true"===t.EnforceMultifactorAuthentication;return{currentUser:Object(h.getCurrentUser)(e),siteName:n,enforceMultifactorAuthentication:r}},function(e){return{actions:Object(d.bindActionCreators)({activateMfa:g.a,generateMfaSecret:g.c},e)}})(C);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=n(0).Q.KeyCodes,D=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return r=this,o=(e=T(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==q(o)&&"function"!=typeof o?U(r):o,I(U(n),"submit",function(e){e.preventDefault(),Object(f.f)()}),I(U(n),"onKeyPress",function(e){Object(v.S)(e,L.ENTER)&&n.submit(e)}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,u.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){document.body.addEventListener("keydown",this.onKeyPress)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.onKeyPress)}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("form",{onSubmit:this.submit,onKeyPress:this.onKeyPress,className:"form-group"},u.a.createElement("p",null,u.a.createElement(O.b,{id:"mfa.confirm.complete",defaultMessage:"**Set up complete!**"})),u.a.createElement("p",null,u.a.createElement(s.c,{id:"mfa.confirm.secure",defaultMessage:"Your account is now secure. Next time you sign in, you will be asked to enter a code from the Google Authenticator app on your phone."})),u.a.createElement("button",{type:"submit",className:"btn btn-primary"},u.a.createElement(s.c,{id:"mfa.confirm.okay",defaultMessage:"Okay"}))))}}])&&R(n.prototype,r),o&&R(n,o),t}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=function(e){function t(){var e,n,r,o,a,c,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,s=new Array(u),l=0;l<u;l++)s[l]=arguments[l];return r=this,n=!(o=(e=B(t)).call.apply(e,[this].concat(s)))||"object"!==G(o)&&"function"!=typeof o?F(r):o,a=F(n),i=function(e){e.preventDefault(),Object(f.e)("/login")},(c="handleOnClick")in a?Object.defineProperty(a,c,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[c]=i,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,u.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){document.body.classList.add("sticky"),document.getElementById("root").classList.add("container-fluid"),this.props.enableMultifactorAuthentication||this.props.history.push("/")}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("sticky"),document.getElementById("root").classList.remove("container-fluid")}},{key:"render",value:function(){var e,t=this;return e=this.props.mfa&&this.props.enforceMultifactorAuthentication?u.a.createElement("div",{className:"signup-header"},u.a.createElement("button",{className:"style--none color--link",onClick:this.handleOnClick},u.a.createElement(y.a,null),u.a.createElement(s.c,{id:"web.header.logout",defaultMessage:"Logout"}))):u.a.createElement(b.a,null),u.a.createElement("div",{className:"inner-wrap"},u.a.createElement("div",{className:"row content"},u.a.createElement("div",null,e,u.a.createElement("div",{className:"col-sm-12"},u.a.createElement("div",{className:"signup-team__container"},u.a.createElement("h3",null,u.a.createElement(s.c,{id:"mfa.setupTitle",defaultMessage:"Multi-factor Authentication Setup"})),u.a.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:m.a}),u.a.createElement("div",{id:"mfa"},u.a.createElement(l.d,null,u.a.createElement(l.b,{path:"".concat(this.props.match.url,"/setup"),render:function(e){return u.a.createElement(A,Object.assign({state:t.state,updateParent:t.updateParent},e))}}),u.a.createElement(l.b,{path:"".concat(this.props.match.url,"/confirm"),render:function(e){return u.a.createElement(D,Object.assign({state:t.state,updateParent:t.updateParent},e))}}))))))))}}])&&K(n.prototype,r),o&&K(n,o),t}();Q.propTypes={location:c.a.object.isRequired,children:c.a.node,mfa:c.a.bool.isRequired,enableMultifactorAuthentication:c.a.bool.isRequired,enforceMultifactorAuthentication:c.a.bool.isRequired,match:c.a.shape({url:c.a.string.isRequired}).isRequired};t.default=Object(r.connect)(function(e){var t=Object(o.getLicense)(e),n=Object(o.getConfig)(e);return{mfa:"true"===t.MFA,enableMultifactorAuthentication:"true"===n.EnableMultifactorAuthentication,enforceMultifactorAuthentication:"true"===n.EnforceMultifactorAuthentication}})(Q)}}]);
//# sourceMappingURL=12.df6774cc6b359c14cd51.js.map