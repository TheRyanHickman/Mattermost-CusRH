(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1505:function(e,t,n){"use strict";n.d(t,"a",function(){return g});n(88),n(43);var a=n(30),r=n.n(a),o=n(7),i=n.n(o),s=n(56),l=n(1482);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,m(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i.a.PureComponent),n=t,(a=[{key:"render",value:function(){return i.a.createElement("div",{id:"back_button",className:"signup-header"},i.a.createElement(l.a,{onClick:this.props.onClick,to:this.props.url},i.a.createElement(s.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},function(e){return i.a.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e})}),i.a.createElement(s.c,{id:"web.header.back",defaultMessage:"Back"})))}}])&&u(n.prototype,a),r&&u(n,r),t}();f(g,"propTypes",{url:r.a.string,onClick:r.a.func}),f(g,"defaultProps",{url:"/"})},1510:function(e,t,n){e.exports=n.p+"files/786f906c373b98400b1e6f6c3341ce7d.png"},1569:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n(88),n(43);var a=n(30),r=n.n(a),o=n(7),i=n.n(o),s=n(56);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.a.PureComponent),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.customDescriptionText,n=e.siteName,a=null;return a=t||i.a.createElement(s.c,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{id:"site_name"},n),i.a.createElement("h4",{id:"site_description",className:"color--light"},a))}}])&&c(n.prototype,a),r&&c(n,r),t}();d(f,"propTypes",{customDescriptionText:r.a.string,siteName:r.a.string}),d(f,"defaultProps",{siteName:"Mattermost"})},1612:function(e,t,n){"use strict";n.d(t,"a",function(){return E});n(88),n(43),n(120);var a=n(30),r=n.n(a),o=n(7),i=n.n(o),s=n(56),l=n(23),c=n(57),u=n(1521),p=n(1499);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=f(t).call(this,e),n=!r||"object"!==m(r)&&"function"!=typeof r?g(a):r,h(g(n),"handleChange",function(e){e.preventDefault();var t=e.target.value.trim().replace(/\s/g,"");t!==n.state.token&&n.setState({token:t})}),h(g(n),"handleSubmit",function(e){e.preventDefault();var t={serverError:"",saving:!0};n.setState(t),n.props.submit(n.props.loginId,n.props.password,n.state.token)}),n.state={saving:!1,token:"",serverError:""},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i.a.PureComponent),n=t,(a=[{key:"render",value:function(){var e,t="";return this.state.serverError&&(e=i.a.createElement("label",{className:"control-label"},this.state.serverError),t=" has-error"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",{className:"signup__email-container"},i.a.createElement("p",null,i.a.createElement(s.c,{id:"login_mfa.enterToken",defaultMessage:"To complete the sign in process, please enter a token from your smartphone's authenticator"})),i.a.createElement("div",{className:"form-group"+t},e),i.a.createElement("div",{className:"form-group"+t},i.a.createElement(p.a,{type:"text",className:"form-control",name:"token",placeholder:{id:Object(c.b)("login_mfa.token"),defaultMessage:"MFA Token"},spellCheck:"false",autoComplete:"off",autoFocus:!0,onChange:this.handleChange})),i.a.createElement("div",{className:"form-group"},i.a.createElement(u.a,{saving:this.state.saving,disabled:this.state.saving,onClick:this.handleSubmit,defaultMessage:Object(l.ab)("login_mfa.submit","Submit"),savingMessage:Object(l.ab)("login_mfa.submitting","Submitting...")}))))}}])&&d(n.prototype,a),r&&d(n,r),t}();h(E,"propTypes",{loginId:r.a.string.isRequired,password:r.a.string.isRequired,submit:r.a.func.isRequired})},1728:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});n(117),n(116),n(25);var a=n(40);function r(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function o(e,t,n){return function(r){return s(r(a.login(e,t,n)))}}function i(e,t,n){return function(r){return s(r(a.loginById(e,t,n)))}}function s(e){return l.apply(this,arguments)}function l(){var e;return e=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return(n=e.sent).error&&"api.context.mfa_required.app_error"===n.error.server_error_id&&(n={data:!0}),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}),(l=function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function s(e){r(i,a,o,s,l,"next",e)}function l(e){r(i,a,o,s,l,"throw",e)}s(void 0)})}).apply(this,arguments)}},2377:function(e,t,n){"use strict";n.r(t);var a=n(418),r=n(20),o=n(24),i=n(31),s=n(12),l=n(14),c=n(1565),u=n(1728),p=(n(88),n(43),n(116),n(25),n(74),n(247),n(117),n(304),n(120),n(30)),m=n.n(p),d=n(7),f=n.n(d),g=n(56),b=n(1482),h=n(36),E=n(1493),v=n(216),y=n(119),S=n(0),_=n(1655),w=n(87),N=n(23),O=n(829),x=n(57),I=n(1510),P=n.n(I),U=n(1569),k=n(1558),L=n(1501),j=n(1491),C=n(1505),T=n(1494),R=n(1526),M=n(1579),W=n(1542),D=n(1499),q=n(1612);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function G(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=function(e){function t(e){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=F(t).call(this,e),n=!r||"object"!==A(r)&&"function"!=typeof r?Q(a):r,H(Q(n),"configureTitle",function(){n.state.sessionExpired?document.title=n.props.intl.formatMessage({id:"login.session_expired.title",defaultMessage:"* {siteName} - Session Expired"},{siteName:n.props.siteName}):document.title=n.props.siteName}),H(Q(n),"showSessionExpiredNotificationIfNeeded",function(){n.state.sessionExpired&&!n.closeSessionExpiredNotification?Object(O.a)({title:n.props.siteName,body:N.ab("login.session_expired.notification","Session Expired: Please sign in to continue receiving notifications."),requireInteraction:!0,silent:!1,onClick:function(){window.focus(),n.closeSessionExpiredNotification()&&(n.closeSessionExpiredNotification(),n.closeSessionExpiredNotification=null)}}).then(function(e){n.closeSessionExpiredNotification=e}).catch(function(){}):!n.state.sessionExpired&&n.closeSessionExpiredNotification&&(n.closeSessionExpiredNotification(),n.closeSessionExpiredNotification=null)}),H(Q(n),"preSubmit",function(e){e.preventDefault(),n.onDismissSessionExpired();var t=n.props.location,a=t.search.replace(/(extra=password_change)&?/i,"");a!==t.search&&y.a.replace("".concat(t.pathname).concat(a).concat(t.hash));var r=n.state.loginId;n.refs.loginId&&(r=n.refs.loginId.value)!==n.state.loginId&&n.setState({loginId:r});var o=n.state.password;if(n.refs.password&&(o=n.refs.password.value)!==n.state.password&&n.setState({password:o}),!(r=r.trim().toLowerCase())){Object(x.b)("login.noEmail"),Object(x.b)("login.noEmailLdapUsername"),Object(x.b)("login.noEmailUsername"),Object(x.b)("login.noEmailUsernameLdapUsername"),Object(x.b)("login.noLdapUsername"),Object(x.b)("login.noUsername"),Object(x.b)("login.noUsernameLdapUsername");var i="login.no";return n.state.emailSigninEnabled&&(i+="Email"),n.state.usernameSigninEnabled&&(i+="Username"),n.state.ldapEnabled&&(i+="LdapUsername"),void n.setState({serverError:f.a.createElement(g.c,{id:i,values:{ldapUsername:n.props.ldapLoginFieldName||N.ab("login.ldapUsernameLower","AD/LDAP username")}})})}o?n.submit(r,o,""):n.setState({serverError:f.a.createElement(g.c,{id:"login.noPassword",defaultMessage:"Please enter your password"})})}),H(Q(n),"submit",function(e,t,a){n.setState({serverError:null,loading:!0}),n.props.actions.login(e,t,a).then(function(){var t,a=(t=regeneratorRuntime.mark(function t(a){var r,o,i,s,l,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=a.error)){t.next=4;break}return"api.user.login.not_verified.app_error"===r.server_error_id?y.a.push("/should_verify_email?&email="+encodeURIComponent(e)):"store.sql_user.get_for_login.app_error"===r.server_error_id||"ent.ldap.do_login.user_not_registered.app_error"===r.server_error_id?n.setState({showMfa:!1,loading:!1,serverError:f.a.createElement(g.c,{id:"login.userNotFound",defaultMessage:"We couldn't find an account matching your login credentials."})}):"api.user.check_user_password.invalid.app_error"===r.server_error_id||"ent.ldap.do_login.invalid_password.app_error"===r.server_error_id?n.setState({showMfa:!1,loading:!1,serverError:f.a.createElement(g.c,{id:"login.invalidPassword",defaultMessage:"Your password is incorrect."})}):n.state.showMfa||"mfa.validate_token.authenticate.app_error"!==r.server_error_id?n.setState({showMfa:!1,serverError:r.message,loading:!1}):n.setState({showMfa:!0}),t.abrupt("return");case 4:if(o=new URLSearchParams(n.props.location.search),i=o.get("t")||"",!(s=o.get("id")||"")&&!i){t.next=15;break}return t.next=10,n.props.actions.addUserToTeamFromInvite(i,s);case 10:l=t.sent,(c=l.data)?n.finishSignin(c):n.finishSignin(),t.next=16;break;case 15:n.finishSignin();case 16:case"end":return t.stop()}},t)}),function(){var e=this,n=arguments;return new Promise(function(a,r){var o=t.apply(e,n);function i(e){B(o,a,r,i,s,"next",e)}function s(e){B(o,a,r,i,s,"throw",e)}i(void 0)})});return function(e){return a.apply(this,arguments)}}())}),H(Q(n),"finishSignin",function(e){var t=n.props.experimentalPrimaryTeam,a=new URLSearchParams(n.props.location.search).get("redirect_to");N.hb(),v.a.setWasLoggedIn(!0),a&&a.match(/^\/([^\/]|$)/)?y.a.push(a):e?y.a.push("/".concat(e.name)):t?y.a.push("/".concat(t)):E.f()}),H(Q(n),"handleLoginIdChange",function(e){n.setState({loginId:e.target.value})}),H(Q(n),"handlePasswordChange",function(e){n.setState({password:e.target.value})}),H(Q(n),"handleBrandImageError",function(){n.setState({brandImageError:!0})}),H(Q(n),"createCustomLogin",function(){if(n.props.enableCustomBrand){var e=n.props.customBrandText||"",t=w.e(e),a=h.Client4.getBrandImageUrl(0),r=n.state.brandImageError?{display:"none"}:{};return f.a.createElement("div",null,f.a.createElement("img",{alt:"brand image",src:a,onError:n.handleBrandImageError,style:r}),f.a.createElement("div",null,Object(_.a)(t,!1,{mentions:!1,imagesMetadata:null})))}return null}),H(Q(n),"createLoginPlaceholder",function(){var e=n.state.ldapEnabled,t=n.state.usernameSigninEnabled,a=[];return n.state.emailSigninEnabled&&a.push(N.ab("login.email","Email")),t&&a.push(N.ab("login.username","Username")),e&&(n.props.ldapLoginFieldName?a.push(n.props.ldapLoginFieldName):a.push(N.ab("login.ldapUsername","AD/LDAP Username"))),a.length>=2?a.slice(0,a.length-1).join(", ")+N.ab("login.placeholderOr"," or ")+a[a.length-1]:1===a.length?a[0]:""}),H(Q(n),"checkSignUpEnabled",function(){return n.props.enableSignUpWithEmail||n.props.enableSignUpWithGitLab||n.props.enableSignUpWithOffice365||n.props.enableSignUpWithGoogle||n.props.enableLdap||n.props.enableSaml}),H(Q(n),"onDismissSessionExpired",function(){v.a.setWasLoggedIn(!1),n.setState({sessionExpired:!1})}),H(Q(n),"createExtraText",function(){var e=new URLSearchParams(n.props.location.search).get("extra");return n.state.sessionExpired?f.a.createElement("div",{className:"alert alert-warning"},f.a.createElement(W.a,null)," ",f.a.createElement(g.c,{id:"login.session_expired",defaultMessage:"Your session has expired. Please log in again."})," ",f.a.createElement(b.a,{className:"btn-close",to:"/login",onClick:n.onDismissSessionExpired},f.a.createElement("span",null,"×"))):e===S.Q.GET_TERMS_ERROR?f.a.createElement("div",{className:"alert has-error no-padding"},f.a.createElement("label",{className:"control-label"},f.a.createElement(g.c,{id:"login.get_terms_error",defaultMessage:"Unable to load terms of service. If this issue persists, contact your System Administrator."}))):e===S.Q.TERMS_REJECTED?f.a.createElement("div",{className:"alert alert-warning"},f.a.createElement(W.a,null),f.a.createElement(j.b,{id:"login.terms_rejected",defaultMessage:"You must agree to the terms of service before accessing {siteName}. Please contact your System Administrator for more details.",values:{siteName:n.props.siteName}})):e===S.Q.SIGNIN_CHANGE?f.a.createElement("div",{className:"alert alert-success"},f.a.createElement(M.a,null),f.a.createElement(g.c,{id:"login.changed",defaultMessage:" Sign-in method changed successfully"})):e===S.Q.SIGNIN_VERIFIED?f.a.createElement("div",{className:"alert alert-success"},f.a.createElement(M.a,null),f.a.createElement(g.c,{id:"login.verified",defaultMessage:" Email Verified"})):e===S.Q.PASSWORD_CHANGE?f.a.createElement("div",{id:"passwordUpdatedSuccess",className:"alert alert-success"},f.a.createElement(M.a,null),f.a.createElement(g.c,{id:"login.passwordChanged",defaultMessage:" Password updated successfully"})):e===S.Q.CREATE_LDAP?f.a.createElement("div",{className:"alert alert-grey"},f.a.createElement(g.c,{id:"login.ldapCreate",defaultMessage:" Enter your AD/LDAP username and password to create an account."})):null}),H(Q(n),"createLoginOptions",function(){var e=[],t=n.state.ldapEnabled,a=n.props.enableSignUpWithGitLab,r=n.props.enableSignUpWithGoogle,o=n.props.enableSignUpWithOffice365,i=n.state.samlEnabled,s=n.state.usernameSigninEnabled,l=n.state.emailSigninEnabled;if(l||s||t){var c="";n.state.serverError&&(c=" has-error"),e.push(f.a.createElement("form",{key:"loginBoxes",onSubmit:n.preSubmit},f.a.createElement("div",{className:"signup__email-container"},f.a.createElement(L.a,{error:n.state.serverError,margin:!0}),f.a.createElement("div",{className:"form-group"+c},f.a.createElement("input",{id:"loginId",className:"form-control",ref:"loginId",name:"loginId",value:n.state.loginId,onChange:n.handleLoginIdChange,placeholder:n.createLoginPlaceholder(),spellCheck:"false",autoCapitalize:"off",autoFocus:!0})),f.a.createElement("div",{className:"form-group"+c},f.a.createElement(D.a,{id:"loginPassword",type:"password",className:"form-control",ref:"password",name:"password",value:n.state.password,onChange:n.handlePasswordChange,placeholder:{id:Object(x.b)("login.password"),defaultMessage:"Password"},spellCheck:"false"})),f.a.createElement("div",{className:"form-group"},f.a.createElement("button",{id:"loginButton",type:"submit",className:"btn btn-primary"},f.a.createElement(R.a,{id:"login_button_signing",loading:n.state.loading,text:N.ab("login.signInLoading","Signing in...")},f.a.createElement(g.c,{id:"login.signIn",defaultMessage:"Sign in"})))))))}return n.props.enableOpenServer&&n.checkSignUpEnabled()&&e.push(f.a.createElement("div",{className:"form-group",key:"signup"},f.a.createElement("span",null,f.a.createElement(g.c,{id:"login.noAccount",defaultMessage:"Don't have an account? "}),f.a.createElement(b.a,{id:"signup",to:"/signup_user_complete"+n.props.location.search,className:"signup-team-login"},f.a.createElement(g.c,{id:"login.create",defaultMessage:"Create one now"}))))),(s||l)&&e.push(f.a.createElement("div",{id:"login_forgot",key:"forgotPassword",className:"form-group"},f.a.createElement(b.a,{to:"/reset_password"},f.a.createElement(g.c,{id:"login.forgot",defaultMessage:"I forgot my password"})))),(l||s||t)&&(a||r||i||o)&&(e.push(f.a.createElement("div",{key:"divider",className:"or__container"},f.a.createElement(g.c,{id:"login.or",defaultMessage:"or"}))),e.push(f.a.createElement("h5",{key:"oauthHeader"},f.a.createElement(g.c,{id:"login.signInWith",defaultMessage:"Sign in with:"})))),a&&e.push(f.a.createElement("a",{className:"btn btn-custom-login gitlab",key:"gitlab",href:h.Client4.getOAuthRoute()+"/gitlab/login"+n.props.location.search},f.a.createElement("span",null,f.a.createElement("span",{className:"icon"}),f.a.createElement("span",null,f.a.createElement(g.c,{id:"login.gitlab",defaultMessage:"GitLab"}))))),r&&e.push(f.a.createElement("a",{className:"btn btn-custom-login google",key:"google",href:h.Client4.getOAuthRoute()+"/google/login"+n.props.location.search},f.a.createElement("span",null,f.a.createElement("span",{className:"icon"}),f.a.createElement("span",null,f.a.createElement(g.c,{id:"login.google",defaultMessage:"Google Apps"}))))),o&&e.push(f.a.createElement("a",{className:"btn btn-custom-login office365",key:"office365",href:h.Client4.getOAuthRoute()+"/office365/login"+n.props.location.search},f.a.createElement("span",null,f.a.createElement("span",{className:"icon"}),f.a.createElement("span",null,f.a.createElement(g.c,{id:"login.office365",defaultMessage:"Office 365"}))))),i&&e.push(f.a.createElement("a",{className:"btn btn-custom-login saml",key:"saml",href:h.Client4.getUrl()+"/login/sso/saml"+n.props.location.search},f.a.createElement("span",null,f.a.createElement("span",{className:"icon fa fa-lock fa--margin-top",title:"Saml icon"}),f.a.createElement("span",null,n.props.samlLoginButtonText)))),0===e.length&&e.push(f.a.createElement(L.a,{key:"noMethods",error:f.a.createElement(g.c,{id:"login.noMethods",defaultMessage:"No sign-in methods are enabled. Please contact your System Administrator."}),margin:!0})),f.a.createElement("div",null,n.createExtraText(),e)}),H(Q(n),"hideMfa",function(){n.setState({showMfa:!1})});var o="";return new URLSearchParams(n.props.location.search).get("extra")===S.Q.SIGNIN_VERIFIED&&new URLSearchParams(n.props.location.search).get("email")&&(o=new URLSearchParams(n.props.location.search).get("email")),n.state={ldapEnabled:n.props.isLicensed&&n.props.enableLdap,usernameSigninEnabled:n.props.enableSignInWithUsername,emailSigninEnabled:n.props.enableSignInWithEmail,samlEnabled:n.props.isLicensed&&n.props.enableSaml,loginId:o,password:"",showMfa:!1,loading:!1,sessionExpired:!1,brandImageError:!1},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,f.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){if(this.configureTitle(),this.props.currentUser)E.f();else{var e=new URLSearchParams(this.props.location.search),t=e.get("extra"),n=e.get("email");t===S.Q.SIGNIN_VERIFIED&&n&&this.refs.password.focus(),v.a.getWasLoggedIn()&&(t===S.Q.SIGNIN_CHANGE?v.a.setWasLoggedIn(!1):(this.setState({sessionExpired:!0}),e.set("extra",S.Q.SESSION_EXPIRED),y.a.replace("".concat(this.props.location.pathname,"?").concat(e)))),this.showSessionExpiredNotificationIfNeeded()}}},{key:"componentDidUpdate",value:function(){this.configureTitle(),this.showSessionExpiredNotificationIfNeeded()}},{key:"componentWillUnmount",value:function(){this.closeSessionExpiredNotification&&(this.closeSessionExpiredNotification(),this.closeSessionExpiredNotification=null)}},{key:"render",value:function(){var e,t,n,a,r=this.props,o=r.customDescriptionText,i=r.siteName;return r.initializing?f.a.createElement(T.a,null):(this.state.showMfa?(e=f.a.createElement(q.a,{loginId:this.state.loginId,password:this.state.password,submit:this.submit}),a=f.a.createElement(C.a,{onClick:this.hideMfa})):(e=this.createLoginOptions(),(t=this.createCustomLogin())&&(n="branded")),f.a.createElement("div",null,f.a.createElement(k.a,null),a,f.a.createElement("div",{id:"login_section",className:"col-sm-12"},f.a.createElement("div",{className:"signup-team__container "+n},f.a.createElement("div",{className:"signup__markdown"},t),f.a.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:P.a}),f.a.createElement("div",{className:"signup__content"},f.a.createElement(U.a,{customDescriptionText:o,siteName:i}),e)))))}}])&&G(n.prototype,a),r&&G(n,r),t}();H(V,"propTypes",{intl:g.i.isRequired,location:m.a.object.isRequired,isLicensed:m.a.bool.isRequired,currentUser:m.a.object,customBrandText:m.a.string,customDescriptionText:m.a.string,enableCustomBrand:m.a.bool.isRequired,enableLdap:m.a.bool.isRequired,enableOpenServer:m.a.bool.isRequired,enableSaml:m.a.bool.isRequired,enableSignInWithEmail:m.a.bool.isRequired,enableSignInWithUsername:m.a.bool.isRequired,enableSignUpWithEmail:m.a.bool.isRequired,enableSignUpWithGitLab:m.a.bool.isRequired,enableSignUpWithGoogle:m.a.bool.isRequired,enableSignUpWithOffice365:m.a.bool.isRequired,experimentalPrimaryTeam:m.a.string,ldapLoginFieldName:m.a.string,samlLoginButtonText:m.a.string,siteName:m.a.string,initializing:m.a.bool,actions:m.a.shape({login:m.a.func.isRequired,addUserToTeamFromInvite:m.a.func.isRequired}).isRequired});var J=Object(g.h)(V);t.default=Object(a.connect)(function(e){var t=Object(o.getConfig)(e),n="true"===Object(o.getLicense)(e).IsLicensed,a=t.CustomBrandText,r=t.CustomDescriptionText,c="true"===t.EnableCustomBrand,u="true"===t.EnableLdap,p="true"===t.EnableOpenServer,m="true"===t.EnableSaml,d="true"===t.EnableSignInWithEmail,f="true"===t.EnableSignInWithUsername,g="true"===t.EnableSignUpWithEmail,b="true"===t.EnableSignUpWithGitLab,h="true"===t.EnableSignUpWithGoogle,E="true"===t.EnableSignUpWithOffice365,v=t.LdapLoginFieldName,y=t.SamlLoginButtonText,S=t.SiteName,_=e.requests.users.logout.status===l.RequestStatus.SUCCESS||!e.storage.initialized,w=t.ExperimentalPrimaryTeam;if(w){var N=Object(i.getTeamByName)(e,w);if(N){var O=Object(i.getMyTeamMember)(e,N.id);O&&O.team_id||(w=null)}else w=null}return{currentUser:Object(s.getCurrentUser)(e),isLicensed:n,customBrandText:a,customDescriptionText:r,enableCustomBrand:c,enableLdap:u,enableOpenServer:p,enableSaml:m,enableSignInWithEmail:d,enableSignInWithUsername:f,enableSignUpWithEmail:g,enableSignUpWithGitLab:b,enableSignUpWithGoogle:h,enableSignUpWithOffice365:E,experimentalPrimaryTeam:w,ldapLoginFieldName:v,samlLoginButtonText:y,siteName:S,initializing:_}},function(e){return{actions:Object(r.bindActionCreators)({login:u.a,addUserToTeamFromInvite:c.b},e)}})(J)}}]);
//# sourceMappingURL=10.f1fec3bb8116d79766bf.js.map