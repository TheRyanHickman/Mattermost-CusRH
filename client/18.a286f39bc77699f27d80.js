(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1505:function(e,t,n){"use strict";n.d(t,"a",function(){return g});n(88),n(43);var a=n(30),r=n.n(a),o=n(7),i=n.n(o),s=n(56),l=n(1482);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,f(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.a.PureComponent),n=t,(a=[{key:"render",value:function(){return i.a.createElement("div",{id:"back_button",className:"signup-header"},i.a.createElement(l.a,{onClick:this.props.onClick,to:this.props.url},i.a.createElement(s.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},function(e){return i.a.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e})}),i.a.createElement(s.c,{id:"web.header.back",defaultMessage:"Back"})))}}])&&u(n.prototype,a),r&&u(n,r),t}();d(g,"propTypes",{url:r.a.string,onClick:r.a.func}),d(g,"defaultProps",{url:"/"})},1510:function(e,t,n){e.exports=n.p+"files/786f906c373b98400b1e6f6c3341ce7d.png"},2372:function(e,t,n){"use strict";n.r(t);n(304);var a=n(418),r=n(20),o=n(24),i=n(12),s=n(308),l=n(206),c=n(147),u=n(1565),p=(n(88),n(43),n(116),n(156),n(25),n(74),n(117),n(30)),f=n.n(p),m=n(7),d=n.n(m),g=n(56),b=n(1482),h=n(36),v=n(119),E=n(1493),y=n(1510),w=n.n(y),S=n(1558),_=n(1505),O=n(1501),L=n(1494),I=n(0);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,n,a,r,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function P(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){k(o,a,r,i,s,"next",e)}function s(e){k(o,a,r,i,s,"throw",e)}i(void 0)})}}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){function t(e){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=T(t).call(this,e),n=!r||"object"!==N(r)&&"function"!=typeof r?U(a):r,j(U(n),"addUserToTeamFromInvite",function(){var e=P(regeneratorRuntime.mark(function e(t,a){var r,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.addUserToTeamFromInvite(t,a);case 2:r=e.sent,o=r.data,i=r.error,o?v.a.push("/"+o.name+"/channels/".concat(I.i.DEFAULT_CHANNEL)):i&&n.handleInvalidInvite(i);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),j(U(n),"getInviteInfo",function(){var e=P(regeneratorRuntime.mark(function e(t){var a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.actions.getTeamInviteInfo(t);case 2:a=e.sent,r=a.data,o=a.error,r?n.setState({serverError:"",loading:!1}):o&&n.handleInvalidInvite(o);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),j(U(n),"handleInvalidInvite",function(e){var t;t="store.sql_user.save.max_accounts.app_error"===e.server_error_id?e.message:d.a.createElement(g.c,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."}),n.setState({noOpenServerError:!0,loading:!1,serverError:t})}),n.renderSignupControls=n.renderSignupControls.bind(U(n));var o=!1,i="",s=!1,l=!1;if(n.props.location.search){var c=new URLSearchParams(n.props.location.search),u=c.get("t");null==u&&(u="");var p=c.get("id");null==p&&(p=""),p?o=!0:n.props.loggedIn?p||n.props.enableOpenServer||n.props.noAccounts||(s=!0,i=d.a.createElement(g.c,{id:"signup_user_completed.no_open_server",defaultMessage:"This server does not allow open signups.  Please speak with your Administrator to receive an invitation."})):l=e.usedBefore}return n.state={loading:o,serverError:i,noOpenServerError:s,usedBefore:l},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,d.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){if(this.props.actions.removeGlobalItem("team"),this.props.location.search){var e=new URLSearchParams(this.props.location.search),t=e.get("t")||"",n=e.get("id")||"",a=this.props.loggedIn;(n||t)&&a?this.addUserToTeamFromInvite(t,n):n?this.getInviteInfo(n):a&&E.f()}}},{key:"renderSignupControls",value:function(){var e=this.context.intl.formatMessage,t=[];if(this.props.enableSignUpWithEmail&&t.push(d.a.createElement(b.a,{className:"btn btn-custom-login btn--full email",key:"email",to:"/signup_email"+window.location.search},d.a.createElement("span",null,d.a.createElement("span",{className:"icon fa fa-envelope",title:e({id:"signup.email.icon",defaultMessage:"Email Icon"})}),d.a.createElement(g.c,{id:"signup.email",defaultMessage:"Email and Password"})))),this.props.enableSignUpWithGitLab&&t.push(d.a.createElement("a",{className:"btn btn-custom-login btn--full gitlab",key:"gitlab",href:h.Client4.getOAuthRoute()+"/gitlab/signup"+window.location.search},d.a.createElement("span",null,d.a.createElement("span",{className:"icon"}),d.a.createElement("span",null,d.a.createElement(g.c,{id:"signup.gitlab",defaultMessage:"GitLab Single Sign-On"}))))),this.props.isLicensed&&this.props.enableSignUpWithGoogle&&t.push(d.a.createElement("a",{className:"btn btn-custom-login btn--full google",key:"google",href:h.Client4.getOAuthRoute()+"/google/signup"+window.location.search},d.a.createElement("span",null,d.a.createElement("span",{className:"icon"}),d.a.createElement("span",null,d.a.createElement(g.c,{id:"signup.google",defaultMessage:"Google Account"}))))),this.props.isLicensed&&this.props.enableSignUpWithOffice365&&t.push(d.a.createElement("a",{className:"btn btn-custom-login btn--full office365",key:"office365",href:h.Client4.getOAuthRoute()+"/office365/signup"+window.location.search},d.a.createElement("span",null,d.a.createElement("span",{className:"icon"}),d.a.createElement("span",null,d.a.createElement(g.c,{id:"signup.office365",defaultMessage:"Office 365"}))))),this.props.isLicensed&&this.props.enableLDAP){var n=new URLSearchParams(this.props.location.search);n.append("extra","create_ldap");var a="?"+n.toString(),r=d.a.createElement(g.c,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"});this.props.ldapLoginFieldName&&(r=this.props.ldapLoginFieldName),t.push(d.a.createElement(b.a,{className:"btn btn-custom-login btn--full ldap",key:"ldap",to:"/login"+a},d.a.createElement("span",null,d.a.createElement("span",{className:"icon fa fa-folder-open fa--margin-top",title:e({id:"signup.ldap.icon",defaultMessage:"AD/LDAP Icon"})}),d.a.createElement("span",null,r))))}if(this.props.isLicensed&&this.props.enableSAML){var o="";o=window.location.search?"&action=signup":"?action=signup",t.push(d.a.createElement(b.a,{className:"btn btn-custom-login btn--full saml",key:"saml",to:"/login/sso/saml"+window.location.search+o},d.a.createElement("span",null,d.a.createElement("span",{className:"icon fa fa-lock fa--margin-top",title:e({id:"signup.saml.icon",defaultMessage:"SAML Icon"})}),d.a.createElement("span",null,this.props.samlLoginButtonText))))}if(0===t.length){var i=d.a.createElement(g.c,{id:"signup_user_completed.none",defaultMessage:"No user creation method has been enabled. Please contact an administrator for access."});t=d.a.createElement(O.a,{error:i,margin:!0})}else if(1===t.length){if(this.props.enableSignUpWithEmail)return v.a.push("/signup_email"+window.location.search);if(this.props.isLicensed&&this.props.enableLDAP)return v.a.push("/login"+window.location.search)}return t}},{key:"render",value:function(){if(this.state.loading)return d.a.createElement(L.a,null);if(this.state.usedBefore)return d.a.createElement("div",null,d.a.createElement(g.c,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));var e,t=null;return this.state.serverError&&(t=d.a.createElement("div",{className:"form-group has-error"},d.a.createElement("label",{className:"control-label"},this.state.serverError))),e=this.state.noOpenServerError||this.state.usedBefore?null:this.renderSignupControls(),d.a.createElement("div",null,d.a.createElement(S.a,null),d.a.createElement(_.a,null),d.a.createElement("div",{className:"col-sm-12"},d.a.createElement("div",{className:"signup-team__container"},d.a.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:w.a}),d.a.createElement("div",{className:"signup__content"},d.a.createElement("h1",null,this.props.siteName),d.a.createElement("h4",{className:"color--light"},d.a.createElement(g.c,{id:"web.root.signup_info"})),d.a.createElement("div",{className:"margin--extra"},d.a.createElement("h5",null,d.a.createElement("strong",null,d.a.createElement(g.c,{id:"signup.title",defaultMessage:"Create an account with:"})))),e,t),d.a.createElement("span",{className:"color--light"},d.a.createElement(g.c,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",d.a.createElement(b.a,{to:"/login"+this.props.location.search},d.a.createElement(g.c,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))))))}}])&&R(n.prototype,a),r&&R(n,r),t}();j(M,"propTypes",{location:f.a.object,loggedIn:f.a.bool.isRequired,isLicensed:f.a.bool.isRequired,enableOpenServer:f.a.bool.isRequired,noAccounts:f.a.bool.isRequired,enableSignUpWithEmail:f.a.bool.isRequired,enableSignUpWithGitLab:f.a.bool.isRequired,enableSignUpWithGoogle:f.a.bool.isRequired,enableSignUpWithOffice365:f.a.bool.isRequired,enableLDAP:f.a.bool.isRequired,enableSAML:f.a.bool.isRequired,samlLoginButtonText:f.a.string,siteName:f.a.string,usedBefore:f.a.string,ldapLoginFieldName:f.a.string.isRequired,actions:f.a.shape({removeGlobalItem:f.a.func.isRequired,getTeamInviteInfo:f.a.func.isRequired,addUserToTeamFromInvite:f.a.func.isRequired}).isRequired}),j(M,"contextTypes",{intl:g.i.isRequired});t.default=Object(a.connect)(function(e,t){var n,a=Object(o.getLicense)(e),r=Object(o.getConfig)(e),s=a&&"true"===a.IsLicensed,c="true"===r.EnableOpenServer,u="true"===r.NoAccounts,p="true"===r.EnableSignUpWithEmail,f="true"===r.EnableSignUpWithGitLab,m="true"===r.EnableSignUpWithGoogle,d="true"===r.EnableSignUpWithOffice365,g="true"===r.EnableLdap,b="true"===r.EnableSaml,h=r.SamlLoginButtonText,v=r.LdapLoginFieldName,E=r.SiteName;if(t.location.search){var y=new URLSearchParams(t.location.search).get("t");null==y&&(y=""),n=Object(l.a)(e,y,null)}return{loggedIn:Boolean(Object(i.getCurrentUserId)(e)),isLicensed:s,enableOpenServer:c,noAccounts:u,enableSignUpWithEmail:p,enableSignUpWithGitLab:f,enableSignUpWithGoogle:m,enableSignUpWithOffice365:d,enableLDAP:g,enableSAML:b,samlLoginButtonText:h,ldapLoginFieldName:v,siteName:E,usedBefore:n}},function(e){return{actions:Object(r.bindActionCreators)({removeGlobalItem:c.c,getTeamInviteInfo:s.getTeamInviteInfo,addUserToTeamFromInvite:u.b},e)}})(M)}}]);
//# sourceMappingURL=18.a286f39bc77699f27d80.js.map