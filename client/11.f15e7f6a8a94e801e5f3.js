(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1505:function(e,t,r){"use strict";r.d(t,"a",function(){return g});r(88),r(43);var n=r(30),a=r.n(n),o=r(7),i=r.n(o),s=r(56),c=r(1482);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,p(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i.a.PureComponent),r=t,(n=[{key:"render",value:function(){return i.a.createElement("div",{id:"back_button",className:"signup-header"},i.a.createElement(c.a,{onClick:this.props.onClick,to:this.props.url},i.a.createElement(s.c,{id:"generic_icons.back",defaultMessage:"Back Icon"},function(e){return i.a.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e})}),i.a.createElement(s.c,{id:"web.header.back",defaultMessage:"Back"})))}}])&&u(r.prototype,n),a&&u(r,a),t}();d(g,"propTypes",{url:a.a.string,onClick:a.a.func}),d(g,"defaultProps",{url:"/"})},1510:function(e,t,r){e.exports=r.p+"files/786f906c373b98400b1e6f6c3341ce7d.png"},1569:function(e,t,r){"use strict";r.d(t,"a",function(){return d});r(88),r(43);var n=r(30),a=r.n(n),o=r(7),i=r.n(o),s=r(56);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,m(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,i.a.PureComponent),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.customDescriptionText,r=e.siteName,n=null;return n=t||i.a.createElement(s.c,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{id:"site_name"},r),i.a.createElement("h4",{id:"site_description",className:"color--light"},n))}}])&&l(r.prototype,n),a&&l(r,a),t}();f(d,"propTypes",{customDescriptionText:a.a.string,siteName:a.a.string}),f(d,"defaultProps",{siteName:"Mattermost"})},1728:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});r(117),r(116),r(25);var n=r(40);function a(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function o(e,t,r){return function(a){return s(a(n.login(e,t,r)))}}function i(e,t,r){return function(a){return s(a(n.loginById(e,t,r)))}}function s(e){return c.apply(this,arguments)}function c(){var e;return e=regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return(r=e.sent).error&&"api.context.mfa_required.app_error"===r.error.server_error_id&&(r={data:!0}),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}),(c=function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function s(e){a(i,n,o,s,c,"next",e)}function c(e){a(i,n,o,s,c,"throw",e)}s(void 0)})}).apply(this,arguments)}},2371:function(e,t,r){"use strict";r.r(t);var n=r(418),a=r(20),o=r(40),i=r(24),s=r(308),c=r(147),l=r(1728),u=r(23),m=(r(88),r(43),r(116),r(25),r(304),r(117),r(74),r(30)),p=r.n(m),f=r(7),d=r.n(f),g=r(56),v=r(1482),b=r(76),E=r(420),y=r(1493),h=r(119),_=r(0),w=r(1510),S=r.n(w),N=r(1505),O=r(1494),k=r(1569),P=r(1491);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){function t(e){var r,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=x(t).call(this,e),r=!a||"object"!==j(a)&&"function"!=typeof a?I(n):a,M(I(r),"setDocumentTitle",function(e){e&&(document.title=e)}),M(I(r),"getTokenData",function(e,t){var r=JSON.parse(t);return{loading:!1,token:e,email:r.email,teamName:r.name}}),M(I(r),"getInviteInfo",function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.actions.getTeamInviteInfo(t);case 2:n=e.sent,a=n.data,o=n.error,a?r.setState({loading:!1,noOpenServerError:!1,serverError:"",teamName:a.name}):o&&r.setState({loading:!1,noOpenServerError:!0,serverError:d.a.createElement(g.c,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."})});case 6:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){T(o,n,a,i,s,"next",e)}function s(e){T(o,n,a,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()),M(I(r),"handleSignupSuccess",function(e,t){Object(E.d)("signup","signup_user_02_complete"),r.props.actions.loginById(t.id,e.password,"").then(function(t){var n=t.error;if(n)"api.user.login.not_verified.app_error"===n.server_error_id?h.a.push("/should_verify_email?email="+encodeURIComponent(e.email)+"&teamname="+encodeURIComponent(r.state.teamName)):r.setState({serverError:n.message,isSubmitting:!1});else{r.state.token>0&&r.props.actions.setGlobalItem(r.state.token,JSON.stringify({usedBefore:!0}));var a=new URLSearchParams(r.props.location.search).get("redirect_to");a?h.a.push(a):y.f()}})}),M(I(r),"isUserValid",function(){var e=r.refs.email.value.trim();if(!e)return r.setState({nameError:"",emailError:d.a.createElement(g.c,{id:"signup_user_completed.required"}),passwordError:"",serverError:""}),!1;if(!Object(b.isEmail)(e))return r.setState({nameError:"",emailError:d.a.createElement(g.c,{id:"signup_user_completed.validEmail"}),passwordError:"",serverError:""}),!1;var t=r.refs.name.value.trim().toLowerCase();if(!t)return r.setState({nameError:d.a.createElement(g.c,{id:"signup_user_completed.required"}),emailError:"",passwordError:"",serverError:""}),!1;var n=u.Y(t);if("Cannot use a reserved word as a username."===n)return r.setState({nameError:d.a.createElement(g.c,{id:"signup_user_completed.reserved"}),emailError:"",passwordError:"",serverError:""}),!1;if(n)return r.setState({nameError:d.a.createElement(g.c,{id:"signup_user_completed.usernameLength",values:{min:_.Q.MIN_USERNAME_LENGTH,max:_.Q.MAX_USERNAME_LENGTH}}),emailError:"",passwordError:"",serverError:""}),!1;var a=r.refs.password.value,o=u.X(a,r.props.passwordConfig),i=o.valid,s=o.error;return!(!i&&s)||(r.setState({nameError:"",emailError:"",passwordError:s,serverError:""}),!1)}),M(I(r),"handleSubmit",function(e){if(e.preventDefault(),!r.state.isSubmitting&&r.isUserValid()){r.setState({nameError:"",emailError:"",passwordError:"",serverError:"",isSubmitting:!0});var t={email:r.refs.email.value.trim(),username:r.refs.name.value.trim().toLowerCase(),password:r.refs.password.value,allow_marketing:!0};r.props.actions.createUser(t,r.state.token,r.state.inviteId).then(function(e){e.error?r.setState({serverError:e.error.message,isSubmitting:!1}):r.handleSignupSuccess(t,e.data)})}}),M(I(r),"renderEmailSignup",function(){var e=null,t=d.a.createElement("span",{id:"valid_email",className:"help-block"},d.a.createElement(g.c,{id:"signup_user_completed.emailHelp",defaultMessage:"Valid email required for sign-up"})),n="form-group";r.state.emailError&&(e=d.a.createElement("label",{className:"control-label"},r.state.emailError),t="",n+=" has-error");var a=null,o=d.a.createElement("span",{id:"valid_name",className:"help-block"},d.a.createElement(g.c,{id:"signup_user_completed.userHelp",defaultMessage:"You can use lowercase letters, numbers, periods, dashes, and underscores."})),i="form-group";r.state.nameError&&(a=d.a.createElement("label",{className:"control-label"},r.state.nameError),o="",i+=" has-error");var s=null,c="form-group";r.state.passwordError&&(s=d.a.createElement("label",{className:"control-label"},r.state.passwordError),c+=" has-error");var l=null;r.state.email&&(l=d.a.createElement(P.b,{id:"signup_user_completed.emailIs",defaultMessage:"Your email address is **{email}**. You'll use this address to sign in to {siteName}.",values:{email:r.state.email,siteName:r.props.siteName}}));var u="margin--extra";return r.state.email&&(u="hidden"),d.a.createElement("form",null,d.a.createElement("div",{className:"inner__content"},d.a.createElement("div",{className:u},d.a.createElement("h5",{id:"email_label"},d.a.createElement("strong",null,d.a.createElement(g.c,{id:"signup_user_completed.whatis",defaultMessage:"What's your email address?"}))),d.a.createElement("div",{className:n},d.a.createElement("input",{id:"email",type:"email",ref:"email",className:"form-control",defaultValue:r.state.email,placeholder:"",maxLength:"128",autoFocus:!0,spellCheck:"false",autoCapitalize:"off"}),e,t)),l,d.a.createElement("div",{className:"margin--extra"},d.a.createElement("h5",{id:"name_label"},d.a.createElement("strong",null,d.a.createElement(g.c,{id:"signup_user_completed.chooseUser",defaultMessage:"Choose your username"}))),d.a.createElement("div",{className:i},d.a.createElement("input",{id:"name",type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:_.Q.MAX_USERNAME_LENGTH,spellCheck:"false",autoCapitalize:"off"}),a,o)),d.a.createElement("div",{className:"margin--extra"},d.a.createElement("h5",{id:"password_label"},d.a.createElement("strong",null,d.a.createElement(g.c,{id:"signup_user_completed.choosePwd",defaultMessage:"Choose your password"}))),d.a.createElement("div",{className:c},d.a.createElement("input",{id:"password",type:"password",ref:"password",className:"form-control",placeholder:"",maxLength:"128",spellCheck:"false"}),s)),d.a.createElement("p",{className:"margin--extra"},d.a.createElement("button",{id:"createAccountButton",type:"submit",onClick:r.handleSubmit,className:"btn-primary btn",disabled:r.state.isSubmitting},d.a.createElement(g.c,{id:"signup_user_completed.create",defaultMessage:"Create Account"})))))});var o=new URLSearchParams(r.props.location.search).get("d"),i=new URLSearchParams(r.props.location.search).get("t"),s=new URLSearchParams(r.props.location.search).get("id");return r.state={},i&&i.length>0?r.state=r.getTokenData(i,o):s&&s.length>0&&(r.state={loading:!0,inviteId:s}),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,d.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){Object(E.d)("signup","signup_user_01_welcome"),this.setDocumentTitle(this.props.siteName);var e=this.state.inviteId;e&&e.length>0&&this.getInviteInfo(e)}},{key:"componentDidUpdate",value:function(){this.setDocumentTitle(this.props.siteName)}},{key:"render",value:function(){var e,t=this.props,r=t.customDescriptionText,n=t.enableSignUpWithEmail,a=t.location,o=t.privacyPolicyLink,i=t.siteName,s=t.termsOfServiceLink,c=null;if(this.state.serverError&&(c=d.a.createElement("div",{id:"existingEmailErrorContainer",className:"form-group has-error"},d.a.createElement("label",{className:"control-label"},this.state.serverError))),this.state.loading)return d.a.createElement(O.a,null);if(!n)return null;e=this.renderEmailSignup();var l=null;return!this.state.noOpenServerError&&e&&(l=d.a.createElement("p",{id:"signup_agreement"},d.a.createElement(P.b,{id:"create_team.agreement",defaultMessage:"By proceeding to create your account and use {siteName}, you agree to our [Terms of Service]({TermsOfServiceLink}) and [Privacy Policy]({PrivacyPolicyLink}). If you do not agree, you cannot use {siteName}.",values:{siteName:i,TermsOfServiceLink:s,PrivacyPolicyLink:o}}))),this.state.noOpenServerError&&(e=null),d.a.createElement("div",null,d.a.createElement(N.a,null),d.a.createElement("div",{id:"signup_email_section",className:"col-sm-12"},d.a.createElement("div",{className:"signup-team__container padding--less"},d.a.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:S.a}),d.a.createElement(k.a,{customDescriptionText:r,siteName:i}),d.a.createElement("h4",{id:"create_account",className:"color--light"},d.a.createElement(g.c,{id:"signup_user_completed.lets",defaultMessage:"Let's create your account"})),d.a.createElement("span",{id:"signin_account",className:"color--light"},d.a.createElement(g.c,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",d.a.createElement(v.a,{id:"signin_account_link",to:"/login"+a.search},d.a.createElement(g.c,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))),e,c,l)))}}])&&C(r.prototype,n),a&&C(r,a),t}();M(R,"propTypes",{location:p.a.object,enableSignUpWithEmail:p.a.bool.isRequired,siteName:p.a.string,termsOfServiceLink:p.a.string,privacyPolicyLink:p.a.string,customDescriptionText:p.a.string,passwordConfig:p.a.object,actions:p.a.shape({createUser:p.a.func.isRequired,loginById:p.a.func.isRequired,setGlobalItem:p.a.func.isRequired,getTeamInviteInfo:p.a.func.isRequired}).isRequired});t.default=Object(n.connect)(function(e){var t=Object(i.getConfig)(e);return{enableSignUpWithEmail:"true"===t.EnableSignUpWithEmail,siteName:t.SiteName,termsOfServiceLink:t.TermsOfServiceLink,privacyPolicyLink:t.PrivacyPolicyLink,customDescriptionText:t.CustomDescriptionText,passwordConfig:Object(u.B)(t)}},function(e){return{actions:Object(a.bindActionCreators)({createUser:o.createUser,loginById:l.b,setGlobalItem:c.e,getTeamInviteInfo:s.getTeamInviteInfo},e)}})(R)}}]);
//# sourceMappingURL=11.f15e7f6a8a94e801e5f3.js.map